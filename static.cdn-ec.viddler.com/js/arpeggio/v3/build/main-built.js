!function(e,t){"function"==typeof define&&define.amd?define([],t):e.ViddlerEmbed=t()}(this,function(){var requirejs,require,define,root,factory;return function(e){var t,n,i,r,a={},o={},s={},l={},u=Object.prototype.hasOwnProperty,d=[].slice,c=/\.js$/;function f(e,t){return u.call(e,t)}function h(e,t){var n,i,r,a,o,l,u,d,f,h,p,m=t&&t.split("../../index.html"),g=s.map,v=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(m=m.slice(0,m.length-1),o=(e=e.split("../../index.html")).length-1,s.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=m.concat(e),f=0;f<e.length;f+=1)if("."===(p=e[f]))e.splice(f,1),f-=1;else if(".."===p){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("../../index.html")}else 0===e.indexOf("index.html")&&(e=e.substring(2));if((m||v)&&g){for(f=(n=e.split("../../index.html")).length;f>0;f-=1){if(i=n.slice(0,f).join("../../index.html"),m)for(h=m.length;h>0;h-=1)if((r=g[m.slice(0,h).join("../../index.html")])&&(r=r[i])){a=r,l=f;break}if(a)break;!u&&v&&v[i]&&(u=v[i],d=f)}!a&&u&&(a=u,l=d),a&&(n.splice(0,l,a),e=n.join("../../index.html"))}return e}function p(t,i){return function(){return n.apply(e,d.call(arguments,0).concat([t,i]))}}function m(e){return function(t){a[e]=t}}function g(n){if(f(o,n)){var i=o[n];delete o[n],l[n]=!0,t.apply(e,i)}if(!f(a,n)&&!f(l,n))throw new Error("No "+n);return a[n]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return s&&s.config&&s.config[e]||{}}}i=function(e,t){var n,i=v(e),r=i[0];return e=i[1],r&&(n=g(r=h(r,t))),r?e=n&&n.normalize?n.normalize(e,function(e){return function(t){return h(t,e)}}(t)):h(e,t):(r=(i=v(e=h(e,t)))[0],e=i[1],r&&(n=g(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},r={require:function(e){return p(e)},exports:function(e){var t=a[e];return void 0!==t?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:y(e)}}},t=function(t,n,s,u){var d,c,h,v,y,_,b=[],E=typeof s;if(u=u||t,"undefined"===E||"function"===E){for(n=!n.length&&s.length?["require","exports","module"]:n,y=0;y<n.length;y+=1)if("require"===(c=(v=i(n[y],u)).f))b[y]=r.require(t);else if("exports"===c)b[y]=r.exports(t),_=!0;else if("module"===c)d=b[y]=r.module(t);else if(f(a,c)||f(o,c)||f(l,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,p(u,!0),m(c),{}),b[y]=a[c]}h=s?s.apply(a[t],b):void 0,t&&(d&&d.exports!==e&&d.exports!==a[t]?a[t]=d.exports:h===e&&_||(a[t]=h))}else t&&(a[t]=s)},requirejs=require=n=function(a,o,l,u,d){if("string"==typeof a)return r[a]?r[a](o):g(i(a,o).f);if(!a.splice){if((s=a).deps&&n(s.deps,s.callback),!o)return;o.splice?(a=o,o=l,l=null):a=e}return o=o||function(){},"function"==typeof l&&(l=u,u=d),u?t(e,a,o,l):setTimeout(function(){t(e,a,o,l)},4),n},n.config=function(e){return n(e)},requirejs._defined=a,(define=function(e,t,n){t.splice||(n=t,t=[]),f(a,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("lib/almond",function(){}),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,a=Function.prototype,o=i.push,s=i.slice,l=i.concat,u=r.toString,d=r.hasOwnProperty,c=i.forEach,f=i.map,h=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,_=i.lastIndexOf,b=Array.isArray,E=Object.keys,T=a.bind,w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):e._=w,w.VERSION="1.5.2";var S=w.each=w.forEach=function(e,t,i){if(null!=e)if(c&&e.forEach===c)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++)if(t.call(i,e[r],r,e)===n)return}else{var o=w.keys(e);for(r=0,a=o.length;r<a;r++)if(t.call(i,e[o[r]],o[r],e)===n)return}};w.map=w.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(S(e,function(e,r,a){i.push(t.call(n,e,r,a))}),i)};var x="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return i&&(t=w.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(S(e,function(e,a,o){r?n=t.call(i,n,e,a,o):(n=e,r=!0)}),!r)throw new TypeError(x);return n},w.reduceRight=w.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return i&&(t=w.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var o=w.keys(e);a=o.length}if(S(e,function(s,l,u){l=o?o[--a]:--a,r?n=t.call(i,n,e[l],l,u):(n=e[l],r=!0)}),!r)throw new TypeError(x);return n},w.find=w.detect=function(e,t,n){var i;return I(e,function(e,r,a){if(t.call(n,e,r,a))return i=e,!0}),i},w.filter=w.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(S(e,function(e,r,a){t.call(n,e,r,a)&&i.push(e)}),i)},w.reject=function(e,t,n){return w.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},w.every=w.all=function(e,t,i){t||(t=w.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,i):(S(e,function(e,a,o){if(!(r=r&&t.call(i,e,a,o)))return n}),!!r)};var I=w.some=w.any=function(e,t,i){t||(t=w.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,i):(S(e,function(e,a,o){if(r||(r=t.call(i,e,a,o)))return n}),!!r)};w.contains=w.include=function(e,t){return null!=e&&(y&&e.indexOf===y?-1!=e.indexOf(t):I(e,function(e){return e===t}))},w.invoke=function(e,t){var n=s.call(arguments,2),i=w.isFunction(t);return w.map(e,function(e){return(i?t:e[t]).apply(e,n)})},w.pluck=function(e,t){return w.map(e,function(e){return e[t]})},w.where=function(e,t,n){return w.isEmpty(t)?n?void 0:[]:w[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},w.findWhere=function(e,t){return w.where(e,t,!0)},w.max=function(e,t,n){if(!t&&w.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&w.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return S(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;o>i.computed&&(i={value:e,computed:o})}),i.value},w.min=function(e,t,n){if(!t&&w.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&w.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return S(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;o<i.computed&&(i={value:e,computed:o})}),i.value},w.shuffle=function(e){var t,n=0,i=[];return S(e,function(e){t=w.random(n++),i[n-1]=i[t],i[t]=e}),i},w.sample=function(e,t,n){return arguments.length<2||n?e[w.random(e.length-1)]:w.shuffle(e).slice(0,Math.max(0,t))};var C=function(e){return w.isFunction(e)?e:function(t){return t[e]}};w.sortBy=function(e,t,n){var i=C(t);return w.pluck(w.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,i){var r={},a=null==n?w.identity:C(n);return S(t,function(n,o){var s=a.call(i,n,o,t);e(r,s,n)}),r}};w.groupBy=A(function(e,t,n){(w.has(e,t)?e[t]:e[t]=[]).push(n)}),w.indexBy=A(function(e,t,n){e[t]=n}),w.countBy=A(function(e,t){w.has(e,t)?e[t]++:e[t]=1}),w.sortedIndex=function(e,t,n,i){for(var r=(n=null==n?w.identity:C(n)).call(i,t),a=0,o=e.length;a<o;){var s=a+o>>>1;n.call(i,e[s])<r?a=s+1:o=s}return a},w.toArray=function(e){return e?w.isArray(e)?s.call(e):e.length===+e.length?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:e.length===+e.length?e.length:w.keys(e).length},w.first=w.head=w.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:s.call(e,0,t)},w.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},w.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},w.rest=w.tail=w.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var M=function(e,t,n){return t&&w.every(e,w.isArray)?l.apply(n,e):(S(e,function(e){w.isArray(e)||w.isArguments(e)?t?o.apply(n,e):M(e,t,n):n.push(e)}),n)};w.flatten=function(e,t){return M(e,t,[])},w.without=function(e){return w.difference(e,s.call(arguments,1))},w.uniq=w.unique=function(e,t,n,i){w.isFunction(t)&&(i=n,n=t,t=!1);var r=n?w.map(e,n,i):e,a=[],o=[];return S(r,function(n,i){(t?i&&o[o.length-1]===n:w.contains(o,n))||(o.push(n),a.push(e[i]))}),a},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=function(e){var t=s.call(arguments,1);return w.filter(w.uniq(e),function(e){return w.every(t,function(t){return w.indexOf(t,e)>=0})})},w.difference=function(e){var t=l.apply(i,s.call(arguments,1));return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){for(var e=w.max(w.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;n<e;n++)t[n]=w.pluck(arguments,""+n);return t},w.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},w.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return e[i=w.sortedIndex(e,t)]===t?i:-1;i=n<0?Math.max(0,r+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i;return-1},w.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},w.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,a=new Array(i);r<i;)a[r++]=e,e+=n;return a};var P=function(){};w.bind=function(e,t){var n,i;if(T&&e.bind===T)return T.apply(e,s.call(arguments,1));if(!w.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));P.prototype=e.prototype;var r=new P;P.prototype=null;var a=e.apply(r,n.concat(s.call(arguments)));return Object(a)===a?a:r}},w.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},w.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=w.bind(e[t],e)}),e},w.memoize=function(e,t){var n={};return t||(t=w.identity),function(){var i=t.apply(this,arguments);return w.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},w.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=function(e){return w.delay.apply(w,[e,1].concat(s.call(arguments,1)))},w.throttle=function(e,t,n){var i,r,a,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:new Date,o=null,a=e.apply(i,r)};return function(){var u=new Date;s||!1!==n.leading||(s=u);var d=t-(u-s);return i=this,r=arguments,d<=0?(clearTimeout(o),o=null,s=u,a=e.apply(i,r)):o||!1===n.trailing||(o=setTimeout(l,d)),a}},w.debounce=function(e,t,n){var i,r,a,o,s;return function(){a=this,r=arguments,o=new Date;var l=function(){var u=new Date-o;u<t?i=setTimeout(l,t-u):(i=null,n||(s=e.apply(a,r)))},u=n&&!i;return i||(i=setTimeout(l,t)),u&&(s=e.apply(a,r)),s}},w.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},w.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},w.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)w.has(e,n)&&t.push(n);return t},w.values=function(e){for(var t=w.keys(e),n=t.length,i=new Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},w.pairs=function(e){for(var t=w.keys(e),n=t.length,i=new Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},w.invert=function(e){for(var t={},n=w.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=function(e){return S(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},w.pick=function(e){var t={},n=l.apply(i,s.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},w.omit=function(e){var t={},n=l.apply(i,s.call(arguments,1));for(var r in e)w.contains(n,r)||(t[r]=e[r]);return t},w.defaults=function(e){return S(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e};var R=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return i[a]==t;var o=e.constructor,s=t.constructor;if(o!==s&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(s)&&s instanceof s))return!1;n.push(e),i.push(t);var l=0,d=!0;if("[object Array]"==r){if(d=(l=e.length)==t.length)for(;l--&&(d=R(e[l],t[l],n,i)););}else{for(var c in e)if(w.has(e,c)&&(l++,!(d=w.has(t,c)&&R(e[c],t[c],n,i))))break;if(d){for(c in t)if(w.has(t,c)&&!l--)break;d=!l}}return n.pop(),i.pop(),d};w.isEqual=function(e,t){return R(e,t,[],[])},w.isEmpty=function(e){if(null==e)return!0;if(w.isArray(e)||w.isString(e))return 0===e.length;for(var t in e)if(w.has(e,t))return!1;return!0},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=b||function(e){return"[object Array]"==u.call(e)},w.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){w["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return!(!e||!w.has(e,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(e){return"function"==typeof e}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!=+e},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==u.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return d.call(e,t)},w.noConflict=function(){return e._=t,this},w.identity=function(e){return e},w.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;r<e;r++)i[r]=t.call(n,r);return i},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=w.invert(D.escape);var k={escape:new RegExp("["+w.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+w.keys(D.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(e){w[e]=function(t){return null==t?"":(""+t).replace(k[e],function(t){return D[e][t]})}}),w.result=function(e,t){if(null!=e){var n=e[t];return w.isFunction(n)?n.call(e):n}},w.mixin=function(e){S(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(w,e))}})};var N=0;w.uniqueId=function(e){var t=++N+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(e,t,n){var i;n=w.defaults({},n,w.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(r,function(t,n,i,r,s){return o+=e.slice(a,s).replace(F,function(e){return"\\"+L[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=s+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(e){throw e.source=o,e}if(t)return i(t,w);var s=function(e){return i.call(this,e,w)};return s.source="function("+(n.variable||"obj")+"){\n"+o+"}",s},w.chain=function(e){return w(e).chain()};var j=function(e){return this._chain?w(e).chain():e};w.mixin(w),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),S(["concat","join","slice"],function(e){var t=i[e];w.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){return e._}}(this)),function(e,t){var n,i,r=typeof t,a=e.location,o=e.document,s=o.documentElement,l=e.jQuery,u=e.$,d={},c=[],f="1.10.2",h=c.concat,p=c.push,m=c.slice,g=c.indexOf,v=d.toString,y=d.hasOwnProperty,_=f.trim,b=function(e,t){return new b.fn.init(e,t,i)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,M=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,P=/^-ms-/,R=/-([\da-z])/gi,D=function(e,t){return t.toUpperCase()},k=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(N(),b.ready())},N=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",k,!1),e.removeEventListener("load",k,!1)):(o.detachEvent("onreadystatechange",k),e.detachEvent("onload",k))};function O(e){var t=e.length,n=b.type(e);return!b.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}b.fn=b.prototype={jquery:f,constructor:b,init:function(e,n,i){var r,a;if(!e)return this;if("string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e))||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),x.test(r[1])&&b.isPlainObject(n))for(r in n)b.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if((a=o.getElementById(r[2]))&&a.parentNode){if(a.id!==r[2])return i.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,toArray:function(){return m.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(m.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,i,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},l=2),"object"==typeof s||b.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(a=arguments[l]))for(r in a)e=s[r],s!==(i=a[r])&&(d&&i&&(b.isPlainObject(i)||(n=b.isArray(i)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},s[r]=b.extend(d,o,i)):i!==t&&(s[r]=i));return s},b.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=l),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(!0===e?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,!0!==e&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[v.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(b.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var i=x.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=b.buildFragment([e],t,r),r&&b(r).remove(),b.merge([],i.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&((n=b.trim(n))&&I.test(n.replace(A,"@").replace(M,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?i=(new DOMParser).parseFromString(n,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(n))}catch(e){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(P,"ms-").replace(R,D)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,a=O(e);if(n){if(a)for(;r>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;r>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:_&&!_.call("\ufeff ")?function(e){return null==e?"":_.call(e)}:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(O(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(g)return g.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,a=0;if("number"==typeof i)for(;i>a;a++)e[r++]=n[a];else for(;n[a]!==t;)e[r++]=n[a++];return e.length=r,e},grep:function(e,t,n){var i=[],r=0,a=e.length;for(n=!!n;a>r;r++)n!==!!t(e[r],r)&&i.push(e[r]);return i},map:function(e,t,n){var i,r=0,a=e.length,o=[];if(O(e))for(;a>r;r++)null!=(i=t(e[r],r,n))&&(o[o.length]=i);else for(r in e)null!=(i=t(e[r],r,n))&&(o[o.length]=i);return h.apply([],o)},guid:1,proxy:function(e,n){var i,r,a;return"string"==typeof n&&(a=e[n],n=e,e=a),b.isFunction(e)?(i=m.call(arguments,2),(r=function(){return e.apply(n||this,i.concat(m.call(arguments)))}).guid=e.guid=e.guid||b.guid++,r):t},access:function(e,n,i,r,a,o,s){var l=0,u=e.length,d=null==i;if("object"===b.type(i))for(l in a=!0,i)b.access(e,n,l,i[l],!0,o,s);else if(r!==t&&(a=!0,b.isFunction(r)||(s=!0),d&&(s?(n.call(e,r),n=null):(d=n,n=function(e,t,n){return d.call(b(e),n)})),n))for(;u>l;l++)n(e[l],i,s?r:r.call(e[l],l,n(e[l],i)));return a?e:d?n.call(e):u?n(e[0],i):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,i){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=o[a];return r}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",k,!1);else{o.attachEvent("onreadystatechange",k),e.attachEvent("onload",k);var i=!1;try{i=null==e.frameElement&&o.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!b.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}N(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()}),i=b(o),function(e,t){var n,i,r,a,o,s,l,u,d,c,f,h,p,m,g,v,y,_="sizzle"+-new Date,E=e.document,T=0,w=0,S=oe(),x=oe(),I=oe(),C=!1,A=function(e,t){return e===t?(C=!0,0):0},M=typeof t,P=1<<31,R={}.hasOwnProperty,D=[],k=D.pop,N=D.push,O=D.push,L=D.slice,F=D.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V=U.replace("w","w#"),q="\\["+B+"*("+U+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+B+"*\\]",H=":("+U+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+q.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),G=RegExp("^"+B+"*,"+B+"*"),Y=RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),$=RegExp(B+"*[+~]"),K=RegExp("="+B+"*([^\\]'\"]*)"+B+"*\\]","g"),W=RegExp(H),X=RegExp("^"+V+"$"),Q={ID:RegExp("^#("+U+")"),CLASS:RegExp("^\\.("+U+")"),TAG:RegExp("^("+U.replace("w","w*")+")"),ATTR:RegExp("^"+q),PSEUDO:RegExp("^"+H),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:RegExp("^(?:"+j+")$","i"),needsContext:RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,ne=/'|\\/g,ie=RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),re=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{O.apply(D=L.call(E.childNodes),E.childNodes),D[E.childNodes.length].nodeType}catch(e){O={apply:D.length?function(e,t){N.apply(e,L.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,n,r){var a,o,s,l,u,d,h,g,v,b;if((t?t.ownerDocument||t:E)!==f&&c(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=(t=t||f).nodeType)&&9!==l)return[];if(p&&!r){if(a=Z.exec(e))if(s=a[1]){if(9===l){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&y(t,o)&&o.id===s)return n.push(o),n}else{if(a[2])return O.apply(n,t.getElementsByTagName(e)),n;if((s=a[3])&&i.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(s)),n}if(i.qsa&&(!m||!m.test(e))){if(g=h=_,v=t,b=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(d=me(e),(h=t.getAttribute("id"))?g=h.replace(ne,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=d.length;u--;)d[u]=g+ge(d[u]);v=$.test(e)&&t.parentNode||t,b=d.join(",")}if(b)try{return O.apply(n,v.querySelectorAll(b)),n}catch(e){}finally{h||t.removeAttribute("id")}}}return we(e.replace(z,"$1"),t,n,r)}function oe(){var e=[];return function t(n,i){return e.push(n+=" ")>a.cacheLength&&delete t[e.shift()],t[n]=i}}function se(e){return e[_]=!0,e}function le(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=e.length;i--;)a.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||P)-(~e.sourceIndex||P);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return se(function(t){return t=+t,se(function(n,i){for(var r,a=e([],n.length,t),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}for(n in s=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},i=ae.support={},c=ae.setDocument=function(e){var n=e?e.ownerDocument||e:E,r=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,h=n.documentElement,p=!s(n),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){c()}),i.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=le(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=le(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),i.getById=le(function(e){return h.appendChild(e).id=_,!n.getElementsByName||!n.getElementsByName(_).length}),i.getById?(a.find.ID=function(e,t){if(typeof t.getElementById!==M&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},a.filter.ID=function(e){var t=e.replace(ie,re);return function(e){return e.getAttribute("id")===t}}):(delete a.find.ID,a.filter.ID=function(e){var t=e.replace(ie,re);return function(e){var n=typeof e.getAttributeNode!==M&&e.getAttributeNode("id");return n&&n.value===t}}),a.find.TAG=i.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==M?n.getElementsByTagName(e):t}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},a.find.CLASS=i.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==M&&p?n.getElementsByClassName(e):t},g=[],m=[],(i.qsa=J.test(n.querySelectorAll))&&(le(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||m.push("\\["+B+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),le(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&m.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(i.matchesSelector=J.test(v=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){i.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),g.push("!=",H)}),m=m.length&&RegExp(m.join("|")),g=g.length&&RegExp(g.join("|")),y=J.test(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=h.compareDocumentPosition?function(e,t){if(e===t)return C=!0,0;var r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return r?1&r||!i.sortDetached&&t.compareDocumentPosition(e)===r?e===n||y(E,e)?-1:t===n||y(E,t)?1:d?F.call(d,e)-F.call(d,t):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,r=0,a=e.parentNode,o=t.parentNode,s=[e],l=[t];if(e===t)return C=!0,0;if(!a||!o)return e===n?-1:t===n?1:a?-1:o?1:d?F.call(d,e)-F.call(d,t):0;if(a===o)return de(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[r]===l[r];)r++;return r?de(s[r],l[r]):s[r]===E?-1:l[r]===E?1:0},n):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&c(e),t=t.replace(K,"='$1']"),!(!i.matchesSelector||!p||g&&g.test(t)||m&&m.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==f&&c(e),y(e,t)},ae.attr=function(e,n){(e.ownerDocument||e)!==f&&c(e);var r=a.attrHandle[n.toLowerCase()],o=r&&R.call(a.attrHandle,n.toLowerCase())?r(e,n,!p):t;return o===t?i.attributes||!p?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ae.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],r=0,a=0;if(C=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(A),C){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return e},o=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=o(t);return n},(a=ae.selectors={cacheLength:50,createPseudo:se,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,re),e[3]=(e[4]||e[5]||"").replace(ie,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&W.test(i)&&(n=me(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==M&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=ae.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,f,h,p,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(a){for(;m;){for(c=t;c=c[m];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&y){for(h=(u=(d=g[_]||(g[_]={}))[e]||[])[0]===T&&u[1],f=u[0]===T&&u[2],c=h&&g.childNodes[h];c=++h&&c&&c[m]||(f=h=0)||p.pop();)if(1===c.nodeType&&++f&&c===t){d[e]=[T,h,f];break}}else if(y&&(u=(t[_]||(t[_]={}))[e])&&u[0]===T)f=u[1];else for(;(c=++h&&c&&c[m]||(f=h=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++f||(y&&((c[_]||(c[_]={}))[e]=[T,f]),c!==t)););return(f-=r)===i||0==f%i&&f/i>=0}}},PSEUDO:function(e,t){var n,i=a.pseudos[e]||a.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[_]?i(t):i.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=F.call(e,a[o])]=!(n[r]=a[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],i=l(e.replace(z,"$1"));return i[_]?se(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),!n.pop()}}),has:se(function(e){return function(t){return ae(e,t).length>0}}),contains:se(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:se(function(e){return X.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(ie,re).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[0>n?n+t:n]}),even:he(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}}).pseudos.nth=a.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[n]=ce(n);for(n in{submit:!0,reset:!0})a.pseudos[n]=fe(n);function pe(){}function me(e,t){var n,i,r,o,s,l,u,d=x[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],u=a.preFilter;s;){for(o in(!n||(i=G.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(r=[])),n=!1,(i=Y.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),a.filter)!(i=Q[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):x(e,l).slice(0)}function ge(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function ve(e,t,n){var i=t.dir,a=n&&"parentNode"===i,o=w++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r)}:function(t,n,s){var l,u,d,c=T+" "+o;if(s){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if((u=(d=t[_]||(t[_]={}))[i])&&u[0]===c){if(!0===(l=u[1])||l===r)return!0===l}else if((u=d[i]=[c])[1]=e(t,n,s)||r,!0===u[1])return!0}}function ye(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function _e(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,u=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,i,r))&&(o.push(a),u&&t.push(s));return o}function be(e,t,n,i,r,a){return i&&!i[_]&&(i=be(i)),r&&!r[_]&&(r=be(r,a)),se(function(a,o,s,l){var u,d,c,f=[],h=[],p=o.length,m=a||function(e,t,n){for(var i=0,r=t.length;r>i;i++)ae(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!a&&t?m:_e(m,f,e,s,l),v=n?r||(a?e:p||i)?[]:o:g;if(n&&n(g,v,s,l),i)for(u=_e(v,h),i(u,[],s,l),d=u.length;d--;)(c=u[d])&&(v[h[d]]=!(g[h[d]]=c));if(a){if(r||e){if(r){for(u=[],d=v.length;d--;)(c=v[d])&&u.push(g[d]=c);r(null,v=[],u,l)}for(d=v.length;d--;)(c=v[d])&&(u=r?F.call(a,c):f[d])>-1&&(a[u]=!(o[u]=c))}}else v=_e(v===o?v.splice(p,v.length):v),r?r(null,o,v,l):O.apply(o,v)})}function Ee(e){for(var t,n,i,r=e.length,o=a.relative[e[0].type],s=o||a.relative[" "],l=o?1:0,d=ve(function(e){return e===t},s,!0),c=ve(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,i){return!o&&(i||n!==u)||((t=n).nodeType?d(e,n,i):c(e,n,i))}];r>l;l++)if(n=a.relative[e[l].type])f=[ve(ye(f),n)];else{if((n=a.filter[e[l].type].apply(null,e[l].matches))[_]){for(i=++l;r>i&&!a.relative[e[i].type];i++);return be(l>1&&ye(f),l>1&&ge(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,i>l&&Ee(e.slice(l,i)),r>i&&Ee(e=e.slice(i)),r>i&&ge(e))}f.push(n)}return ye(f)}function Te(e,t){var n=0,i=t.length>0,o=e.length>0,s=function(s,l,d,c,h){var p,m,g,v=[],y=0,_="0",b=s&&[],E=null!=h,w=u,S=s||o&&a.find.TAG("*",h&&l.parentNode||l),x=T+=null==w?1:Math.random()||.1;for(E&&(u=l!==f&&l,r=n);null!=(p=S[_]);_++){if(o&&p){for(m=0;g=e[m++];)if(g(p,l,d)){c.push(p);break}E&&(T=x,r=++n)}i&&((p=!g&&p)&&y--,s&&b.push(p))}if(y+=_,i&&_!==y){for(m=0;g=t[m++];)g(b,v,l,d);if(s){if(y>0)for(;_--;)b[_]||v[_]||(v[_]=k.call(c));v=_e(v)}O.apply(c,v),E&&!s&&v.length>0&&y+t.length>1&&ae.uniqueSort(c)}return E&&(T=x,u=w),b};return i?se(s):s}function we(e,t,n,r){var o,s,u,d,c,f=me(e);if(!r&&1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(u=s[0]).type&&i.getById&&9===t.nodeType&&p&&a.relative[s[1].type]){if(!(t=(a.find.ID(u.matches[0].replace(ie,re),t)||[])[0]))return n;e=e.slice(s.shift().value.length)}for(o=Q.needsContext.test(e)?0:s.length;o--&&(u=s[o],!a.relative[d=u.type]);)if((c=a.find[d])&&(r=c(u.matches[0].replace(ie,re),$.test(s[0].type)&&t.parentNode||t))){if(s.splice(o,1),!(e=r.length&&ge(s)))return O.apply(n,r),n;break}}return l(e,f)(r,t,!p,n,$.test(e)),n}pe.prototype=a.filters=a.pseudos,a.setFilters=new pe,l=ae.compile=function(e,t){var n,i=[],r=[],a=I[e+" "];if(!a){for(t||(t=me(e)),n=t.length;n--;)(a=Ee(t[n]))[_]?i.push(a):r.push(a);a=I(e,Te(r,i))}return a},i.sortStable=_.split("").sort(A).join("")===_,i.detectDuplicates=C,c(),i.sortDetached=le(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,n,i){return i?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),i.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,n,i){return i||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(j,function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&r.specified?r.value:!0===e[n]?n.toLowerCase():null}),b.find=ae,b.expr=ae.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ae.uniqueSort,b.text=ae.getText,b.isXMLDoc=ae.isXML,b.contains=ae.contains}(e);var L={};b.Callbacks=function(e){e="string"==typeof e?L[e]||function(e){var t=L[e]={};return b.each(e.match(T)||[],function(e,n){t[n]=!0}),t}(e):b.extend({},e);var n,i,r,a,o,s,l=[],u=!e.once&&[],d=function(t){for(i=e.memory&&t,r=!0,o=s||0,s=0,a=l.length,n=!0;l&&a>o;o++)if(!1===l[o].apply(t[0],t[1])&&e.stopOnFalse){i=!1;break}n=!1,l&&(u?u.length&&d(u.shift()):i?l=[]:c.disable())},c={add:function(){if(l){var t=l.length;(function t(n){b.each(n,function(n,i){var r=b.type(i);"function"===r?e.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==r&&t(i)})})(arguments),n?a=l.length:i&&(s=t,d(i))}return this},remove:function(){return l&&b.each(arguments,function(e,t){for(var i;(i=b.inArray(t,l,i))>-1;)l.splice(i,1),n&&(a>=i&&a--,o>=i&&o--)}),this},has:function(e){return e?b.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=i=t,this},disabled:function(){return!l},lock:function(){return u=t,i||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],n?u.push(t):d(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,a){var o=a[0],s=b.isFunction(e[t])&&e[t];r[a[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,i):i}},r={};return i.pipe=i.then,b.each(t,function(e,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,a=m.call(arguments),o=a.length,s=1!==o||e&&b.isFunction(e.promise)?o:0,l=1===s?e:b.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?m.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(t=Array(o),n=Array(o),i=Array(o);o>r;r++)a[r]&&b.isFunction(a[r].promise)?a[r].promise().done(u(r,i,a)).fail(l.reject).progress(u(r,n,t)):--s;return s||l.resolveWith(i,a),l.promise()}}),b.support=function(t){var n,i,a,s,l,u,d,c,f,h=o.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*")||[],!(i=h.getElementsByTagName("a")[0])||!i.style||!n.length)return t;u=(s=o.createElement("select")).appendChild(o.createElement("option")),a=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==h.className,t.leadingWhitespace=3===h.firstChild.nodeType,t.tbody=!h.getElementsByTagName("tbody").length,t.htmlSerialize=!!h.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!a.value,t.optSelected=u.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete h.test}catch(e){t.deleteExpando=!1}for(f in(a=o.createElement("input")).setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),(l=o.createDocumentFragment()).appendChild(a),t.appendChecked=a.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})h.setAttribute(d="on"+f,"t"),t[f+"Bubbles"]=d in e||!1===h.attributes[d].expando;for(f in h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===h.style.backgroundClip,b(t))break;return t.ownLast="0"!==f,b(function(){var n,i,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=o.getElementsByTagName("body")[0];l&&((n=o.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(a=h.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=c&&0===a[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===h.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(h,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(h,null)||{width:"4px"}).width,(i=h.appendChild(o.createElement("div"))).style.cssText=h.style.cssText=s,i.style.marginRight=i.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof h.style.zoom!==r&&(h.innerHTML="",h.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==h.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=h=a=i=null)}),n=s=l=u=i=a=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,j=/([A-Z])/g;function B(e,n,i,r){if(b.acceptData(e)){var a,o,s=b.expando,l=e.nodeType,u=l?b.cache:e,d=l?e[s]:e[s]&&s;if(d&&u[d]&&(r||u[d].data)||i!==t||"string"!=typeof n)return d||(d=l?e[s]=c.pop()||b.guid++:s),u[d]||(u[d]=l?{}:{toJSON:b.noop}),("object"==typeof n||"function"==typeof n)&&(r?u[d]=b.extend(u[d],n):u[d].data=b.extend(u[d].data,n)),o=u[d],r||(o.data||(o.data={}),o=o.data),i!==t&&(o[b.camelCase(n)]=i),"string"==typeof n?null==(a=o[n])&&(a=o[b.camelCase(n)]):a=o,a}}function U(e,t,n){if(b.acceptData(e)){var i,r,a=e.nodeType,o=a?b.cache:e,s=a?e[b.expando]:b.expando;if(o[s]){if(t&&(i=n?o[s]:o[s].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in i?t=[t]:t=(t=b.camelCase(t))in i?[t]:t.split(" "),r=t.length;for(;r--;)delete i[t[r]];if(n?!q(i):!b.isEmptyObject(i))return}(n||(delete o[s].data,q(o[s])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function V(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(j,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(r))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:F.test(i)?b.parseJSON(i):i)}catch(e){}b.data(e,n,i)}else i=t}return i}function q(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?b.cache[e[b.expando]]:e[b.expando])&&!q(e)},data:function(e,t,n){return B(e,t,n)},removeData:function(e,t){return U(e,t)},_data:function(e,t,n){return B(e,t,n,!0)},_removeData:function(e,t){return U(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var i,r,a=null,o=0,s=this[0];if(e===t){if(this.length&&(a=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(i=s.attributes;i.length>o;o++)0===(r=i[o].name).indexOf("data-")&&V(s,r=b.camelCase(r.slice(5)),a[r]);b._data(s,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){b.data(this,e)}):arguments.length>1?this.each(function(){b.data(this,e,n)}):s?V(s,e,b.data(s,e)):null},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=b._data(e,n),i&&(!r||b.isArray(i)?r=b._data(e,n,b.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),i=n.length,r=n.shift(),a=b._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,function(){b.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx&&b.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,a=b.Deferred(),o=this,s=this.length,l=function(){--r||a.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)(i=b._data(o[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(l));return l(),a.promise(n)}});var H,z,G=/[\t\r\n\f]/g,Y=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,W=/^(?:checked|selected)$/i,X=b.support.getSetAttribute,Q=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,n,i,r,a,o=0,s=this.length,l="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>o;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(G," "):" ")){for(a=0;r=t[a++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=b.trim(i)}return this},removeClass:function(e){var t,n,i,r,a,o=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>o;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(G," "):"")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?b.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,a=b(this),o=e.match(T)||[];t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(n===r||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||!1===e?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(G," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,a=this[0];return arguments.length?(r=b.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,b(this).val()):e)?a="":"number"==typeof a?a+="":b.isArray(a)&&(a=b.map(a,function(e){return null==e?"":e+""})),(i=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,a,"value")!==t||(this.value=a))})):a?(i=b.valHooks[a.type]||b.valHooks[a.nodeName.toLowerCase()])&&"get"in i&&(n=i.get(a,"value"))!==t?n:"string"==typeof(n=a.value)?n.replace(Y,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(!(!(n=i[l]).selected&&l!==r||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=b.makeArray(t),o=r.length;o--;)((i=r[o]).selected=b.inArray(b(i).val(),a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}},attr:function(e,n,i){var a,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===r?b.prop(e,n,i):(1===s&&b.isXMLDoc(e)||(n=n.toLowerCase(),a=b.attrHooks[n]||(b.expr.match.bool.test(n)?z:H)),i===t?a&&"get"in a&&null!==(o=a.get(e,n))?o:null==(o=b.find.attr(e,n))?t:o:null!==i?a&&"set"in a&&(o=a.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(T);if(a&&1===e.nodeType)for(;n=a[r++];)i=b.propFix[n]||n,b.expr.match.bool.test(n)?Q&&X||!W.test(n)?e[i]=!1:e[b.camelCase("default-"+n)]=e[i]=!1:b.attr(e,n,""),e.removeAttribute(X?n:i)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,n,i){var r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!b.isXMLDoc(e))&&(n=b.propFix[n]||n,a=b.propHooks[n]),i!==t?a&&"set"in a&&(r=a.set(e,i,n))!==t?r:e[n]=i:a&&"get"in a&&null!==(r=a.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):$.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),z={set:function(e,t,n){return!1===t?b.removeAttr(e,n):Q&&X||!W.test(n)?e.setAttribute(!X&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},b.each(b.expr.match.bool.source.match(/\w+/g),function(e,n){var i=b.expr.attrHandle[n]||b.find.attr;b.expr.attrHandle[n]=Q&&X||!W.test(n)?function(e,n,r){var a=b.expr.attrHandle[n],o=r?t:(b.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return b.expr.attrHandle[n]=a,o}:function(e,n,i){return i?t:e[b.camelCase("default-"+n)]?n.toLowerCase():null}}),Q&&X||(b.attrHooks.value={set:function(e,n,i){return b.nodeName(e,"input")?(e.defaultValue=n,t):H&&H.set(e,n,i)}}),X||(H={set:function(e,n,i){var r=e.getAttributeNode(i);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},b.expr.attrHandle.id=b.expr.attrHandle.name=b.expr.attrHandle.coords=function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&""!==r.value?r.value:null},b.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},set:H.set},b.attrHooks.contenteditable={set:function(e,t,n){H.set(e,""!==t&&t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]={set:function(e,i){return""===i?(e.setAttribute(n,"auto"),i):t}}})),b.support.hrefNormalized||b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.support.enctype||(b.propFix.enctype="encoding"),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}},b.support.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var J=/^(?:input|select|textarea)$/i,Z=/^key/,ee=/^(?:mouse|contextmenu)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ne=/^([^.]*)(?:\.(.+)|)$/;function ie(){return!0}function re(){return!1}function ae(){try{return o.activeElement}catch(e){}}b.event={global:{},add:function(e,n,i,a,o){var s,l,u,d,c,f,h,p,m,g,v,y=b._data(e);if(y){for(i.handler&&(i=(d=i).handler,o=d.selector),i.guid||(i.guid=b.guid++),(l=y.events)||(l=y.events={}),(f=y.handle)||((f=y.handle=function(e){return typeof b===r||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)}).elem=e),u=(n=(n||"").match(T)||[""]).length;u--;)m=v=(s=ne.exec(n[u])||[])[1],g=(s[2]||"").split(".").sort(),m&&(c=b.event.special[m]||{},m=(o?c.delegateType:c.bindType)||m,c=b.event.special[m]||{},h=b.extend({type:m,origType:v,data:a,handler:i,guid:i.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:g.join(".")},d),(p=l[m])||((p=l[m]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,a,g,f)||(e.addEventListener?e.addEventListener(m,f,!1):e.attachEvent&&e.attachEvent("on"+m,f))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),b.event.global[m]=!0);e=null}},remove:function(e,t,n,i,r){var a,o,s,l,u,d,c,f,h,p,m,g=b.hasData(e)&&b._data(e);if(g&&(d=g.events)){for(u=(t=(t||"").match(T)||[""]).length;u--;)if(h=m=(s=ne.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(c=b.event.special[h]||{},f=d[h=(i?c.delegateType:c.bindType)||h]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=f.length;a--;)o=f[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(f.splice(a,1),o.selector&&f.delegateCount--,c.remove&&c.remove.call(e,o));l&&!f.length&&(c.teardown&&!1!==c.teardown.call(e,p,g.handle)||b.removeEvent(e,h,g.handle),delete d[h])}else for(h in d)b.event.remove(e,h+t[u],n,i,!0);b.isEmptyObject(d)&&(delete g.handle,b._removeData(e,"events"))}},trigger:function(n,i,r,a){var s,l,u,d,c,f,h,p=[r||o],m=y.call(n,"type")?n.type:n,g=y.call(n,"namespace")?n.namespace.split("."):[];if(u=f=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!te.test(m+b.event.triggered)&&(m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort()),l=0>m.indexOf(":")&&"on"+m,(n=n[b.expando]?n:new b.Event(m,"object"==typeof n&&n)).isTrigger=a?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:b.makeArray(i,[n]),c=b.event.special[m]||{},a||!c.trigger||!1!==c.trigger.apply(r,i))){if(!a&&!c.noBubble&&!b.isWindow(r)){for(d=c.delegateType||m,te.test(d+m)||(u=u.parentNode);u;u=u.parentNode)p.push(u),f=u;f===(r.ownerDocument||o)&&p.push(f.defaultView||f.parentWindow||e)}for(h=0;(u=p[h++])&&!n.isPropagationStopped();)n.type=h>1?d:c.bindType||m,(s=(b._data(u,"events")||{})[n.type]&&b._data(u,"handle"))&&s.apply(u,i),(s=l&&u[l])&&b.acceptData(u)&&s.apply&&!1===s.apply(u,i)&&n.preventDefault();if(n.type=m,!a&&!n.isDefaultPrevented()&&(!c._default||!1===c._default.apply(p.pop(),i))&&b.acceptData(r)&&l&&r[m]&&!b.isWindow(r)){(f=r[l])&&(r[l]=null),b.event.triggered=m;try{r[m]()}catch(e){}b.event.triggered=t,f&&(r[l]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,i,r,a,o,s=[],l=m.call(arguments),u=(b._data(this,"events")||{})[e.type]||[],d=b.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,e)){for(s=b.event.handlers.call(this,e,u),n=0;(a=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,o=0;(r=a.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,(i=((b.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l))!==t&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,a,o,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(a=[],o=0;l>o;o++)a[i=(r=n[o]).selector+" "]===t&&(a[i]=r.needsContext?b(i,this).index(u)>=0:b.find(i,this,null,[u]).length),a[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[b.expando])return e;var t,n,i,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=ee.test(r)?this.mouseHooks:Z.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=i.length;t--;)e[n=i[t]]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,a,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(a=(r=e.target.ownerDocument||o).documentElement,i=r.body,e.pageX=n.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ae()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ae()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return b.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?b.event.trigger(r,null,t):b.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===r&&(e[i]=null),e.detachEvent(i,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?ie:re):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:re,isPropagationStopped:re,isImmediatePropagationStopped:re,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ie,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ie,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ie,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return(!i||i!==this&&!b.contains(this,i))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return!b.nodeName(this,"form")&&(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;i&&!b._data(i,"submitBubbles")&&(b.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),b._data(i,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!b.nodeName(this,"form")&&(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!J.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0==n++&&o.addEventListener(e,i,!0)},teardown:function(){0==--n&&o.removeEventListener(e,i,!0)}}}),b.fn.extend({on:function(e,n,i,r,a){var o,s;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=t),e)this.on(o,n,i,e[o],a);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),!1===r)r=re;else if(!r)return this;return 1===a&&(s=r,(r=function(e){return b().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,b(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(!1===n||"function"==typeof n)&&(i=n,n=t),!1===i&&(i=re),this.each(function(){b.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?b.event.trigger(e,n,i,!0):t}});var oe=/^.[^:#\[\.,]*$/,se=/^(?:parents|prev(?:Until|All))/,le=b.expr.match.needsContext,ue={children:!0,contents:!0,next:!0,prev:!0};function de(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function ce(e,t,n){if(b.isFunction(t))return b.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return b.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(oe.test(t))return b.filter(t,e,n);t=b.filter(t,e)}return b.grep(e,function(e){return b.inArray(e,t)>=0!==n})}function fe(e){var t=he.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}b.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(b(e).filter(function(){for(t=0;r>t;t++)if(b.contains(i[t],this))return!0}));for(t=0;r>t;t++)b.find(e,i[t],n);return(n=this.pushStack(r>1?b.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=b(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ce(this,e||[],!0))},filter:function(e){return this.pushStack(ce(this,e||[],!1))},is:function(e){return!!ce(this,"string"==typeof e&&le.test(e)?b(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,a=[],o=le.test(e)||"string"!=typeof e?b(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&b.find.matchesSelector(n,e))){n=a.push(n);break}return this.pushStack(a.length>1?b.unique(a):a)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),i=b.merge(this.get(),n);return this.pushStack(b.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return de(e,"nextSibling")},prev:function(e){return de(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,i){var r=b.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=b.filter(i,r)),this.length>1&&(ue[e]||(r=b.unique(r)),se.test(e)&&(r=r.reverse())),this.pushStack(r)}}),b.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?b.find.matchesSelector(i,e)?[i]:[]:b.find.matches(e,b.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],a=e[n];a&&9!==a.nodeType&&(i===t||1!==a.nodeType||!b(a).is(i));)1===a.nodeType&&r.push(a),a=a[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var he="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pe=/ jQuery\d+="(?:null|\d+)"/g,me=RegExp("<(?:"+he+")[\\s/>]","i"),ge=/^\s+/,ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ye=/<([\w:]+)/,_e=/<tbody/i,be=/<|&#?\w+;/,Ee=/<(?:script|style|link)/i,Te=/^(?:checkbox|radio)$/i,we=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^$|\/(?:java|ecma)script/i,xe=/^true\/(.*)/,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ce={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ae=fe(o).appendChild(o.createElement("div"));function Me(e,t){return b.nodeName(e,"table")&&b.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Pe(e){return e.type=(null!==b.find.attr(e,"type"))+"/"+e.type,e}function Re(e){var t=xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function De(e,t){for(var n,i=0;null!=(n=e[i]);i++)b._data(n,"globalEval",!t||b._data(t[i],"globalEval"))}function ke(e,t){if(1===t.nodeType&&b.hasData(e)){var n,i,r,a=b._data(e),o=b._data(t,a),s=a.events;if(s)for(n in delete o.handle,o.events={},s)for(i=0,r=s[n].length;r>i;i++)b.event.add(t,n,s[n][i]);o.data&&(o.data=b.extend({},o.data))}}function Ne(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){for(i in(r=b._data(t)).events)b.removeEvent(t,i,r.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Pe(t).text=e.text,Re(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Te.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Oe(e,n){var i,a,o=0,s=typeof e.getElementsByTagName!==r?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==r?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],i=e.childNodes||e;null!=(a=i[o]);o++)!n||b.nodeName(a,n)?s.push(a):b.merge(s,Oe(a,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Le(e){Te.test(e.type)&&(e.defaultChecked=e.checked)}Ce.optgroup=Ce.option,Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?b.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||b.cleanData(Oe(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&De(Oe(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&b.cleanData(Oe(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(pe,""):t;if(!("string"!=typeof e||Ee.test(e)||!b.support.htmlSerialize&&me.test(e)||!b.support.leadingWhitespace&&ge.test(e)||Ce[(ye.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ve,"<$1></$2>");try{for(;r>i;i++)1===(n=this[i]||{}).nodeType&&(b.cleanData(Oe(n,!1)),n.innerHTML=e);n=0}catch(e){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=b.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),b(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=h.apply([],e);var i,r,a,o,s,l,u=0,d=this.length,c=this,f=d-1,p=e[0],m=b.isFunction(p);if(m||!(1>=d||"string"!=typeof p||b.support.checkClone)&&we.test(p))return this.each(function(i){var r=c.eq(i);m&&(e[0]=p.call(this,i,r.html())),r.domManip(e,t,n)});if(d&&(i=(l=b.buildFragment(e,this[0].ownerDocument,!1,!n&&this)).firstChild,1===l.childNodes.length&&(l=i),i)){for(a=(o=b.map(Oe(l,"script"),Pe)).length;d>u;u++)r=l,u!==f&&(r=b.clone(r,!0,!0),a&&b.merge(o,Oe(r,"script"))),t.call(this[u],r,u);if(a)for(s=o[o.length-1].ownerDocument,b.map(o,Re),u=0;a>u;u++)r=o[u],Se.test(r.type||"")&&!b._data(r,"globalEval")&&b.contains(s,r)&&(r.src?b._evalUrl(r.src):b.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ie,"")));l=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,i=0,r=[],a=b(e),o=a.length-1;o>=i;i++)n=i===o?this:this.clone(!0),b(a[i])[t](n),p.apply(r,n.get());return this.pushStack(r)}}),b.extend({clone:function(e,t,n){var i,r,a,o,s,l=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!me.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ae.innerHTML=e.outerHTML,Ae.removeChild(a=Ae.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(i=Oe(a),s=Oe(e),o=0;null!=(r=s[o]);++o)i[o]&&Ne(r,i[o]);if(t)if(n)for(s=s||Oe(e),i=i||Oe(a),o=0;null!=(r=s[o]);o++)ke(r,i[o]);else ke(e,a);return(i=Oe(a,"script")).length>0&&De(i,!l&&Oe(e,"script")),i=s=r=null,a},buildFragment:function(e,t,n,i){for(var r,a,o,s,l,u,d,c=e.length,f=fe(t),h=[],p=0;c>p;p++)if((a=e[p])||0===a)if("object"===b.type(a))b.merge(h,a.nodeType?[a]:a);else if(be.test(a)){for(s=s||f.appendChild(t.createElement("div")),l=(ye.exec(a)||["",""])[1].toLowerCase(),d=Ce[l]||Ce._default,s.innerHTML=d[1]+a.replace(ve,"<$1></$2>")+d[2],r=d[0];r--;)s=s.lastChild;if(!b.support.leadingWhitespace&&ge.test(a)&&h.push(t.createTextNode(ge.exec(a)[0])),!b.support.tbody)for(r=(a="table"!==l||_e.test(a)?"<table>"!==d[1]||_e.test(a)?0:s:s.firstChild)&&a.childNodes.length;r--;)b.nodeName(u=a.childNodes[r],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(b.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(a));for(s&&f.removeChild(s),b.support.appendChecked||b.grep(Oe(h,"input"),Le),p=0;a=h[p++];)if((!i||-1===b.inArray(a,i))&&(o=b.contains(a.ownerDocument,a),s=Oe(f.appendChild(a),"script"),o&&De(s),n))for(r=0;a=s[r++];)Se.test(a.type||"")&&n.push(a);return s=null,f},cleanData:function(e,t){for(var n,i,a,o,s=0,l=b.expando,u=b.cache,d=b.support.deleteExpando,f=b.event.special;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=(a=n[l])&&u[a])){if(o.events)for(i in o.events)f[i]?b.event.remove(n,i):b.removeEvent(n,i,o.handle);u[a]&&(delete u[a],d?delete n[l]:typeof n.removeAttribute!==r?n.removeAttribute(l):n[l]=null,c.push(a))}},_evalUrl:function(e){return b.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),b.fn.extend({wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()}});var Fe,je,Be,Ue=/alpha\([^)]*\)/i,Ve=/opacity\s*=\s*([^)]*)/,qe=/^(top|right|bottom|left)$/,He=/^(none|table(?!-c[ea]).+)/,ze=/^margin/,Ge=RegExp("^("+E+")(.*)$","i"),Ye=RegExp("^("+E+")(?!px)[a-z%]+$","i"),$e=RegExp("^([+-])=("+E+")","i"),Ke={BODY:"block"},We={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:0,fontWeight:400},Qe=["Top","Right","Bottom","Left"],Je=["Webkit","O","Moz","ms"];function Ze(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Je.length;r--;)if((t=Je[r]+n)in e)return t;return i}function et(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function tt(e,t){for(var n,i,r,a=[],o=0,s=e.length;s>o;o++)(i=e[o]).style&&(a[o]=b._data(i,"olddisplay"),n=i.style.display,t?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&et(i)&&(a[o]=b._data(i,"olddisplay",at(i.nodeName)))):a[o]||(r=et(i),(n&&"none"!==n||!r)&&b._data(i,"olddisplay",r?n:b.css(i,"display"))));for(o=0;s>o;o++)(i=e[o]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[o]||"":"none"));return e}function nt(e,t,n){var i=Ge.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function it(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=b.css(e,n+Qe[a],!0,r)),i?("content"===n&&(o-=b.css(e,"padding"+Qe[a],!0,r)),"margin"!==n&&(o-=b.css(e,"border"+Qe[a]+"Width",!0,r))):(o+=b.css(e,"padding"+Qe[a],!0,r),"padding"!==n&&(o+=b.css(e,"border"+Qe[a]+"Width",!0,r)));return o}function rt(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=je(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,a);if(0>=r||null==r){if((0>(r=Be(e,t,a))||null==r)&&(r=e.style[t]),Ye.test(r))return r;i=o&&(b.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+it(e,t,n||(o?"border":"content"),i,a)+"px"}function at(e){var t=o,n=Ke[e];return n||("none"!==(n=ot(e,t))&&n||((t=((Fe=(Fe||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||Fe[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),n=ot(e,t),Fe.detach()),Ke[e]=n),n}function ot(e,t){var n=b(t.createElement(e)).appendTo(t.body),i=b.css(n[0],"display");return n.remove(),i}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,i){var r,a,o={},s=0;if(b.isArray(n)){for(a=je(e),r=n.length;r>s;s++)o[n[s]]=b.css(e,n[s],!1,a);return o}return i!==t?b.style(e,n,i):b.css(e,n)},e,n,arguments.length>1)},show:function(){return tt(this,!0)},hide:function(){return tt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){et(this)?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,s,l=b.camelCase(n),u=e.style;if(n=b.cssProps[l]||(b.cssProps[l]=Ze(u,l)),s=b.cssHooks[n]||b.cssHooks[l],i===t)return s&&"get"in s&&(a=s.get(e,!1,r))!==t?a:u[n];if("string"===(o=typeof i)&&(a=$e.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(b.css(e,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||b.cssNumber[l]||(i+="px"),b.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(i=s.set(e,i,r))===t)))try{u[n]=i}catch(e){}}},css:function(e,n,i,r){var a,o,s,l=b.camelCase(n);return n=b.cssProps[l]||(b.cssProps[l]=Ze(e.style,l)),(s=b.cssHooks[n]||b.cssHooks[l])&&"get"in s&&(o=s.get(e,!0,i)),o===t&&(o=Be(e,n,r)),"normal"===o&&n in Xe&&(o=Xe[n]),""===i||i?(a=parseFloat(o),!0===i||b.isNumeric(a)?a||0:o):o}}),e.getComputedStyle?(je=function(t){return e.getComputedStyle(t,null)},Be=function(e,n,i){var r,a,o,s=i||je(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||b.contains(e.ownerDocument,e)||(l=b.style(e,n)),Ye.test(l)&&ze.test(n)&&(r=u.width,a=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=r,u.minWidth=a,u.maxWidth=o)),l}):o.documentElement.currentStyle&&(je=function(e){return e.currentStyle},Be=function(e,n,i){var r,a,o,s=i||je(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Ye.test(l)&&!qe.test(n)&&(r=u.left,(o=(a=e.runtimeStyle)&&a.left)&&(a.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=r,o&&(a.left=o)),""===l?"auto":l}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&He.test(b.css(e,"display"))?b.swap(e,We,function(){return rt(e,n,r)}):rt(e,n,r):t},set:function(e,t,i){var r=i&&je(e);return nt(0,t,i?it(e,n,i,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,r),r):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return Ve.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(a.replace(Ue,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=Ue.test(a)?a.replace(Ue,r):a+" "+r)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Be,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,i){return i?(i=Be(e,n),Ye.test(i)?b(e).position()[n]+"px":i):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Qe[i]+t]=a[i]||a[i-2]||a[0];return r}},ze.test(e)||(b.cssHooks[e+t].set=nt)});var st=/%20/g,lt=/\[\]$/,ut=/\r?\n/g,dt=/^(?:submit|button|image|reset|file)$/i,ct=/^(?:input|select|textarea|keygen)/i;function ft(e,t,n,i){var r;if(b.isArray(t))b.each(t,function(t,r){n||lt.test(e)?i(e,r):ft(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==b.type(t))i(e,t);else for(r in t)ft(e+"["+r+"]",t[r],n,i)}b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&ct.test(this.nodeName)&&!dt.test(e)&&(this.checked||!Te.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(ut,"\r\n")}}):{name:t.name,value:n.replace(ut,"\r\n")}}).get()}}),b.param=function(e,n){var i,r=[],a=function(e,t){t=b.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){a(this.name,this.value)});else for(i in e)ft(i,e[i],n,a);return r.join("&").replace(st,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ht,pt,mt=b.now(),gt=/\?/,vt=/#.*$/,yt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,bt=/^(?:GET|HEAD)$/,Et=/^\/\//,Tt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,wt=b.fn.load,St={},xt={},It="*/".concat("*");try{pt=a.href}catch(e){(pt=o.createElement("a")).href="",pt=pt.href}function Ct(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(T)||[];if(b.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function At(e,n,i,r){var a={},o=e===xt;function s(l){var u;return a[l]=!0,b.each(e[l]||[],function(e,l){var d=l(n,i,r);return"string"!=typeof d||o||a[d]?o?!(u=d):t:(n.dataTypes.unshift(d),s(d),!1)}),u}return s(n.dataTypes[0])||!a["*"]&&s("*")}function Mt(e,n){var i,r,a=b.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((a[r]?e:i||(i={}))[r]=n[r]);return i&&b.extend(!0,e,i),e}ht=Tt.exec(pt.toLowerCase())||[],b.fn.load=function(e,n,i){if("string"!=typeof e&&wt)return wt.apply(this,arguments);var r,a,o,s=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),b.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),s.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){a=arguments,s.html(r?b("<div>").append(b.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mt(Mt(e,b.ajaxSettings),t):Mt(b.ajaxSettings,e)},ajaxPrefilter:Ct(St),ajaxTransport:Ct(xt),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var i,r,a,o,s,l,u,d,c=b.ajaxSetup({},n),f=c.context||c,h=c.context&&(f.nodeType||f.jquery)?b(f):b.event,p=b.Deferred(),m=b.Callbacks("once memory"),g=c.statusCode||{},v={},y={},_=0,E="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=_t.exec(o);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||E;return u&&u.abort(t),S(0,t),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,c.url=((e||c.url||pt)+"").replace(vt,"").replace(Et,ht[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(T)||[""],null==c.crossDomain&&(i=Tt.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===ht[1]&&i[2]===ht[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),At(St,c,n,w),2===_)return w;for(r in(l=c.global)&&0==b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!bt.test(c.type),a=c.url,c.hasContent||(c.data&&(a=c.url+=(gt.test(a)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=yt.test(a)?a.replace(yt,"$1_="+mt++):a+(gt.test(a)?"&":"?")+"_="+mt++)),c.ifModified&&(b.lastModified[a]&&w.setRequestHeader("If-Modified-Since",b.lastModified[a]),b.etag[a]&&w.setRequestHeader("If-None-Match",b.etag[a])),(c.data&&c.hasContent&&!1!==c.contentType||n.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+It+"; q=0.01":""):c.accepts["*"]),c.headers)w.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(!1===c.beforeSend.call(f,w,c)||2===_))return w.abort();for(r in E="abort",{success:1,error:1,complete:1})w[r](c[r]);if(u=At(xt,c,n,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},c.timeout));try{_=1,u.send(v,S)}catch(e){if(!(2>_))throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,n,i,r){var d,v,y,E,T,S=n;2!==_&&(_=2,s&&clearTimeout(s),u=t,o=r||"",w.readyState=e>0?4:0,d=e>=200&&300>e||304===e,i&&(E=function(e,n,i){var r,a,o,s,l=e.contents,u=e.dataTypes;for(;"*"===u[0];)u.shift(),a===t&&(a=e.mimeType||n.getResponseHeader("Content-Type"));if(a)for(s in l)if(l[s]&&l[s].test(a)){u.unshift(s);break}if(u[0]in i)o=u[0];else{for(s in i){if(!u[0]||e.converters[s+" "+u[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==u[0]&&u.unshift(o),i[o]):t}(c,w,i)),E=function(e,t,n,i){var r,a,o,s,l,u={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];a=d.shift();for(;a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,E,w,d),d?(c.ifModified&&((T=w.getResponseHeader("Last-Modified"))&&(b.lastModified[a]=T),(T=w.getResponseHeader("etag"))&&(b.etag[a]=T)),204===e||"HEAD"===c.type?S="nocontent":304===e?S="notmodified":(S=E.state,v=E.data,d=!(y=E.error))):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),w.status=e,w.statusText=(n||S)+"",d?p.resolveWith(f,[v,S,w]):p.rejectWith(f,[w,S,y]),w.statusCode(g),g=t,l&&h.trigger(d?"ajaxSuccess":"ajaxError",[w,c,d?v:y]),m.fireWith(f,[w,S]),l&&(h.trigger("ajaxComplete",[w,c]),--b.active||b.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return b.get(e,t,n,"json")},getScript:function(e,n){return b.get(e,t,n,"script")}}),b.each(["get","post"],function(e,n){b[n]=function(e,i,r,a){return b.isFunction(i)&&(a=a||r,r=i,i=t),b.ajax({url:e,type:n,dataType:a,data:i,success:r})}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=o.head||b("head")[0]||o.documentElement;return{send:function(t,r){(n=o.createElement("script")).async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Pt=[],Rt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||b.expando+"_"+mt++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,i,r){var a,o,s,l=!1!==n.jsonp&&(Rt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Rt,"$1"+a):!1!==n.jsonp&&(n.url+=(gt.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return s||b.error(a+" was not called"),s[0]},n.dataTypes[0]="json",o=e[a],e[a]=function(){s=arguments},r.always(function(){e[a]=o,n[a]&&(n.jsonpCallback=i.jsonpCallback,Pt.push(a)),s&&b.isFunction(o)&&o(s[0]),s=o=t}),"script"):t});var Dt,kt,Nt=0,Ot=e.ActiveXObject&&function(){var e;for(e in Dt)Dt[e](t,!0)};function Lt(){try{return new e.XMLHttpRequest}catch(e){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Lt()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Lt,kt=b.ajaxSettings.xhr(),b.support.cors=!!kt&&"withCredentials"in kt,(kt=b.support.ajax=!!kt)&&b.ajaxTransport(function(n){var i;if(!n.crossDomain||b.support.cors)return{send:function(r,a){var o,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)l.setRequestHeader(s,r[s])}catch(e){}l.send(n.hasContent&&n.data||null),i=function(e,r){var s,u,d,c;try{if(i&&(r||4===l.readyState))if(i=t,o&&(l.onreadystatechange=b.noop,Ot&&delete Dt[o]),r)4!==l.readyState&&l.abort();else{c={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(c.text=l.responseText);try{d=l.statusText}catch(e){d=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=c.text?200:404}}catch(e){r||a(-1,e)}c&&a(s,d,c,u)},n.async?4===l.readyState?setTimeout(i):(o=++Nt,Ot&&(Dt||(Dt={},b(e).unload(Ot)),Dt[o]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}});var Ft,jt,Bt=/^(?:toggle|show|hide)$/,Ut=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Vt=/queueHooks$/,qt=[function(e,t,n){var i,r,a,o,s,l,u=this,d={},c=e.style,f=e.nodeType&&et(e),h=b._data(e,"fxshow");for(i in n.queue||(null==(s=b._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,b.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==at(e.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",b.support.shrinkWrapBlocks||u.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]})),t)if(r=t[i],Bt.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(f?"hide":"show"))continue;d[i]=h&&h[i]||b.style(e,i)}if(!b.isEmptyObject(d))for(i in h?"hidden"in h&&(f=h.hidden):h=b._data(e,"fxshow",{}),a&&(h.hidden=!f),f?b(e).show():u.done(function(){b(e).hide()}),u.done(function(){var t;for(t in b._removeData(e,"fxshow"),d)b.style(e,t,d[t])}),d)o=Gt(f?h[i]:0,i,u),i in h||(h[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],Ht={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ut.exec(t),a=r&&r[3]||(b.cssNumber[e]?"":"px"),o=(b.cssNumber[e]||"px"!==a&&+i)&&Ut.exec(b.css(n.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+i||1;do{o/=s=s||".5",b.style(n.elem,e,o+a)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=a,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};function zt(){return setTimeout(function(){Ft=t}),Ft=b.now()}function Gt(e,t,n){for(var i,r=(Ht[t]||[]).concat(Ht["*"]),a=0,o=r.length;o>a;a++)if(i=r[a].call(n,t,e))return i}function Yt(e,t,n){var i,r,a=0,o=qt.length,s=b.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ft||zt(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),a=0,o=u.tweens.length;o>a;a++)u.tweens[a].run(i);return s.notifyWith(e,[u,i,n]),1>i&&o?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ft||zt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=b.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),d=u.props;for(function(e,t){var n,i,r,a,o;for(n in e)if(i=b.camelCase(n),r=t[i],a=e[n],b.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(o=b.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(d,u.opts.specialEasing);o>a;a++)if(i=qt[a].call(u,e,d,u.opts))return i;return b.map(d,Gt,u),b.isFunction(u.opts.start)&&u.opts.start.call(e,u),b.fx.timer(b.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function $t(e,t,n,i,r){return new $t.prototype.init(e,t,n,i,r)}function Kt(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i["margin"+(n=Qe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Wt(e){return b.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}b.Animation=b.extend(Yt,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],Ht[n]=Ht[n]||[],Ht[n].unshift(t)},prefilter:function(e,t){t?qt.unshift(e):qt.push(e)}}),b.Tween=$t,$t.prototype={constructor:$t,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(b.cssNumber[n]?"":"px")},cur:function(){var e=$t.propHooks[this.prop];return e&&e.get?e.get(this):$t.propHooks._default.get(this)},run:function(e){var t,n=$t.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$t.propHooks._default.set(this),this}},$t.prototype.init.prototype=$t.prototype,$t.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},$t.propHooks.scrollTop=$t.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Kt(t,!0),e,i,r)}}),b.fn.extend({fadeTo:function(e,t,n,i){return this.filter(et).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=b.isEmptyObject(e),a=b.speed(t,n,i),o=function(){var t=Yt(this,b.extend({},e),a);(r||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",a=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&Vt.test(n)&&r(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(i),t=!1,a.splice(n,1));(t||!i)&&b.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=b.timers,o=i?i.length:0;for(n.finish=!0,b.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),b.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),b.speed=function(e,t,n){var i=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return i.duration=b.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in b.fx.speeds?b.fx.speeds[i.duration]:b.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){b.isFunction(i.old)&&i.old.call(this),i.queue&&b.dequeue(this,i.queue)},i},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=$t.prototype.init,b.fx.tick=function(){var e,n=b.timers,i=0;for(Ft=b.now();n.length>i;i++)(e=n[i])()||n[i]!==e||n.splice(i--,1);n.length||b.fx.stop(),Ft=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){jt||(jt=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(jt),jt=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,i,a={top:0,left:0},o=this[0],s=o&&o.ownerDocument;return s?(n=s.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==r&&(a=o.getBoundingClientRect()),i=Wt(s),{top:a.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:a.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):a):void 0},b.offset={setOffset:function(e,t,n){var i=b.css(e,"position");"static"===i&&(e.style.position="relative");var r,a,o=b(e),s=o.offset(),l=b.css(e,"top"),u=b.css(e,"left"),d={},c={};("absolute"===i||"fixed"===i)&&b.inArray("auto",[l,u])>-1?(r=(c=o.position()).top,a=c.left):(r=parseFloat(l)||0,a=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+r),null!=t.left&&(d.left=t.left-s.left+a),"using"in t?t.using.call(e,d):o.css(d)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===b.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(i,"marginTop",!0),left:t.left-n.left-b.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position");)e=e.offsetParent;return e||s})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);b.fn[e]=function(r){return b.access(this,function(e,r,a){var o=Wt(e);return a===t?o?n in o?o[n]:o.document.documentElement[r]:e[r]:(o?o.scrollTo(i?b(o).scrollLeft():a,i?a:b(o).scrollTop()):e[r]=a,t)},e,r,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){b.fn[r]=function(r,a){var o=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===a?"margin":"border");return b.access(this,function(n,i,r){var a;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):r===t?b.css(n,i,s):b.style(n,i,r,s)},n,o?r:t,o,null)}})}),b.fn.size=function(){return this.length},b.fn.andSelf=b.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=b:(e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define("jquery",[],function(){return b}))}(window),define("config",[],function(){return{activeApiUser:"dev",ANYNYMOUS_ID_PREFIX:"arpeggio-player__anonymous-user__",ANONYMOUS_ID_KEY:"arpeggioPlayerAnonymousId",apiUsers:{production:{url:"//api.viddler.com/api/v2/",apiKey:"v0vhrt7bg2xq1vyxhkct"},locallive:{url:"//api.viddler.com/api/v2/",apiKey:"v0vhrt7bg2xq1vyxhkct"},staginglive:{url:"//api.viddler.com/api/v2/",apiKey:"v0vhrt7bg2xq1vyxhkct"},development:{url:"//api.development.nyc.viddler.com/api/v2/",apiKey:"ea3c8od6amzq1jfcnhjh"},staging:{url:"//api.staging.xand.viddler.com/api/v2/",apiKey:"ea3c8od6amzq1jfcnhjh"},alpha:{url:"//api.development.viddler.com/api/v2/",apiKey:"ea3c8od6amzq1jfcnhjh"},local:{url:"//api.staging.xand.viddler.com/api/v2/",apiKey:"ea3c8od6amzq1jfcnhjh"},invalid:{url:"//api.staging.xand.viddler.com/api/v2/",apiKey:"invalid"},"3.2-wip":{url:"//api.staging.xand.viddler.com/api/v2/",apiKey:"ea3c8od6amzq1jfcnhjh"}},apiV3Users:{production:{url:"//api.viddler.com/api/v3/"},staging:{url:"//api.staging.xand.viddler.com/api/v3/"},local:{url:"//api.staging.xand.viddler.com/api/v3/"}},apiV3Users:{production:{url:"//api.viddler.com/api/v3/",questions:{feedbackEndpoint:"//api.viddler.com/api/v3/questions/{id}/users-answers"}},staging:{url:"//api.staging.xand.viddler.com/api/v3/",questions:{feedbackEndpoint:"//api.staging.xand.viddler.com/api/v3/questions/{id}/users-answers"}},local:{url:"//api.staging.xand.viddler.com/api/v3/",questions:{feedbackEndpoint:"//api.staging.xand.viddler.com/api/v3/questions/{id}/users-answers"}}},libraryUrls:{production:"//static.cdn-ec.viddler.com/js/arpeggio/v3",development:"//development-static.cdn-ec.viddler.com/js/arpeggio/v3",staging:"//development-static.cdn-ec.viddler.com/js/arpeggio/v3",alpha:"//development-static.cdn-ec.viddler.com/js/arpeggio/v3",local:"//127.0.0.1:8080",locallive:"//local.arpeggio.viddler.com",staginglive:"//development-static.cdn-ec.viddler.com/js/arpeggio/v3","3.2-wip":"//development-static.cdn-ec.viddler.com/js/arpeggio/v3.2-wip"},DEBUG:!1,tDEBUG:!1}}),define("logger",["config","jquery","viddler-embed"],function(e,t,n){for(var i={},r=["log","debug","warn","info"],a=0;a<r.length;a++){var o=r[a];i[o]=function(e){var n=Array.prototype.slice.call(arguments);require(["viddler-embed"],function(e){e.logging&&window.console&&(n.unshift("[ViddlerPlayer]"),console[o].apply(console,n),t(".viddler-console").append("<p>"+n+"</p>"))})}}return i}),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,a=i.slice,o=i.splice;(e="undefined"!=typeof exports?exports:t.Backbone={}).VERSION="1.0.0";var s=t._;s||void 0===require||(s=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(e,t,n){return d(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var i=this,r=s.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,a,o,l,u,c,f;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(l=0,u=(o=e?[e]:s.keys(this._events)).length;l<u;l++)if(e=o[l],a=this._events[e]){if(this._events[e]=i=[],t||n)for(c=0,f=a.length;c<f;c++)r=a[c],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;for(var a in"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e),i)i[a].off(t,n,this),r&&delete this._listeners[a];return this}},u=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var a=n.split(u),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,r=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}};s.each({listenTo:"on",listenToOnce:"once"},function(e,t){l[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=s.uniqueId("l"))]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,s.extend(e,l);var f=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(t,h)),t.parse&&(i=this.parse(i,t)||{}),(n=s.result(this,"defaults"))&&(i=s.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},h=["url","urlRoot","collection"];s.extend(f.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return s.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,a,o,l,u,d,c;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;for(i in a=n.unset,l=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=s.clone(this.attributes),this.changed={}),c=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)t=r[i],s.isEqual(c[i],t)||o.push(i),s.isEqual(d[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete c[i]:c[i]=t;if(!l){o.length&&(this._pending=!0);for(var f=0,h=o.length;f<h;f++)this.trigger("change:"+o[f],this,c[o[f]],n)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,s.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s.isEmpty(this.changed):s.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&s.clone(this.changed);var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)s.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?s.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){if(!t.set(t.parse(i,e),e))return!1;n&&n(t,i,e),t.trigger("sync",t,i,e)},D(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,r,a,o=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=s.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(e){l.attributes=o;var t=l.parse(e,n);if(n.wait&&(t=s.extend(i||{},t)),s.isObject(t)&&!l.set(t,n))return!1;u&&u(l,e,n),l.trigger("sync",l,e,n)},D(this,n),"patch"===(r=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),a=this.sync(r,this,n),i&&n.wait&&(this.attributes=o),a},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;D(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=s.result(this,"urlRoot")||s.result(this.collection,"url")||R();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,s.extend(t||{},{validationError:n})),!1)}});s.each(["keys","values","pairs","invert","pick","omit"],function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),s[e].apply(s,t)}});var p=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,merge:!1,remove:!1};s.extend(p.prototype,l,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,s.defaults(t||{},g))},remove:function(e,t){var n,i,r,a;for(t||(t={}),n=0,i=(e=s.isArray(e)?e.slice():[e]).length;n<i;n++)(a=this.get(e[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},set:function(e,t){var n,i,a,l,u;(t=s.defaults(t||{},m)).parse&&(e=this.parse(e,t)),s.isArray(e)||(e=e?[e]:[]);var d=t.at,c=this.comparator&&null==d&&!1!==t.sort,f=s.isString(this.comparator)?this.comparator:null,h=[],p=[],g={};for(n=0,i=e.length;n<i;n++)(a=this._prepareModel(e[n],t))&&((l=this.get(a))?(t.remove&&(g[l.cid]=!0),t.merge&&(l.set(a.attributes,t),c&&!u&&l.hasChanged(f)&&(u=!0))):t.add&&(h.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)));if(t.remove){for(n=0,i=this.length;n<i;++n)g[(a=this.models[n]).cid]||p.push(a);p.length&&this.remove(p,t)}if(h.length&&(c&&(u=!0),this.length+=h.length,null!=d?o.apply(this.models,[d,0].concat(h)):r.apply(this.models,h)),u&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=h.length;n<i;n++)(a=h[n]).trigger("add",a,this,t);return u&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return s.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=s.isFunction(t)?t:function(e){return e.get(t)};return s.sortedIndex(this.models,e,i,n)},pluck:function(e){return s.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?s.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},D(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?s.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});s.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){p.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),s[e].apply(s,t)}});s.each(["groupBy","countBy","sortBy"],function(e){p.prototype[e]=function(t,n){var i=s.isFunction(t)?t:function(e){return e.get(t)};return s[e](this.models,i,n)}});var v=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];s.extend(v.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),n){var i=t.match(y),r=i[1],a=i[2];n=s.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),s.extend(this,s.pick(e,_)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t.class=s.result(this,"className"));var n=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var r=b[t];s.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(i.url||(a.url=s.result(n,"url")||R()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",i.emulateJSON&&(a.data._method=r);var o=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"!==a.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=e.ajax(s.extend(a,i));return n.trigger("request",n,l,i),l};var b={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,S=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(E.prototype,l,{initialize:function(){},route:function(t,n,i){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return e.history.route(t,function(a){var o=r._extractParameters(t,a);i&&i.apply(r,o),r.trigger.apply(r,["route:"+n].concat(o)),r.trigger("route",n,o),e.history.trigger("route",r,n,o)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var e,t=s.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(x,"\\$&").replace(T,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return s.map(n,function(e){return e?decodeURIComponent(e):null})}});var I=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,M=/msie [\w.]+/,P=/\/$/;I.started=!1,s.extend(I.prototype,l,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(C,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=M.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(A,"../../index.html"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!I.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new I;f.extend=p.extend=E.extend=v.extend=I.extend=function(e,t){var n,i=this;n=e&&s.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&s.extend(n.prototype,e),n.__super__=i.prototype,n};var R=function(){throw new Error('A "url" property or function must be specified')},D=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){return e.Backbone}}(this)),define("humps",["require","exports","module"],function(e,t,n){!function(e){var t=function(e,n,i){if(!s(n)||u(n)||d(n))return n;var r,a=0,o=0;if(l(n))for(r=[],o=n.length;a<o;a++)r.push(t(e,n[a],i));else for(var c in r={},n)if(n.hasOwnProperty(c)){var f=n[c];if(l(f)){var h=[];for(a=0,o=f.length;a<o;a++)h.push(t(e,f[a],i));r[e(c,i)]=h}else s(f)?r[e(c,i)]=t(e,f,i):r[e(c,i)]=f}return r},i=function(e){return(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).replace(/^([A-Z])/,function(e,t){return t?t.toLowerCase():""})},r=function(e){return i(e).replace(/^([a-z])/,function(e,t){return t?t.toUpperCase():""})},a=function(e,t){return function(e,t){return void 0===t&&(t="_"),e.replace(/([a-z])([A-Z0-9])/g,"$1"+t+"$2")}(e,t).toLowerCase()},o=Object.prototype.toString,s=function(e){return e===Object(e)},l=function(e){return"[object Array]"==o.call(e)},u=function(e){return"[object Date]"==o.call(e)},d=function(e){return"[object RegExp]"==o.call(e)},c={camelize:i,decamelize:a,pascalize:r,depascalize:a,camelizeKeys:function(e){return t(i,e)},decamelizeKeys:function(e,n){return t(a,e,n)},pascalizeKeys:function(e){return t(r,e)},depascalizeKeys:this.decamelizeKeys};void 0!==n&&n.exports?n.exports=c:e.humps=c}(this)}),define("modernizr",[],function(){var e=function(e,t,n){var i,r,a={},o=t.documentElement,s="modernizr",l=t.createElement(s),u=l.style,d=t.createElement("input"),c=":)",f={}.toString,h=" -webkit- -moz- -o- -ms- ".split(" "),p="Webkit Moz O ms".split(" "),m="Webkit Moz O ms".toLowerCase().split(" "),g="http://www.w3.org/2000/svg",v={},y={},_={},b=[],E=b.slice,T=function(e,n,i,r){var a,l,u,d,c=t.createElement("div"),f=t.body,h=f||t.createElement("body");if(parseInt(i,10))for(;i--;)(u=t.createElement("div")).id=r?r[i]:s+(i+1),c.appendChild(u);return a=["&#173;",'<style id="s',s,'">',e,"</style>"].join(""),c.id=s,(f?c:h).innerHTML+=a,h.appendChild(c),f||(h.style.background="",h.style.overflow="hidden",d=o.style.overflow,o.style.overflow="hidden",o.appendChild(h)),l=n(c,e),f?c.parentNode.removeChild(c):(h.parentNode.removeChild(h),o.style.overflow=d),!!l},w=function(){var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(i,r){r=r||t.createElement(e[i]||"div");var a=(i="on"+i)in r;return a||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(i,""),a=I(r[i],"function"),I(r[i],"undefined")||(r[i]=n),r.removeAttribute(i))),r=null,a}}(),S={}.hasOwnProperty;function x(e){u.cssText=e}function I(e,t){return typeof e===t}function C(e,t){return!!~(""+e).indexOf(t)}function A(e,t){for(var i in e){var r=e[i];if(!C(r,"-")&&u[r]!==n)return"pfx"!=t||r}return!1}function M(e,t,i){var r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+p.join(r+" ")+r).split(" ");return I(t,"string")||I(t,"undefined")?A(a,t):function(e,t,i){for(var r in e){var a=t[e[r]];if(a!==n)return!1===i?e[r]:I(a,"function")?a.bind(i||t):a}return!1}(a=(e+" "+m.join(r+" ")+r).split(" "),t,i)}for(var P in r=I(S,"undefined")||I(S.call,"undefined")?function(e,t){return t in e&&I(e.constructor.prototype[t],"undefined")}:function(e,t){return S.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=E.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var a=new r,o=t.apply(a,n.concat(E.call(arguments)));return Object(o)===o?o:a}return t.apply(e,n.concat(E.call(arguments)))};return i}),v.flexbox=function(){return M("flexWrap")},v.flexboxlegacy=function(){return M("boxDirection")},v.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},v.canvastext=function(){return!(!a.canvas||!I(t.createElement("canvas").getContext("2d").fillText,"function"))},v.webgl=function(){return!!e.WebGLRenderingContext},v.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",h.join("touch-enabled),("),s,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},v.geolocation=function(){return"geolocation"in navigator},v.postmessage=function(){return!!e.postMessage},v.websqldatabase=function(){return!!e.openDatabase},v.indexedDB=function(){return!!M("indexedDB",e)},v.hashchange=function(){return w("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},v.history=function(){return!(!e.history||!history.pushState)},v.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},v.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},v.rgba=function(){return x("background-color:rgba(150,255,150,.5)"),C(u.backgroundColor,"rgba")},v.hsla=function(){return x("background-color:hsla(120,40%,100%,.5)"),C(u.backgroundColor,"rgba")||C(u.backgroundColor,"hsla")},v.multiplebgs=function(){return x("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(u.background)},v.backgroundsize=function(){return M("backgroundSize")},v.borderimage=function(){return M("borderImage")},v.borderradius=function(){return M("borderRadius")},v.boxshadow=function(){return M("boxShadow")},v.textshadow=function(){return""===t.createElement("div").style.textShadow},v.opacity=function(){var e,t;return e="opacity:.55",x(h.join(e+";")+(t||"")),/^0.55$/.test(u.opacity)},v.cssanimations=function(){return M("animationName")},v.csscolumns=function(){return M("columnCount")},v.cssgradients=function(){var e="background-image:";return x((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+h.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),C(u.backgroundImage,"gradient")},v.cssreflections=function(){return M("boxReflect")},v.csstransforms=function(){return!!M("transform")},v.csstransforms3d=function(){var e=!!M("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},v.csstransitions=function(){return M("transition")},v.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https:///")}',function(n,i){var r=t.getElementById("smodernizr"),a=r.sheet||r.styleSheet,o=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"";e=/src/i.test(o)&&0===o.indexOf(i.split(" ")[0])}),e},v.generatedcontent=function(){var e;return T(["#",s,"{font:0/0 a}#",s,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},v.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&((n=new Boolean(n)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return n},v.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&((n=new Boolean(n)).ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return n},v.localstorage=function(){try{return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch(e){return!1}},v.sessionstorage=function(){try{return sessionStorage.setItem(s,s),sessionStorage.removeItem(s),!0}catch(e){return!1}},v.webworkers=function(){return!!e.Worker},v.applicationcache=function(){return!!e.applicationCache},v.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g,"svg").createSVGRect},v.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g},v.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(f.call(t.createElementNS(g,"animate")))},v.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(f.call(t.createElementNS(g,"clipPath")))},v)r(v,P)&&(i=P.toLowerCase(),a[i]=v[P](),b.push((a[i]?"":"no-")+i));return a.input||(a.input=function(n){for(var i=0,r=n.length;i<r;i++)_[n[i]]=!!(n[i]in d);return _.list&&(_.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),_}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),a.inputtypes=function(e){for(var i,r,a,s=0,l=e.length;s<l;s++)d.setAttribute("type",r=e[s]),(i="text"!==d.type)&&(d.value=c,d.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&d.style.WebkitAppearance!==n?(o.appendChild(d),i=(a=t.defaultView).getComputedStyle&&"textfield"!==a.getComputedStyle(d,null).WebkitAppearance&&0!==d.offsetHeight,o.removeChild(d)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?d.checkValidity&&!1===d.checkValidity():d.value!=c)),y[e[s]]=!!i;return y}("search tel url email datetime date month week time datetime-local number range color".split(" "))),a.addTest=function(e,t){if("object"==typeof e)for(var i in e)r(e,i)&&a.addTest(i,e[i]);else{if(e=e.toLowerCase(),a[e]!==n)return a;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(t?"":"no-")+e),a[e]=t}return a},x(""),l=d=null,a._version="2.8.2",a._prefixes=h,a._domPrefixes=m,a._cssomPrefixes=p,a.hasEvent=w,a.testProp=function(e){return A([e])},a.testAllProps=M,a.testStyles=T,a.prefixed=function(e,t,n){return t?M(e,t,n):M(e,"pfx")},a}(this,this.document);return e.addTest("object-fit",!!e.prefixed("objectFit")),e}),define("util",["jquery","humps","logger","modernizr"],function(e,t,i,r){var a,o,s,l,u,d,c={};return c.timeSince=function(e){var t=Math.floor((new Date-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3))>1?n+" months":(n=Math.floor(t/86400))>1?n+" days":(n=Math.floor(t/3600))>1?n+" hours":(n=Math.floor(t/60))>1?n+" minutes":Math.floor(t)+" seconds"},c.secs2time=function(e){e=parseInt(e);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=(e=e-3600*t-60*n,"");return 0!==t?(i=this._padTimeSegment(t)+":",i+=this._padTimeSegment(n)+":"):i+=n+":",i+=this._padTimeSegment(e)},c.inWords=function(e,t){var i=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "];if((e=e.toString()).length>9)return"";if(n=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/),n){var r="";return r+=0!=n[5]?(""!=r?"and ":"")+(i[Number(n[5])]||["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][n[5][0]]+""+i[n[5][1]]):"",t&&e>0&&e<10&&(r="oh "+r),r}},c.timeToWords=function(e){e=parseInt(e);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=(e=e-3600*t-60*n,"");return 0!==t?(i=this.inWords(t),i+=this.inWords(n,!0),i+=this.inWords(e,!0)):n>0?(i+=this.inWords(n),i+=this.inWords(e,!0)):i+=this.inWords(e),i},c._padTimeSegment=function(e){return e<10?"0"+e:String(e)},c.time2secs=function(e){var t,n,i,r=e.split(":");return 3==r.length?(t=parseInt(r[0]),n=parseInt(r[1]),i=parseInt(r[2])):(t=0,n=parseInt(r[0]),i=parseInt(r[1])),60*t*60+60*n+i},c.formatDate=function(e){return e.getFullYear()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()},c.browser=(o=navigator.appName,s=navigator.userAgent,(l=s.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(a=s.match(/version\/([\.\d]+)/i))&&(l[2]=a[1]),l=l?[l[1],l[2]]:[o,navigator.appVersion,"-?"]),c.matrix={flashBrowser:(u=!1,"Firefox"===c.browser[0]&&(u=!0),"MSIE"===c.browser[0]&&0===c.browser[1].indexOf(8)&&(u=!0),u),ios:navigator.userAgent.match(/(iPod|iPhone|iPad)/),iPhone:navigator.userAgent.match(/(iPhone)/),iPad:navigator.userAgent.match(/(iPad)/),android:navigator.userAgent.match(/(Android)/),chrome:"Chrome"===c.browser[0],chrome:"Chrome"===c.browser[0],safari:"Safari"===c.browser[0],windows:navigator.userAgent.match(/Windows/),ie8:"MSIE"===c.browser[0]&&0===c.browser[1].indexOf(8),msie:"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),nocors:"MSIE"===c.browser[0]&&parseInt(c.browser[1])<=9},c.ios=navigator.userAgent.match(/(iPod|iPhone|iPad)/),c.ie8=(d=!1,"Firefox"===c.browser[0]&&(d=!0),"MSIE"===c.browser[0]&&0===c.browser[1].indexOf(8)&&(d=!0),d),c.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},c.getCommentDisplayName=function(t,n,i){var r=e.Deferred();return n.custom_user_identifier?t.customUserLookup(n.custom_user_identifier,function(e){i(e.username),r.resolve()}):(i(n.author),r.resolve()),r.promise()},c.urlFragmentObject=function(){for(var e,t={},n=/\+/g,i=/([^&;=]+)=?([^&;]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a=window.location.hash.substring(1);e=i.exec(a);)t[r(e[1])]=r(e[2]);return t},c.isValidEmail=function(e){return/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)},c.setUrlProtocol=function(e){var t=window.location.protocol;return"http:"!=t&&"https:"!=t&&(t="adverbs-frequency.html"),t+e},c.linkify=function(e){var t='$1<a href="$2" target="_blank">$2</a>';return e=(e=e.replace(/([^"])(https?:\/\/[a-zA-Z0-9\.\-\/]+(?:\?[a-zA-Z0-9=\&]+)?(?:#[\w]+)?)/gi,t)).replace(/^()(https?:\/\/[a-zA-Z0-9\.\-\/]+(?:\?[a-zA-Z0-9=\&]+)?(?:#[\w]+)?)/i,t)},c.supportedVideoExtensions=function(){var e=["mp4"];return r.hls&&e.push("m3u8"),!this.matrix.msie&&window.dashjs&&(window.WebKitMediaSource||window.MediaSource)&&e.push("mpd"),e},r.addTest("hls",function(){var e=navigator.userAgent,t=document.createElement("video");if(e.match(/iPhone|iPod|iPad/))return!0;try{return t&&t.canPlayType&&!!t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E, mp4a.40.2"')}catch(e){return!1}}),c}),define("lib/screenfull",["require","exports","module"],function(e,t,n){!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=void 0!==n&&n.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,a={};i<r;i++)if((t=n[i])&&t[1]in e){for(i=0;i<t.length;i++)a[n[0][i]]=t[i];return a}return!1}(),a={change:r.fullscreenchange,error:r.fullscreenerror},o={request:function(t){var n=r.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[n]():t[n](i?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){e[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(t,n){var i=a[t];i&&e.addEventListener(i,n,!1)},off:function(t,n){var i=a[t];i&&e.removeEventListener(i,n,!1)},raw:r};r?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),t?n.exports=o:window.screenfull=o):t?n.exports=!1:window.screenfull=!1}()}),define("views/baseviews",["logger","underscore","jquery","backbone","util","lib/screenfull","modernizr"],function(e,t,n,i,r,a,o){var s={};return s.BaseView=i.View.extend({tag:"div",el:"<br/>",keyCode:Object.freeze({left:37,up:38,right:39,down:40,space:32,enter:13,esc:27,tab:9}),__init:function(e){(e=e||{}).tmp&&(this.template=this.embed.manager.retrieveTemplate(e.tmp))},initialize:function(e){this.__init(e)},render:function(){this.$el.html(this.template())},hideAllModals:function(){this.embed.target.find(".modal-outer").hide(),t.each(this.embed.visibleModals,function(e){e.hide()})},anyModalsAreVisible:function(){return this.embed.target.find(".modal-outer:visible").length>0},embedHeight:function(){return this.embed.target.height()},inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},hideElement:function(){this.$el.hide().addClass("hidden")},showElement:function(){this.$el.show().removeClass("hidden")}}),s.ResourceView=s.BaseView.extend({name:"",resourceData:{},activate:function(){},deactivate:function(){},resourceLoaded:function(){this.resourceIsLoaded||(this.resourceIsLoaded=!0,this.embed.manager.resourceLoaded({type:this.resourceType,subType:this.name,guid:this.guid}))},resourceLoadedWhenDeferredObjectsComplete:function(){var e=this;n.when.apply(n,this.deferredObjects).done(function(){e.resourceLoaded()})},load:function(){this.resourceLoadedWhenDeferredObjectsComplete()},_initResource:function(e){this.resourceIsLoaded=!1,this.initializationParameters=e,this.resourceData=e.resourceData,this.guid=e.guid,this.embed=e.embed,this.deferredObjects=[],this.setupEventListeners(),this.bindPlayerEventCallbacks(),this.__init(e)},bindPlayerEventCallbacks:function(){if(this.playerEvents)for(var e in this.playerEvents){var n=this.playerEvents[e];this[n]=t.bind(this[n],this)}},setupEventListeners:function(){var e=this;a.enabled&&document.addEventListener(a.raw.fullscreenchange,function(t){e._ensureEnoughRoom()}),n(window).on("resize",function(){e._ensureEnoughRoom()})},_ensureEnoughRoom:function(){this.iconSettings&&this.$el&&this.minimumHeightRequired&&this.embed.mainView.gui&&(this.embed.target.find(".viddler-embed").height()>=this.minimumHeightRequired?this.showElement():this.hideElement())},activate:function(){var e=this;if(("function"!=typeof this.supported||this.supported())&&(this.iconSettings&&this.embed.mainView.gui&&(this.$el=this.embed.mainView.gui.addIcon(this.iconSettings),this.$el.on("click",function(t){t.preventDefault(),e.toggleModalVisibility()}),e._ensureEnoughRoom()),this.playerEvents))for(var t in this.playerEvents){var n=this[this.playerEvents[t]];this.embed.manager.events.on(t,n)}},removePlayerEventListeners:function(){if(this.playerEvents)for(var e in this.playerEvents){var t=this[this.playerEvents[e]];this.embed.manager.events.off(e,t)}},deactivate:function(){this.removePlayerEventListeners(),this.$el.remove(),this.modal&&this.modal.hide()},showToolTip:function(){o.touch||this.modal&&this.modal.visible()||(this.embed.toolTip=new s.Tooltip(t.extend(this.iconSettings.toolTip,{manager:this.manager,embed:this.embed,icon:this.$el,title:this.manager.localizer.translate("sub_modules."+this.name+".tooltip.title"),description:this.manager.localizer.translate("sub_modules."+this.name+".tooltip.description")})))},hideToolTip:function(){this.embed.toolTip&&this.embed.toolTip.remove()},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),i.View.prototype.remove.call(this),this.remove(),this.modal&&this.modal.remove(),this.$el.remove()},exitFullScreen:function(){},toggleModalVisibility:function(e){this.hideToolTip(),this.modal&&this.modal.toggleVisibility()}}),s.ModalView=s.BaseView.extend({rendered:!1,hideOtherModalsOnShow:!0,accessibilityMode:!1,initialize:function(e){this.__init(e)},__init:function(e){s.BaseView.prototype.__init.call(this,e),this.embed=e.embed,this.manager=e.manager,this.accessibilityMode=!!e.embed.mainView.settings.accessibility,this.setupResizeHandler()},setupResizeHandler:function(){var e=this;this.embed.manager.events.on("player:resize gui:minimalInterfaceShown gui:fullInterfaceShown",function(){e.visible()&&e.positionModal()})},render:function(e){this.__render(e)},__render:function(e){var t=e||{},i=this;if(this.$el=n(this.manager.retrieveTemplate(this.template,t)),this.triangle&&this.$el.append('<div class="triangle '+this.triangle+'"></div>'),this.icon)var r=this.icon.parent();else r=this.embed.target.find(".viddler-embed");r.append(this.$el),this.$el.find(".modal-close").click(function(e){e.preventDefault(),i.hide()}),this.rendered=!0},hide:function(){this.$el.off("keydown"),this.hideElement();var e=n.inArray(this,this.embed.visibleModals);e>=0&&this.embed.visibleModals.splice(e,1),this.pluginMain&&this.pluginMain.iconSettings&&(this.pluginMain.$el.attr("aria-expanded",!1),this.pluginMain.$el.removeClass("alternative")),this.isToolTip||this.$el.parents(".gui").removeClass("has-modal-showing"),this.embed.manager.events.trigger("modal:modalHidden")},remove:function(){this.hide(),this.rendered=!1,i.View.prototype.remove.call(this)},show:function(e){this.rendered||(this.render(e),this.delegateEvents()),this.hideOtherModalsOnShow&&this.hideAllModals(),this.embed.visibleModals.push(this),this.pluginMain&&this.pluginMain.iconSettings&&(this.pluginMain.$el.addClass("alternative"),this.pluginMain.$el.attr("aria-expanded",!0)),this.showElement(),this.positionModal(),this.$el.hasClass("picker")&&(this.$("ul a:not([tabindex])").attr("tabindex",this.embed.tabIndexStart),this.$('ul a:not([tabindex="-1"]):first').focus()),this.focusAfterShow&&this.embed.mainView.hasFocus()&&this.embed.mainView.focusWithoutScroll(this.$(this.focusAfterShow).first());var t=this;this.$el.on("keydown",function(e){t.modalSwitchOptions(e)}),this.isToolTip||this.$el.parents(".gui").addClass("has-modal-showing"),this.embed.manager.events.trigger("modal:modalShown")},modalSwitchOptions:function(e){if(!(n.inArray(e.which,[this.keyCode.up,this.keyCode.down,this.keyCode.tab])<0))if(e.which!=this.keyCode.tab){var t=this.$el[0].children[0].getElementsByTagName("ul")[0].getElementsByTagName("li"),i=parseInt(document.activeElement.dataset.index);e.which==this.keyCode.down&&(i+=1)>=t.length&&(i=0),e.which==this.keyCode.up&&(i-=1)<0&&(i=t.length-1),t[i].getElementsByTagName("a")[0].focus(),e.preventDefault()}else{var r=n(e.target);if(r.is("textarea")||r.is("input:text")||"email"==r.context.type)return;this.hideAllModals()}},visible:function(){return this.$el.is(":visible")},toggleVisibility:function(){this.visible()?this.alwaysRemoveInsteadOfHide?this.remove():this.hide():this.show()},positionModalCentral:function(){var e=this.embed.target.find(".viddler-embed"),t=this.embed.mainView.$(".top-bar").is(":visible")?41:0,n=e.height()-71-t,i=e.width();this.$(".modal-container").css("max-height",n);var r=i/2-this.$el.outerWidth()/2,a=n/2-this.$el.outerHeight()/2;a<0&&(a=0),r<0&&(r=0),a+=t,this.$el.css({left:r,top:a})},positionModal:function(){if(this.icon){var e=this.embed.target.find(".viddler-embed"),t=this.$(".modal-container"),n={};if(this.$el.hasClass("picker"))var i=e.height()-110;else i=e.height()-150;t.css("max-height",i),this.$el.hasClass("picker")&&(t.prop("scrollHeight")>t.outerHeight()?this.extraWidthForScrollBarsAdded||(this.extraWidthForScrollBarsAdded=!0,this.$el.css("width","auto !important")):(this.extraWidthForScrollBarsAdded=!1,this.$el.css("width","auto")));var r=this.icon.parent(),a=r.offset(),o=this.$el.outerWidth(),s=e.width(),l=r.width(),u=e.offset(),d=-o/2+l/2,c=-(a.left-u.left),f=c+s-o;this.$(".modal-close").length>0&&(f-=14),n.left=d<c?c:d>f?f:d,"up"==this.triangle?n.top=58:(n.bottom=a.top-this.embed.mainView.$(".total-time-bar").offset().top,r.is(".timeline-element-icon-wrapper")?n.bottom+=70:n.bottom+=66),this.$el.css(n);var h=n.left;h=l/2-20-n.left;this.$el.find(".triangle").css({left:h})}else this.positionModalCentral()},isInDom:function(){return this.$el.parents("html").length>0}}),s.ErrorMsgView=s.ModalView.extend({template:"#tmp-error-modal",initialize:function(t){e.log("show error",t),this.__render(t)}}),s.Tooltip=s.ModalView.extend({isToolTip:!0,template:"#tmp-tooltip",initialize:function(e){t.extend(this,e),this.__render(e),this.positionModal()}}),s.MediaElement=s.ResourceView.extend({resourceType:"mediaElement",mandatorySubModules:{},duration:0,timelineIconOffset:0,subModules:{},linear:!0,_initResource:function(e){this.subModules={},s.ResourceView.prototype._initResource.call(this,e),e.duration&&(this.duration=e.duration),this.timelineStart=e.timelineStart,this.timelineEnd=this.timelineStart+this.duration,this.track=e.track,this.registerSubModules(),this.activatable=!0},registerSubModules:function(){var e=this,t=n.extend(!0,{},this.mandatorySubModules,this.initializationParameters.sub_modules);t&&(n.each(t,function(t,n){n.guid=r.guid(),e.embed.manager.registerResource({type:"subModule",subType:t,guid:n.guid})}),n.each(t,function(t,n){e.embed.manager.requireResource({type:"subModule",name:t},function(i){e.subModules[t]=new i.View({mainView:e.mainView,embed:e.embed,mediaElement:e,resourceData:n,templatePath:"sub_modules/"+t+"/templates.html",guid:n.guid}),e.subModules[t].load()})}))},activate:function(){this.activated=!0,this.showElement(),n.each(this.subModules,function(e,t){t.activate()}),s.ResourceView.prototype.activate.call(this),this.embed.manager.events.trigger("mediaElement:activated",this)},deactivate:function(){this.activated=!1,this.removePlayerEventListeners(),this.hideElement(),n.each(this.subModules,function(e,t){t.deactivate()}),this.embed.manager.events.trigger("mediaElement:deactivated",this)},destroy:function(){(n.each(this.subModules,function(e,t){t.destroy()}),this.embed.mainView.gui)&&this.embed.mainView.gui.$('.timeline-media-element-marker[data-guid="'+this.guid+'"]').remove();this.track.removeMediaElement(this),s.ResourceView.prototype.destroy.call(this)}}),s.SubModule=s.ResourceView.extend({resourceType:"subModule",moduleSettings:{},_initResource:function(e){s.ResourceView.prototype._initResource.call(this,e),this.mediaElement=e.mediaElement,this.manager=this.mediaElement.embed.manager}}),s.Feature=s.ResourceView.extend({resourceType:"feature"}),s}),define("api-v2",["logger","jquery","underscore","config","util"],function(e,t,n,i,r){var a,o,s,l={},u={getDetails:"player.videos.get.json",getPlaybackDetails:"viddler.videos.getPlaybackDetails.json",addComment:"viddler.arpeggio.comments.add.json",deleteComment:"viddler.videos.comments.delete.json",getComments:"viddler.videos.comments.getPlaybackDetails.json",recordPlayback:"viddler.videos.reportPlayback.json",addEmbedInfo:"viddler.arpeggio.embedinfo.add.json",shareByEmail:"player.mail.add.json",getPlaylist:"player.playlists.getDetails.json"};function d(e){a=i.apiUsers[e.environment],o=a.apiKey,s=a.url;var l=r.setUrlProtocol(s+u[e.command]);return window.XDomainRequest&&e.command.match(/get/)&&(l+="p"),e.params=e.params||{},n.extend(e.params,{key:o}),l+="?"+t.param(e.params)}function c(e,n){return window.XDomainRequest||e.forceJsonP?(t.extend(e,{dataType:"jsonp",timeout:4e3}),t.ajax(e).success(function(e,e,t){n&&n(t,"success")}).error(function(e){n&&n(e,"success")})):t.ajax(e).complete(n)}return l.getDetails=function(e,t){var n={video_id:e.id};return e.secret&&(n.secret=e.secret),c({url:d({environment:e.environment,command:"getDetails",params:n}),type:"GET",timeout:1e4,crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0}},t)},l.getPlaybackDetails=function(e,t){var n={video_id:e.id,include_comments:!0};return e.secret&&(n.secret=e.secret),e.manifest_id&&(n.manifest_id=e.manifest_id),e.custom_user_identifier&&(n.custom_user_identifier=e.custom_user_identifier),e.embed_id&&(n.embed_id=e.embed_id),e.password&&(n.password=e.password),c({url:d({environment:e.environment,command:"getPlaybackDetails",params:n}),type:"GET",timeout:1e4,crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0}},t)},l.getPlaylist=function(e,t){var n={playlist_id:e.playlistId,include_comments:!!e.include_comments};return e.per_page&&(n.per_page=e.per_page),e.page&&(n.page=e.page),c({url:d({environment:e.environment,command:"getPlaylist",params:n}),type:"GET",timeout:1e4,crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0}},t)},l.getCommentsMultiplePages=function(e,t,n){e.page=e.page||1,l.getComments(e,function(i,r){if("success"==r){if(n?n.responseJSON.comments.list_result.comments_list=n.responseJSON.comments.list_result.comments_list.concat(i.responseJSON.comments.list_result.comments_list):n=i,100==i.responseJSON.comments.list_result.comments_list.length&&e.page<=10)return e.page+=1,l.getCommentsMultiplePages(e,t,n);t&&t(n,r)}else t&&t(n,r)})},l.getComments=function(e,t){var n={video_id:e.id,per_page:100,sort:"date-desc"};return e.parentId&&(n.parent_id=e.parentId),e.secret&&(n.secret=e.secret),e.page&&(n.page=e.page),c({url:d({environment:e.environment,command:"getComments",params:n}),type:"GET",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:1e4},t)},l.recordPlayback=function(e){var n=d({environment:e.environment,command:"recordPlayback",params:{video_id:e.videoId}});t.ajax({url:n,type:"POST",dataType:"json",crossDomain:!0,timeout:1e4,xhrFields:{withCredentials:!0}})},l.addComment=function(n,i){var r=d({command:"addComment",environment:n.environment}),a={video_id:n.viddlerVideoId,text:n.text};void 0!==n.addTimepoint&&(a.timepoint=n.addTimepoint/1e3),n.parentId&&(a.parent_id=n.parentId),window.logged_in_user&&(a.custom_user_identifier=window.logged_in_user),t.ajax({url:r,type:"POST",crossDomain:!0,data:a,dataType:"json",xhrFields:{withCredentials:!0}}).done(function(t){var r=t.comment;e.log("addComment YES",r),r.viddlerVideoId=n.viddlerVideoId,i&&i(!0,r)}).error(function(t){e.log("addComment NO",t),i&&i(!1,t)})},l.deleteComment=function(n,i){var r=d({command:"deleteComment",environment:n.environment}),a={comment_id:n.id};t.ajax({url:r,type:"POST",crossDomain:!0,data:a,dataType:"json",xhrFields:{withCredentials:!0}}).done(function(t){e.log("deleteComment YES",t),i(!0)}).error(function(t){e.log("deleteComment NO",t),i(!0)})},l.addEmbedInfo=function(e){var n=d({command:"addEmbedInfo",environment:e.environment});t.ajax({url:n,type:"POST",async:!1,crossDomain:!0,data:e,dataType:"json"})},l.shareByEmail=function(e){var n=d({command:"shareByEmail",environment:e.environment});t.ajax({url:n,type:"POST",async:!1,crossDomain:!0,data:e,dataType:"json"})},l}),define("api-v3",["logger","jquery","underscore","config","util"],function(e,t,n,i,r){var a,o,s={},l={getSiteCatalystInfo:"videos/{token}/sitecatalyst",setAnalytics:"analytics/track-events",getQuestions:"questions",setAnswers:"questions/{id}/users-answers"};function u(e){a=i.apiV3Users[e.environment],o=a.url;var s=r.setUrlProtocol(o+l[e.command]);return window.XDomainRequest&&e.command.match(/get/)&&(s+="p"),e.params=e.params||{},n.extend(e.params),s+="?"+t.param(e.params)}return s.getSiteCatalystInfo=function(e,n){var i=u({environment:e.environment,command:"getSiteCatalystInfo"});return function(e,n){return window.XDomainRequest||e.forceJsonP?(t.extend(e,{dataType:"jsonp",timeout:4e3}),t.ajax(e).success(function(e,e,t){n&&n(t,"success")}).error(function(e){n&&n(e,"success")})):t.ajax(e).complete(n)}({url:i=i.replace("{token}",e.id),type:"GET",timeout:1e4,crossDomain:!0,dataType:"json"},n)},s.getQuestions=function(e,n){params={},params.addAnswers="1",params.status="1",params.videoToken=e.id;var i=u({environment:e.environment,command:"getQuestions"});return t.ajax({url:i,type:"GET",async:!1,crossDomain:!0,data:params,contentType:"application/json",dataType:"json"})},s.setAnswers=function(e,n){var i="";return i=e.feedbackEndpoint?e.feedbackEndpoint:(i=u({environment:e.environment,command:"setAnswers"})).replace("{id}",e.question_id),t.ajax({url:i,type:"POST",async:!1,crossDomain:!0,data:JSON.stringify(e.payload),contentType:"application/json",dataType:"json"})},s.setAnalytics=function(e,n){params={},params.appName=e.appName,params.identifier=e.identifier,e.isAnonymous&&(params.isAnonymous=e.isAnonymous);var i=u({environment:e.environment,command:"setAnalytics",params:params});return t.ajax({url:i,type:"POST",async:!1,crossDomain:!0,data:JSON.stringify(e.payload),contentType:"application/json",dataType:"json"})},s}),define("viddler",["require","underscore","config","views/baseviews","util","api-v2","api-v3","logger"],function(e){return{BaseViews:e("views/baseviews"),Config:e("config"),Util:e("util"),Api:e("api-v2"),Apiv3:e("api-v3"),Logger:e("logger")}}),function(e,t){"use strict";var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in e,n.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,n.NO_MOUSEEVENTS=n.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(n.MOBILE_REGEX),n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.DOCUMENT=e.document,n.plugins=n.plugins||{},n.gestures=n.gestures||{},n.READY=!1,n.utils={extend:function(e,t,n){for(var i in t)void 0!==e[i]&&n||(e[i]=t[i]);return e},each:function(e,t,n){var i,r;if("forEach"in e)e.forEach(t,n);else if(void 0!==e.length){for(i=0,r=e.length;i<r;i++)if(!1===t.call(n,e[i],i,e))return}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],i=[];return n.utils.each(e,function(e){t.push(void 0!==e.clientX?e.clientX:e.pageX),i.push(void 0!==e.clientY?e.clientY:e.pageY)}),{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,i=t.pageX-e.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(e,t){return Math.abs(e.pageX-t.pageX)>=Math.abs(e.pageY-t.pageY)?e.pageX-t.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:e.pageY-t.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==n.DIRECTION_UP||e==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){t&&e&&e.style&&(n.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(i){n.utils.each(t,function(t){i&&(t=i+t.substring(0,1).toUpperCase()+t.substring(1)),t in e.style&&(e.style[t]=t)})}),"none"==t.userSelect&&(e.onselectstart=function(){return!1}),"none"==t.userDrag&&(e.ondragstart=function(){return!1}))}},n.Instance=function(e,t){var i=this;return n.READY||(n.event.determineEventTypes(),n.utils.each(n.gestures,function(e){n.detection.register(e)}),n.event.onTouch(n.DOCUMENT,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(n.DOCUMENT,n.EVENT_END,n.detection.detect),n.READY=!0),this.element=e,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),t||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(e,n.EVENT_START,function(e){i.enabled&&n.detection.startDetect(i,e)}),this},n.Instance.prototype={on:function(e,t){var i=e.split(" ");return n.utils.each(i,function(e){this.element.addEventListener(e,t,!1)},this),this},off:function(e,t){var i=e.split(" ");return n.utils.each(i,function(e){this.element.removeEventListener(e,t,!1)},this),this},trigger:function(e,t){t||(t={});var i=n.DOCUMENT.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t;var r=this.element;return n.utils.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(i),this},enable:function(e){return this.enabled=e,this}};var i=null,r=!1,a=!1;n.event={bindDom:function(e,t,i){var r=t.split(" ");n.utils.each(r,function(t){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent(t,i)})},onTouch:function(e,t,o){var s=this;this.bindDom(e,n.EVENT_TYPES[t],function(l){var u=l.type.toLowerCase();if(!u.match(/mouse/)||!a){u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===l.which?r=!0:u.match(/mouse/)&&!l.which&&(r=!1),u.match(/touch|pointer/)&&(a=!0);var d=0;r&&(n.HAS_POINTEREVENTS&&t!=n.EVENT_END?d=n.PointerEvent.updatePointer(t,l):u.match(/touch/)?d=l.touches.length:a||(d=u.match(/up/)?0:1),d>0&&t==n.EVENT_END?t=n.EVENT_MOVE:d||(t=n.EVENT_END),(d||null===i)&&(i=l),o.call(n.detection,s.collectEventData(e,t,s.getTouchList(i,t),l)),n.HAS_POINTEREVENTS&&t==n.EVENT_END&&(d=n.PointerEvent.updatePointer(t,l))),d||(i=null,r=!1,a=!1,n.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=n.HAS_POINTEREVENTS?n.PointerEvent.getEvents():n.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=e[0],n.EVENT_TYPES[n.EVENT_MOVE]=e[1],n.EVENT_TYPES[n.EVENT_END]=e[2]},getTouchList:function(e){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():e.touches?e.touches:(e.identifier=1,[e])},collectEventData:function(e,t,i,r){var a=n.POINTER_TOUCH;return(r.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,r))&&(a=n.POINTER_MOUSE),{center:n.utils.getCenter(i),timeStamp:(new Date).getTime(),target:r.target,touches:i,eventType:t,pointerType:a,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var e=[];return n.utils.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){return e==n.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var i=t.pointerType,r={};return r[n.POINTER_MOUSE]=i===t.MSPOINTER_TYPE_MOUSE||i===n.POINTER_MOUSE,r[n.POINTER_TOUCH]=i===t.MSPOINTER_TYPE_TOUCH||i===n.POINTER_TOUCH,r[n.POINTER_PEN]=i===t.MSPOINTER_TYPE_PEN||i===n.POINTER_PEN,r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:n.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst.options;return n.utils.each(this.gestures,function(n){if(!this.stopped&&!1!==t[n.name]&&!1===n.handler.call(n,e,this.current.inst))return this.stopDetect(),!1},this),this.current&&(this.current.lastEvent=e),e.eventType==n.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;!t||e.touches.length==t.touches.length&&e.touches!==t.touches||(t.touches=[],n.utils.each(e.touches,function(e){t.touches.push(n.utils.extend({},e))}));var i,r,a=e.timeStamp-t.timeStamp,o=e.center.pageX-t.center.pageX,s=e.center.pageY-t.center.pageY,l=n.utils.getVelocity(a,o,s);return"end"===e.eventType?(i=this.current.lastEvent&&this.current.lastEvent.interimAngle,r=this.current.lastEvent&&this.current.lastEvent.interimDirection):(i=this.current.lastEvent&&n.utils.getAngle(this.current.lastEvent.center,e.center),r=this.current.lastEvent&&n.utils.getDirection(this.current.lastEvent.center,e.center)),n.utils.extend(e,{deltaTime:a,deltaX:o,deltaY:s,velocityX:l.x,velocityY:l.y,distance:n.utils.getDistance(t.center,e.center),angle:n.utils.getAngle(t.center,e.center),interimAngle:i,direction:n.utils.getDirection(t.center,e.center),interimDirection:r,scale:n.utils.getScale(t.touches,e.touches),rotation:n.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var t=e.defaults||{};return void 0===t[e.name]&&(t[e.name]=!0),n.utils.extend(n.defaults,t,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,t){if(n.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void(this.triggered=!1);if(!(t.options.drag_max_touches>0&&e.touches.length>t.options.drag_max_touches))switch(e.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(e.distance<t.options.drag_min_distance&&n.detection.current.name!=this.name)return;if(n.detection.current.name!=this.name&&(n.detection.current.name=this.name,t.options.correct_for_drag_min_distance&&e.distance>0)){var i=Math.abs(t.options.drag_min_distance/e.distance);n.detection.current.startEvent.center.pageX+=e.deltaX*i,n.detection.current.startEvent.center.pageY+=e.deltaY*i,e=n.detection.extendEventData(e)}(n.detection.current.lastEvent.drag_locked_to_axis||t.options.drag_lock_to_axis&&t.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var r=n.detection.current.lastEvent.direction;e.drag_locked_to_axis&&r!==e.direction&&(n.utils.isVertical(r)?e.direction=e.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:e.direction=e.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),t.trigger(this.name+e.direction,e),(t.options.drag_block_vertical&&n.utils.isVertical(e.direction)||t.options.drag_block_horizontal&&!n.utils.isVertical(e.direction))&&e.preventDefault();break;case n.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==n.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case n.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==n.EVENT_END&&t.trigger(this.name,e)}},n.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==n.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length<t.options.swipe_min_touches&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==n.EVENT_END&&"touchcancel"!=e.srcEvent.type){var i=n.detection.previous,r=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;i&&"tap"==i.name&&e.timeStamp-i.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),r=!0),r&&!t.options.tap_always||(n.detection.current.name="tap",t.trigger(n.detection.current.name,e))}}},n.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,t){t.options.prevent_mouseevents&&e.pointerType==n.POINTER_MOUSE?e.stopDetect():(t.options.prevent_default&&e.preventDefault(),e.eventType==n.EVENT_START&&t.trigger(this.name,e))}},n.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,t){if(n.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),void(this.triggered=!1);if(!(e.touches.length<2))switch(t.options.transform_always_block&&e.preventDefault(),e.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-e.scale),r=Math.abs(e.rotation);if(i<t.options.transform_min_scale&&r<t.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),r>t.options.transform_min_rotation&&t.trigger("rotate",e),i>t.options.transform_min_scale&&(t.trigger("pinch",e),t.trigger("pinch"+(e.scale<1?"in":"out"),e));break;case n.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("hammer",[],function(){return n}):"object"==typeof module&&"object"==typeof module.exports?module.exports=n:e.Hammer=n}(this),define("views/resume_modal",["viddler"],function(e){return e.BaseViews.ModalView.extend({template:"#tmp-resume",events:{"click .resume":"resume","click .beginning":"startFromBeginning"},initialize:function(e){this.embed=e.embed,this.manager=e.manager,this.__init(e),this.render(),this.addEventListeners(),this.delegateEvents()},resume:function(e){e.preventDefault(),this.manager.play()},startFromBeginning:function(e){e.preventDefault(),this.manager.play(0)},addEventListeners:function(){var e=this;this.manager.events.on("mediaElement:play",function(){e.remove()})}})}),define("views/gui",["underscore","jquery","backbone","viddler","views/baseviews","lib/screenfull","hammer","views/resume_modal"],function(e,t,n,r,a,o,s,l){return a.BaseView.extend({el:".media-gui",autoHideTimeout:3e3,screenreaderMute:"",screenreaderVolume:"",controlsAlwaysVisible:!1,accessibilityMode:!1,timeoutToolTips:[],countDownRemoveTooltips:3,initialize:function(t){e.extend(this,t),this.__init(t),this.isFullScreen=!1,this.volumeSupported=this._volumeSupported(),this.accessibilityMode=!!t.embed.mainView.settings.accessibility,0==this.accessibilityMode&&1==this.embed.accessibility&&(this.accessibilityMode=!0),this.embed.controlsAlwaysVisible?this.controlsAlwaysVisible=!0:this.controlsAlwaysVisible=this.accessibilityMode,this.addEventListeners(),this.enableFocusIndicator(),this.setupAccessibilitySettings()},addEventListeners:function(){var e=this;this.embed.manager.events.on("timeline:timeUpdate",function(t){e.updatePlaybar(t)}),this.embed.manager.events.on("timeline:end",function(){e.updatePlaybar(e.embed.manager.timelineDuration())}),this.setupPlayAndPauseEvents(),this.setupFullScreenEvents(),this.setupSafariFullScreenKeyboardAccessWorkaround(),this.setupVolumeEvents(),this.setupSeekEvents(),this.setupBackgroundClickEvent(),this.setupHotKey(),this.setupSizingOptimization(),this.controlsAlwaysVisible?this.handlerControlsAlwaysVisibleEvents():this.setupAutoHideEvents()},setupAccessibilitySettings:function(){if(this.accessibilityMode){var e=this.embed.mainView.$el.find("video");e.attr("aria-hidden","true"),e.attr("tabindex","-1");var t=this;this.accessibilityMode&&this.embed.target.find(".media-gui").click(function(e){-1!==e.target.className.indexOf("media-gui")&&t.hideAccessibilityTooltips()})}},setupSeekEvents:function(){var e=this;this.$el.on("change",".time-icon",function(t){var n=1e3*t.target.value;e.isSeekAllowedTo(n)&&e.seekTo(n),t.target.focus()}),this.$el.on("input",".time-icon",function(t){var n=1e3*t.target.value;e.isSeekAllowedTo(n)&&e.seekTo(n),t.target.focus()}),this.embed.noControls&&this.$el.click(function(){"playing"==e.embed.manager.status?e.embed.manager.pause():e.embed.manager.play()})},updateTimelineToolTip:function(e){var n=this.$el.find(".time-icon"),i=this.$el.find(".total-time-bar"),a=Math.floor(e/1e3),o=r.Util.secs2time(a),s="Time = "+o;n.attr("aria-valuenow",a),n.attr("aria-valuetext",s),n.val(a),i=this.$el.find(".total-time-bar"),barTooltip=i.find(".screenreader"),percentage=100*n.val()/(this.embed.manager.timelineDuration()/1e3)/100,position=i.width()*percentage,toolTipWidth=90,position-=toolTipWidth*percentage,tooltipPosition=Math.floor(position)+"px",i.find(".screenreader").each(function(){t(this).html("Time = "+o),t(this).css("left",tooltipPosition)})},seekBoundaries:function(){var e={start:0,end:this.embed.manager.timelineDuration()};return this.embed.disableSeek&&(e.start=this.embed.manager.currentTime,e.end=this.embed.manager.currentTime),this.embed.disableBackwardSeek&&(e.start=this.embed.manager.currentTime),!0===this.embed.disableForwardSeek&&(e.end=this.embed.manager.currentTime),"relaxed"===this.embed.disableForwardSeek&&(e.end=this.embed.manager.furthestPointPlayedThisSession),"relaxed:persist"===this.embed.disableForwardSeek&&"finished"!==this.embed.manager.furthestPointPlayedInPast&&(e.end=Math.max(this.embed.manager.furthestPointPlayedInPast,this.embed.manager.furthestPointPlayedThisSession)),e},isSeekAllowedTo:function(e){var t=this.seekBoundaries();return e>=t.start&&e<=t.end},disableSeek:function(){this.$el.removeClass("seekable").off(".seek")},enableSeek:function(){this.disableSeek(),this.$el.addClass("seekable"),this.setupSeekEvents()},disable:function(){this.disableSeek(),this.$el.addClass("disabled"),this.$("[tabindex]").each(function(){var e=t(this);e.attr("data-old-tabindex",e.attr("tabindex")),e.attr("tabindex",-1)}),this.disabled=!0},enable:function(){this.enableSeek(),this.$el.removeClass("disabled"),this.disabled=!1,this.$("[old-tabindex]").each(function(){var e=t(this);e.attr("tabindex",e.attr("data-old-tabindex")),e.removeAttr("data-old-tabindex")})},seekTo:function(e){e>this.embed.manager.timelineDuration()&&(e=this.embed.manager.timelineDuration()),this.$el.find(".play-overlay-button").hide(),this.embed.manager.goTo({time:e}),this.accessibilityMode||"playing"!=this.embed.manager.status||this.embed.manager.play()},setupFullScreenEvents:function(){if(o.enabled){var t=this;this.$el.on("click",".media-full-screen",function(e){e.preventDefault();var n=t.embed.target.find(".viddler-embed").get(0);o.toggle(n),t.toggleFullScreenButton(e.target)}),document.addEventListener(o.raw.fullscreenchange,function(n){var i=t.embed.target.find(".viddler-embed");if(o.isFullscreen)t.isFullscreen=!0,o.element==i.get(0)&&(t.showFullGui(),t.embed.manager.events.trigger("gui:fullScreenEntered"),(r.Util.matrix.safari||r.Util.matrix.chrome)&&setTimeout(function(){i.find(".media-full-screen").focus()},100));else if(t.isFullscreen){t.isFullscreen=!1;var a=i.find(".media-full-screen");a.attr("aria-pressed")&&t.toggleFullScreenButton(a,!0),t.embed.manager.events.trigger("gui:fullScreenLeft")}setTimeout(function(){e.each(t.embed.visibleModals,function(e){e.positionModal()})},100)})}},setupPlayAndPauseEvents:function(){var e=this;this.embed.manager.events.on("mediaElement:pause",function(){e.togglePlayPauseButton()}),this.embed.manager.events.on("mediaElement:play",function(){e.$el.addClass("has-played"),e.togglePlayPauseButton()}),this.$el.on("click",".media-play-aria",function(t){t.preventDefault(),e.requestPlay()}),this.$el.on("click",".media-pause-aria",function(t){t.preventDefault(),e.requestPause()})},requestPlay:function(){var e=this;this.embed.manager.events.trigger("interaction:clickPlay"),this.embed.manager.currentMediaElement().linear?(this.embed.manager.events.once("mediaElement:play",function(){e.$el.find(".media-pause-aria").focus()}),this.embed.manager.play()):this.embed.manager.mediaElementFinished()},requestPause:function(){var e=this;this.embed.manager.events.once("mediaElement:pause",function(){e.$el.find(".media-play-aria").focus()}),this.embed.manager.currentMediaElement().pause()},togglePlayPauseButton:function(){var e;"playing"==this.embed.manager.status&&((e=this.$el.find(".media-play-aria")).attr("aria-pressed","true"),e.attr("aria-label","Pause"),e.removeClass("media-play-aria"),e.addClass("media-pause-aria"),e.html(this.setScreenReader("Pause")));"paused"==this.embed.manager.status&&((e=this.$el.find(".media-pause-aria")).attr("aria-pressed","false"),e.attr("aria-label","Play"),e.removeClass("media-pause-aria"),e.addClass("media-play-aria"),e.html(this.setScreenReader("Play")))},toggleFullScreenButton:function(e,t){t||(t=!1);var n=this.$el.find(e),i="true"===n.attr("aria-pressed");t&&(i=!0),n.attr("aria-pressed",i?"false":"true"),n.attr("aria-label",i?"View Fullscreen":"Exit Fullscreen"),i?(n.removeClass("full-screen-close"),n.addClass("full-screen-open"),n.html(this.setScreenReader("View Fullscreen"))):(n.removeClass("full-screen-open"),n.addClass("full-screen-close"),n.html(this.setScreenReader("Exit Fullscreen")))},setScreenReader:function(e,t){t||(t="");var n="";return this.accessibilityMode||(n=" hide"),'<span class="screenreader'+t+n+'">'+e+"</a>"},muteOn:function(){var e=this.$el.find(".media-volume"),t=this.embed.manager.currentVolume;t>0&&e.data("previous-volume",t),e.addClass("muted"),e.attr("aria-pressed","true"),e.attr("aria-label","Unmute"),this.screenreaderMute=this.setScreenReader("Unmute","-custom"),this.embed.manager.events.trigger("interaction:clickMute")},muteOff:function(){var e=this.$el.find(".media-volume");e.removeClass("muted"),e.attr("aria-pressed","false"),e.attr("aria-label","Mute"),this.screenreaderMute=this.setScreenReader("Mute","-custom"),this.embed.manager.events.trigger("interaction:clickUnmute")},toggleMute:function(){var e=this.$el.find(".media-volume"),t=e.data("previous-volume");isNaN(t)||Number.undefined===t?t=0:t/=10;var n=this.$el.find(".volume-icon");e.hasClass("muted")?(this.muteOff(),t<=0?(n[0].stepUp(),t=n[0].value):n.val(t),(isNaN(t)||Number.undefined===t)&&(t=0),this.setVolume(10*t)):(this.muteOn(),volumeIcon.val(0),this.setVolume(0)),this.$el.find(".media-volume.aria-button").html(this.screenreaderMute)},toggleVolumeSlider:function(e){e||(e=!0)},setVolume:function(e){e>100&&(e=100),(e<0||!e)&&(e=0);var n=Math.floor(e/10),i=10*n;this.embed.manager.setVolume(i),volumeIcon=this.$el.find(".volume-icon"),volumeIcon.attr("aria-valuenow",n),volumeIcon.attr("aria-valuetext","volume equals "+n),volumeIcon.val(n),volumeIcoWrapper=this.$el.find(".rail-horizontal-volume"),volumeIcoWrapper.find(".screenreader-custom").each(function(){t(this).html("Volume = "+n)});var r=t(".media-volume");0!=e||r.hasClass("muted")||(this.muteOn(),r.html(this.screenreaderMute)),e>0&&r.hasClass("muted")&&(this.muteOff(),r.html(this.screenreaderMute))},setupVolumeEvents:function(){var e=this;if(this.volumeSupported){var t=e.$el.find(".media-volume");t.hasClass("muted")?t.html(this.setScreenReader("Mute","-custom")):t.html(this.setScreenReader("Unmute","-custom")),this.$el.on("click",".media-volume",function(t){t.preventDefault(),e.$el.focus(),e.toggleMute()}),this.$el.on("mouseleave",".media-volume",function(t){t.preventDefault(),e.$el.focus()}),this.accessibilityMode||(this.$el.on("mouseenter",".volumeWrapper",function(t){e.toggleVolumeSlider()}),this.$el.on("mouseleave",".volumeWrapper",function(t){e.toggleVolumeSlider(!1)}),this.$el.on("mouseenter focusin",".rail-horizontal-volume",function(t){e.toggleVolumeSlider()}),this.$el.on("focusout",".volume-icon",function(t){e.toggleVolumeSlider(!1)})),this.$el.on("click",".rail-horizontal-volume",function(t){t.preventDefault(),e.setVolume(10*t.target.value)}),this.$el.on("drag",".volume-icon",function(t){t.preventDefault(),e.setVolume(10*t.target.value)}),this.$el.on("input change",".volume-icon",function(t){t.preventDefault(),e.setVolume(10*t.target.value)})}},hasFullDisplay:function(){return this.$el.is(":visible")&&!this.$el.hasClass("minimal")},handlerControlsAlwaysVisibleEvents:function(){var e=this,t=this.embed.target.find(".media-container");this.$el.addClass("controlsAlwaysVisible"),t.height("calc(100% - 55px)"),this.$el.on("mouseenter focus focus-within",".vp-btn",function(t){t.preventDefault(),e.hideAccessibilityTooltips(t)}),this.$el.on("mouseenter focus focus-within",".vp-btn-keyboard",function(t){t.preventDefault(),e.hideAccessibilityTooltips(t)})},setupAutoHideEvents:function(){var e,n,i=this,r=!0,a=function(){return!window.vDrags&&(!!i.hasFullDisplay()&&("playing"===i.embed.manager.status&&!i.anyModalsAreVisible()))},s=function(){clearTimeout(e),e=void 0,i.hasFullDisplay()||i.showFullGui(),n&&(i.embed.mainView.focusWithoutScroll(n),n=void 0),r=!1};this.embed.target.on("mousemove keyup",function(e){r&&s()}),this.embed.manager.events.on("interaction:dragPlayHead",function(){s()}),setInterval(function(){if(a()){if(e)return!1;r=!0,e=setTimeout(function(){a()?(r=!1,i.embed.target.has(document.activeElement)&&(n=t(document.activeElement)),o.isFullscreen||i.showMinimalGui()):r=!0,e=void 0,setTimeout(function(){r=!0},500)},i.autoHideTimeout)}},i.embed.autoHideInterval)},setupBackgroundClickEvent:function(){var e=this;this.embed.target.find(".media-container").click(function(n){if(!e.disabled){e.hideAllModals();var i=t(this),r=i.width()/2-150,a=i.height()/2-150;if(void 0===n.offsetX)var o=n.pageX-e.embed.target.offset().left,s=n.pageY-e.embed.target.offset().top;else o=n.offsetX,s=n.offsetY;o>r&&o<r+300&&s>a&&s<a+300&&("playing"==e.embed.manager.status?e.requestPause():e.requestPlay())}})},hideGui:function(){this.giveMinimalPlayerFocus(),this.showMinimalGui()},showMinimalGui:function(){this.hideAllModals(),this.giveMinimalPlayerFocus(),this.$el.addClass("minimal"),this.embed.manager.events.trigger("gui:minimalInterfaceShown")},showFullGui:function(){this.$el.removeClass("minimal"),this.embed.manager.events.trigger("gui:fullInterfaceShown"),this.focusBeforeMinimal&&this.embed.mainView.hasFocus()&&(this.embed.mainView.focusWithoutScroll(this.focusBeforeMinimal),this.focusBeforeMinimal=void 0)},giveMinimalPlayerFocus:function(){if(this.embed.mainView.hasFocus()){var e=t(document.activeElement);e.is("a")&&(this.focusBeforeMinimal=e),this.embed.mainView.focusWithoutScroll(this.embed.target.find(".media-container"))}},updatePlaybar:function(e){if(this.embed.manager.currentTime>this.embed.manager.timelineDuration())var t=this.embed.manager.timelineDuration();else t=this.embed.manager.currentTime;if(!window.vDrags){var n=Math.floor(t/1e3);secs=r.Util.secs2time(n),this.updateTimelineToolTip(t),labelTimeText=secs+" / "+r.Util.secs2time(Math.floor(this.embed.manager.timelineDuration()/1e3)),this.$(".label-time-text").html(labelTimeText)}},setTlTime:function(){var e=Math.floor(this.embed.manager.timelineDuration()/1e3),t=r.Util.secs2time(e),n=r.Util.secs2time(this.embed.manager.currentTime);labelTimeText=n+" / "+t,this.$(".label-time-text").html(labelTimeText)},render:function(t){var n={},i=this;this.$el.html(this.embed.manager.retrieveTemplate("#tmp-mega-gui")),n.elems=t.mediaElements,e.each(n.elems,function(e){e.width=(e.duration/i.embed.manager.timelineDuration()*100).toFixed(2)}),this.setTlTime(),this.$el.find(".bar").html(this.embed.manager.retrieveTemplate("#tmp-mega-timeline",n)),this.showTimeLineElementIcons(),this.fullScreenSupported()||this.$(".media-full-screen").hide(),t.showResumeModal?this.showResumeModal():t.showPlayOverlayButton&&this.showPlayButtonOverlay(),this.volumeSupported?(this.setVolume(i.embed.manager.currentVolume),this.accessibilityMode&&this.toggleVolumeSlider()):this.$(".media-volume").hide();var r=this.$el.find(".time-icon").get(0);new s(r);var a=this.$el.find(".volume-icon").get(0);if(new s(a),this.accessibilityMode){var o=this.embed.region;"undefined"!=o&&null!=o||(o="Video Player"),this.embed.target.find(".vid-player video").attr("title",o)}this.$el.find(".bottom.gui").attr("aria-label",o).attr("role","region");var l=this.embed.target.find(".vid-player img");l.attr("alt","The poster image"),l.attr("aria-hidden",!0);var u=this.$el.find(".time-icon"),d=Math.floor(this.embed.manager.timelineDuration()/1e3);u.attr("aria-valuemax",d),u.attr("max",d),this.embed.manager.events.trigger("gui:ready")},showTimeLineElementIcons:function(){var n=this,i=this.$(".timeline-markers-container");i.html("");var r=[];e.each(this.embed.manager.allCurrentTracks(),function(i){var a=n.embed.manager.currentPrimaryTrack==i;e.each(i.mediaElements,function(e){if(e.timelineIcon){var i=(e.timelineStart+e.timelineIconOffset)/n.embed.manager.timelineDuration()*100,o="timeline-element-icon-wrapper",s=t("<div>",{class:o+=a?" primary-track":" sub-track","data-start":e.timelineStart}),l=e.timelineIcon();l.attr("tabindex",n.embed.tabIndexStart),s.html(l),s.css({left:"calc("+i+"% - "+e.timelineIconWidth/2+"px)"}),r.push(s)}})}),r.sort(function(e,t){return e.data("start")>t.data("start")}),i.append(r)},showPlayButtonOverlay:function(){var e=this,t=this.embed.target.find(".play-overlay-button");t.show().click(function(n){n.stopPropagation(),n.preventDefault(),e.requestPlay(),t.hide()})},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.remove(),n.View.prototype.remove.call(this)},fullScreenSupported:function(){return o.enabled},addIcon:function(e){var n=e.element.clone(),i="";switch(this.accessibilityMode||(i=" hide"),n.attr("title")?n.append(t("<span>",{class:"screenreader"+i}).text(n.attr("title"))):n.attr("aria-label")&&n.append(t("<span>",{class:"screenreader"+i}).text(n.attr("aria-label"))),n.attr("title")){case"Comment":n.attr("tabindex",this.embed.tabIndexComments);break;case"Bookmarks":n.attr("tabindex",this.embed.tabIndexBookmarks);break;case"Social Sharing":n.attr("tabindex",this.embed.tabIndexSocialSharing);break;default:n.attr("tabindex",this.embed.tabIndexStart)}n.hasClass("vid-quality")&&n.attr("tabindex",this.embed.tabIndexQuality),n.hasClass("vid-speed")&&n.attr("tabindex",this.embed.tabIndexSpeed),n.hasClass("vid-cc")&&n.attr("tabindex",this.embed.tabIndexSubtitles),n.attr("role","button");var r=t("<div>",{"data-priority":e.priority,class:"icon"}).html(n),a=this.$("."+e.bar).find("."+e.side+"-icons");return a.prepend(r),this.sortIcons(a),n},sortIcons:function(e){var n=e.children();n.sort(function(e,n){return t(e).data("priority")>t(n).data("priority")?-1:1}),n.detach().appendTo(e)},showResumeModal:function(){new l({embed:this.embed,manager:this.embed.manager})},_volumeSupported:function(){var e=navigator.userAgent.toLowerCase(),n=!0;return t.each({ipod:/ipod/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},function(t,i){if(i&&i.test(e))return n=!1,!1}),n},hideAccessibilityTooltips:function(e){if(e||(e=!1),this.accessibilityMode){timeIcon=this.$el.find(".time-icon"),volumeIcon=this.$el.find(".volume-icon"),this.$el.find(".vp-btn").each(function(n,i){var r=t(i).find(".screenreader"),a=t(i).find(".screenreader-custom");e.target!=i?(r.addClass("hide"),a.addClass("hide")):(r.removeClass("hide"),a.removeClass("hide"))}),this.$el.find(".vp-btn-keyboard").each(function(n,i){var r=t(i).find(".screenreader"),a=t(i).find(".screenreader-custom");e.target!=i?(r.addClass("hide"),a.addClass("hide")):(r.removeClass("hide"),a.removeClass("hide"))}),e.target===timeIcon.get(0)?(screenReader=timeIcon.parent(),screenReader.find(".screenreader").removeClass("hide")):(screenReader=timeIcon.parent(),screenReader.find(".screenreader").addClass("hide")),e.target===volumeIcon.get(0)?(screenReader=volumeIcon.parent(),screenReader.find(".screenreader-custom").removeClass("hide")):(screenReader=volumeIcon.parent(),screenReader.find(".screenreader-custom").addClass("hide"));var n=this;n.timeoutToolTips.push(setTimeout(function(){n.hideAccessibilityTooltips(),n.clearTooltipTimeout()},1e3*n.countDownRemoveTooltips))}},clearTooltipTimeout:function(){e.each(this.timeoutToolTips,function(e){clearTimeout(e)})},enableFocusIndicator:function(){this.$el.find(".vp-btn").each(function(e,n){t(this).addClass("vp-btn-keyboard"),t(this).removeClass("vp-btn")})},disableFocusIndicator:function(){this.$el.find(".vp-btn-keyboard").each(function(e,n){t(this).addClass("vp-btn"),t(this).removeClass("vp-btn-keyboard")})},setupEscKey:function(e){e.which==this.keyCode.esc&&(this.hideAllModals(),this.hideAccessibilityTooltips())},setupSpaceControl:function(e){if(!this.disabled){var n=t(e.target);if(e.which==this.keyCode.space||e.which==this.keyCode.enter){if(n.is("textarea")||n.is("input:text")||"email"==n.context.type)return;return this.accessibilityMode?(n.trigger("click"),void e.preventDefault()):!n.hasClass("vp-btn-keyboard")||n.hasClass("vp-btn")||n.hasClass("volume-icon")||n.hasClass("time-icon")?(e.preventDefault(),void("playing"==this.embed.manager.status?this.requestPause():this.requestPlay())):(e.preventDefault(),void n.trigger("click"))}return e.which==this.keyCode.enter&&n.is("a")&&n.hasClass("vp-btn")?(e.preventDefault(),void n.trigger("click")):void 0}},focusNextElement:function(e){var t=this.$el.find("div.bottom.gui > div > div > .vp-btn-keyboard, div.bottom.gui > div > div > div > .vp-btn-keyboard");for(i=0;i<=t.length;i++)if(t[i]==document.activeElement){i==t.length-1?idx=0:idx=i+1,this.$el.find(t[idx]).focus();break}},focusPreviousElement:function(e){var t=this.$el.find("div.bottom.gui > div > div > .vp-btn-keyboard, div.bottom.gui > div > div > div > .vp-btn-keyboard");for(i=0;i<=t.length;i++)if(t[i]==document.activeElement){0==i?idx=t.length-1:idx=i-1,this.$el.find(t[idx]).focus();break}},hackBackgroundFocusHandler:function(e){this.accessibilityMode&&(e.target.classList.contains("volume-icon")||e.target.classList.contains("time-icon")||(e.which!=this.keyCode.right&&e.which!=this.keyCode.down||(e.preventDefault(),this.focusNextElement(e)),e.which!=this.keyCode.left&&e.which!=this.keyCode.up||(e.preventDefault(),this.focusPreviousElement(e))))},setupHotKey:function(){var e=this;this.embed.target.on("mousedown",function(t){e.disableFocusIndicator()}),this.embed.target.on("keydown",function(n){e.hackBackgroundFocusHandler(n),e.setupSpaceControl(n),e.setupEscKey(n);var i=n.target.className;if(!n.target.classList.contains("quality-choice")&&!n.target.classList.contains("speed-choice")&&!n.target.classList.contains("subtitle-lang-choice")){if(n.which==e.keyCode.tab){var r=t(n.target);if(r.is("textarea")||r.is("input:text")||"email"==r.context.type)return;return e.enableFocusIndicator(),e.hasFullDisplay()||n.preventDefault(),void(n.shiftKey&&n.target.classList.contains("media-volume")&&e.toggleVolumeSlider(!1))}switch(n.target.classList.contains("volume-icon")&&(i="volume"),n.target.classList.contains("time-icon")&&(i="bar"),i){case"bar":if(e.accessibilityMode)break;n.which==e.keyCode.up&&(n.preventDefault(),e.embed.manager.jumpForward(n)),n.which==e.keyCode.down&&(n.preventDefault(),e.embed.manager.jumpBack(n)),n.which==e.keyCode.right&&(n.preventDefault(),e.embed.manager.jumpForward(n)),n.which==e.keyCode.left&&(n.preventDefault(),e.embed.manager.jumpBack(n));break;case"volume":if(e.accessibilityMode)break;if(n.which==e.keyCode.up||n.which==e.keyCode.right){n.preventDefault(),e.toggleVolumeSlider(),(o=e.$el.find(".volume-icon"))[0].stepUp();var a=o[0].value;e.setVolume(10*a)}if(n.which==e.keyCode.down||n.which==e.keyCode.left){n.preventDefault(),e.toggleVolumeSlider(),(o=e.$el.find(".volume-icon"))[0].stepDown();a=o[0].value;e.setVolume(10*a)}break;default:if(e.accessibilityMode)break;if(n.which==e.keyCode.right&&(n.preventDefault(),e.embed.manager.jumpForward(n)),n.which==e.keyCode.left&&(n.preventDefault(),e.embed.manager.jumpBack(n)),n.which==e.keyCode.up){n.preventDefault(),(o=e.$el.find(".volume-icon"))[0].stepUp();a=o[0].value;e.setVolume(10*a)}if(n.which==e.keyCode.down){var o;n.preventDefault(),(o=e.$el.find(".volume-icon"))[0].stepDown();a=o[0].value;e.setVolume(10*a)}}}})},setupSafariFullScreenKeyboardAccessWorkaround:function(){var e=this;r.Util.matrix.safari&&this.embed.target.on("click, focus",'.viddler-embed-full textarea, .viddler-embed-full input[type="text"]',function(t){var n=e.embed.target.find(".viddler-embed").get(0);o.toggle(n),e.toggleFullScreenButton(t.target)})},hideControlsUntilPlay:function(){this.$el.find(".top").hide(),this.$el.find(".bottom").hide(),this.$el.find(".middle").show(),this.$el.find(".middle").find("> *").hide(),this.$el.find(".play-overlay-button").show().click(function(){this.$el.find(".top").show(),this.$el.find(".bottom").show(),this.$el.find(".middle").find("> *").show()}.bind(this))},setupSizingOptimization:function(){var e=this;this.embed.manager.events.on("player:resize",function(){e.optimizeSizing()})},optimizeSizing:function(){this.controlsAlwaysVisible&&this.handlerControlsAlwaysVisibleEvents()}})}),define("text",["module"],function(e){"use strict";var t,n,i,r,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,d=u&&location.protocol&&location.protocol.replace(/\:/,""),c=u&&location.hostname,f=u&&(location.port||void 0),h={},p=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){var t=(e=e.replace(s,"")).match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(e){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,a=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!o||a>1)?(t=e.substring(0,a),n=e.substring(a+1,e.length)):t=e,-1!==(a=(i=n||t).indexOf("!"))&&(r="strip"===i.substring(a+1),i=i.substring(0,a),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var a,o,s,l=t.xdRegExp.exec(e);return!l||(a=l[2],s=(o=(o=l[3]).split(":"))[1],o=o[0],!(a&&a!==n||o&&o.toLowerCase()!==i.toLowerCase()||(s||o)&&s!==r))},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,p.isBuild&&(h[e]=i),r(i)},load:function(e,n,i,r){if(!r.isBuild||r.inlineText){p.isBuild=r.isBuild;var a=t.parseName(e),o=a.moduleName+(a.ext?"."+a.ext:""),s=n.toUrl(o),l=p.useXhr||t.useXhr;0!==s.indexOf("empty:")?!u||l(s,d,c,f)?t.get(s,function(n){t.finishLoad(e,a.strip,n,i)},function(e){i.error&&i.error(e)}):n([o],function(e){t.finishLoad(a.moduleName+"."+a.ext,a.strip,e,i)}):i()}else i()},write:function(e,n,i,r){if(h.hasOwnProperty(n)){var a=t.jsEscape(h[n]);i.asModule(e+"!"+n,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,n,i,r,a){var o=t.parseName(n),s=o.ext?"."+o.ext:"",l=o.moduleName+s,u=i.toUrl(o.moduleName+s)+".js";t.load(l,i,function(n){var i=function(e){return r(u,e)};i.asModule=function(e,t){return r.asModule(e,u,t)},t.write(e,l,i,a)},a)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(e){i(e)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,n,i,r){var a,o=t.createXhr();if(o.open("GET",e,!0),r)for(a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),r[a]);p.onXhr&&p.onXhr(o,e),o.onreadystatechange=function(t){var r,a;4===o.readyState&&((r=o.status)>399&&r<600?((a=new Error(e+" HTTP status: "+r)).xhr=o,i(a)):n(o.responseText),p.onXhrComplete&&p.onXhrComplete(o,e))},o.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(i=o.readLine())&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(a),n.append(i);s=String(n.toString())}finally{o.close()}t(s)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,o,s,l={};a&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{(n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream)).init(s,1,0,!1),(o=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream)).init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),t(l.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),t}),define("text!views/../../img/controls-sprite.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns:i="&amp;#38;ns_ai;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" id="Layer_1" x="0px" y="0px" width="446.31601" height="22.159" viewBox="0 0 446.31601 22.159" enable-background="new 0 0 612 792" xml:space="preserve" inkscape:version="0.48.4 r9939" sodipodi:docname="controls-sprite.html">\n    <style type="text/css">\n        <![CDATA[\n      .svg-icon-color {\n        fill: #626363;\n      }\n    ]]>\n    </style>\n    <switch id="switch3" transform="translate(-28.5,-336.238)">\n        <g i:extraneous="self" id="g7">\n            \x3c!-- captions --\x3e\n            <path clip-rule="evenodd" d="m 127.77,347.128 c 0.028,3.876 0.523,7.7 1.489,8.666 1.293,1.294 6.275,1.894 11.27,1.881 4.995,0.013 9.976,-0.587 11.27,-1.881 0.965,-0.966 1.46,-4.79 1.489,-8.666 l 0,0 c -0.029,-3.877 -0.524,-7.7 -1.489,-8.666 -1.294,-1.293 -6.275,-1.895 -11.27,-1.88 -4.995,-0.014 -9.976,0.587 -11.27,1.88 -0.966,0.966 -1.461,4.789 -1.489,8.666 l 0,0 z m 9.181,-1.533 c -0.057,-0.411 -0.34,-1.656 -1.632,-1.656 -1.462,0 -1.93,1.577 -1.93,3.091 0,1.513 0.468,3.091 1.93,3.091 1.049,0 1.461,-0.82 1.646,-1.876 h 3.065 c 0,2.27 -1.66,4.684 -4.625,4.684 -3.278,0 -5.137,-2.571 -5.137,-5.898 0,-3.549 2.015,-5.897 5.137,-5.897 2.781,0.015 4.313,1.64 4.583,4.462 h -3.037 l 0,-10e-4 z m 10.757,0 c -0.057,-0.411 -0.341,-1.656 -1.632,-1.656 -1.461,0 -1.93,1.577 -1.93,3.091 0,1.513 0.469,3.091 1.93,3.091 1.05,0 1.461,-0.82 1.646,-1.876 h 3.064 c 0,2.27 -1.66,4.684 -4.626,4.684 -3.277,0 -5.136,-2.571 -5.136,-5.898 0,-3.549 2.015,-5.897 5.136,-5.897 2.781,0.015 4.314,1.64 4.583,4.462 h -3.035 l 0,-10e-4 z" id="path9" inkscape:connector-curvature="0" class="svg-icon-color" style="fill-rule:evenodd" />\n\n            \x3c!-- comments --\x3e\n            <path d="m 99.248,336.49 c 7.251,0 13.129,3.846 13.129,8.587 0,4.525 -5.35,8.221 -12.137,8.553 l 2.459,4.767 c 0,0 -7.803,-4.588 -10.336,-6.024 -2.39,-1.356 -6.25,-4.053 -6.25,-7.295 0.001,-4.743 5.88,-8.588 13.135,-8.588 z m 0.293,6.358 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.926,2.07 2.069,2.07 1.143,0 2.069,-0.927 2.069,-2.07 0,-1.142 -0.926,-2.068 -2.069,-2.068 z m 5.905,0 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.927,2.07 2.069,2.07 1.143,0 2.069,-0.927 2.069,-2.07 0.001,-1.142 -0.926,-2.068 -2.069,-2.068 z m -11.866,0 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.926,2.07 2.069,2.07 1.144,0 2.069,-0.927 2.069,-2.07 0,-1.142 -0.925,-2.068 -2.069,-2.068 z" id="path11" inkscape:connector-curvature="0" class="svg-icon-color" />\n\n            \x3c!-- full screen --\x3e\n            <polygon points="266.441,338.651 266.441,336.239 260.893,336.239 260.893,341.425 263.306,341.425 263.306,338.651 " id="polygon13" class="svg-icon-color" />\n            <polygon points="266.441,355.606 266.441,358.019 260.893,358.019 260.893,352.832 263.306,352.832 263.306,355.606 " id="polygon15" class="svg-icon-color" />\n            <polygon points="280.342,338.651 280.342,336.239 285.892,336.239 285.892,341.425 283.478,341.425 283.478,338.651 " id="polygon17" class="svg-icon-color" />\n            <polygon points="280.342,355.606 280.342,358.019 285.892,358.019 285.892,352.832 283.478,352.832 283.478,355.606 " id="polygon19" class="svg-icon-color" />\n            <rect x="265.63599" y="341.06699" width="15.516" height="12.278" id="rect21" class="svg-icon-color" />\n\n            \x3c!-- Play --\x3e\n            <polygon points="57.857,356.941 71.199,347.082 57.857,337.293 " id="polygon25" class="svg-icon-color" />\n\n            \x3c!-- Pause --\x3e\n            <g id="g27">\n                <rect x="28.5" y="336.27701" width="5.3920002" height="21.702999" id="rect29" class="svg-icon-color" />\n                <rect x="36.449001" y="336.27701" width="5.3920002" height="21.702999" id="rect31" class="svg-icon-color" />\n            </g>\n\n            \x3c!-- Volume --\x3e\n            <g id="g43">\n                <polygon points="181.279,336.561 173.781,342.718 168.77,342.718 168.77,351.515 173.778,351.515 181.275,357.674 " id="polygon45" class="svg-icon-color" />\n                <rect x="184.218" y="342.54199" width="19.316" height="9.2329998" id="rect47" class="svg-icon-color" />\n            </g>\n\n            \x3c!-- Quality Dropdown --\x3e\n            <path d="m 340.635,339.544 c 0,-1.825 1.48,-3.306 3.305,-3.306 h 15.496 c 1.826,0 3.307,1.48 3.307,3.306 v 15.188 c 0,1.825 -1.48,3.306 -3.307,3.306 H 343.94 c -1.824,0 -3.305,-1.48 -3.305,-3.306 v -15.188 z m 4.061,2.317 6.845,11.263 6.795,-11.263 h -13.64 z" id="path67" inkscape:connector-curvature="0" class="svg-icon-color" />\n\n            \x3c!-- Three bars --\x3e\n            <g id="g83">\n                <rect x="302.815" y="344.48099" width="21.704" height="5.3930001" id="rect85" class="svg-icon-color" />\n                <rect x="302.815" y="352.55899" width="21.704" height="5.3930001" id="rect87" class="svg-icon-color" />\n                <rect x="302.815" y="336.306" width="21.704" height="5.3930001" id="rect89" class="svg-icon-color" />\n            </g>\n\n            \x3c!-- Jump back --\x3e\n            <path d="m 375.992,344.434 2.773,2.875 2.772,-2.875 h -1.375 c 1.128,-3.052 4.063,-5.227 7.506,-5.227 4.418,0 8,3.582 8,8 0,4.418 -3.582,8 -8,8 -2.944,0 -5.518,-1.591 -6.906,-3.96 l -2.284,1.379 c 1.855,3.142 5.276,5.249 9.19,5.249 5.892,0 10.667,-4.776 10.667,-10.667 0,-5.891 -4.775,-10.667 -10.667,-10.667 -4.932,0 -9.082,3.347 -10.304,7.893 h -1.372 z" id="path93" inkscape:connector-curvature="0" class="svg-icon-color" />\n\n            \x3c!-- Jump forward --\x3e\n            <path d="m 433.405,344.434 -2.773,2.875 -2.772,-2.875 h 1.375 c -1.128,-3.052 -4.063,-5.227 -7.506,-5.227 -4.418,0 -8,3.582 -8,8 0,4.418 3.582,8 8,8 2.944,0 5.518,-1.591 6.906,-3.96 l 2.284,1.379 c -1.855,3.142 -5.276,5.249 -9.19,5.249 -5.892,0 -10.667,-4.776 -10.667,-10.667 0,-5.891 4.775,-10.667 10.667,-10.667 4.932,0 9.082,3.347 10.304,7.893 h 1.372 z" id="path97" inkscape:connector-curvature="0" class="svg-icon-color" />\n\n            \x3c!-- Quality select --\x3e\n            <g id="g107">\n                <polygon points="474.816,358.018 474.816,336.238 448.498,336.238 448.498,341.425 450.911,341.425 450.911,338.651 472.402,338.651 472.402,355.605 469.623,355.605 469.623,358.018 " id="polygon109" class="svg-icon-color" />\n                <polygon points="467.651,357.979 467.651,343.444 448.498,343.444 448.498,348.783 450.911,348.783 450.911,345.857 465.237,345.857 465.237,355.567 462.375,355.567 462.375,357.979 " id="polygon111" class="svg-icon-color" />\n                <rect x="448.49799" y="350.659" width="11.904" height="7.3200002" id="rect113" class="svg-icon-color" />\n            </g>\n        </g>\n    </switch>\n</svg>\n'}),define("base64",[],function(){var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var n,i,r,a,o,s,l,u="",d=0;for(t=e._utf8_encode(t);d<t.length;)a=(n=t.charCodeAt(d++))>>2,o=(3&n)<<4|(i=t.charCodeAt(d++))>>4,s=(15&i)<<2|(r=t.charCodeAt(d++))>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(l);return u},decode:function(t){var n,i,r,a,o,s,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)n=this._keyStr.indexOf(t.charAt(u++))<<2|(a=this._keyStr.indexOf(t.charAt(u++)))>>4,i=(15&a)<<4|(o=this._keyStr.indexOf(t.charAt(u++)))>>2,r=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(u++))),l+=String.fromCharCode(n),64!=o&&(l+=String.fromCharCode(i)),64!=s&&(l+=String.fromCharCode(r));return l=e._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}};return e}),define("pusher.color",[],function(){return function(){function e(e){return(e%=360)<0?360+e:e}function t(e){return e>>>0}function n(e,t){return Array.prototype.slice.call(e,t)}function i(e,t,n){return e>t?e<n?e:n:t}function r(e,t,n){return(1-n)*e+n*t}function a(e){return(e=Math.round(255*e))>0?e<255?255&e:255:0}function o(e){return e/255}function s(e,t,n){var i,r,a;if(0==t)i=r=a=n;else{function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),r=o(l,s,e),a=o(l,s,e-1/3)}return[i,r,a]}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,216],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[216,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function u(e){var t,n,i=e[0],r=e[1],a=e[2],o=Math.min(Math.min(i,r),a),s=Math.max(Math.max(i,r),a),l=s;return s==o?n=0:s==i?n=(r-a)/(s-o)*60%360:s==r?n=(a-i)/(s-o)*60+120:s==a&&(n=(i-r)/(s-o)*60+240),n<0&&(n+=360),t=0==s?0:1-o/s,[Math.round(n),Math.round(100*t),Math.round(100*l),e[3]]}function d(t){var n=e(t[0]),i=(i=t[1])/100,r=(r=t[2])/100,a=Math.floor(n/60%6),o=n/60-a,s=r*(1-i),l=r*(1-o*i),u=r*(1-(1-o)*i),d=[];switch(a){case 0:d=[r,u,s];break;case 1:d=[l,r,s];break;case 2:d=[s,r,u];break;case 3:d=[s,l,r];break;case 4:d=[u,s,r];break;case 5:d=[r,s,l]}return[d[0],d[1],d[2],t[3]]}function f(t){var n=function(e,t,n){var i,r,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a==o)i=r=0;else{var l=a-o;switch(r=s>.5?l/(2-a-o):l/(a+o),a){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return[i,r,s]}(t[0],t[1],t[2]);return n[0]=e(Math.floor(360*n[0])),n[1]=Math.floor(100*n[1]),n[2]=Math.floor(100*n[2]),n}var h={byteOrPercent:function(e){var t;return"string"==typeof e&&(t=e.match(/^([0-9]+)%$/))?Math.floor(255*parseFloat(t[1])/100):parseFloat(e)},floatOrPercent:function(e){var t;return"string"==typeof e&&(t=e.match(/^([0-9]+)%$/))?parseFloat(t[1])/100:parseFloat(e)},numberOrPercent:function(e,t){var n;return"string"==typeof e&&(n=e.match(/^([0-9]+)%$/))?parseFloat(n[1])/100*t:parseFloat(e)},rgba:function(e){for(var t=0;t<3;++t)e[t]=o(h.byteOrPercent(e[t]));return e[3]=h.floatOrPercent(e[t]),new m(e)},rgba8:function(e){return new m([o(h.byteOrPercent(e[0])),o(h.byteOrPercent(e[1])),o(h.byteOrPercent(e[2])),o(h.byteOrPercent(e[3]))])},float3:function(e){for(var t=0;t<3;++t)e[t]=h.floatOrPercent(e[t]);return e[3]=1,new m(e)},float4:function(e){for(var t=0;t<3;++t)e[t]=h.floatOrPercent(e[t]);return e[3]=h.floatOrPercent(e[t]),new m(e)},hsla:function(e){return e[0]=h.numberOrPercent(e[0],360),e[1]=h.numberOrPercent(e[1],100),e[2]=h.numberOrPercent(e[2],100),e[3]=h.numberOrPercent(e[3],1),new m((t=e,[(n=s(parseFloat(t[0])/360,parseFloat(t[1])/100,parseFloat(t[2])/100))[0],n[1],n[2],parseFloat(t[3])]));var t,n},hsva:function(t){return t[0]=e(parseFloat(t[0])),t[1]=Math.max(0,Math.min(100,parseFloat(t[1]))),t[2]=Math.max(0,Math.min(100,parseFloat(t[2]))),t[3]=h.floatOrPercent(t[3]),new m(d(t))}},p={keyword:{},hex3:{},hex7:{},rgb:{parse:function(e){return(e=e.slice(0)).push(1),h.rgba(e)}},rgba:{parse:h.rgba},hsl:{parse:function(e){return(e=e.slice(0)).push(1),h.hsla(e)}},hsla:{parse:h.hsla},hsv:{parse:function(e){return(e=e.slice(0)).push(1),h.hsva(e)}},hsva:{parse:h.hsva},rgb8:{parse:function(e){return(e=e.slice(0)).push(1),h.rgba(e)}},rgba8:{parse:function(e){return h.rgba8(e)}},packed_rgba:{parse:function(e){return e=[e>>24&255,e>>16&255,e>>8&255,(255&e)/255],h.rgba(e)},output:function(e){return t(a(e[0])<<24|a(e[1])<<16|a(e[2])<<8|a(e[3]))}},packed_argb:{parse:function(e){return e=[e>>16&255,e>>8&255,e>>0&255,(e>>24&255)/255],h.rgba(e)},output:function(e){return t(a(e[3])<<24|a(e[0])<<16|a(e[1])<<8|a(e[2]))}},float3:{parse:h.float3},float4:{parse:h.float4}};function m(e){this._value=e}var g=function(){var e,t,i=null;if(arguments[0]instanceof m)return new m(arguments[0]._value);if("string"==typeof arguments[0])if("#"==arguments[0][0]){if(i=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new m(function(e){for(var t=[parseInt(e.substr(1,1),16),parseInt(e.substr(2,1),16),parseInt(e.substr(3,1),16),1],n=0;n<3;++n)t[n]=(16*t[n]+t[n])/255;return t}(i[0]));if(i=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new m((t=i[0],[parseInt(t.substr(1,2),16)/255,parseInt(t.substr(3,2),16)/255,parseInt(t.substr(5,2),16)/255,1]))}else{if(i=p[arguments[0].toLowerCase()])return 2==arguments.length?i.parse(arguments[1]):i.parse(n(arguments,1));if(i=arguments[0].match(/^\s*([A-Z][A-Z0-9_]+)\s*\(\s*([\-0-9A-FX]+)\s*\)\s*$/i))return(r=p[i[1].toLowerCase()]).parse(i[2]);if(i=arguments[0].match(/^\s*([A-Z][A-Z0-9]+)\s*\(\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*(,\s*([0-9\.]+%?)\s*)?\)\s*$/i)){var r=p[i[1].toLowerCase()];if(void 0===i[5]){var a=[i[2],i[3],i[4]];return r.parse(a)}var a=[i[2],i[3],i[4],i[6]];return r.parse(a)}if(1==arguments.length&&(i=l[(e=arguments[0],e.replace(/^\s+/,"").replace(/\s+$/,"").toLowerCase())]))return new m([o((a=i)[0]),o(a[1]),o(a[2]),1])}throw"Could not parse color '"+arguments[0]+"'"},v={white:g("white"),black:g("black"),gray:g("gray")};function y(e,t){if(null==t)return a(this._value[e]);var i,r=n(this._value,0);if("string"!=typeof t){var o=this.clone();return o._value[e]=t,o}if(i=t.match(/^([+\-\\*]=?)([0-9.]+)/)){var s=i[1],l=parseFloat(i[2]);switch(s[0]){case"+":r[e]+=l/255;break;case"-":r[e]-=l/255;break;case"*":r[e]*=l}return"="==s[1]?(this._value=r,this):new m(r)}}function _(t){return function(){function n(n,i,r){r=parseFloat(r);var a=u(n._value),o=0;switch(i){case"=":a[t]=r,o=1;break;case"+":a[t]+=r,o=1;break;case"+=":a[t]+=r;break;case"-":a[t]-=r,o=1;break;case"-=":a[t]-=r;break;case"*":a[t]*=r,o=1;break;case"*=":a[t]*=r;break;default:throw"Bad op "+i}return 0==t?a[t]=e(a[t]):1!=t&&2!=t||(a[t]<0?a[t]=0:a[t]>99&&(a[t]=99)),o&&(n=n.clone()),n._value=d(a),n}return 0==arguments.length?u(this._value)[t]:1==arguments.length?"string"==typeof arguments[0]&&(i=arguments[0].match(/^([\+\-\*]=?)([0-9.]+)/))?n(this,i[1],i[2]):n(this,"=",arguments[0]):2==arguments.length?n(this,arguments[0],arguments[1]):void 0;var i}}var b={clone:function(){return new m(this._value.slice(0))},html:function(){var e=this,t=this._value;return{hex3:function(){return e.hex3()},hex6:function(){return e.hex6()},rgb:function(){return"rgb("+e.rgb().join(",")+")"},rgba:function(){return"rgba("+e.rgba().join(",")+")"},hsl:function(){return"hsl("+f(t).join(",")+")"},hsla:function(){return"hsla("+(e=t,n=f(e),n.push(e[3]),n).join(",")+")";var e,n},keyword:function(){var e,n=195076;for(E in l){for(var i=l[E],r=0,a=0;a<3;++a){var s=t[a]-o(i[a]);r+=s*s}r<n&&(e=E,n=r)}return e}}[arguments[0]||"rgba"]()},red:function(){return y.call(this,0,arguments[0])},green:function(){return y.call(this,1,arguments[0])},blue:function(){return y.call(this,2,arguments[0])},alpha:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=h.floatOrPercent(arguments[0]),c):this._value[3]},alpha8:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=h.byteOrPercent(arguments[0])/255,c):Math.floor(255*this._value[3])},grayvalue:function(){var e=this._value;return(e[0]+e[1]+e[2])/3},grayvalue8:function(){return a(this.grayvalue())},luminanceFast:function(){var e=this._value;return.2126*e[0]+.7152*e[1]+.0722*e[2]},luminance:function(){function e(e){return e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*e(this._value[0])+.7152*e(this._value[1])+.0722*e(this._value[2])},luminance8:function(){return a(this.luminance())},luminanceFast8:function(){return a(this.luminanceFast())},hsv:function(){return u(this._value).slice(0,3)},hsva:function(){return u(this._value)},packed_rgba:function(){return p.packed_rgba.output(this._value)},packed_argb:function(){return p.packed_argb.output(this._value)},hue:_(0),saturation:_(1),value:_(2),clamp:function(){var e=this._value;return new m([i(e[0],0,1),i(e[1],0,1),i(e[2],0,1),i(e[3],0,1)])},blend:function(e,t){"number"!=typeof t&&(t=h.floatOrPercent(t));var n=this,i=g(e);return new m([r(n._value[0],i._value[0],t),r(n._value[1],i._value[1],t),r(n._value[2],i._value[2],t),r(n._value[3],i._value[3],t)])},add:function(e){var t=this._value,n=g(e)._value;return new m([t[0]+n[0]*n[3],t[1]+n[1]*n[3],t[2]+n[2]*n[3],t[3]])},inc:function(e){var t=this._value,n=g(e)._value;return t[0]+=n[0]*n[3],t[1]+=n[1]*n[3],t[2]+=n[2]*n[3],this},dec:function(e){var t=this._value,n=g(e)._value;return t[0]-=n[0]*n[3],t[1]-=n[1]*n[3],t[2]-=n[2]*n[3],this},subtract:function(e){var t=this._value,n=g(e)._value;return new m([t[0]-n[0]*n[3],t[1]-n[1]*n[3],t[2]-n[2]*n[3],t[3]])},multiply:function(e){var t=this._value,n=g(e)._value;return new m([t[0]*n[0],t[1]*n[1],t[2]*n[2],t[3]*n[3]])},scale:function(e){var t=this._value;return new m([t[0]*e,t[1]*e,t[2]*e,t[3]])},xor:function(e){var t=this.rgba8(),n=g(e).rgba8();return g("rgba8",t[0]^n[0],t[1]^n[1],t[2]^n[2],t[3])},tint:function(e){return this.blend(v.white,e)},shade:function(e){return this.blend(v.black,e)},tone:function(e){return this.blend(v.gray,e)},complement:function(){var t=this.hsva();return t[0]=e(t[0]+180),new m(d(t))},triad:function(){return[new m(this._value),this.hue("+120"),this.hue("+240")]},hueSet:function(){for(var e=[],t=100;t>=30;t-=35)for(var n=100;n>=30;n-=35)e.push(this.hue("+",0).saturation(t).value(n));return e},hueRange:function(e,t){for(var n=this.hue(),i=[],r=0;r<t;++r){var a=n+2*(r/(t-1)-.5)*e;i.push(this.hue("=",a))}return i},contrastWhiteBlack:function(){return this.value()<50?g("white"):g("black")},contrastGray:function(){var e=this.hsva(),t=e[2]<30?e[2]+20:e[2]-20;return new m(d([e[0],0,t,e[3]]))},contrastText:function(){var e=this._value,t=.241*e[0]*e[0]+.691*e[1]*e[1]+.068*e[2]*e[2];return g(t<.51?"white":"black")},hex3:function(){function e(e,t){return Math.min(Math.round(a(e)/16),15).toString(16)}return"#"+e(this._value[0])+e(this._value[1])+e(this._value[2])},hex6:function(){function e(e,t){var n=a(e).toString(16);return n.length<2?"0"+n:n}return"#"+e(this._value[0])+e(this._value[1])+e(this._value[2])},rgb:function(){var e=this._value;return[a(e[0]),a(e[1]),a(e[2])]},rgba:function(){var e=this._value;return[a(e[0]),a(e[1]),a(e[2]),e[3]]},rgb8:function(){var e=this._value;return[a(e[0]),a(e[1]),a(e[2])]},rgba8:function(){var e=this._value;return[a(e[0]),a(e[1]),a(e[2]),this.alpha8()]},float3:function(){return[this._value[0],this._value[1],this._value[2]]},float4:function(){return[this._value[0],this._value[1],this._value[2],this._value[3]]}};for(var E in b.sub=b.subtract,b.mul=b.multiply,b)m.prototype[E]=b[E];g.float3=function(e,t,n){return new m([e,t,n,1])},g.float4=function(e,t,n,i){return new m([e,t,n,i])},g.version="0.2.5",g.Color=m,"undefined"!=typeof module&&module.exports?module.exports=g:"undefined"!=typeof window?(window.pusher=window.pusher||{},window.pusher.color=g):"undefined"!=typeof self&&(self.pusher=self.pusher||{},self.pusher.color=g)}(),pusher}),define("text!views/../../img/icons/normal/play.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="13.342"\n   height="23">\n  <style\n     type="text/css"\n     id="style3">\n     .svg-icon-color {\n       fill: #CCCCCC;\n     }\n   </style>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-170.47186,-422.04332)">\n    <polygon\n       transform="translate(112.61486,87.435659)"\n       points="71.199,347.082 57.857,337.293 57.857,356.941 "\n       id="polygon25"\n       class="svg-icon-color" />\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/pause.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="16"\n   height="22">\n   <style type="text/css">\n     <![CDATA[\n     .svg-icon-color {\n       fill: #CCCCCC;\n     }\n   ]]>\n   </style>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(0,-1030)">\n    <g\n       transform="translate(-27,694)"\n       id="g27">\n      <rect\n         x="28"\n         y="336"\n         width="5"\n         height="21.702999"\n         id="rect29"\n         class="svg-icon-color" />\n      <rect\n         x="36"\n         y="336"\n         width="5"\n         height="21.702999"\n         id="rect31"\n         class="svg-icon-color" />\n    </g>\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/mute.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n width="4.758px" height="8.029px" viewBox="0 0 4.758 8.029" enable-background="new 0 0 4.758 8.029" xml:space="preserve">\r\n\r\n  <style type="text/css">\r\n      <![CDATA[\r\n    .svg-icon-color {\r\n      fill: #CCCCCC;\r\n    }\r\n  ]]>\r\n  </style>\r\n<polygon class="svg-icon-color" points="4.758,0 1.906,2.342 0,2.342 0,5.688 1.904,5.688 4.756,8.029 "/>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/mute-strike.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n  width="6.316px" height="8.03px" viewBox="0 0 6.316 8.03" enable-background="new 0 0 6.316 8.03" xml:space="preserve">\r\n  <style type="text/css">\r\n      <![CDATA[\r\n    .svg-icon-color {\r\n      fill: #CCCCCC;\r\n    }\r\n  ]]>\r\n  </style>\r\n<g>\r\n  <polygon class="svg-icon-color" points="4.909,4.347 2.642,6.168 4.908,8.03   "/>\r\n  <polygon class="svg-icon-color" points="4.91,0 2.059,2.342 0.152,2.342 0.152,5.227 4.91,1.406  "/>\r\n  <polygon class="svg-icon-color" points="5.797,1.595 0,6.299 0.52,6.971 6.316,2.265   "/>\r\n</g>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/full-screen.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="24.999001"\n   height="21.780001">\n   <style type="text/css">\n   <![CDATA[\n     .svg-icon-color {\n       fill: #CCCCCC;\n     }\n   ]]>\n   </style>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-362.5005,-521.47218)">\n    <polygon\n       transform="translate(101.6075,185.23318)"\n       points="260.893,336.239 260.893,341.425 263.306,341.425 263.306,338.651 266.441,338.651 266.441,336.239 "\n       id="polygon13"\n       class="svg-icon-color" />\n    <polygon\n       transform="translate(101.6075,185.23318)"\n       points="260.893,358.019 260.893,352.832 263.306,352.832 263.306,355.606 266.441,355.606 266.441,358.019 "\n       id="polygon15"\n       class="svg-icon-color" />\n    <polygon\n       transform="translate(101.6075,185.23318)"\n       points="285.892,336.239 285.892,341.425 283.478,341.425 283.478,338.651 280.342,338.651 280.342,336.239 "\n       id="polygon17"\n       class="svg-icon-color" />\n    <polygon\n       transform="translate(101.6075,185.23318)"\n       points="285.892,358.019 285.892,352.832 283.478,352.832 283.478,355.606 280.342,355.606 280.342,358.019 "\n       id="polygon19"\n       class="svg-icon-color" />\n    <rect\n       x="367.2435"\n       y="526.30017"\n       width="15.516"\n       height="12.278"\n       id="rect21"\n       class="svg-icon-color" />\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/full-screen-close.svg",[],function(){return'<svg \n  aria-hidden="true" \n  focusable="false" \n  data-prefix="fas" \n  data-icon="compress" \n  class="svg-inline--fa fa-compress fa-w-14" \n  role="img" \n  xmlns="http://www.w3.org/2000/svg" \n  viewBox="0 0 448 512"><path \n  fill="#CCCCCC" \n  d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"></path></svg>'}),define("text!views/../../img/icons/normal/jump-back.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n   width="22.124px" height="21.045px" viewBox="-0.319 -0.705 22.124 21.045" enable-background="new -0.319 -0.705 22.124 21.045"\r\n   xml:space="preserve">\r\n <style type="text/css">\r\n <![CDATA[\r\n   .svg-icon-color {\r\n     fill: #CCCCCC;\r\n   }\r\n ]]>\r\n </style>\r\n<g>\r\n  <path d="M1.003,7.388c1.18-4.384,5.18-7.611,9.934-7.611c5.677,0,10.281,4.604,10.281,10.285c0,5.676-4.604,10.277-10.281,10.277\r\n    c-3.771,0-7.068-2.029-8.857-5.057l2.203-1.328c1.338,2.283,3.816,3.814,6.654,3.814c4.256,0,7.711-3.453,7.711-7.707\r\n    c0-4.262-3.455-7.713-7.711-7.713c-3.318,0-6.148,2.094-7.232,5.039h1.324l-2.672,2.768l-2.676-2.768H1.003z"/>\r\n  <path class="svg-icon-color" d="M1.64,6.906c1.18-4.384,5.18-7.611,9.934-7.611c5.677,0,10.281,4.604,10.281,10.285\r\n    c0,5.676-4.604,10.277-10.281,10.279c-3.773,0-7.07-2.031-8.859-5.059l2.203-1.328c1.338,2.283,3.818,3.814,6.656,3.814\r\n    c4.256,0,7.711-3.453,7.711-7.707c0-4.262-3.455-7.713-7.711-7.713c-3.32,0-6.15,2.094-7.234,5.039h1.324L2.991,9.674L0.317,6.906\r\n    H1.64z"/>\r\n</g>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/jump-forward.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n   width="22.174px" height="21.031px" viewBox="0 0 22.174 21.031" enable-background="new 0 0 22.174 21.031" xml:space="preserve">\r\n <style type="text/css">\r\n <![CDATA[\r\n   .svg-icon-color {\r\n     fill: #CCCCCC;\r\n   }\r\n ]]>\r\n </style>\r\n<g>\r\n  <path d="M22.174,8.094l-2.676,2.767l-2.672-2.767h1.324c-1.084-2.946-3.914-5.04-7.233-5.04c-4.255,0-7.71,3.451-7.71,7.713\r\n    c0,4.253,3.455,7.707,7.71,7.707c2.839,0,5.317-1.531,6.655-3.814l2.203,1.328c-1.789,3.027-5.086,5.057-8.858,5.057\r\n    c-5.676,0-10.28-4.602-10.28-10.277c0-5.681,4.604-10.286,10.28-10.286c4.755,0,8.755,3.228,9.935,7.612H22.174z"/>\r\n  <path class="svg-icon-color" d="M21.537,7.611l-2.675,2.768L16.19,7.611h1.324c-1.084-2.945-3.914-5.039-7.234-5.039\r\n    c-4.256,0-7.711,3.451-7.711,7.713c0,4.254,3.455,7.707,7.711,7.707c2.838,0,5.318-1.531,6.656-3.814l2.203,1.328\r\n    c-1.789,3.027-5.086,5.058-8.859,5.058C4.604,20.562,0,15.961,0,10.285C0,4.604,4.604,0,10.281,0c4.754,0,8.754,3.228,9.934,7.611\r\n    H21.537z"/>\r\n</g>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/indicator.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n  width="28px" height="8px" viewBox="0 0 12.196 2.925" enable-background="new 0 0 12.196 2.925" xml:space="preserve">\r\n   <style type="text/css">\r\n     <![CDATA[\r\n     .svg-icon-color {\r\n       fill: #CCCCCC;\r\n     }\r\n     ]]>\r\n   </style>\r\n  <polygon class="svg-icon-color" points="12.196,2.925 0,2.925 0,1.925 4.458,1.925 6.113,0 7.877,1.925 12.196,1.925 12.196,2.925 "/>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/volume-bar.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\n<svg\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="19.316"\n   height="23">\n  <style type="text/css" id="style3">\n     <![CDATA[\n     .svg-icon-color {\n       fill: #CCCCCC;\n     }\n     ]]>\n   </style>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-365.34201,-513.97867)">\n    <rect\n       x="365.34201"\n       y="519.07886"\n       width="19.316"\n       height="9.2329998"\n       id="rect47"\n       class="svg-icon-color" />\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/captions.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns:i="&amp;#38;ns_ai;" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" id="Layer_1" x="0px" y="0px" width="26" height="22" viewBox="0 0 26 22" enable-background="new 0 0 612 792" xml:space="preserve" inkscape:version="0.48.4 r9939" sodipodi:docname="controls-sprite.svg">\n    <style type="text/css">\n        <![CDATA[\n      .svg-icon-color {\n        fill: #CCCCCC;\n      }\n    ]]>\n    </style>\n    <switch id="switch3" transform="translate(-128,-336.238)">\n        <g i:extraneous="self" id="g7">\n            \x3c!-- captions --\x3e\n            <path clip-rule="evenodd" d="m 127.77,347.128 c 0.028,3.876 0.523,7.7 1.489,8.666 1.293,1.294 6.275,1.894 11.27,1.881 4.995,0.013 9.976,-0.587 11.27,-1.881 0.965,-0.966 1.46,-4.79 1.489,-8.666 l 0,0 c -0.029,-3.877 -0.524,-7.7 -1.489,-8.666 -1.294,-1.293 -6.275,-1.895 -11.27,-1.88 -4.995,-0.014 -9.976,0.587 -11.27,1.88 -0.966,0.966 -1.461,4.789 -1.489,8.666 l 0,0 z m 9.181,-1.533 c -0.057,-0.411 -0.34,-1.656 -1.632,-1.656 -1.462,0 -1.93,1.577 -1.93,3.091 0,1.513 0.468,3.091 1.93,3.091 1.049,0 1.461,-0.82 1.646,-1.876 h 3.065 c 0,2.27 -1.66,4.684 -4.625,4.684 -3.278,0 -5.137,-2.571 -5.137,-5.898 0,-3.549 2.015,-5.897 5.137,-5.897 2.781,0.015 4.313,1.64 4.583,4.462 h -3.037 l 0,-10e-4 z m 10.757,0 c -0.057,-0.411 -0.341,-1.656 -1.632,-1.656 -1.461,0 -1.93,1.577 -1.93,3.091 0,1.513 0.469,3.091 1.93,3.091 1.05,0 1.461,-0.82 1.646,-1.876 h 3.064 c 0,2.27 -1.66,4.684 -4.626,4.684 -3.277,0 -5.136,-2.571 -5.136,-5.898 0,-3.549 2.015,-5.897 5.136,-5.897 2.781,0.015 4.314,1.64 4.583,4.462 h -3.035 l 0,-10e-4 z" id="path9" inkscape:connector-curvature="0" class="svg-icon-color" style="fill-rule:evenodd" />\n        </g>\n     </switch>\n</svg>\n'}),define("text!views/../../img/icons/normal/comment.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="26.264"\n   height="21.907">\n   <style type="text/css">\n      <![CDATA[\n      .svg-icon-color {\n        fill: #CCCCCC;\n      }\n      ]]>\n   </style>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-0.868,-1028.1944)">\n    <path\n       d="m 14.003,1028.1944 c 7.251,0 13.129,3.846 13.129,8.587 0,4.525 -5.35,8.221 -12.137,8.553 l 2.459,4.767 c 0,0 -7.803,-4.588 -10.336,-6.024 -2.39,-1.356 -6.25,-4.053 -6.25,-7.295 0.001,-4.743 5.88,-8.588 13.135,-8.588 z m 0.293,6.358 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.926,2.07 2.069,2.07 1.143,0 2.069,-0.927 2.069,-2.07 0,-1.142 -0.926,-2.068 -2.069,-2.068 z m 5.905,0 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.927,2.07 2.069,2.07 1.143,0 2.069,-0.927 2.069,-2.07 0.001,-1.142 -0.926,-2.068 -2.069,-2.068 z m -11.866,0 c -1.143,0 -2.069,0.926 -2.069,2.068 0,1.144 0.926,2.07 2.069,2.07 1.144,0 2.069,-0.927 2.069,-2.07 0,-1.142 -0.925,-2.068 -2.069,-2.068 z"\n       id="path11"\n       inkscape:connector-curvature="0"\n       class="svg-icon-color" />\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/chapter.svg",[],function(){return'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\n<svg\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   width="22"\n   height="23">\n   <style type="text/css">\n      <![CDATA[\n      .svg-icon-color {\n        fill: #CCCCCC;\n      }\n      ]]>\n   </style>\n  <g>\n      <rect x="0" y="2.2" width="4.5" height="4.5" class="svg-icon-color" />\n      <rect x="0" y="9.3" width="4.5" height="4.5" class="svg-icon-color" />\n      <rect x="0" y="16.7" width="4.5" height="4.5" class="svg-icon-color" />\n\n      <rect x="7" y="2.2" width="15" height="4.5" class="svg-icon-color" />\n      <rect x="7" y="9.3" width="15" height="4.5" class="svg-icon-color" />\n      <rect x="7" y="16.7" width="15" height="4.5" class="svg-icon-color" />\n  </g>\n</svg>\n'}),define("text!views/../../img/icons/normal/download.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n   width="8.564px" height="7.512px" viewBox="0 0 8.564 7.512" enable-background="new 0 0 8.564 7.512" xml:space="preserve">\r\n   <style type="text/css">\r\n      <![CDATA[\r\n      .svg-icon-color {\r\n        fill: #CCCCCC;\r\n      }\r\n      ]]>\r\n   </style>\r\n<g>\r\n  <path class="svg-icon-color" d="M4.278,5.375l2.252-2.799h-1.34V0H3.367v2.576H2.026L4.278,5.375z"/>\r\n  <rect class="svg-icon-color" y="6.14" width="8.564" height="1.372"/>\r\n</g>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/share.svg",[],function(){return'<?xml version="1.0" encoding="iso-8859-1"?>\r\n\x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n   viewBox="0 0 21.971 21.971" style="enable-background:new 0 0 21.971 21.971;" xml:space="preserve">\r\n  <style type="text/css">\r\n      <![CDATA[\r\n    .svg-icon-color {\r\n      fill: #CCCCCC;\r\n    }\r\n  ]]>\r\n  </style>\r\n  <path class="svg-icon-color" d="M17.872,13.964c-1.272,0-2.394,0.606-3.127,1.534l-6.799-3.477c0.089-0.332,0.153-0.675,0.153-1.036\r\n    c0-0.393-0.076-0.763-0.182-1.123l6.769-3.461c0.729,0.97,1.88,1.604,3.187,1.604c2.214,0,4.005-1.791,4.005-4.003\r\n    c0-2.21-1.791-4.002-4.005-4.002c-2.209,0-4.002,1.792-4.002,4.002c0,0.362,0.064,0.706,0.154,1.039L7.227,8.518\r\n    C6.493,7.589,5.369,6.981,4.095,6.981c-2.212,0-4.002,1.793-4.002,4.004s1.79,4.003,4.002,4.003c1.309,0,2.459-0.636,3.191-1.607\r\n    l6.766,3.461c-0.106,0.359-0.183,0.732-0.183,1.126c0,2.211,1.793,4.003,4.002,4.003c2.214,0,4.005-1.792,4.005-4.003\r\n    C21.877,15.755,20.086,13.964,17.872,13.964z"/>\r\n</svg>\r\n'}),define("text!views/../../img/icons/normal/bookmark.svg",[],function(){return'<?xml version="1.0" ?>\n<svg height="32" id="bookmark" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg">\n    <style type="text/css">\n        <![CDATA[\n      .svg-icon-color {\n        fill: #CCCCCC;\n      }\n    ]]>\n    </style>\n    <path class="svg-icon-color" d="M6 2 L26 2 L26 30 L16 24 L6 30 Z"/>\n</svg>\n'}),define("views/player-icon-colors",["base64","text!../../img/icons/normal/play.svg","text!../../img/icons/normal/pause.svg","text!../../img/icons/normal/mute.svg","text!../../img/icons/normal/mute-strike.svg","text!../../img/icons/normal/full-screen.svg","text!../../img/icons/normal/full-screen-close.svg","text!../../img/icons/normal/jump-back.svg","text!../../img/icons/normal/jump-forward.svg","text!../../img/icons/normal/indicator.svg","text!../../img/icons/normal/volume-bar.svg","text!../../img/icons/normal/captions.svg","text!../../img/icons/normal/comment.svg","text!../../img/icons/normal/chapter.svg","text!../../img/icons/normal/download.svg","text!../../img/icons/normal/share.svg","text!../../img/icons/normal/bookmark.svg"],function(e,t,n,i,r,a,o,s,l,u,d,c,f,h,p,m,g){return{elements:{"a.media-play":t,"div.media-play-aria":t,"a.media-pause":n,"div.media-pause-aria":n,"div.media-volume":i,"div.media-volume.muted":r,"div.full-screen-open":a,"div.full-screen-close":o,"div.vid-quality":u,".vid-jump-forward":l,".vid-jump-back":s,"div.vid-speed":u,"div.vid-cc":c,"div.vid-comment":f,"div.chaptering-icon":h,"div.vid-download":p,"div.social-sharing-icon":m,"div.bookmarks-icon":g,"div.vid-volume-bar, div.vid-volume-bar-value":d},cssStructure:function(t,n){var i={};for(var r in this.elements){var a=e.encode(this.elements[r].replace("#CCCCCC",t)),o=e.encode(this.elements[r].replace("#CCCCCC",n));i[r]={"background-image":'url("data:image/svg+xml;base64,'+a+'")',color:t,"&:hover:not(.no-hover), &.alternative":{"background-image":'url("data:image/svg+xml;base64,'+o+'")',color:n}}}return i}}}),define("injectCSS",["jquery"],function(jQuery){!function(jQuery){"use strict";function toCSS(jss,options){function jsonToCSS(e,t){for(var n in e&&!result[e]&&(result[e]={}),t){var i=t[n];if(i instanceof Array)for(var r=i,a=0;a<r.length;a++)addProperty(e,n,r[a]);else switch(typeof i){case"number":case"string":addProperty(e,n,i);break;case"object":var o=n.charAt(n.length-1);if(!e||"_"!==o&&"-"!==o)jsonToCSS(makeSelectorName(e,n),i);else{var s=i;for(var l in s)for(var u=l.split(/\s*,\s*/),d=0;d<u.length;d++){var c=s[l];if(c instanceof Array)for(var f=c,h=0;h<f.length;h++)addProperty(e,n+u[d],f[h]);else addProperty(e,n+u[d],s[l])}}}}}function makePropertyName(e){return e.replace(/_/g,"-")}function makeSelectorName(e,t){for(var n=[],i=t.split(/\s*,\s*/),r=e.split(/\s*,\s*/),a=0;a<r.length;a++)for(var o=r[a],s=0;s<i.length;s++){var l=i[s];"&"===l.charAt(0)?n.push(o+l.substr(1)):n.push(o?o+" "+l:l)}return n.join(", ")}function addProperty(e,t,n){"number"!=typeof n||options.useRawValues||(n+="px");for(var i=t.split(/\s*,\s*/),r=0;r<i.length;r++){var a=makePropertyName(i[r]);result[e][a]?result[e][a].push(n):result[e][a]=[n]}}var result={};if("string"==typeof jss)try{eval("var jss = {"+jss+"}")}catch(e){return"/*\nUnable to parse JSS: "+e+"\n*/"}jsonToCSS("",jss);var ret="";for(var a in result){var css=result[a];for(var i in ret+=a+" {\n",css)for(var values=css[i],j=0;j<values.length;j++)ret+="\t"+i+": "+values[j]+";\n";ret+="}\n"}return ret}var defaults={truncateFirst:!1,container:null,containerName:"injectCSSContainer",useRawValues:!1};jQuery.injectCSS=function(e,t){(t=jQuery.extend({},defaults,t)).media=t.media||"all";var n=t.container&&jQuery(t.container)||jQuery("#"+t.containerName);n.length||(n=jQuery("<style></style>").appendTo("head").attr({media:t.media,id:t.containerName,type:"text/css"}));var i="";t.truncateFirst||(i+=n.text()),i+=toCSS(e,t);var r=n[0];return void 0!==r.styleSheet&&void 0!==r.styleSheet.cssText?r.styleSheet.cssText=i:n.text(i),n}}(jQuery)}),define("views/main_view",["underscore","jquery","viddler","views/baseviews","views/gui","text!../../img/controls-sprite.svg","base64","pusher.color","views/player-icon-colors","injectCSS"],function(e,t,n,i,r,a,o,s,l){return i.BaseView.extend({el:"",timeline:{},initialize:function(t){e.extend(this,t),this.__init(t),this.$el.append(this.embed.manager.retrieveTemplate("#tmp-viddler-main")),this.setEmbedSize(),this.scrollToPlayerIfUrlFragment(),this.addEventListeners(),this.render()},addEventListeners:function(){this._displayChanged=e.bind(this._displayChanged,this),t(window).on("resize",this._displayChanged),this.embed.manager.events.on("gui:fullScreenEntered gui:fullScreenLeft mediaElement:activated",this._displayChanged)},removeEventListeners:function(){t(window).off("resize",this._displayChanged),this.embed.manager.events.on("gui:fullScreenEntered gui:fullScreenLeft mediaElement:activated",this._displayChanged)},_displayChanged:function(){this.applySizeCssClasses(),this.setEmbedSize(),this.embed.manager.events.trigger("player:resize")},render:function(){var e=this;this.applySizeCssClasses(),this.applyOneOffCssClasses(),this.applyBranding(),this.setEmbedIdAnchor(),this.embed.manager.events.once("manager:allResourceTypesLoaded",function(){e.embed.manager.localizer.updateLanguages(e.embed.localization),e.embed.locale&&e.embed.manager.localizer.setLanguage(e.embed.locale),e.hideControls?e.embed.manager.events.trigger("gui:ready"):e.loadGui(),e.setEmbedSize(),e.hideLoading()})},showLoading:function(){this.embed.target.find(".load-wait").show()},hideLoading:function(){this.embed.target.find(".load-wait").hide()},setEmbedIdAnchor:function(){this.$el.attr("data-embed-id",this.embed.embedId)},loadGui:function(){this.gui=new r({el:this.$el.find(".media-gui"),embed:this.embed,model:this.model,mainView:this}),this.gui.render({mediaElements:this.embed.manager.mediaElementsForCurrentTrack(),showPlayOverlayButton:!this.embed.autoplay,showResumeModal:this.embed.manager.resumeFrom}),this.embed.hideControlsUntilPlay&&this.gui.hideControlsUntilPlay()},applySizeCssClasses:function(){for(var e=this.$el.find(".viddler-app-wrap"),t=e.find(".viddler-embed").width(),n=[225,240,260,280,300,320,340,360,380,400,420,440,460,480,500,520,540,560,580,600,620,640,680,700,720],i=0;i<n.length;i++){var r=n[i],a="sub-"+r;t<=r?e.addClass(a):e.removeClass(a)}},applyOneOffCssClasses:function(){var e=this.$el.find(".viddler-embed");this.embed.hideVolumeControls&&e.addClass("hidden-volume-controls"),this.embed.hideFullScreenControl&&e.addClass("hidden-full-screen-control"),this.embed.noControls&&e.addClass("no-controls"),this.embed.hideMediaElementSeparators&&e.addClass("no-media-element-separators")},setEmbedSize:function(){var e=this.$el.find(".viddler-app-wrap");if(this.embed.width||(this.embed.width="640px"),e.css("width",this.embed.width),"comments"==this.embed.type&&e.addClass("timeline-embed"),"comments"==this.embed.type&&e.addClass("comment-embed"),"video-picker"==this.embed.type&&e.addClass("video-picker-embed"),this.embed.height&&"auto"!=this.embed.height&&"auto-lock"!=this.embed.height){t=this.embed.height;e.addClass("fixed-height")}else if("comments"==this.embed.type||"video-picker"==this.embed.type){var t="auto";e.find(".viddler-embed").css("height","auto")}else{var n=e.width();if(this.embed.audioHidePoster)var t="71px";else{t=n*this.embed.manager.aspectRatio();t+="px"}}e.css("height",t)},destroy:function(){this.removeEventListeners()},scrollToPlayerIfUrlFragment:function(){var e=this,i=n.Util.urlFragmentObject();i.embedId&&i.embedId==this.embed.embedId&&(t("body").scrollTop(this.$el.offset().top),i.t&&this.embed.manager.events.on("gui:ready",function(){e.embed.manager.seekTo(1e3*i.t)}))},hasFocus:function(){return t.contains(this.embed.target.get(0),document.activeElement)},focusWithoutScroll:function(e){var t=window.pageXOffset,n=window.pageYOffset;e.focus(),window.scrollTo(t,n)},applyBranding:function(){var e=this.makeBrandingCSSRules(this.settings);this.injectBrandingCSSRules(e)},makeBrandingCSSRules:function(e){var n={".media-gui":{}},i={};if(e.controlBarBackgroundColor&&(n[".play-overlay-button"]={background:e.controlBarBackgroundColor}),e.playerBackgroundColor&&(n[".media-container"]={"background-color":e.playerBackgroundColor}),e.controlIconsColor){var r=e.controlIconsHoverColor||this.makeHoverColor(e.controlIconsColor),a=l.cssStructure(e.controlIconsColor,r);t.extend(n,a),n[".vid-progress"]={"background-color":e.controlIconsColor,border:"none"},n[".vid-mega-play-bar"]={height:"12px",top:0},n[".vid-video"]={color:e.controlIconsColor},n[".play-overlay-button span"]={"border-left-color":e.controlIconsColor},n["div.label-time-text"]={color:e.controlIconsColor},n["a.vid-speed-display"]={color:e.controlIconsColor}}return i["#"+this.embed.target.attr("id")+" .viddler-app-wrap"]=n,i},makeHoverColor:function(e){var t=e.match(/^#/)?e:"#"+e,n=s.color(t);return"white"==n.contrastWhiteBlack().html("keyword")?s.color(n).tint(.3).html():s.color(n).shade(.3).html()},injectBrandingCSSRules:function(e){var n="viddlerInjectedStyles-"+this.embed.target.attr("id");t.injectCSS(e,{containerName:n})}})}),define("viddler-events",["logger","backbone","underscore","config"],function(e,t,n,i){return function(){function r(){n.extend(this,t.Events);var r=this.trigger;this.trigger=function(t){i.DEBUG&&e.log("[Event] "+t),n.contains(["timeline:timeUpdate","timeline:elTimeUpdate","videoPlayer:timeupdate"],t)||t.match(/^linked/)||e.log("[Event] "+t),r.apply(this,arguments)}}return r.prototype.destroy=function(){this.off()},r}()}),define("track",["underscore"],function(e){return function(t,n){function i(e,t){this.manager=e,this.name=t.name,this.type=t.type,this.id=t.id,this.cyclable=t.cyclable,this.mediaElements=[],this.includeSubTracks=t.includeSubTracks||[]}return i.prototype.addMediaElement=function(t,n){t.track=this,void 0===n?(this.mediaElements.push(t),this.mediaElements=e.sortBy(this.mediaElements,function(e){return e.timelineStart})):this.mediaElements[n]=t},i.prototype.removeMediaElement=function(e){var t=this.mediaElements.indexOf(e);this.mediaElements.splice(t,1)},i.prototype.isActive=function(){return"top-level-track"==this.type?this.manager.currentPrimaryTrack==this:e.contains(this.manager.currentSubTracks,this)},i}()}),define("localization/default",[],function(){return{gui:{play:"Play",pause:"Pause",volume:"Volume",full_screen:"View Fullscreen",exit_full_screen:"Exit Fullscreen",show_volume_controls:"Show volume controls",mute:"Mute",unmute:"Unmute",show_volume_controls:"Show volume controls",timeline_bullet:"Timeline"},media_elements:{comment_list:{date:"Date"}},resume_modal:{resume:"Resume",start_from_beginning:"Start From Beginning"}}}),define("localization/localizer",["jquery","underscore","localization/default"],function(e,t,n){return function(){function i(){this.language="default",this.languages={default:n}}return i.prototype.setLanguage=function(e){this.language=e},i.prototype.translate=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=this.translateForLanguage(this.language,t,e.splice(1));return n||"default"==this.language?n:this.translateForLanguage("default",t,e.splice(1))},i.prototype.translateForLanguage=function(e,n,i){var r=this.languages[e];return t.find(n.split("."),function(e){if(!(r=r[e]))return console.log("Localization key not found",n),!0}),"string"==typeof r?r:"function"==typeof r?r.apply(this,i):void 0},i.prototype.updateLanguages=function(t){this.languages=e.extend(!0,this.languages,t)},i}()}),define("viddler-user-data",["underscore","viddler"],function(e,t){return function(n){function i(e,t){this.embed=e,this.data=t}return i.allowedLocalStorageKeys=["resumeFrom"],i.initializeFromLocalStorage=function(e){var t=localStorage["arpeggio-"+e.embedId]||"{}";return new i(e,JSON.parse(t))},i.prototype.get=function(e){return this.data[e]},i.prototype.set=function(e,t){this.data[e]=t,this._saveChanges()},i.prototype.delete=function(e){delete this.data[e],this._saveChanges()},i.prototype._saveChanges=function(){if(window.logged_in_user)this._updateApi();else if(localStorage){var t=e.filter(this.data,function(t,n){return e.indexOf(i.allowedLocalStorageKeys,t)>-1});this._updateLocalStorage(t)}},i.prototype._updateLocalStorage=function(){var e="arpeggio-"+this.embed.embedId;localStorage[e]=JSON.stringify(this.data)},i.prototype._updateApi=function(){t.Api.addEmbedInfo({environment:this.embed.environment,custom_user_identifier:window.logged_in_user,embed_id:this.embed.embedId,content:JSON.stringify(this.data)})},i}()}),define("extensions/sitecatalyst/main",["underscore","jquery","viddler"],function(e,t,n){var i={};function r(e){return(0===e?1:e/100*4)+":M:"+i.SEGMENT_SLICES[e]}function a(e){var t=[];return 0===e?(t.push(i._siteCatalystEvents[e]),i._state.lastTracked=Date.now()):(t.push(i._siteCatalystEvents.VIDEO_SEGMENT_VIEWS),t.push(i._siteCatalystEvents[e]),t.push(i._siteCatalystEvents.VIDEO_TIME+"="+function(){if(i._state.lastTracked){var e=i._state.lastTracked,t=Date.now();return i._state.lastTracked=t,Math.ceil((t-e)/1e3)}return 0}())),t.join(",")}function o(e){return e.match(/\d/g).join("")}function s(e){return"v"+o(e)}function l(e){return"event"+o(e)}function u(e){var n=i._config.serverUrl+Math.floor(1e13*Math.random())+"?"+function(e){var n,o={ABQ:1,pccr:!0,t:(n=new Date,[n.toLocaleDateString("pt-BR"),n.toTimeString().slice(0,8),n.getDay(),n.getTimezoneOffset()].join(" ")),ce:"UTF-8",g:location.href,cc:"USD",events:a(e),v19:i._state.videoName,v42:i._state.videoNode,v20:r(e),v21:"video",s:window.outerWidth+"x"+window.outerHeight};return o[s(i._config.videoName)]=i._state.videoName,o[s(i._config.videoSegments)]=r(e),o[s(i._config.videoContentType)]="video",t.param(o)}(e);return t.get(n)}function d(){var e,t,n;i._state.videoNode=(e=i._config.videoNode,t=new URLSearchParams(location.search),n="",""==t&&(n=window.location!=window.parent.location?document.referrer:document.location.href),t.get(e)||n)}return i._loading=!1,i._config,i._enabled=!0,i._state={videoName:"",videoNode:"",videoDuration:0,lastTracked:0,reachedCompletion:{0:!1,25:!1,50:!1,75:!1,100:!1}},i.TRACKED_POINTS=[0,25,50,75,100],i._siteCatalystEvents={VIDEO_TIME:null,0:null,100:null,VIDEO_SEGMENT_VIEWS:null,25:null,50:null,75:null},i.SEGMENT_SLICES={0:"0-25",25:"0-25",50:"25-50",75:"50-75",100:"75-100"},i.setState=function(t){i._state=e.extend(i._state,t)},i.trackProgress=function(e){var t;i._enabled&&i._config&&i._config.serverUrl&&(t=function(e){return Math.floor(e/i._state.videoDuration*100)}(e),i.TRACKED_POINTS.forEach(function(e){t>=e&&!i._state.reachedCompletion[e]&&(i._state.reachedCompletion[e]=!0,u(e))}))},i.getConfig=function(e){if(i._enabled=e.enabled,i._enabled&&e.videoId&&!i._loading&&!i._config){i._loading=!0;n.Apiv3.getSiteCatalystInfo({id:e.videoId,environment:e.environment}).then(function(e){i._loading=!1,e&&(i._config=e,i._config.serverUrl=i._config.trackingServer+"/b/ss/"+i._config.accountName+"/"+(t.jPlayer.platform.mobile?"5.0":"0")+"/FAS-3.5.2-AS3/s0",i._siteCatalystEvents[0]=l(i._config.videoViews),i._siteCatalystEvents[25]=l(i._config.pctComplete25),i._siteCatalystEvents[50]=l(i._config.pctComplete50),i._siteCatalystEvents[75]=l(i._config.pctComplete75),i._siteCatalystEvents[100]=l(i._config.videoCompletes),i._siteCatalystEvents.VIDEO_TIME=l(i._config.videoTime),i._siteCatalystEvents.VIDEO_SEGMENT_VIEWS=l(i._config.videoSegmentViews),d())})}},i}),define("viddler-manager",["underscore","viddler-events","viddler","jquery","track","localization/localizer","viddler-user-data","extensions/sitecatalyst/main"],function(e,t,n,i,r,a,o,s){return function(l){function u(e){this.currentMediaElementIndex=0,this.currentTime=0,this.furthestPointPlayedThisSession=0,this.furthestPointPlayedInPast=0,this.currentPrimaryTrack=void 0,this.initialAspectRatio=void 0,this.allSubTracks=[],this.currentSubTracks=[],this.status="stopped",this.tracks=[],this.features=[],this.registry={},this.questions={},this.events=new t,this.embed=e,this.allTemplates=i("<div>"),this.switchTrackRules=[],this.localizer=new a,this.addEventListeners(),this.$el=this.embed.target}return u.prototype.destroy=function(){this._destroyResources(),this.embed.mainView.destroy(),this.currentMediaElementIndex=0,this.currentPrimaryTrack=void 0,this.initialAspectRatio=void 0,this.allSubTracks=[],this.currentSubTracks=[],this.currentTime=0,this.tracks=[],this.features=[],this.registry={}},u.prototype.addEventListeners=function(){var e=this,t=3;this.events.on("manager:mediaElementResourceTypeLoaded manager:subModuleResourceTypeLoaded manager:featureResourceTypeLoaded",function(){0==(t-=1)&&(e.setVolume(e.embed.initialVolume),e.events.trigger("manager:allResourceTypesLoaded"))}),this.embed.embedId&&(this.embed.resumable||"relaxed:persist"===this.embed.disableForwardSeek)&&i(window).on("beforeunload pagehide",function(){e.embed.resumable&&e.storeResumablePosition(),"relaxed:persist"===e.embed.disableForwardSeek&&e.storeBestViewedUpToTime()}),this.events.once("gui:ready",function(){e.showHideSubTrackElements(),e.activateAllFeatures();var t=n.Util.urlFragmentObject();e.resumeFrom?e.goTo(e.resumeFrom):t.t&&t.embedId&&t.embedId==e.embed.embedId?(e.currentMediaElement().activate(),e.seekTo(parseInt(1e3*t.t))):e.currentMediaElement().activate(),e.embed.autoplay&&e.play()}),this.events.on("timeline:end",function(){if(e.embed.cycle&&e.currentPrimaryTrack.cyclable){var t=e.nextCyclableTrackIndex();0===t&&e.events.trigger("timeline:cycle-end"),(t>0||e.embed.loop)&&(e.goTo({step:0,track:e.nextCyclableTrack().id}),e.play())}else e.embed.loop&&(e.goTo({step:0}),e.play())})},u.prototype.jumpForward=function(e){e.preventDefault();var t=this.currentTime+5e3;t>this.timelineDuration()&&(t=this.timelineDuration()),void 0!==t&&this.goTo({time:t})},u.prototype.jumpBack=function(e){e.preventDefault();var t=this.currentTime-5e3;t<0&&(t=0),void 0!==t&&this.goTo({time:t})},u.prototype.allCurrentTracks=function(){return this.currentSubTracks.concat(this.currentPrimaryTrack)},u.prototype.retrieveTemplate=function(t,i){i||(i={});var r=this;return i.t=function(){return r.localizer.translate.apply(r.localizer,arguments)},i.tabIndexStart=this.embed.tabIndexStart,i.tabIndexResume=this.embed.tabIndexResume,i.tabIndexThePlayer=this.embed.tabIndexThePlayer,i.tabIndexPlayMiddle=this.embed.tabIndexPlayMiddle,i.tabIndexPlayBar=this.embed.tabIndexPlayBar,i.tabIndexTimeline=this.embed.tabIndexTimeline,i.tabIndexSubtitles=this.embed.tabIndexSubtitles,i.tabIndexQuality=this.embed.tabIndexQuality,i.tabIndexVolume=this.embed.tabIndexVolume,i.tabIndexVolumeBar=this.embed.tabIndexVolumeBar,i.tabIndexFullscreen=this.embed.tabIndexFullscreen,i.tabIndexSpeed=this.embed.tabIndexSpeed,i.tabIndexComments=this.embed.tabIndexComments,i.tabIndexBookmarks=this.embed.tabIndexBookmarks,i.tabIndexSocialSharing=this.embed.tabIndexSocialSharing,i.tabIndexJump=this.embed.tabIndexJump,i.Viddler=n,e.template(this.allTemplates.find(t).html(),i)},u.prototype.registerResource=function(e){this.registry[e.type]||(this.registry[e.type]={}),this.registry[e.type][e.subType]||(this.registry[e.type][e.subType]={instances:{}}),this.registry[e.type][e.subType].instances[e.guid]={loaded:!1}},u.prototype.resourceLoaded=function(e){this.registry[e.type][e.subType].instances[e.guid].loaded=!0,this.allResourceTypeLoaded(e.type)&&this.events.trigger("manager:"+e.type+"ResourceTypeLoaded")},u.prototype.allResourceTypeLoaded=function(t){var n=!0;return e.each(this.registry[t],function(t){e.each(t.instances,function(e){!1===e.loaded&&(n=!1)})}),n},u.prototype.setTime=function(e){this.events.trigger("timeline:elTimeUpdate",e);var t=this.currentMediaElement().timelineStart+e;this.currentTime=t,this.showHideSubTrackElements(),this.notifyMediaElementsActivatingSoon(),this.updateFurthestPointPlayedThisSession(),e>0&&"playing"==this.status&&this.checkSwitchTrackRules(),s.trackProgress(t),this.events.trigger("timeline:timeUpdate",t)},u.prototype.setStep=function(e){this.currentMediaElementIndex=e},u.prototype.elementForTime=function(e,t){if(t)var n=t.mediaElements;else n=this.mediaElementsForCurrentTrack();var r={};return i.each(n,function(t,n){n.timelineStart<=e&&n.timelineEnd>=e&&(r.step=t,r.time=e-n.timelineStart)}),r},u.prototype.timelineDuration=function(){var t=0;return e.each(this.mediaElementsForCurrentTrack(),function(e){"number"!=typeof e.duration||isNaN(e.duration)||(t+=parseInt(e.duration,10))}),t},u.prototype.isLastStep=function(){return this.currentMediaElementIndex===this.mediaElementsForCurrentTrack().length-1},u.prototype.tlReset=function(){this.currentMediaElementIndex=0,this.currentTime=0},u.prototype.currentMediaElement=function(){return this.mediaElementsForCurrentTrack()[this.currentMediaElementIndex]},u.prototype.showHideSubTrackElements=function(){var t=this;e.each(this.currentSubTracks,function(n){e.each(n.mediaElements,function(e){e.timelineStart<=t.currentTime&&e.timelineEnd>t.currentTime?!e.activated&&e.activatable&&e.activate():e.activated&&e.deactivate()})})},u.prototype.checkSwitchTrackRules=function(){var t=this;return e.find(this.switchTrackRules,function(e){if(e.from==t.currentPrimaryTrack.id&&e.triggerTimelineStart<=t.currentTime&&(e.switchCount=e.switchCount||0,!e.limitSwitches||e.limitSwitches>e.switchCount))return e.switchCount+=1,t.goTo({track:e.to,time:e.timelineStart}),t.play(),!0})},u.prototype.mediaElementsForCurrentTrack=function(){return this.currentPrimaryTrack.mediaElements},u.prototype.checkURLToken=function(){if("undefined"==this.currentPrimaryTrack)return!1;if(this.currentMediaElement().resourceData.vastUrl)return!0;var e=(new Date).getTime()/1e3||0;if(null==this.currentMediaElement().resourceData.mediaUrls[this.currentMediaElementIndex])return!0;var t=this.currentMediaElement().resourceData.mediaUrls[this.currentMediaElementIndex].url_expiration||0;return!(t>0&&t<e)||(this.embed.reload(this.currentTime),!0)},u.prototype.play=function(e){if(this.checkURLToken()&&"comments"!=this.embed.type&&(void 0!==e?this.goTo({time:e}):"finished"==this.status&&this.goTo({step:0}),!this.checkSwitchTrackRules())){if("undefined"==this.currentPrimaryTrack)return;this.currentMediaElement().play()}},u.prototype.pause=function(){this.currentMediaElement().pause()},u.prototype.requireResource=function(e,t){var n="";"subModule"==e.type&&(n="sub_modules"),"mediaElement"==e.type&&(n="media_elements"),"feature"==e.type&&(n="features"),n+="/"+e.name+"/"+e.name+"-main";var i=this;require([n],function(n){i.registry[e.type][e.name].globalInitializerRun||(i.registry[e.type][e.name].globalInitializerRun=!0,n.globalInitializer&&n.globalInitializer(i),n.LocalizationContent&&i.localizer.updateLanguages(n.LocalizationContent),n.Templates&&i.allTemplates.append(n.Templates)),t(n)})},u.prototype.parseManifest=function(t){var a=this,s=!1;t.switchTrackRules&&(this.switchTrackRules=t.switchTrackRules),t.questions&&(this.questions=t.questions);i.each(t.tracks,function(e,t){i.each(t.mediaElements,function(e,t){t.guid=n.Util.guid(),a.registerResource({type:"mediaElement",subType:t.type,guid:t.guid})})}),i.each(t.tracks,function(e,t){a.tracks[e]=new r(a,{name:t.name,id:t.id,type:t.type,includeSubTracks:t.includeSubTracks,cyclable:t.cyclable}),"sub-track"==t.type&&a.allSubTracks.push(a.tracks[e]),i.each(t.mediaElements,function(t,n){i.isEmptyObject(n.sub_modules)||(s=!0),a.requireResource({type:"mediaElement",name:n.type},function(i){var r=new i.View({mainView:a,embed:a.embed,isView:"true",zLayer:0,sub_modules:n.sub_modules,duration:n.duration,timelineStart:n.timelineStart,resourceData:n.resourceData,title:n.title,id:n.id,guid:n.guid,track:a.tracks[e]});"object"==typeof r.mandatorySubModules&&Object.keys(r.mandatorySubModules).length>0&&(s=!0),a.tracks[e].addMediaElement(r,t),r.load()})})}),this.currentPrimaryTrack=e.findWhere(this.tracks,{type:"top-level-track"}),this._setCurrentSubTracks(),this.events.on("manager:mediaElementResourceTypeLoaded",function(){s||a.events.trigger("manager:subModuleResourceTypeLoaded")}),t.viddlerUserData?this.viddlerUserData=new o(this.embed,t.viddlerUserData):localStorage&&(this.viddlerUserData=o.initializeFromLocalStorage(this.embed)),this.embed.resumable&&this._setResumeInfo(),this._setFurthestPointPlayedInPast(),t.features&&Object.keys(t.features).length>0?this.initializeFeatures(t.features):this.events.trigger("manager:featureResourceTypeLoaded")},u.prototype._setResumeInfo=function(){this.viddlerUserData&&(this.resumeFrom=this.viddlerUserData.get("resumeFrom"))},u.prototype._setFurthestPointPlayedInPast=function(){if(this.viddlerUserData){var e=this.viddlerUserData.get("bestViewedUpToTime");e&&(this.furthestPointPlayedInPast=e.time)}},u.prototype.initializeFeatures=function(t){var i=this;e.each(t,function(e,t){e.guid=n.Util.guid(),i.registerResource({type:"feature",subType:t,guid:e.guid}),i.requireResource({type:"feature",name:t},function(t){var n=new t.View({embed:i.embed,guid:e.guid,resourceData:e.resourceData,manager:i});n.load(),i.features.push(n)})})},u.prototype._destroyResources=function(){e.each(this.allPossibleMediaElements(),function(e){e.destroy()})},u.prototype.allPossibleMediaElements=function(){var t=[];return e.each(this.tracks,function(n){e.each(n.mediaElements,function(e){t.push(e)})}),t},u.prototype.setVolume=function(t){this.currentVolume=t,e.each(this.allPossibleMediaElements(),function(e){e.setVolume&&e.setVolume(t)})},u.prototype.seekTo=function(e){return this.goTo({time:e})},u.prototype.goTo=function(t){t||(t={});var n={},i=!1;if(t.track&&(n.track=e.findWhere(this.tracks,{id:t.track}),n.track.switchedFrom={track:this.currentPrimaryTrack.id,time:this.currentTime},i=!0),void 0!==t.time){var r=this.elementForTime(t.time,n.track);n.step=r.step,n.localTime=r.time}else void 0!==t.step&&(n.step=t.step,n.localTime=0);return n.step!=this.currentMediaElementIndex&&(i=!0),i&&this.currentMediaElement().deactivate(),n.track&&(this.currentPrimaryTrack=n.track),void 0!==n.step&&this.setStep(n.step),t.track&&(this._setCurrentSubTracks(),this.embed.mainView.gui.render({mediaElements:this.mediaElementsForCurrentTrack()}),this.activateAllFeatures()),i&&this.currentMediaElement().activate(),this.setTime(n.localTime),this.currentMediaElement().linear&&this.currentMediaElement().seekTo(n.localTime),this},u.prototype.mediaElementFinished=function(){this.currentMediaElement().duration&&this.setTime(this.currentMediaElement().duration),this.events.trigger("timeline:stepEnd"),this.isLastStep()?(this.events.trigger("timeline:end"),this.status="finished"):(this.goTo({step:this.currentMediaElementIndex+1}),this.play())},u.prototype.mediaElementPlayed=function(){this.status="playing",this.events.trigger("mediaElement:play")},u.prototype.mediaElementPaused=function(){"playing"==this.status&&(this.status="paused"),this.events.trigger("mediaElement:pause")},u.prototype._setCurrentSubTracks=function(){var t=this;this.currentSubTracks=[],e.each(this.currentPrimaryTrack.includeSubTracks,function(n){t.currentSubTracks.push(e.findWhere(t.allSubTracks,{id:n}))})},u.prototype.aspectRatio=function(){return"auto-lock"==this.embed.height&&this.initialAspectRatio?this.initialAspectRatio:this.currentMediaElement()&&this.currentMediaElement().resourceData.aspectRatio?(this.initialAspectRatio||(this.initialAspectRatio=this.currentMediaElement().resourceData.aspectRatio),this.currentMediaElement().resourceData.aspectRatio):.56},u.prototype.activateAllFeatures=function(){e.each(this.features,function(e){e.deactivate(),e.activate()})},u.prototype.storeResumablePosition=function(){if(this.currentTime&&this.viddlerUserData)if("finished"==this.status)this.viddlerUserData.delete("resumeFrom");else{if(!this.isOnFirstPrimaryTrack())return;this.viddlerUserData.set("resumeFrom",{track:this.currentPrimaryTrack.id,time:this.currentTime})}},u.prototype.storeBestViewedUpToTime=function(){if(this.currentTime&&this.viddlerUserData)if("finished"==this.status)this.viddlerUserData.set("bestViewedUpToTime",{time:"finished"});else{e.findWhere(this.tracks,{type:"top-level-track"});if(!this.isOnFirstPrimaryTrack())return;var t=this.viddlerUserData.get("bestViewedUpToTime");(!t||"finished"!==t.time&&this.furthestPointPlayedThisSession>t.time)&&this.viddlerUserData.set("bestViewedUpToTime",{track:this.currentPrimaryTrack.id,time:this.furthestPointPlayedThisSession})}},u.prototype.updateFurthestPointPlayedThisSession=function(){this.isOnFirstPrimaryTrack()&&this.currentTime>this.furthestPointPlayedThisSession&&(this.furthestPointPlayedThisSession=this.currentTime)},u.prototype.isOnFirstPrimaryTrack=function(){return e.findWhere(this.tracks,{type:"top-level-track"})==this.currentPrimaryTrack},u.prototype.notifyMediaElementsActivatingSoon=function(){var t=this;e.each(this.allCurrentTracks(),function(n){e.each(n.mediaElements,function(e){"function"==typeof e.activatingSoon&&(e.timelineStart>t.currentTime&&e.timelineStart<t.currentTime+5e3?e.activatingSoonCalled||(e.activatingSoonCalled=!0,e.activatingSoon()):e.activatingSoonCalled=!1)})})},u.prototype.cyclableTracks=function(){return e.where(this.tracks,{cyclable:!0})},u.prototype.nextCyclableTrack=function(){return this.cyclableTracks()[this.nextCyclableTrackIndex()]},u.prototype.nextCyclableTrackIndex=function(){var e=i.inArray(this.currentPrimaryTrack,this.cyclableTracks())+1;return e>this.cyclableTracks().length-1&&(e=0),e},u}()}),root=this,factory=function(e,t){e.fn.jPlayer=function(n){var i="string"==typeof n,r=Array.prototype.slice.call(arguments,1),a=this;return n=!i&&r.length?e.extend.apply(null,[!0,n].concat(r)):n,i&&"_"===n.charAt(0)?a:(i?this.each(function(){var i=e(this).data("jPlayer"),o=i&&e.isFunction(i[n])?i[n].apply(i,r):i;if(o!==i&&o!==t)return a=o,!1}):this.each(function(){var t=e(this).data("jPlayer");t?t.option(n||{}):e(this).data("jPlayer",new e.jPlayer(n,this))}),a)},e.jPlayer=function(t,n){if(arguments.length){this.element=e(n),this.options=e.extend(!0,{},this.options,t);var i=this;this.element.bind("remove.jPlayer",function(){i.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var n=function(){this.init()};n.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),n=t.getUTCHours(),i=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*n,r=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*i,a=this.options.timeFormat.padHour&&n<10?"0"+n:n,o=this.options.timeFormat.padMin&&i<10?"0"+i:i,s=this.options.timeFormat.padSec&&r<10?"0"+r:r,l="";return l+=this.options.timeFormat.showHour?a+this.options.timeFormat.sepHour:"",l+=this.options.timeFormat.showMin?o+this.options.timeFormat.sepMin:"",l+=this.options.timeFormat.showSec?s+this.options.timeFormat.sepSec:""}};var i=new n;e.jPlayer.convertTime=function(e){return i.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),n=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[],i=/(ipad|playbook)/.exec(t)||!/(mobile)/.exec(t)&&/(android)/.exec(t)||[];return n[1]&&(n[1]=n[1].replace(/\s/g,"_")),{platform:n[1]||"",tablet:i[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var r=e.jPlayer.uaBrowser(navigator.userAgent);r.browser&&(e.jPlayer.browser[r.browser]=!0,e.jPlayer.browser.version=r.version);var a=e.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(e.jPlayer.platform[a.platform]=!0,e.jPlayer.platform.mobile=!a.tablet,e.jPlayer.platform.tablet=!!a.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,n,i=document,r=i.createElement("video"),a={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},o=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!i[a.w3c[0]],moz:!!i[a.moz[0]],webkit:"function"==typeof i[a.webkit[3]],webkitVideo:"function"==typeof r[a.webkitVideo[2]],ms:"function"==typeof r[a.ms[2]]},used:{}},t=0,n=o.length;t<n;t++){var s=o[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(e.spec){var l=a[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return(e=e||i)[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return(e=e||i)[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var o=function(t){var n,i=e.jPlayer.focus;i&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,i){if(t.target.nodeName.toUpperCase()===i.toUpperCase())return n=!0,!1}),n||e.each(i.options.keyBindings,function(n,r){if(r&&e.isFunction(r.fn)&&("number"==typeof r.key&&t.which===r.key||"string"==typeof r.key&&t.key===r.key))return t.preventDefault(),r.fn(i),!1}))};e.jPlayer.keys=function(t){e(document.documentElement).unbind("keydown.jPlayer"),t&&e(document.documentElement).bind("keydown.jPlayer",o)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1,dashAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"},mpdv:{codec:"application/dash+xml",flashCanPlay:!1,htmlCanPlay:!(!window.dashjs||!window.WebKitMediaSource&&!window.MediaSource),isDash:!0,media:"video"}},_init:function(){var n=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.format[r]){var a=!1;e.each(n.formats,function(e,t){if(r===t)return a=!0,!1}),a||n.formats.push(r)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.solution[r]){var a=!1;e.each(n.solutions,function(e,t){if(r===t)return a=!0,!1}),a||n.solutions.push(r)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.format[r]){var a=!1;e.each(n.aurora.formats,function(e,t){if(r===t)return a=!0,!1}),a||n.aurora.formats.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,i){n.options[e]!==t&&(n.element.bind(i+".jPlayer",n.options[e]),n.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){n.require[n.format[t].media]=!0}),this.require.video?this.options=e.extend(!0,{},this.optionsVideo,this.options):this.options=e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){n.status.video&&!n.status.waitForPlay||n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,i){n.html.canPlay[i]=n.html[n.format[i].media].available&&(n.format[i].htmlCanPlay||""!==n.htmlElement[n.format[i].media].canPlayType(n.format[i].codec)),n.aurora.canPlay[i]=e.inArray(i,n.aurora.formats)>-1,n.flash.canPlay[i]=n.format[i].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,i){if(0===t)n[i].desired=!0;else{var r=!1,a=!1;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&("video"===n.format[t].media?a=!0:r=!0)}),n[i].desired=n.require.audio&&!r||n.require.video&&!a}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired,n.aurora.support[t]=n.aurora.canPlay[t]&&n.aurora.desired,n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,i){e.each(n.formats,function(e,t){if(n[i].support[t])return n[i].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var i,r="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var a='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',o=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+r+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];i=document.createElement(a);for(var s=0;s<o.length;s++)i.appendChild(document.createElement(o[s]))}else{var l=function(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)};(i=document.createElement("object")).setAttribute("id",this.internal.flash.id),i.setAttribute("name",this.internal.flash.id),i.setAttribute("data",this.internal.flash.swf),i.setAttribute("type","application/x-shockwave-flash"),i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("tabindex","-1"),l(i,"flashvars",r),l(i,"allowscriptaccess","always"),l(i,"bgcolor",this.options.backgroundColor),l(i,"wmode",this.options.wmode)}this.element.append(i),this.internal.flash.jq=e(i)}this.html.used&&!this.flash.used?this.status.playbackRateEnabled=this._testPlaybackRate("audio"):this.status.playbackRateEnabled=!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(e.jPlayer.event.repeat),n._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&(n.data("jPlayer")||(n.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_testPlaybackRate:function(e){var t;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t&&(t.playbackRate=.5,.5===t.playbackRate)}catch(e){return!1}},_uaBlocklist:function(t){var n=navigator.userAgent.toLowerCase(),i=!1;return e.each(t,function(e,t){if(t&&t.test(n))return i=!0,!1}),i},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,n){var i=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){n.gate&&(i.androidFix.setMedia=!1,i.androidFix.play&&(i.androidFix.play=!1,i.play(i.androidFix.time)),i.androidFix.pause&&(i.androidFix.pause=!1,i.pause(i.androidFix.time)),i._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){n.gate&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){n.gate&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){n.gate&&(i._updateButtons(!0),i._html_checkWaitForPlay(),i._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){n.gate&&(i._updateButtons(!0),i._seeked(),i._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){n.gate&&(i._updateButtons(!1),i._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){n.gate&&(i._seeking(),i._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){n.gate&&(i._seeking(),i._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){n.gate&&(i._seeked(),i._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){n.gate&&(i.options.volume=t.volume,i.options.muted=t.muted,i._updateMute(),i._updateVolume(),i._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){n.gate&&(i.options.defaultPlaybackRate=t.defaultPlaybackRate,i.options.playbackRate=t.playbackRate,i._updatePlaybackRate(),i._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){n.gate&&(i._seeked(),i._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){n.gate&&(e.jPlayer.browser.webkit||(i.htmlElement.media.currentTime=0),i.htmlElement.media.pause(),i._updateButtons(!1),i._getHtmlStatus(t,!0),i._updateInterface(),i._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(clearTimeout(i.internal.htmlDlyCmdId),i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:e.jPlayer.error.URL,context:i.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(r,a){t.addEventListener(this,function(){n.gate&&i._trigger(e.jPlayer.event[a])},!1)})},_addAuroraEventListeners:function(t,n){var i=this;t.volume=100*this.options.volume,t.on("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getAuroraStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.progress),t.duration>0&&i._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){n.gate&&i._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){n.gate&&(i._getAuroraStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){n.gate&&(i._updateButtons(!1),i._getAuroraStatus(t,!0),i._updateInterface(),i._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:e.jPlayer.error.URL,context:i.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var n=0,i=0,r=0,a=0;isFinite(e.duration)&&(this.status.duration=e.duration),n=e.currentTime,i=this.status.duration>0?100*n/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(r=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,a=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(r=100,a=i),t&&(n=0,a=0,i=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var n=0,i=0,r=0,a=0;this.status.duration=e.duration/1e3,n=e.currentTime/1e3,i=this.status.duration>0?100*n/this.status.duration:0,e.buffered>0?(r=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,a=this.status.duration>0?n/(e.buffered*this.status.duration):0):(r=100,a=i),t&&(n=0,a=0,i=0),this.status.seekPercent=r,this.status.currentPercentRelative=a,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,i){var r=e.Event(t);r.jPlayer={},r.jPlayer.version=e.extend({},this.version),r.jPlayer.options=e.extend(!0,{},this.options),r.jPlayer.status=e.extend(!0,{},this.status),r.jPlayer.html=e.extend(!0,{},this.html),r.jPlayer.aurora=e.extend(!0,{},this.aurora),r.jPlayer.flash=e.extend(!0,{},this.flash),n&&(r.jPlayer.error=e.extend({},n)),i&&(r.jPlayer.warning=e.extend({},i)),this.element.trigger(r)},jPlayerFlashEvent:function(t,n){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var i=this.status.currentTime,r=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),i>0&&(r?this.pause(i):this.play(i))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:case e.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));var e="",t=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(n=(t=this.status.media.duration)-this.status.currentTime),e=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(t)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))},_convertTime:n.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.html.dash=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var n=this;return e.each(t,function(e,i){i&&n.format[e]&&"data:"!==i.substr(0,5)&&(t[e]=n._qualifyURL(i))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var n=this,i=!1,r=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(r,a){var o="video"===n.format[a].media;if(e.each(n.solutions,function(r,s){if(n[s].support[a]&&n._validString(t[a])){var l="html"===s,u="aurora"===s;return o?(l?(n.html.video.gate=!0,n.format[a].isDash&&(n.html.dash=!0),n._html_setVideo(t),n.html.active=!0):(n.flash.gate=!0,n._flash_setVideo(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(l?(n.html.audio.gate=!0,n._html_setAudio(t),n.html.active=!0,e.jPlayer.platform.android&&(n.androidFix.setMedia=!0)):u?(n.aurora.gate=!0,n._aurora_setAudio(t),n.aurora.active=!0):(n.flash.gate=!0,n._flash_setAudio(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),i=!0,!1}}),i)return!1}),i?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(r?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){"object"==typeof e&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,n){var i=this,r="function"==typeof n,a=Array.prototype.slice.call(arguments);"string"==typeof t&&(r&&a.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){i.element!==this&&(r&&!n.call(this.data("jPlayer"),i)||this.jPlayer.apply(this,a))}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){"object"==typeof e&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(e=e===t||!!e,this._muted(e))},unmute:function(e){e=e===t||!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var n=e(t.currentTarget),i=n.offset(),r=t.pageX-i.left,a=n.width(),o=n.height()-t.pageY+i.top,s=n.height();this.options.verticalVolume?this.volume(o/s):this.volume(r/a)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var n=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,n){var i=this;if("string"==typeof n)if(e.jPlayer.prototype.options.cssSelector[t]){if(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]){this.css.jq[t].bind("click.jPlayer",function(n){n.preventDefault(),i[t](n),i.options.autoBlur?e(this).blur():e(this).focus()})}n&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var n=e(t.currentTarget),i=n.offset(),r=100*(t.pageX-i.left)/n.width();this.playHead(r)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var n,i=e(t.currentTarget),r=i.offset(),a=t.pageX-r.left,o=i.width(),s=i.height()-t.pageY+r.top,l=i.height();n=(this.options.verticalPlaybackRate?s/l:a/o)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(n)}},_updatePlaybackRate:function(){var e=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*e+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){"object"==typeof e&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(n,i){var r=n;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof n){var a=n.split(".");if(i===t){for(var o=e.extend(!0,{},this.options),s=0;s<a.length;s++){if(o[a[s]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;o=o[a[s]]}return o}for(var l=r={},u=0;u<a.length;u++)u<a.length-1?(l[a[u]]={},l=l[a[u]]):l[a[u]]=i}return this._setOptions(r),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(t,n){var i=this;switch(t){case"volume":this.volume(n);break;case"muted":this._muted(n);break;case"globalVolume":this.options[t]=n;break;case"cssSelectorAncestor":this._cssSelectorAncestor(n);break;case"cssSelector":e.each(n,function(e,t){i._cssSelector(e,t)});break;case"playbackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",n),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",n),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=n=this._limitValue(n,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==n){var r=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!r||r&&!this.status.waitForPlay)&&(r||(this.options[t]=n),n?this._requestFullscreen():this._exitFullscreen(),r||this._setOption("fullWindow",n))}break;case"fullWindow":this.options[t]!==n&&(this._removeUiClass(),this.options[t]=n,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===n.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],n),this._updateAutohide();break;case"loop":this._loop(n);break;case"remainingDuration":this.options[t]=n,this._updateInterface();break;case"toggleDuration":this.options[t]=n;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],n),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==n&&(this.options[t]=n,n?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],n);break;case"keyEnabled":this.options[t]=n,n||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],n);break;case"audioFullScreen":case"autoBlur":this.options[t]=n}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){if(this.options.fullWindow)var e=this.options.autohide.full;else e=this.options.autohide.restored;"function"!=typeof e&&(e=function(){return e});var t=this,n="mousemove.jPlayer.jPlayerAutohide",i=function(n){var i,r,a=!1;void 0!==t.internal.mouse?(i=t.internal.mouse.x-n.pageX,r=t.internal.mouse.y-n.pageY,a=Math.floor(i)>0||Math.floor(r)>0):a=!0,t.internal.mouse={x:n.pageX,y:n.pageY},a&&t.css.jq.gui.fadeIn(t.options.autohide.fadeIn,function(){clearTimeout(t.internal.autohideId),t.internal.autohideId=setTimeout(function(){e.apply(this)&&t.css.jq.gui.fadeOut(t.options.autohide.fadeOut)},t.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():e.apply(this)?(this.element.bind(n,i),this.css.jq.gui.bind(n,i),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){"object"==typeof e&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,n=e.jPlayer.nativeFeatures.fullscreen;n.api.fullscreenEnabled&&n.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(n.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],n=e.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(t=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.requestFullscreen(t)},_exitFullscreen:function(){var t,n=e.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(t=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.exitFullscreen(t)},_html_initMedia:function(t){var n=e(this.htmlElement.media).empty();if(e.each(t.track||[],function(e,t){var i=document.createElement("track");i.setAttribute("kind",t.kind?t.kind:""),i.setAttribute("src",t.src?t.src:""),i.setAttribute("srclang",t.srclang?t.srclang:""),i.setAttribute("label",t.label?t.label:""),t.def&&i.setAttribute("default",t.def),n.append(i)}),this.htmlElement.media.src=this.status.src,this.html.dash){var i=dashjs.MediaPlayer().create();i.getDebug().setLogToBrowserConsole(this.options.dashAlerts),i.initialize(this.htmlElement.media,t.mpdv,!1)}"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var n=this;e.each(this.formats,function(e,i){if(n.html.support[i]&&t[i])return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&!this.html.dash&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,n=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))n.play();else{this.internal.cmdsIgnored&&n.play();try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=e,n.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,n=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),n.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=e}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,n=this.htmlElement.media;this._html_load();try{if("object"==typeof n.seekable&&n.seekable.length>0)n.currentTime=e*n.seekable.end(n.seekable.length-1)/100;else{if(!(n.duration>0)||isNaN(n.duration))throw"e";n.currentTime=e*n.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var n=this;e.each(this.formats,function(e,i){if(n.aurora.support[i]&&t[i])return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4a":case"fla":n._getMovie().fl_setAudio_m4a(t[i]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[i]);break;case"rtmpa":n._getMovie().fl_setAudio_rtmp(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4v":case"flv":n._getMovie().fl_setVideo_m4v(t[i]);break;case"rtmpv":n._getMovie().fl_setVideo_rtmp(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(e){this._flashError(e)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(e){this._flashError(e)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var n=e.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),t=parseInt(n[0],10)+"."+parseInt(n[1],10))}}catch(e){}else navigator.plugins&&navigator.mimeTypes.length>0&&(e=navigator.plugins["Shockwave Flash"])&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,n){return e<t?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var n;n=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[n],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[n]+t.message,hint:e.jPlayer.errorHint[n]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n),this.options.warningAlerts&&this._alert("Warning!"+(n.message?"\n"+n.message:"")+(n.hint?"\n"+n.hint:"")+"\nContext: "+n.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,n){t.internal.domNode[n]=function(e){t[n](e)}}),e.each(e.jPlayer.event,function(n,i){var r=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){if(t===n)return r=!1,!1}),r&&t.element.bind(i+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(n,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.status[n]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.options[n]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");var n=e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions;e.each(n.split(/\s+/g),function(e,n){delete t.internal.domNode[n]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}},"function"==typeof define&&define.amd?define("media_elements/video/jplayer/jquery.jplayer.min",["jquery"],factory):"object"==typeof exports?factory(require("jquery")):root.jQuery?factory(root.jQuery):factory(root.Zepto),define("media_elements/vast_advertisement/vast_advertisement-main",["jquery","underscore","viddler","media_elements/video/jplayer/jquery.jplayer.min"],function(e,t,n){return{VastParser:function(t){var n=[];return e.each(t.split(","),function(e,t){parts=t.split(" "),n.push({url:parts[0],type:parts[1],offset:parseInt(parts[2])})}),n},View:n.BaseViews.MediaElement.extend({name:"vast_advertisement",initialize:function(e){this._initResource(e),this.advertInflicted=!1,this.impressionUrls=[],this.quartileEvents=[],this.videoFiles=[],this.duration=0,this.timelineEnd=this.timelineStart},load:function(){var e=this;this.injectEl(),this.useVastUrl(this.resourceData.vastUrl,function(){e.resourceLoaded()})},injectEl:function(){this.$el=e("<div>",{class:"advertisement"}),this.embed.target.find(".media-container").prepend(this.$el)},play:function(){this.playerExists?(this.$el.jPlayer("play"),this.embed.manager.mediaElementPlayed()):(this.fileIndex=0,this.inflictAdvertisement())},useVastUrl:function(t,n){var i=this;e.ajax({url:t,success:function(t){xml=e(t);var r=xml.find("Ad");0!=r.length?r.each(function(){e(this).find("Impression").each(function(){i.registerImpressionUrl(e(this).text())});var t=e(this).find("InLine");if(1==t.length)t.find("Creative").each(function(){var t=e(this).find("Linear");1==t.length&&i.handleLinearAdd(t)}),n&&n();else{var r=e(this).find("Wrapper");1==r.length&&i.useVastUrl(r.find("VASTAdTagURI").text(),n)}}):n&&n()},error:n})},handleLinearAdd:function(i){var r=this,a=1e3*n.Util.time2secs(i.find("Duration").text());this.duration+=a,this.timelineEnd+=a;var o=i.find('MediaFile[type="video/mp4"]');mp4=t.sortBy(o,function(t){return Math.abs(e(t).attr("width")-r.embed.target.width())})[0],mp4&&this.videoFiles.push({url:e(mp4).text(),skipSeconds:r._skipValueToSeconds(i.attr("skipoffset"),a/1e3),duration:a,linear:i})},_skipValueToSeconds:function(e,t){if(e)return e.match(/:/)?n.Util.time2secs(e):e.match(/%/)?t*(parseInt(e.replace("%",""))/100):void 0},registerImpressionUrl:function(e){this.impressionUrls.push(e)},endAllAdverts:function(){var e=this;this.embed.manager.goTo(this.track.switchedFrom),"postroll"!==this.resourceData.type&&setTimeout(function(){e.embed.manager.play()},100)},endCurrentAdvert:function(){this.$el.jPlayer("destroy"),this.embed.mainView.gui.enableSeek(),this.endAllAdverts()},seekTo:function(e){var t=e/this.duration*100;100==t?this.endCurrentAdvert():this.$el.jPlayer("playHead",t)},pause:function(){this.embed.manager.mediaElementPaused(),this.$el.jPlayer("pause")},setVolume:function(e){this.$el.jPlayer("volume",e/100)},showSkipInterface:function(t,n){var i,r;0==(i=this.$(".skip-link")).length&&(i=e("<a>",{class:"skip-link"}),this.$el.append(i));var a=parseInt(t-n);a<=0||this.watchedEnough?(this.watchedEnough=!0,r="Skip Ad >",i.addClass("active"),this.embed.mainView.gui.enableSeek()):r="Skip Ad in "+a+" seconds",i.text(r)},inflictAdvertisement:function(){var t=this;if(0==this.videoFiles.length)this.endAllAdverts();else{this.embed.mainView.gui.disableSeek(),this.playerExists=!0;var i=this.videoFiles[this.fileIndex];this.$el.jPlayer({volume:this.embed.manager.currentVolume,supplied:"m4v",size:{width:"100%",height:"100%"},swfPath:n.Util.setUrlProtocol(n.Config.libraryUrls[this.embed.environment]+"/swf"),noConflict:"viddlerjQuery",solution:"html, flash",ready:function(){e(this).jPlayer("setMedia",{m4v:i.url})}}),this.$el.on(e.jPlayer.event.ready,function(){t.recordImpressions(),t.$el.jPlayer("play"),t.embed.manager.mediaElementPlayed()}),i.skipSeconds&&(this.$el.on(e.jPlayer.event.timeupdate,function(e){t.showSkipInterface(i.skipSeconds,e.jPlayer.status.currentTime)}),this.listenForSkipClick()),this.$el.on(e.jPlayer.event.timeupdate,function(e){t.embed.manager.setTime(1e3*e.jPlayer.status.currentTime)}),this.$el.on(e.jPlayer.event.ended,function(){t.playerExists=!1,t.endCurrentAdvert()}),this.$el.on(e.jPlayer.event.error,function(){t.endCurrentAdvert()}),this.setupTrackingEvents(i),this.setupClicks(i)}},listenForSkipClick:function(){var e=this;this.$el.on("click",".skip-link.active",function(){e.endCurrentAdvert()})},recordImpressions:function(){var t=this;e.each(this.impressionUrls,function(e,n){t.ping(n)})},ping:function(e){(new Image).src=e},setupClicks:function(t){var n=this,i=t.linear.find("VideoClicks ClickThrough");if(1==i.length){var r=i.text();this.$el.click(function(t){e(t.target).hasClass("skip-link")||window.open(r,"_blank")})}t.linear.find("VideoClicks ClickTracking").each(function(){var t=e(this).text();n.$el.click(function(){n.ping(t)})})},setupTrackingEvents:function(t){var n=this,i=t.linear,r=t.duration;i.find("TrackingEvents Tracking").each(function(){var t=e(this),i=t.attr("event"),a=t.text(),o=function(){n.ping(a)};switch(i){case"fullscreen":n.embed.manager.events.on("gui:fullScreenEntered",o);break;case"exitFullscreen":n.embed.manager.events.on("gui:fullScreenLeft",o);break;case"mute":n.embed.manager.events.on("interaction:clickMute",o);break;case"unmute":n.embed.manager.events.on("interaction:clickUnmute",o);break;case"creativeView":case"start":o();break;case"firstQuartile":n.quartileEvents.push({time:n._skipValueToSeconds("25%",r),callback:o});break;case"midpoint":n.quartileEvents.push({time:n._skipValueToSeconds("50%",r),callback:o});break;case"thirdQuartile":n.quartileEvents.push({time:n._skipValueToSeconds("75%",r),callback:o});break;case"complete":n.$el.on(e.jPlayer.event.ended,o);break;case"skip":n.$el.on("click.advertising",".skip-link.active",o)}}),this.setupQuartileTrackingEvents()},setupQuartileTrackingEvents:function(){var t=this;this.quartileEvents.length>0&&this.$el.on(e.jPlayer.event.timeupdate,function(n){var i=1e3*n.jPlayer.status.currentTime;t.quartileEvents=e.grep(t.quartileEvents,function(e){return!(i>=e.time)||(e.callback(),!1)})})}})}}),define("viddler-manifest-builder",["jquery","underscore","viddler","media_elements/vast_advertisement/vast_advertisement-main"],function(e,t,n,i){return function(r,a){function o(t,n){this.opts=e.extend(!0,{},t),this.opts.type=this.opts.type||"video",n&&this.build(n)}return o.prototype.build=function(e){"video"==this.opts.type?this._getVideoManifest(e):"video-picker"==this.opts.type?this._getVideoPickerManifest(e):this._getCommentsManifest(e)},o.prototype._parseVideoIdString=function(e){var t={},n=e.split(":");return t.from=n[1],t.to=n[2],1==(n=n[0].split("@")).length?t.videoId=n[0]:(t.secret=n[0],t.videoId=n[1]),t},o.prototype._getVideoManifest=function(e){var t;(this.overlayTrack={name:"Overlay",id:"overlay",type:"sub-track",mediaElements:[]},this.opts.questions&&(this.questions=this._buildQuestions(this.opts.questions)),this.opts.vastUrls&&this._buildAdvertisingTracks(this.opts.vastUrls),this.videoTracks=[],this.timelineCommentsTracks=[],this.opts.playlistId)?(t=this.opts.embed.max?this.opts.embed.max>100?100:this.opts.embed.max:10,this.videoCounter=0,this._getVideoManifestUsingPlaylistId(t,1,e)):this._getVideoManifestUsingVideoIds(this.opts,e)},o.prototype._getVideoPickerManifest=function(e){var t,n=this;this.playlistApiResponse={},this.opts.videoId=[],t=this.opts.embed.max?this.opts.embed.max>100?100:this.opts.embed.max:10,this._setVideoIdsUsingPlaylistId(t,1,function(t){if(t){var i={name:"Track 1",id:"track1",type:"top-level-track",mediaElements:[{type:"video_picker",timelineStart:0,duration:0,title:"Video Picker",resourceData:{viddlerPlaylistId:n.opts.playlistId,videos:n.playlistApiResponse.list_result.video_list}}]};e({title:"Comments",hideControls:!0,mediaDimensions:{width:1e3,height:500},settings:n.opts.embed,tracks:[i]})}else n.serveErrorManifest("Playlist Not Found",e)})},o.prototype._setVideoIdsUsingPlaylistId=function(t,i,r){var a=this;n.Api.getPlaylist(e.extend(this.opts,{page:i,per_page:t})).success(function(n){if(t+a.opts.videoId.length>a.opts.embed.max)var o=a.opts.embed.max-a.opts.videoId.length;else o=t;var s=n.list_result.video_list.slice(0,o);1===i?a.playlistApiResponse=n:a.playlistApiResponse.list_result.video_list=e.merge(a.playlistApiResponse.list_result.video_list,s),a.opts.videoId=e.merge(a.opts.videoId,s.map(function(e){var t=e.id;e.url.match("secret=(.*)")&&(t=e.url.match("secret=(.*)")[1]+"@"+t);return t}));var l=parseInt(n.list_result.total);if(a.opts.embed.max&&a.opts.embed.max>a.opts.videoId.length&&l>a.opts.videoId.length)return a._setVideoIdsUsingPlaylistId(t,i+1,r);r(!0)}).error(function(){a.opts.embed.manager.events.trigger("error:playlistNotfound"),r(!1)})},o.prototype._getVideoManifestUsingPlaylistId=function(i,r,a){var o=this;this.opts.include_comments=!0,n.Api.getPlaylist(e.extend(this.opts,{page:r,per_page:i})).success(function(n){var s=parseInt(n.list_result.total);if(i+o.videoCounter>o.opts.embed.max)var l=o.opts.embed.max-o.videoCounter;else l=i;var u=n.list_result.video_list.slice(0,l);if(1===r?o.playlistApiResponse=n:o.playlistApiResponse.list_result.video_list=e.merge(o.playlistApiResponse.list_result.video_list,u),o.opts.settings=t.extend(n.list_result.arpeggio_settings,o.opts.embed),u.map(function(e,t){o.videoCounter+=1,o._handleVideoResponse(e,o.videoCounter-1)}),o.opts.embed.max&&o.opts.embed.max>o.videoCounter&&s>o.videoCounter)return o._getVideoManifestUsingPlaylistId(i,r+1,a);o._finalizeManifest({},a)}).error(function(){o.opts.embed.manager.events.trigger("error:playlistNotfound"),o.serveErrorManifest("Playlist not found",a)})},o.prototype._getVideoManifestUsingVideoIds=function(i,r){var a=this,o=[];"string"==typeof this.opts.videoId&&(this.opts.videoId=this.opts.videoId.split(" ")),t.each(this.opts.videoId,function(e,t){a.opts.videoId[t]=a._parseVideoIdString(String(e))}),t.each(this.opts.videoId,function(e,t){o.push(n.Api.getPlaybackDetails({id:e.videoId,environment:a.opts.environment,secret:e.secret||a.opts.secret,manifest_id:a.opts.embed.manifestId,custom_user_identifier:window.logged_in_user,embed_id:a.opts.embed.embedId,password:a.opts.password})),o.push(n.Apiv3.getQuestions({id:e.videoId,environment:a.opts.environment}))});var s={};e.when.apply(e,o).then(function(){1==o.length?(a.opts.settings=t.extend(arguments[0].video.arpeggio_settings,a.opts.embed),a._handleVideoResponse(arguments[0].video,0),arguments[0].video.arpeggio_manifest&&(s=JSON.parse(arguments[0].video.arpeggio_manifest.content))):t.each(arguments,function(e,n){if(null!=e[0])return e[0].video?(a.opts.settings=t.extend(e[0].video.arpeggio_settings,a.opts.embed),a._handleVideoResponse(e[0].video,n),void(e[0].video.arpeggio_manifest&&(s=JSON.parse(e[0].video.arpeggio_manifest.content)))):void a._handleQuestionsResponse(e[0]);a._handleQuestionsResponse(e[0])}),a._finalizeManifest(s,r)},function(e){if(e.responseJSON&&"100"==e.responseJSON.error.code)a.opts.embed.manager.events.trigger("error:videoNotfound"),a.serveErrorManifest("Video not found",r);else if(e.responseJSON&&"101"==e.responseJSON.error.code)a.opts.embed.manager.events.trigger("error:videoForbidden"),a.serveErrorManifest("Video forbidden",r);else if(e.responseJSON&&"103"==e.responseJSON.error.code)a.servePasswordManifest(r);else{a.opts.embed.manager.events.trigger("error:connectionError"),a.serveErrorManifest("Connection Error",r)}})},o.prototype._handleQuestionsResponse=function(e){null==e&&this.questions&&this.questions.list.length>0?this.opts.embed.questions=this.questions:this.opts.embed.questions.list=e||[]},o.prototype._handleVideoResponse=function(e,t){(this.opts.videosOnSeperateTracks||0==t)&&(this.videoTracks.push({name:"VideoTrack",id:"video-track-"+t,type:"top-level-track",mediaElements:[],cyclable:!0,includeSubTracks:["timeline-comments-"+t,"overlay"]}),this.timelineCommentsTracks.push({name:"Timeline Comments",id:"timeline-comments-"+t,type:"sub-track",mediaElements:[]}));var n=this.opts.videosOnSeperateTracks?t:0,i=e.embed_video_quality||"720p";i=this.opts.embed.defaultResolution||i,this._setVideoMetaInformation(e,i),this._setViddlerUserData(e);var r=this.opts.videoId?this.opts.videoId[t]:{};this.videoTracks[n].mediaElements.push(this._buildVideoMediaElement(e,r,n)),this.timelineCommentsTracks[n].mediaElements=this.timelineCommentsTracks[n].mediaElements.concat(this._buildTimelineCommentsMediaElements(e,n)),this.opts.settings.siteCatalyst=this._loadSiteCatalystInfo(e);var a=this._buildOverlayMediaElement(e);a&&this.overlayTrack.mediaElements.push(a),e.vast_tag&&!this.opts.vastUrls&&this._buildAdvertisingTracks(e.vast_tag)},o.prototype._buildAdvertisingTracks=function(e){e=i.VastParser(e);var r=this;this.advertisingTracks=[],this.switchTrackRules=[],n.Util.matrix.android||n.Util.matrix.ios||t.each(e,function(e,t){r.advertisingTracks.push({name:"AdvertisingTrack "+t,id:"adverts-track-"+t,type:"top-level-track",includeSubTracks:["overlay"],mediaElements:[{timelineStart:0,type:"vast_advertisement",resourceData:{vastUrl:e.url,type:e.type,offset:e.offset}}]})})},o.prototype._getCommentsManifest=function(e){var i=this;n.Api.getCommentsMultiplePages({id:this.opts.videoId,environment:this.opts.environment,secret:this.opts.secret},function(n,r){if("success"==r)if(i.opts.settings=t.extend(n.responseJSON.comments.arpeggio_settings,i.opts.embed),window.logged_in_user)i.opts.embed.customUserLookup(window.logged_in_user,function(t){i._buildCommentsManifest(n.responseJSON,t.username,e)});else{if("none"!=n.responseJSON.comments.logged_user.username)var a=n.responseJSON.comments.logged_user.username.match(/username=([^,]*)/)[1];i._buildCommentsManifest(n.responseJSON,a,e)}else i.serveErrorManifest("Error loading comments",e)})},o.prototype._buildCommentsManifest=function(e,t,n){var i={name:"Track 1",id:"track1",type:"top-level-track",mediaElements:[{type:"comment_list",timelineStart:0,duration:0,title:"Comments",resourceData:{settings:this.opts.settings,comments_list:e.comments.list_result.comments_list,permissions:e.comments.permissions,viddlerVideoId:this.opts.videoId,loggedInAs:t}}]};n({title:"Comments",hideControls:!0,mediaDimensions:{width:1e3,height:500},settings:this.opts.settings,tracks:[i]})},o.prototype._finalizeManifest=function(n,i){var r=this;this.callbackFired=!0;var a=[].concat(this.videoTracks,this.timelineCommentsTracks);this.overlayTrack&&a.push(this.overlayTrack),this.advertisingTracks&&t.each(this.advertisingTracks,function(e,t){a.push(e);var n=0;switch(e.mediaElements[0].resourceData.type){case"midroll":n=e.mediaElements[0].resourceData.offset||0,n*=1e3;break;case"postroll":n=r._currentTrackDuration(r.videoTracks[0])}r.switchTrackRules.push({triggerTimelineStart:n,from:"video-track-0",to:"adverts-track-"+t,timelineStart:0,limitSwitches:1})});var o=this.videoTracks[0].mediaElements[0].resourceData.mediaUrls[0];if(n.features=n.features||{},n.features.comment_creation_listener={},window.logged_in_user&&this.opts.embed.enableBookmarks&&(n.features.bookmarks={}),this.player_social_sharing_services&&(n.features.social_sharing={resourceData:{services:this.player_social_sharing_services.split(",")}}),this.opts.buildChaptersFromVideoTitles){if(this.opts.videosOnSeperateTracks)var s=this.videoTracks.map(function(e){return{time:0,name:e.mediaElements[0].title,track:e.id}});else s=this.videoTracks[0].mediaElements.map(function(e){return{time:e.timelineStart,name:e.title,track:"video-track-0"}});n.features.chaptering={resourceData:{chapters:s}}}(this.opts.settings.jumpForwardControl||this.opts.settings.jumpBackControl)&&(n.features.jump_control={resourceData:{forward:this.opts.settings.jumpForwardControl,back:this.opts.settings.jumpBackControl}}),i(e.extend(n,{title:"Videos",hideControls:this.opts.hideControls,mediaDimensions:{width:o.width,height:o.height},settings:this.opts.settings,tracks:a,switchTrackRules:this.switchTrackRules,viddlerUserData:this.viddlerUserData}))},o.prototype._loadSiteCatalystInfo=function(e){return null!=e.site_catalyst},o.prototype._buildOverlayMediaElement=function(e){var t=e.arpeggio_settings;if(t.overlayImageUrl&&"true"==t.includeOverlay)return{type:"overlay",timelineStart:this._currentTrackDuration(this.overlayTrack),duration:e.videoDuration,resourceData:{imageUrl:t.overlayImageUrl,clickUrl:t.overlayClickUrl,offsetX:t.overlayOffsetX,offsetY:t.overlayOffsetY,position:t.overlayPosition,transparency:t.overlayTransparency}}},o.prototype._buildQuestions=function(e){return e.list.length>0&&{feedbackEndpoint:e.feedback,list:e.list||[]}},o.prototype._buildTimelineCommentsMediaElements=function(e,n){var i=e.comments,r=this,a=!(this.opts.embed.disableCommentCreation||this.opts.embed.disableCommentReplying||"1"!=e.author_logged&&"public"!=e.permissions.commenting.level),o="1"==e.author_logged;if("none"!=e.logged_user.username)var s=e.logged_user.username.match(/username=([^,]*)/)[1];var l=[];return t.each(i,function(i){if(i.add_timepoint&&"text"==i.type){var u=r._currentTrackDuration(r.videoTracks[n],!0)+parseInt(i.add_timepoint),d=(u=1e3*Math.ceil(u/1e3))-1e3;if(!(c=t.findWhere(l,{timelineStart:d}))){var c={type:"timeline_comments",resourceData:{commentTimeStamp:u,autoShow:!0,comments:[]},timelineStart:d,duration:3e3};l.push(c)}c.resourceData.comments.push({author:i.author,custom_user_identifier:i.custom_user_identifier,text:i.text,addTime:parseInt(i.add_time),addTimepoint:u,repliesCount:parseInt(i.replies_count),id:i.id,viddlerVideoId:e.id,canReply:a,canDelete:o,replyAs:s})}}),l},o.prototype._buildVideoMediaElement=function(e,t,n){var i=1e3*(t=t||{}).from||0,r=1e3*t.to||e.videoDuration;return this.video=e,"public"!=e.permissions.embed.level&&"1"!=e.author_logged||(this.player_social_sharing_services=e.player_social_sharing_services||"linkedin,googleplus,facebook,twitter,email"),{type:"video",timelineStart:this._currentTrackDuration(this.videoTracks[n]),duration:r-i,title:e.title,id:e.id,sub_modules:this._buildVideoSubModules(e),resourceData:{mediaUrls:e.videoMediaFiles,fragmentStart:i,fullVideoDuration:e.videoDuration,settings:this.opts.settings,title:e.title,description:e.description,aspectRatio:e.videoMediaFiles[0].height/e.videoMediaFiles[0].width,defaultMediaFileIndex:e.defaultMediaFileIndex}}},o.prototype._buildVideoSubModules=function(e){var t={};return e.videoMediaFiles.length>2&&(t.quality={files:e.videoMediaFiles,defaultMediaFileIndex:e.defaultMediaFileIndex}),"public"!=e.permissions.download.level&&"1"!=e.author_logged||this.opts.embed.disableDownload||(t.video_download={}),e.closed_captioning_list.length>0&&(t.subtitles={srts:e.closed_captioning_list,subtitleDisplayStyle:this.opts.embed.subtitleDisplayStyle}),this.opts.settings.accessibility&&(this.opts.settings.playbackSpeedControls=!0),this.opts.settings.playbackSpeedControls&&(t.speed_control={possible_speeds:[.5,.75,1,1.25,1.5,2]}),"public"!=e.permissions.commenting.level&&"1"!=e.author_logged||this.opts.embed.disableCommentCreation||(t.comment_creator={}),t.viddler_report_playback={videoId:e.id},t.viddler_analytics={},e.google_analytics&&""!=e.google_analytics.tracking_code&&"1"==e.google_analytics.enabled&&(t.google_analytics={tracking_id:e.google_analytics.tracking_code}),t.questions={feedbackEndpoint:{},list:[]},t},o.prototype._setVideoMetaInformation=function(i,r){var a="1"==i.hd_playback;void 0!==this.opts.embed.hd&&(a=this.opts.embed.hd);var o=this,s=n.Util.supportedVideoExtensions(),l=t.where(i.files,{status:"ready",ext:"mp4"}).sort(this._videoFileSorter);if(t.each(l,function(e){var t=o._bandwidthRestriction(e);e.hls_url&&-1!==s.indexOf("m3u8")?(e.cdn_url=n.Util.setUrlProtocol(e.hls_url),e.ext="m3u8"):e.dash_url&&-1!==s.indexOf("mpd")?(e.cdn_url=n.Util.setUrlProtocol(e.dash_url),e.ext="mpd"):(e.cdn_url=n.Util.setUrlProtocol(e.cdn_url),"audio"==e.profile_name||o.opts.settings.removeBandwidthRestrictions||(e.cdn_url+="&ec_rate="+t+"&ec_prebuf=60")),e.media_type="video"}),l=t.reject(l,function(e){return"Source"==e.profile_name||(!(!(e.height>1080&&n.Util.matrix.windows)||n.Util.matrix.chrome)||!a&&e.height>=720)}),r){var u,d,c=parseInt(r.replace("p",""));e.each(l,function(e,t){var n=Math.abs(t.height-c);(void 0===u||n<d)&&(u=e,d=n)})}i.defaultMediaFileIndex=u||0,l.push({cdn_url:n.Util.setUrlProtocol(i.thumbnail_url),media_type:"thumbnail"}),i.videoMediaFiles=l,i.videoDuration=parseInt(1e3*i.videoMediaFiles[0].length)},o.prototype._setVideoDuration=function(){},o.prototype._videoFileSorter=function(e,t){return t.size-e.size},o.prototype._currentTrackDuration=function(e,t){var n=e.mediaElements[e.mediaElements.length-(t?2:1)];return n?parseInt(n.timelineStart+n.duration):0},o.prototype.serveErrorManifest=function(e,t){t({settings:{},hideControls:!0,features:{},tracks:[{name:"Error Track",id:"error-track",type:"top-level-track",mediaElements:[{type:"error",resourceData:{message:e}}]}]})},o.prototype.servePasswordManifest=function(e){e({settings:{},hideControls:!0,features:{},tracks:[{name:"Password Track",id:"password-track",type:"top-level-track",mediaElements:[{type:"password_form",resourceData:{aspectRatio:9/16}}]}]})},o.prototype._bandwidthRestriction=function(e){return Math.round(e.bitrate)},o.prototype._setViddlerUserData=function(e){e.embed_info&&(this.viddlerUserData=JSON.parse(e.embed_info.content))},o.prototype._setResumeInfo=function(e){if(e.embed_info){var t=JSON.parse(e.embed_info.content);this.resumeFrom=t.resumeFrom}else if(localStorage&&localStorage["arpeggio-"+this.opts.embed.embedId]){var n=JSON.parse(localStorage["arpeggio-"+this.opts.embed.embedId]);this.resumeFrom=n.resumeFrom}},o}()}),define("text!../index.html",[],function(){return'if(!data) <div>\n  \x3c!-- Underscore Templates --\x3e\n  <script type="text/template" id="tmp-viddler-main">\n    <div class="viddler-app-wrap">\n\n      <div class="viddler-embed" style="min-height: auto !important;">\n        <div class="media-container">\n          <div class="load-wait"></div>\n        </div>\n        <div class="media-gui seekable"></div>\n      </div>\n    </div>\n  <\/script>\n\n  <script type="text/template" id="tmp-error-modal">\n    <div class="modal-container">\n      <a class="modal-close cursor">X</a>\n      <section id="modalbody">\n        <p><%= errorMsg %></p>\n      </section>\n    </div>\n  <\/script>\n\n  <script type="text/template" id="tmp-mega-gui">\n    <div class="top gui is-empty">\n      <div class="mask"></div>\n      <div class="left-icons icons">\n      </div>\n      <div class="right-icons icons">\n      </div>\n    </div>\n    <div class="middle gui">\n      <a class="play-overlay-button shown-when-no-controls" href="#" tabindex="<%= tabIndexPlayMiddle %>" title="<%= t(\'gui.play\') %>"><span class="inner"></span><span class="screenreader hide"><%= t(\'gui.play\') %></a>\n    </div>\n\n    <div class="bottom gui">\n      <div class="mask"></div>\n\n      <div class="bar-holder">\n        <div class="vp-btn-keyboard bar" tabindex="-1"></div>\n      </div>\n\n      <div class="left-icons icons">\n        <div class="icon">\n          <div tabindex="0" class="vp-btn-keyboard media-play-aria" role="button" aria-label="Play" aria-pressed="false" ><span class="screenreader hide"><%= t(\'gui.play\') %></span></div>\n        </div>\n        <div class="time">\n          <div class="label-time-text"></div>\n        </div>\n        <div class="icon volumeWrapper">\n          <div role="button" aria-label="Mute" aria-pressed="false" class="vp-btn-keyboard media-volume aria-button"\n            tabindex="<%= tabIndexVolume %>">\n            <span class="screenreader-custom hide"><%= t(\'gui.mute\') %></span>\n          </div>\n\n          <div class="rail-horizontal-volume">\n            <input class="vp-btn-keyboard volume-icon" role="slider" value="0" type="range" tabindex="<%= tabIndexVolume %>" min="0" max="10" step="1" aria-label="Volume" aria-orientation="horizontal" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" aria-valuetext="0" />\n            <span class="screenreader-custom hide">Volume</span>\n          </div>\n        </div>\n      </div>\n\n\n      <div class="right-icons icons">\n        <div class="icon" data-priority="100">\n          <div aria-pressed="false" aria-label="Full Screen"\n            class="vp-btn-keyboard media-full-screen full-screen-open aria-button"\n            role="button" tabindex="<%= tabIndexFullscreen %>">\n            <span class="screenreader hide"><%= t(\'gui.full_screen\') %></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  <\/script>\n\n  <script type="text/template" id="tmp-mega-timeline">\n    <div class="timeline-markers-container"></div>\n    <div class="total-time-bar">\n      <input class="vp-btn-keyboard time-icon" role="slider" value="0" type="range" tabindex="<%= tabIndexTimeline %>" min="0" max="0" step="1" aria-label="Time" aria-orientation="horizontal" aria-valuenow="0" aria-valuemin="0" aria-valuemax="0" aria-valuetext="0" />\n      <span class="screenreader hide">Time = 00:00</span>    \n    </div>\n  <\/script>\n\n  <script type="text/template" id="tmp-tooltip">\n    <div class="modal-outer tooltip">\n      <div class="modal-container">\n        <h2><%= title %></h2>\n        <p><%= description %></p>\n      </div>\n    </div>\n  <\/script>\n\n  <script type="text/template" id="tmp-resume">\n    <div class="modal-outer resume-modal">\n      <div class="modal-container">\n        <a href="#" class="resume button" role="button" tabindex="<%= tabIndexResume %>"><%= t(\'resume_modal.resume\') %></a>\n        <a href="#" class="beginning button" role="button" tabindex="<%= tabIndexResume %>"><%= t(\'resume_modal.start_from_beginning\') %></a>\n      </div>\n    </div>\n  <\/script>\n</div>\n'}),function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){return r(t[o][1][e]||e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";var i={encode:function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?(t.push(192|i>>6),t.push(128|63&i)):i<65536?(t.push(224|i>>12),t.push(128|63&i>>6),t.push(128|63&i)):(t.push(240|i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var i=e[n++];i<128||(i<224?(i=(31&i)<<6,i|=63&e[n++]):i<240?(i=(15&i)<<12,i|=(63&e[n++])<<6,i|=63&e[n++]):(i=(7&i)<<18,i|=(63&e[n++])<<12,i|=(63&e[n++])<<6,i|=63&e[n++])),t.push(String.fromCharCode(i))}return t.join("")}},r={};!function(e){var t=function(t){for(var n=0,i=[],r=0|t.length/3;0<r--;){var a=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,i.push(e.charAt(63&a>>18)),i.push(e.charAt(63&a>>12)),i.push(e.charAt(63&a>>6)),i.push(e.charAt(63&a))}if(2==t.length-n){a=(t[n]<<16)+(t[n+1]<<8);i.push(e.charAt(63&a>>18)),i.push(e.charAt(63&a>>12)),i.push(e.charAt(63&a>>6)),i.push("=")}else if(1==t.length-n){a=t[n]<<16;i.push(e.charAt(63&a>>18)),i.push(e.charAt(63&a>>12)),i.push("==")}return i.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,i=[],r=0|e.length/4;0<r--;){var a=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];i.push(255&a>>16),i.push(255&a>>8),i.push(255&a),t+=4}return i&&("="==e.charAt(t-2)?(i.pop(),i.pop()):"="==e.charAt(t-1)&&i.pop()),i},l={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};r.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},r.encodeASCII=function(e){var n=l.encode(e);return t(n)},r.decodeASCII=function(e){var t=o(e);return l.decode(t)},r.encode=function(e){var n=i.encode(e);return t(n)},r.decode=function(e){var t=o(e);return i.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0!==n&&(n.decode=r.decode,n.decodeArray=r.decodeArray,n.encode=r.encode,n.encodeASCII=r.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},i=15,r=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},l={25:2,26:4,29:6,30:8,31:10,27:13,28:15},u=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},c=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,i,r,a){this.uchar=e||" ",this.penState=new f(t,n,i,r,a)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<r;e++)this.chars.push(new h);this.pos=0,this.currPenState=new f};p.prototype={equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>r&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=r)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=r?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<r;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<r;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var m=function(){this.rows=[];for(var e=0;e<i;e++)this.rows.push(new p);this.currRow=14,this.nrRollUpRows=null,this.reset()};m.prototype={reset:function(){for(var e=0;e<i;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var i=e.indent,r=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,a=0;a<i;a++){var o=this.rows[a].getTextString();o&&(r=a+1,e?t.push("Row "+r+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var g=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};g.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var v=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new g(1,t),new g(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};v.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,i,r,a=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2)if(i=127&t[o],r=127&t[o+1],i>=16&&i<=31&&i===this.lastCmdA&&r===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+c([i,r])+") is dropped");else if(0!==i||0!==r){if(d.log("DATA","["+c([t[o],t[o+1]])+"] -> ("+c([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){this.channels[this.currChNr-1].insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+c([i,r])+" orig: "+c([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var i=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[n-1];return i.insertChars([32]),i.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+c([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,i;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,i=64<=t&&t<=95?1===n?a[e]:s[e]:1===n?o[e]:l[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},parseChars:function(e,t){var i=null,r=null,a=null;if(e>=25?(i=2,a=e-8):(i=1,a=e),17<=a&&a<=19){var o;o=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+n(o)+"' in channel "+i),r=[o],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(r){var s=c(r);d.log("DEBUG","Char codes =  "+s.join(","))}return r},parseBackgroundAttributes:function(e,t){var n,i,r,a;return!(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47)||(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=u[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,a=this.channels[r-1],a.setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,0))},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=d,e.PenState=f,e.CaptionScreen=m,e.Cea608Parser=v,e.findCea608Nalus=function(e,t,n){for(var i=0,r=t,a=[],o=function(e,t,n,i){if(4!==e||t<8)return null;var r=n.getUint8(i),a=n.getUint16(i+1),o=n.getUint32(i+3),s=n.getUint8(i+7);return 181==r&&49==a&&1195456820==o&&3==s};r<t+n;){if(i=e.getUint32(r),6==(31&e.getUint8(r+4)))for(var s=r+5,l=-1;s<r+4+i-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(s),s++;var d=0;for(u=255;255===u;)d+=u=e.getUint8(s),s++;o(l,d,e,s)&&a.push([s,d]),s+=d}r+=i+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]];n+=8;var r=31&e.getUint8(n);n+=2;for(var a=0;a<r;a++){var o=e.getUint8(n),s=4&o,l=3&o;n++;var u=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&u)+(127&d)!=0&&(0===l?(i[0].push(u),i[0].push(d)):1===l&&(i[1].push(u),i[1].push(d)))}return i}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function r(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function a(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function o(t,n,r){if(e.datetimeAccessFormPaths.length>0){var o=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,o)?a(t):t}return t}function s(t,n,r,a){return!(n==_.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,t,r,a)}function l(n,i){if(n.nodeType==_.DOCUMENT_NODE){for(var a=new Object,u=n.childNodes,d=0;d<u.length;d++)(f=u[d]).nodeType==_.ELEMENT_NODE&&(e.ignoreRoot?a=l(f):(a={})[h=t(f)]=l(f));return a}if(n.nodeType==_.ELEMENT_NODE){(a=new Object).__cnt=0;var c=[];for(u=n.childNodes,d=0;d<u.length;d++){var f,h=t(f=u[d]);if(f.nodeType!=_.COMMENT_NODE){var p=i+"."+h;if(s(a,f.nodeType,h,p))if(a.__cnt++,null==a[h]){var m=l(f,p);("#text"!=h||/[^\s]/.test(m))&&((g={})[h]=m,c.push(g)),a[h]=m,r(a,h,p)}else{var g;null!=a[h]&&(a[h]instanceof Array||(a[h]=[a[h]],r(a,h,p))),m=l(f,p),("#text"!=h||/[^\s]/.test(m))&&((g={})[h]=m,c.push(g)),a[h][a[h].length]=m}}}a.__children=c;for(var v=t(n),y=0;y<n.attributes.length;y++){var b=n.attributes[y];a.__cnt++;for(var E=b.value,T=0,w=e.matchers.length;T<w;T++){var S=e.matchers[T];S.test(b,v)&&(E=S.converter(b.value))}a[e.attributePrefix+b.name]=E}var x=function(e){return e.prefix}(n);return null!=x&&""!=x&&(a.__cnt++,a.__prefix=x),null!=a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),e.stripWhitespaces&&(a.__text=a.__text.trim()),delete a["#text"],"property"==e.arrayAccessForm&&delete a["#text_asArray"],a.__text=o(a.__text,h,i+"."+h)),null!=a["#cdata-section"]&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],"property"==e.arrayAccessForm&&delete a["#cdata-section_asArray"]),0==a.__cnt&&"text"==e.emptyNodeForm?a="":1==a.__cnt&&null!=a.__text?a=a.__text:1!=a.__cnt||null==a.__cdata||e.keepCData?a.__cnt>1&&null!=a.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==a.__text||""==a.__text.trim())&&delete a.__text:a=a.__cdata,delete a.__cnt,!e.enableToStringFunc||null==a.__text&&null==a.__cdata||(a.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),a}if(n.nodeType==_.TEXT_NODE||n.nodeType==_.CDATA_SECTION_NODE)return n.nodeValue}function u(t,i,r,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+i;if(null!=r)for(var s=0;s<r.length;s++){var l=r[s],u=t[l];e.escapeMode&&(u=n(u)),o+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+u+'"':o+="'"+u+"'"}return o+(a?"/>":">")}function d(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(t,n){return!!("property"==e.arrayAccessForm&&function(e,t){return-1!==e.indexOf(t,e.length-t.length)}(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function f(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function h(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function p(t){var n=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function m(t){var i="";return t instanceof Object?i+=function(t){var i="";return null!=t.__cdata&&(i+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?i+=n(t.__text):i+=t.__text),i}(t):null!=t&&(e.escapeMode?i+=n(t):i+=t),i}function g(e,t){return""===e?t:e+"."+t}function v(e,t,n,i){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)r+=u(e[a],t,p(e[a]),!1),r+=y(e[a],g(i,t)),r+=d(e[a],t);return r}function y(e,t){var n="";if(f(e)>0)for(var i in e)if(!c(e,i)&&(""==t||h(e,i,g(t,i)))){var r=e[i],a=p(r);null==r||null==r?n+=u(r,i,a,!0):r instanceof Object?r instanceof Array?n+=v(r,i,a,t):r instanceof Date?(n+=u(r,i,a,!1),n+=r.toISOString(),n+=d(r,i)):f(r)>0||null!=r.__text||null!=r.__cdata?(n+=u(r,i,a,!1),n+=y(r,g(t,i)),n+=d(r,i)):n+=u(r,i,a,!0):(n+=u(r,i,a,!1),n+=m(r),n+=d(r,i))}return n+m(e)}void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);var _={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){if(window.ActiveXObject||window,void 0===e)return null;var t;if(window.DOMParser){var n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?a(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return y(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(5),a=i(e(116)),o=i(e(150)),s=i(e(94)),l=i(e(46));dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=l.default,n.default=dashjs,n.MediaPlayer=r.MediaPlayer,n.Protection=o.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=s.default,n.Debug=l.default},{116:116,150:150,46:46,5:5,94:94}],5:[function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(92)),a=i(e(48)),o=i(e(46)),s=e(49),l="undefined"!=typeof window&&window||t,u=l.dashjs;u||(u=l.dashjs={}),u.MediaPlayer=r.default,u.FactoryMaker=a.default,u.Debug=o.default,u.Version=(0,s.getVersionString)(),n.default=u,n.MediaPlayer=r.default,n.FactoryMaker=a.default,n.Debug=o.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{46:46,48:48,49:49,92:92}],6:[function(e,t,n){var i={parseBuffer:function(e){return new r(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new r},createBox:function(e,t,n){var i=a.create(e);return t&&t.append(i,n),i},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var i=[],r=0;if("utf-8"===n)for(;r<e.byteLength;){var a=e.getUint8(r++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(r++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(r++))<<6,a|=63&e.getUint8(r++)):(a=(7&a)<<18,a|=(63&e.getUint8(r++))<<12,a|=(63&e.getUint8(r++))<<6,a|=63&e.getUint8(r++))),i.push(String.fromCharCode(a))}else for(;r<e.byteLength;)i.push(String.fromCharCode(e.getUint8(r++)));return i.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?(t.push(192|i>>6),t.push(128|63&i)):i<65536?(t.push(224|i>>12),t.push(128|63&i>>6),t.push(128|63&i)):(t.push(240|i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(null==n)return void e.boxes.push(t);var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var a=0;a<e.boxes.length;a++)if(i===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e};var r=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var n=[];return r._sweep.call(this,e,n,t),n},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;r._sweep.call(this.boxes[i],e,t,n)}},r.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},r.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new i.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},a.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},a.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},a.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},a.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(a.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(n+4);t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(r+2));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(r+4),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(n+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:n=(16776960&t)>>8,i=255&t,this._rawo.setUint16(r,n),this._rawo.setUint8(r+2,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(r+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var n=Math.floor(t),i=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,i)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},a.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},{}],7:[function(e,t,n){"use strict";var i=Array.isArray,r=Object.keys,a=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;var o,s,l,u=i(t),d=i(n);if(u&&d){if((s=t.length)!=n.length)return!1;for(o=0;o<s;o++)if(!e(t[o],n[o]))return!1;return!0}if(u!=d)return!1;var c=t instanceof Date,f=n instanceof Date;if(c!=f)return!1;if(c&&f)return t.getTime()==n.getTime();var h=t instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return t.toString()==n.toString();if(t instanceof Object&&n instanceof Object){var m=r(t);if((s=m.length)!==r(n).length)return!1;for(o=0;o<s;o++)if(!a.call(n,m[o]))return!1;for(o=0;o<s;o++)if(!e(t[l=m[o]],n[l]))return!1;return!0}return!1}},{}],8:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===i||t===l?62:t===r||t===u?63:t<a?-1:t<a+10?t-a+26+26:t<s+26?t-s:t<o+26?t-o+26:void 0}var n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),r="/".charCodeAt(0),a="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),l="-".charCodeAt(0),u="_".charCodeAt(0);e.toByteArray=function(e){function i(e){u[c++]=e}var r,a,o,s,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=e.length;l="="===e.charAt(d-2)?2:"="===e.charAt(d-1)?1:0,u=new n(3*e.length/4-l),o=l>0?e.length-4:e.length;var c=0;for(r=0,a=0;r<o;r+=4,a+=3)i((16711680&(s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3))))>>16),i((65280&s)>>8),i(255&s);return 2===l?i(255&(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4)):1===l&&(i((s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2)>>8&255),i(255&s)),u},e.fromByteArray=function(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,r,a,o=e.length%3,s="";for(i=0,a=e.length-o;i<a;i+=3)s+=n(r=(e[i]<<16)+(e[i+1]<<8)+e[i+2]);switch(o){case 1:s+=t((r=e[e.length-1])>>2),s+=t(r<<4&63),s+="==";break;case 2:s+=t((r=(e[e.length-2]<<8)+e[e.length-1])>>10),s+=t(r>>4&63),s+=t(r<<2&63),s+="="}return s}}(void 0===n?this.base64js={}:n)},{}],9:[function(e,t,n){},{}],10:[function(e,t,n){(function(t){function i(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e){return this instanceof r?(r.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?function(e,t){if(e=o(e,t<0?0:0|s(t)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}(this,e):"string"==typeof e?function(e,t,n){return"string"==typeof n&&""!==n||(n="utf8"),(e=o(e,0|l(t,n))).write(t,n),e}(this,e,arguments.length>1?arguments[1]:"utf8"):function(e,t){if(r.isBuffer(t))return function(e,t){var n=0|s(t.length);return e=o(e,n),t.copy(e,0,0,n),e}(e,t);if(N(t))return function(e,t){var n=0|s(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return a(e,t);if(t instanceof ArrayBuffer)return function(e,t){return r.TYPED_ARRAY_SUPPORT?(t.byteLength,e=r._augment(new Uint8Array(t))):e=a(e,new Uint8Array(t)),e}(e,t)}return t.length?function(e,t){var n=0|s(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t):function(e,t){var n,i=0;"Buffer"===t.type&&N(t.data)&&(n=t.data,i=0|s(n.length)),e=o(e,i);for(var r=0;r<i;r+=1)e[r]=255&n[r];return e}(e,t)}(this,e)):arguments.length>1?new r(e,arguments[1]):new r(e)}function a(e,t){var n=0|s(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function o(e,t){return r.TYPED_ARRAY_SUPPORT?(e=r._augment(new Uint8Array(t))).__proto__=r.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=r.poolSize>>>1&&(e.parent=O),e}function s(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function l(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(i)return M(e).length;t=(""+t).toLowerCase(),i=!0}}function u(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new Error("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function d(e,t,n,i){return R(M(t,e.length-n),e,n,i)}function c(e,t,n,i){return R(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function f(e,t,n,i){return c(e,t,n,i)}function h(e,t,n,i){return R(P(t),e,n,i)}function p(e,t,n,i){return R(function(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function m(e,t,n){return 0===t&&n===e.length?D.fromByteArray(e):D.fromByteArray(e.slice(t,n))}function g(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,u=e[r],d=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&u)<<6|63&a)>127&&(d=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,c=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),r+=c}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=L));return n}(i)}function v(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(127&e[r]);return i}function y(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}function _(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;a++)r+=A(e[a]);return r}function b(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,i,a,o){if(!r.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>a||t<o)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function w(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function S(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function x(e,t,n,i,r,a){if(t>r||t<a)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function I(e,t,n,i,r){return r||x(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),k.write(e,t,n,i,23,4),n+4}function C(e,t,n,i,r){return r||x(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),k.write(e,t,n,i,52,8),n+8}function A(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],o=0;o<i;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function P(e){return D.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}var D=e(8),k=e(14),N=e(11);n.Buffer=r,n.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var i=new r(t,n);return delete i.parent,i},n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var O={};r.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT?(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array):(r.prototype.length=void 0,r.prototype.parent=void 0),r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,a=0,o=Math.min(n,i);a<o&&e[a]===t[a];)++a;return a!==o&&(n=e[a],i=t[a]),n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!N(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new r(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),a=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(i,a),a+=o.length}return i},r.byteLength=l,r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?g(this,0,e):function(e,t,n){var i=!1;if(e||(e="utf8"),(t|=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return g(this,t,n);case"ascii":return v(this,t,n);case"binary":return y(this,t,n);case"base64":return m(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:r.compare(this,e)},r.prototype.indexOf=function(e,t){function n(e,t,n){for(var i=-1,r=0;n+r<e.length;r++)if(e[n+r]===t[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===t.length)return n+i}else i=-1;return-1}if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(r.isBuffer(e))return n(this,e,t);if("number"==typeof e)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=t,t=0|n,n=r}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return u(this,e,t,n);case"utf8":case"utf-8":return d(this,e,t,n);case"ascii":return c(this,e,t,n);case"binary":return f(this,e,t,n);case"base64":return h(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;r.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),r.TYPED_ARRAY_SUPPORT)n=r._augment(this.subarray(e,t));else{var a=t-e;n=new r(a,void 0);for(var o=0;o<a;o++)n[o]=this[o+e]}return n.length&&(n.parent=this.parent||this),n},r.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},r.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},r.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},r.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},r.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||E(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||E(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),k.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),k.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),k.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),k.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||T(this,e,t,n,Math.pow(2,8*n),0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||T(this,e,t,n,Math.pow(2,8*n),0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):S(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):S(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);T(this,e,t,n,r-1,-r)}var a=0,o=1,s=e<0?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},r.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);T(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=e<0?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):S(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):S(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a,o=i-n;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;a--)e[a+t]=this[a+n];else if(o<1e3||!r.TYPED_ARRAY_SUPPORT)for(a=0;a<o;a++)e[a+t]=this[a+n];else e._set(this.subarray(n,n+o),t);return o},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;i<n;i++)this[i]=e;else{var r=M(e.toString()),a=r.length;for(i=t;i<n;i++)this[i]=r[i%a]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var F=r.prototype;r._augment=function(e){return e.constructor=r,e._isBuffer=!0,e._set=e.set,e.get=F.get,e.set=F.set,e.write=F.write,e.toString=F.toString,e.toLocaleString=F.toString,e.toJSON=F.toJSON,e.equals=F.equals,e.compare=F.compare,e.indexOf=F.indexOf,e.copy=F.copy,e.slice=F.slice,e.readUIntLE=F.readUIntLE,e.readUIntBE=F.readUIntBE,e.readUInt8=F.readUInt8,e.readUInt16LE=F.readUInt16LE,e.readUInt16BE=F.readUInt16BE,e.readUInt32LE=F.readUInt32LE,e.readUInt32BE=F.readUInt32BE,e.readIntLE=F.readIntLE,e.readIntBE=F.readIntBE,e.readInt8=F.readInt8,e.readInt16LE=F.readInt16LE,e.readInt16BE=F.readInt16BE,e.readInt32LE=F.readInt32LE,e.readInt32BE=F.readInt32BE,e.readFloatLE=F.readFloatLE,e.readFloatBE=F.readFloatBE,e.readDoubleLE=F.readDoubleLE,e.readDoubleBE=F.readDoubleBE,e.writeUInt8=F.writeUInt8,e.writeUIntLE=F.writeUIntLE,e.writeUIntBE=F.writeUIntBE,e.writeUInt16LE=F.writeUInt16LE,e.writeUInt16BE=F.writeUInt16BE,e.writeUInt32LE=F.writeUInt32LE,e.writeUInt32BE=F.writeUInt32BE,e.writeIntLE=F.writeIntLE,e.writeIntBE=F.writeIntBE,e.writeInt8=F.writeInt8,e.writeInt16LE=F.writeInt16LE,e.writeInt16BE=F.writeInt16BE,e.writeInt32LE=F.writeInt32LE,e.writeInt32BE=F.writeInt32BE,e.writeFloatLE=F.writeFloatLE,e.writeFloatBE=F.writeFloatBE,e.writeDoubleLE=F.writeDoubleLE,e.writeDoubleBE=F.writeDoubleBE,e.fill=F.fill,e.inspect=F.inspect,e.toArrayBuffer=F.toArrayBuffer,e};var j=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11,14:14,8:8}],11:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],12:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(16)})},{16:16}],13:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),l=1;l<i;l++)s[l-1]=arguments[l];n.apply(this,s)}else if(a(n)){for(i=arguments.length,s=new Array(i-1),l=1;l<i;l++)s[l-1]=arguments[l];for(i=(u=n.slice()).length,l=0;l<i;l++)u[l].apply(this,s)}return!0},i.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned)&&((n=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){return e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],14:[function(e,t,n){n.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?r-1:0,f=n?-1:1,h=e[t+c];for(c+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+c],c+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=i;d>0;o=256*o+e[t+c],c+=f,d-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),a-=u}return(h?-1:1)*o*Math.pow(2,a-i)},n.write=function(e,t,n,i,r,a){var o,s,l,u=8*a-r-1,d=(1<<u)-1,c=d>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:a-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=d?(s=0,o=d):o+c>=1?(s=(t*l-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&s,h+=p,s/=256,r-=8);for(o=o<<r|s,u+=r;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*m}},{}],15:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],16:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],17:[function(e,t,n){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick(function(){t.apply(null,a)})}}}:t.exports=e}).call(this,e(18))},{18:18}],18:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(){m&&h&&(m=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=a(o);m=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,m=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d,c,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var h,p=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],19:[function(e,t,n){t.exports=e(20)},{20:20}],20:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);u.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||o.nextTick(a,this)}function a(e){e.end()}var o=e(17),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=i;var l=e(12);l.inherits=e(15);var u=e(22),d=e(24);l.inherits(i,u);for(var c=s(d.prototype),f=0;f<c.length;f++){var h=c[f];i.prototype[h]||(i.prototype[h]=d.prototype[h])}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),i.prototype._destroy=function(e,t){this.push(null),this.end(),o.nextTick(t,e)}},{12:12,15:15,17:17,22:22,24:24}],21:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}t.exports=i;var r=e(23),a=e(12);a.inherits=e(15),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{12:12,15:15,23:23}],22:[function(e,t,n){(function(n,i){"use strict";function r(t,n){t=t||{};var i=n instanceof(T=T||e(20));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=e(29).StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function a(t){if(T=T||e(20),!(this instanceof a))return new a(t);this._readableState=new r(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),x.call(this)}function o(e,t,n,i,r){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}}(e,o)):(r||(a=l(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===I.prototype||(t=function(e){return I.from(e)}(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):s(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?s(e,o,t,!1):f(e,o)):s(e,o,t,!1))):i||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function s(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),f(e,t)}function l(e,t){var n;return function(e){return I.isBuffer(e)||e instanceof C}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function u(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(P("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E.nextTick(c,e):c(e))}function c(e){P("emit readable"),e.emit("readable"),g(e)}function f(e,t){t.readingMore||(t.readingMore=!0,E.nextTick(h,e,t))}function h(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(P("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function p(e){P("readable nexttick read 0"),e.read(0)}function m(e,t){t.reading||(P("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),g(e),t.flowing&&!t.reading&&e.read(0)}function g(e){var t=e._readableState;for(P("flow",t.flowing);t.flowing&&null!==e.read(););}function v(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?r+=a:r+=a.slice(0,e),0==(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=I.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var a=i.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0==(e-=o)){o===a.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(o));break}++r}return t.length-=r,n}(e,t),i}(e,t.buffer,t.decoder),n);var n}function y(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E.nextTick(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function b(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var E=e(17);t.exports=a;var T,w=e(28);a.ReadableState=r;var S=(e(13).EventEmitter,function(e,t){return e.listeners(t).length}),x=e(27),I=e(34).Buffer,C=i.Uint8Array||function(){},A=e(12);A.inherits=e(15);var M=e(9),P=void 0;P=M&&M.debuglog?M.debuglog("stream"):function(){};var R,D=e(25),k=e(26);A.inherits(a,x);var N=["error","close","destroy","pause","resume"];Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),a.prototype.destroy=k.destroy,a.prototype._undestroy=k.undestroy,a.prototype._destroy=function(e,t){this.push(null),t(e)},a.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=I.from(e,t),t=""),n=!0),o(this,e,t,!1,n)},a.prototype.unshift=function(e){return o(this,e,null,!0,!1)},a.prototype.isPaused=function(){return!1===this._readableState.flowing},a.prototype.setEncoding=function(t){return R||(R=e(29).StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t,this};var O=8388608;a.prototype.read=function(e){P("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return P("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?y(this):d(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&y(this),null;var i,r=t.needReadable;return P("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&P("length less than watermark",r=!0),t.ended||t.reading?P("reading or ended",r=!1):r&&(P("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=u(n,t))),null===(i=e>0?v(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&y(this)),null!==i&&this.emit("data",i),i},a.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},a.prototype.pipe=function(e,t){function i(e,t){P("onunpipe"),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,a())}function r(){P("onend"),e.end()}function a(){P("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",i),c.removeListener("end",r),c.removeListener("end",d),c.removeListener("data",o),m=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||p()}function o(t){P("ondata"),v=!1,!1!==e.write(t)||v||((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==b(f.pipes,e))&&!m&&(P("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,v=!0),c.pause())}function s(t){P("onerror",t),d(),e.removeListener("error",s),0===S(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",u),d()}function u(){P("onfinish"),e.removeListener("close",l),d()}function d(){P("unpipe"),c.unpipe(e)}var c=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,P("pipe count=%d opts=%j",f.pipesCount,t);var h=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?r:d;f.endEmitted?E.nextTick(h):c.once("end",h),e.on("unpipe",i);var p=function(e){return function(){var t=e._readableState;P("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&S(e,"data")&&(t.flowing=!0,g(e))}}(c);e.on("drain",p);var m=!1,v=!1;return c.on("data",o),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?w(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",s),e.once("close",l),e.once("finish",u),e.emit("pipe",c),f.flowing||(P("pipe resume"),c.resume()),e},a.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,n);return this}var o=b(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},a.prototype.on=function(e,t){var n=x.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&d(this):E.nextTick(p,this))}return n},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var e=this._readableState;return e.flowing||(P("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,E.nextTick(m,e,t))}(this,e)),this},a.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",function(){if(P("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){P("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||!(n.objectMode||r&&r.length)||t.push(r)||(i=!0,e.pause())}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var a=0;a<N.length;a++)e.on(N[a],this.emit.bind(this,N[a]));return this._read=function(t){P("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),a._fromList=v}).call(this,e(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,13:13,15:15,17:17,18:18,20:20,25:25,26:26,27:27,28:28,29:29,34:34,9:9}],23:[function(e,t,n){"use strict";function i(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);s.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){o(e,t,n)}):o(this,null,null)}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var s=e(20),l=e(12);l.inherits=e(15),l.inherits(r,s),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{12:12,15:15,20:20}],24:[function(e,t,n){(function(n,i){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function a(){}function o(t,n){g=g||e(20),t=t||{};var i=n instanceof g;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var a=t.highWaterMark,o=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(m.nextTick(r,i),m.nextTick(p,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),p(e,t))}(e,n,i,t,r);else{var a=f(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||c(e,n),i?v(d,e,n,a,r):d(e,n,a,r)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function s(t){if(g=g||e(20),!(_.call(s,this)||this instanceof g))return new s(t);this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),E.call(this)}function l(e,t,n,i,r,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=T.from(t,n)),t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else u(e,t,!1,s,i,r,a);return l}function u(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function d(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),p(e,t)}function c(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,a=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)a[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;a.allBuffers=l,u(e,t,!0,t.length,a,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var d=n.chunk,c=n.encoding,f=n.callback;if(u(e,t,!1,t.objectMode?1:d.length,d,c,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function h(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),p(e,t)})}function p(e,t){var n=f(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,m.nextTick(h,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}var m=e(17);t.exports=s;var g,v=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:m.nextTick;s.WritableState=o;var y=e(12);y.inherits=e(15);var _,b={deprecate:e(37)},E=e(27),T=e(34).Buffer,w=i.Uint8Array||function(){},S=e(26);y.inherits(s,E),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!_.call(this,e)||this===s&&e&&e._writableState instanceof o}})):_=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&function(e){return T.isBuffer(e)||e instanceof w}(e);return o&&!T.isBuffer(e)&&(e=function(e){return T.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=a),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m.nextTick(t,n)}(this,n):(o||function(e,t,n,i){var r=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),m.nextTick(i,a),r=!1),r}(this,i,e,n))&&(i.pendingcb++,r=l(this,i,o,e,t,n)),r},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||c(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,p(e,t),n&&(t.finished?m.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),s.prototype.destroy=S.destroy,s.prototype._undestroy=S.undestroy,s.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,15:15,17:17,18:18,20:20,26:26,27:27,34:34,37:37}],25:[function(e,t,n){"use strict";function i(e,t,n){e.copy(t,n)}var r=e(34).Buffer,a=e(9);t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,a=0;n;)i(n.data,t,a),a+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},{34:34,9:9}],26:[function(e,t,n){"use strict";function i(e,t){e.emit("error",t)}var r=e(17);t.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{17:17}],27:[function(e,t,n){t.exports=e(13).EventEmitter},{13:13}],28:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11}],29:[function(e,t,n){"use strict";function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(f.isEncoding===h||!h(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=s,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=u,t=3;break;default:return this.write=d,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function c(e){return e&&e.length?this.write(e):""}var f=e(34).Buffer,h=f.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var a=r(t[i]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--i<n||-2===a?0:(a=r(t[i]))>=0?(a>0&&(e.lastNeed=a-2),a):--i<n||-2===a?0:(a=r(t[i]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{34:34}],30:[function(e,t,n){t.exports=e(31).PassThrough},{31:31}],31:[function(e,t,n){(n=t.exports=e(22)).Stream=n,n.Readable=n,n.Writable=e(24),n.Duplex=e(20),n.Transform=e(23),n.PassThrough=e(21)},{20:20,21:21,22:22,23:23,24:24}],32:[function(e,t,n){t.exports=e(31).Transform},{31:31}],33:[function(e,t,n){t.exports=e(24)},{24:24}],34:[function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return o(e,t,n)}var a=e(10),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=a:(i(a,n),n.Buffer=r),i(o,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},{10:10}],35:[function(e,t,n){function i(){r.call(this)}t.exports=i;var r=e(13).EventEmitter;e(15)(i,r),i.Readable=e(31),i.Writable=e(33),i.Duplex=e(19),i.Transform=e(32),i.PassThrough=e(30),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function i(){u.readable&&u.resume&&u.resume()}function a(){d||(d=!0,e.end())}function o(){d||(d=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",i),u.removeListener("end",a),u.removeListener("close",o),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(u.on("end",a),u.on("close",o));var d=!1;return u.on("error",s),e.on("error",s),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},{13:13,15:15,19:19,30:30,31:31,32:32,33:33}],36:[function(e,t,n){function i(e){return e.toString(this.encoding)}function r(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var o=e(10).Buffer,s=o.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new o(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived);var r;i=(t+=e.toString(this.encoding,0,i)).length-1;if((r=t.charCodeAt(i))>=55296&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{10:10}],37:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,n){!function(e,t,n,i,r){function a(e){this.node=e}function o(){this.events=[],this.head=null,this.body=null}function s(){this.styling=null,this.layout=null}function l(){this.styles={}}function u(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.regions={}}function c(e){this.kind=e,this.begin=null,this.end=null,this.styleAttrs=null,this.regionID=null,this.sets=null,this.timeContainer=null}function f(){c.call(this,"body")}function h(){c.call(this,"div")}function p(){c.call(this,"p")}function m(){c.call(this,"span"),this.space=null}function g(){c.call(this,"span"),this.space=null,this.text=null}function v(){c.call(this,"br")}function y(){this.id=null,this.begin=null,this.end=null,this.styleAttrs=null,this.sets=null}function _(){this.begin=null,this.end=null,this.qname=null,this.value=null}function b(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function E(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function T(e,t){var n={};if(null!==e)for(var r in e.attributes){var a=e.attributes[r].uri+" "+e.attributes[r].local,o=i.byQName[a];if(void 0!==o){var s=o.parse(e.attributes[r].value);null!==s?(n[a]=s,o===i.byName.zIndex&&P(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):R(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[r].value)}}return n}function w(e,t,n){for(var i in e.attributes)if(e.attributes[i].uri===t&&e.attributes[i].local===n)return e.attributes[i].value;return null}function S(e,t){var i=w(e,n.ns_tts,"extent");if(null===i)return null;var a=i.split(" ");if(2!==a.length)return P(t,"Malformed extent (ignoring)"),null;var o=r.parseLength(a[0]),s=r.parseLength(a[1]);return s&&o?{h:s,w:o}:(P(t,"Malformed extent values (ignoring)"),null)}function x(e,t,n){var i,r=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(r=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(r=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?r=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?r=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?r=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?r=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?r=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(r=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/t)),r}function I(e,t,n,i){var r=t&&"seq"===t.timeContainer,a=0;n&&"begin"in n.attributes&&null===(a=x(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&(P(i,"Malformed begin value "+n.attributes.begin.value+" (using 0)"),a=0);var o=r?0:null;n&&"dur"in n.attributes&&null===(o=x(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&P(i,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;n&&"end"in n.attributes&&null===(s=x(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&P(i,"Malformed end value (ignoring)");var l=0;if(t&&(l=r&&"contents"in t&&t.contents.length>0?t.contents[t.contents.length-1].end:t.begin||0),a+=l,null!==o)s=a+o;else{var u=t&&"end"in t?t.end:Number.POSITIVE_INFINITY;s=null!==s?s+l:u}return{begin:a,end:s}}function C(e,t,n){for(;t.styleRefs.length>0;){var i=t.styleRefs.pop();i in e.styles?(C(e,e.styles[i],n),M(e.styles[i].styleAttrs,t.styleAttrs)):R(n,"Non-existant style id referenced")}}function A(e,t,n,i){for(var r=t.length-1;r>=0;r--){var a=t[r];a in e.styles?M(e.styles[a].styleAttrs,n):R(i,"Non-existant style id referenced")}}function M(e,t){for(var n in e)n in t||(t[n]=e[n])}function P(e,t){if(e&&e.warn&&e.warn(t))throw t}function R(e,t){if(e&&e.error&&e.error(t))throw t}function D(e,t){throw e&&e.fatal&&e.fatal(t),t}function k(e,t){for(var n,i=0,r=e.length-1;i<=r;){var a=e[n=Math.floor((i+r)/2)];if(a<t)i=n+1;else{if(!(a>t))return{found:!0,index:n};r=n-1}}return{found:!1,index:i}}e.fromXML=function(e,i,r){var c=t.parser(!0,{xmlns:!0}),b=[],E=[],T=[],w=0,S=null;c.onclosetag=function(e){if(b[0]instanceof l)for(var t in b[0].styles)C(b[0],b[0].styles[t],i);else if(b[0]instanceof p||b[0]instanceof m){if(b[0].contents.length>1){var o,s=[b[0].contents[0]];for(o=1;o<b[0].contents.length;o++)b[0].contents[o]instanceof g&&s[s.length-1]instanceof g?s[s.length-1].text+=b[0].contents[o].text:s.push(b[0].contents[o]);b[0].contents=s}b[0]instanceof m&&1===b[0].contents.length&&b[0].contents[0]instanceof g&&null===b[0].text&&(b[0].text=b[0].contents[0].text,delete b[0].contents)}else b[0]instanceof a&&(b[0].node.uri===n.ns_tt&&"metadata"===b[0].node.local?w--:w>0&&r&&"onCloseTag"in r&&r.onCloseTag());T.shift(),E.shift(),b.shift()},c.ontext=function(e){if(void 0===b[0]);else if(b[0]instanceof m||b[0]instanceof p){var t=new g;t.initFromText(S,b[0],e,T[0],i),b[0].contents.push(t)}else b[0]instanceof a&&w>0&&r&&"onText"in r&&r.onText(e)},c.onopentag=function(e){var t=e.attributes["xml:space"];t?T.unshift(t.value):0===T.length?T.unshift("default"):T.unshift(T[0]);var c=e.attributes["xml:lang"];if(c?E.unshift(c.value):0===E.length?E.unshift(""):E.unshift(E[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==S&&D("Two <tt> elements at ("+this.line+","+this.column+")"),(S=new o).initFromNode(e,i),b.unshift(S);else if("head"===e.local)b[0]instanceof o||D("Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==S.head&&D("Second <head> element at ("+this.line+","+this.column+")"),S.head=new s,b.unshift(S.head);else if("styling"===e.local)b[0]instanceof s||D("Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==S.head.styling&&D("Second <styling> element at ("+this.line+","+this.column+")"),S.head.styling=new l,b.unshift(S.head.styling);else if("style"===e.local){var g;b[0]instanceof l?((g=new u).initFromNode(e,i),g.id?S.head.styling.styles[g.id]=g:R("<style> element missing @id attribute"),b.unshift(g)):b[0]instanceof y?((g=new u).initFromNode(e,i),M(g.styleAttrs,b[0].styleAttrs),b.unshift(g)):D(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)b[0]instanceof s||D(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==S.head.layout&&D(i,"Second <layout> element at "+this.line+","+this.column+")"),S.head.layout=new d,b.unshift(S.head.layout);else if("region"===e.local){b[0]instanceof d||D(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var x=new y;x.initFromNode(S,e,i),!x.id||x.id in S.head.layout.regions?R(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):(S.head.layout.regions[x.id]=x,S._registerEvent(x)),b.unshift(x)}else if("body"===e.local){b[0]instanceof o||D(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==S.body&&D(i,"Second <body> element at "+this.line+","+this.column+")");var I=new f;I.initFromNode(S,e,i),S._registerEvent(I),S.body=I,b.unshift(I)}else if("div"===e.local){b[0]instanceof h||b[0]instanceof f||D(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var C=new h;C.initFromNode(S,b[0],e,i),S._registerEvent(C),b[0].contents.push(C),b.unshift(C)}else if("p"===e.local){b[0]instanceof h||D(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var A=new p;A.initFromNode(S,b[0],e,i),S._registerEvent(A),b[0].contents.push(A),b.unshift(A)}else if("span"===e.local){b[0]instanceof m||b[0]instanceof p||D(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var P=new m;P.initFromNode(S,b[0],e,T[0],i),S._registerEvent(P),b[0].contents.push(P),b.unshift(P)}else if("br"===e.local){b[0]instanceof m||b[0]instanceof p||D(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var k=new v;k.initFromNode(S,b[0],e,i),S._registerEvent(k),b[0].contents.push(k),b.unshift(k)}else if("set"===e.local){b[0]instanceof m||b[0]instanceof p||b[0]instanceof h||b[0]instanceof f||b[0]instanceof y||b[0]instanceof v||D(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var N=new _;N.initFromNode(S,b[0],e,i),S._registerEvent(N),b[0].sets.push(N),b.unshift(N)}else b.unshift(new a(e));else b.unshift(new a(e));if(b[0]instanceof a)if(e.uri===n.ns_tt&&"metadata"===e.local)w++;else if(w>0&&r&&"onOpenTag"in r){var O=[];for(var L in e.attributes)O[e.attributes[L].uri+" "+e.attributes[L].local]={uri:e.attributes[L].uri,local:e.attributes[L].local,value:e.attributes[L].value};r.onOpenTag(e.uri,e.local,O)}},c.write(e).close(),null!==S.head?delete S.head.styling:S.head=new s,null===S.head.layout&&(S.head.layout=new d);var x=!1;for(var I in S.head.layout.regions){x=!0;break}if(!x){var A=y.createDefaultRegion();S.head.layout.regions[A.id]=A}return S},o.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var i=w(e,n.ns_ttp,"cellResolution"),r=15,a=32;if(null!==i){var o=/(\d+) (\d+)/.exec(i);null!==o?(a=parseInt(o[1]),r=parseInt(o[2])):P(t,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:r}}(e,t);var i=function(e,t){var i,r=w(e,n.ns_ttp,"frameRate"),a=30;null!==r&&(null!==(i=/(\d+)/.exec(r))?a=parseInt(i[1]):P(t,"Malformed frame rate attribute (using initial value instead)"));var o=w(e,n.ns_ttp,"frameRateMultiplier"),s=1;null!==o&&(null!==(i=/(\d+) (\d+)/.exec(o))?s=parseInt(i[1])/parseInt(i[2]):P(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var l=s*a,u=1,d=w(e,n.ns_ttp,"tickRate");return null===d?null!==r&&(u=l):null!==(i=/(\d+)/.exec(d))?u=parseInt(i[1]):P(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:u}}(e,t);this.effectiveFrameRate=i.effectiveFrameRate,this.tickRate=i.tickRate,this.aspectRatio=function(e,t){var i=w(e,n.ns_ittp,"aspectRatio"),r=null;if(null!==i){var a=/(\d+) (\d+)/.exec(i);if(null!==a){var o=parseInt(a[1]),s=parseInt(a[2]);0!==o&&0!==s?r=o/s:R(t,"Illegal aspectRatio values (ignoring)")}else R(t,"Malformed aspectRatio attribute (ignoring)")}return r}(e,t);var r=w(e,n.ns_ttp,"timeBase");null!==r&&"media"!==r&&D(t,"Unsupported time base");var a=S(e,t);null===a?this.pxDimensions={h:480,w:640}:("px"===a.h.unit&&"px"===a.w.unit||D(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:a.h.value,w:a.w.value})},o.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=k(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=k(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},u.prototype.initFromNode=function(e,t){this.id=b(e),this.styleAttrs=T(e,t),this.styleRefs=E(e)},c.prototype.initFromNode=function(e,t,n,i){var r=I(e,t,n,i);this.begin=r.begin,this.end=r.end,this.styleAttrs=T(n,i),null!==e.head&&null!==e.head.styling&&A(e.head.styling,E(n),this.styleAttrs,i),this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(n),this.sets=[],this.timeContainer=function(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(R(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,i)},f.prototype.initFromNode=function(e,t,n){c.prototype.initFromNode.call(this,e,null,t,n),this.contents=[]},h.prototype.initFromNode=function(e,t,n,i){c.prototype.initFromNode.call(this,e,t,n,i),this.contents=[]},p.prototype.initFromNode=function(e,t,n,i){c.prototype.initFromNode.call(this,e,t,n,i),this.contents=[]},m.prototype.initFromNode=function(e,t,n,i,r){c.prototype.initFromNode.call(this,e,t,n,r),this.space=i,this.contents=[]},g.prototype.initFromText=function(e,t,n,i,r){c.prototype.initFromNode.call(this,e,t,null,r),this.text=n,this.space=i},v.prototype.initFromNode=function(e,t,n,i){c.prototype.initFromNode.call(this,e,t,n,i)},y.createDefaultRegion=function(){var e=new y;return e.id="",e.begin=0,e.end=Number.POSITIVE_INFINITY,e.styleAttrs={},e.sets=[],e},y.prototype.initFromNode=function(e,t,n){this.id=b(t);var i=I(e,null,t,n);this.begin=i.begin,this.end=i.end,this.styleAttrs=T(t,n),this.sets=[],null!==e.head&&null!==e.head.styling&&A(e.head.styling,E(t),this.styleAttrs,n)},_.prototype.initFromNode=function(e,t,n,i){var r=I(e,t,n,i);this.begin=r.begin,this.end=r.end;var a=T(n,i);for(var o in a){if(this.qname){R(i,"More than one style specified on set");break}this.qname=o,this.value=a[o]}}}(void 0===n?this.imscDoc={}:n,"undefined"==typeof sax?e(45):sax,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles,"undefined"==typeof imscUtils?e(44):imscUtils)},{42:42,43:43,44:44,45:45}],39:[function(e,t,n){!function(e,t,n){function i(e,t,o){var l;if("region"===o.kind?(l=document.createElement("div")).style.position="absolute":"body"===o.kind?l=document.createElement("div"):"div"===o.kind?l=document.createElement("div"):"p"===o.kind?l=document.createElement("p"):"span"===o.kind?l=document.createElement("span"):"br"===o.kind&&(l=document.createElement("br")),l){for(var u in l.style.margin="0",f){var d=f[u],c=o.styleAttrs[d.qname];void 0!==c&&null!==d.map&&d.map(e,l,o,c)}var h=l,p=o.styleAttrs[n.byName.multiRowAlign.qname];if(p&&"auto"!==p){var m=document.createElement("span");m.style.display="inline-block",m.style.textAlign=p,l.appendChild(m),h=m,e.mra=p}var g=o.styleAttrs[n.byName.linePadding.qname];if(g&&g>0&&(e.lp=g),"span"===o.kind&&o.text)if(e.lp||e.mra)for(var v=0;v<o.text.length;v++){var y=document.createElement("span");y.textContent=o.text.charAt(v),l.appendChild(y)}else l.textContent=o.text;for(var _ in t.appendChild(l),o.contents)i(e,h,o.contents[_]);if((e.lp||e.mra)&&"p"===o.kind){var b=[];(function e(t,n,i){if(0===t.childElementCount)n.push({element:t,bgcolor:i});else for(var r=t.style.backgroundColor||i,a=t.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&e(a,n,r),a=a.nextSibling})(h,b,"red"),s(b,e.lp*e.h),e.lp&&delete e.lp,e.mra&&delete e.mra}if("region"===o.kind){var E=[];a(h,E);var T=o.styleAttrs[n.byName.writingMode.qname];if(("lrtb"===T||"lr"===T||"rltb"===T||"rl"===T)&&e.enableRollUp&&o.contents.length>0&&"after"===o.styleAttrs[n.byName.displayAlign.qname]){var w=new r(""===o.id?"_":o.id,E);if(e.currentISDState[w.id]=w,e.previousISDState&&w.id in e.previousISDState&&e.previousISDState[w.id].plist.length>0&&w.plist.length>1&&w.plist[w.plist.length-2].text===e.previousISDState[w.id].plist[e.previousISDState[w.id].plist.length-1].text){var S=l.firstElementChild;S.style.bottom="-"+w.plist[w.plist.length-1].height+"px",S.style.transition="transform 0.4s",S.style.position="relative",S.style.transform="translateY(-"+w.plist[w.plist.length-1].height+"px)"}}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+o.kind)}function r(e,t){this.id=e,this.plist=t}function a(e,t){if(0===e.childElementCount&&"span"===e.localName){var n=e.getBoundingClientRect();0!==t.length&&o(n.top,n.height,t[t.length-1].top,t[t.length-1].height)?(n.top<t[t.length-1].top&&(t[t.length-1].top=n.top),n.height>t[t.length-1].height&&(t[t.length-1].height=n.height),t[t.length-1].text+=e.textContent):t.push({top:n.top,height:n.height,text:e.textContent})}else for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&a(i,t),i=i.nextSibling}function o(e,t,n,i){return e+t<n+i&&e>n||n+i<=e+t&&n>=e}function s(e,t){for(var n=null,i=!0,r=!1,a=0;a<=e.length;a++)if(a===e.length||"br"!==e[a].element.localName){if(null===n||a===e.length||!o(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height)){if(t&&!i){for(;--a>=0;)if(0!==e[a].element.getBoundingClientRect().width){if(u(e[a].element,e[a].color,t),0!==e[a].element.getBoundingClientRect().width&&o(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height))break;d(e[a].element)}i=!0;continue}if(a!==e.length&&null!==n&&!r){var s=document.createElement("br");e[a].element.parentElement.insertBefore(s,e[a].element),e.splice(a,0,{element:s}),r=!0;continue}if(a!==e.length&&t)for(;a<e.length;a++)if(0!==e[a].element.getBoundingClientRect().width){l(e[a].element,e[a].color,t);break}i=!1,r=!1,n=a}}else r=!0}function l(e,t,n){e.style.paddingLeft=n+"px",e.style.backgroundColor=t}function u(e,t,n){e.style.paddingRight=n+"px",e.style.backgroundColor=t}function d(e){e.style.paddingRight=null}function c(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,r,a,o,s,l,u){var d=r||t.clientHeight,c=a||t.clientWidth;if(null!==e.aspectRatio){var f=d*e.aspectRatio;f>c?d=Math.round(c/e.aspectRatio):c=f}var h=document.createElement("div");h.style.position="relative",h.style.width=c+"px",h.style.height=d+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:d,w:c,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:s,previousISDState:l,enableRollUp:u||!1,currentISDState:{}};for(var m in t.appendChild(h),e.contents)i(p,h,e.contents[m]);return p.currentISDState};var f=[new c("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,i){t.style.backgroundColor="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"}),new c("http://www.w3.org/ns/ttml#styling color",function(e,t,n,i){t.style.color="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"}),new c("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,i){t.style.direction=i}),new c("http://www.w3.org/ns/ttml#styling display",function(e,t,n,i){}),new c("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,i){t.style.display="flex",t.style.flexDirection="column","before"===i?t.style.justifyContent="flex-start":"center"===i?t.style.justifyContent="center":"after"===i&&(t.style.justifyContent="flex-end")}),new c("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,i){e.regionH=i.h*e.h,e.regionW=i.w*e.w;var r=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(r=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-r+"px",t.style.width=e.regionW-a+"px"}),new c("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,i){var r=[];for(var a in i)"monospaceSerif"===i[a]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===i[a]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===i[a]?r.push("monospace"):"sansSerif"===i[a]?r.push("sans-serif"):"serif"===i[a]?r.push("serif"):"monospaceSansSerif"===i[a]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===i[a]?r.push("serif"):r.push(i[a]);t.style.fontFamily=r.join(",")}),new c("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,i){t.style.fontSize=i*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,i){t.style.fontStyle=i}),new c("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,i){t.style.fontWeight=i}),new c("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,i){t.style.lineHeight="normal"===i?"normal":i*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,i){t.style.opacity=i}),new c("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,i){t.style.top=i.h*e.h+"px",t.style.left=i.w*e.w+"px"}),new c("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,i){t.style.overflow=i}),new c("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,i){var r=[];r[0]=i[0]*e.h+"px",r[1]=i[3]*e.w+"px",r[2]=i[2]*e.h+"px",r[3]=i[1]*e.w+"px",t.style.padding=r.join(" ")}),new c("http://www.w3.org/ns/ttml#styling showBackground",null),new c("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,i,r){var a,o=i.styleAttrs[n.byName.direction.qname];a="start"===r?"rtl"===o?"right":"left":"end"===r?"rtl"===o?"left":"right":r,t.style.textAlign=a}),new c("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,i){t.style.textDecoration=i.join(" ").replace("lineThrough","line-through")}),new c("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,i){t.style.textShadow="none"===i?"":"rgba("+i.color[0].toString()+","+i.color[1].toString()+","+i.color[2].toString()+","+(i.color[3]/255).toString()+") 0px 0px "+i.thickness*e.h+"px"}),new c("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,i){var r;r="bidiOverride"===i?"bidi-override":i,t.style.unicodeBidi=r}),new c("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,i){t.style.visibility=i}),new c("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,i){"wrap"===i?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new c("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,i){"lrtb"===i||"lr"===i?t.style.writingMode="horizontal-tb":"rltb"===i||"rl"===i?t.style.writingMode="horizontal-tb":"tblr"===i?t.style.writingMode="vertical-lr":"tbrl"!==i&&"tb"!==i||(t.style.writingMode="vertical-rl")}),new c("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,i){t.style.zIndex=i}),new c("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,i){if(null!==e.imgResolver&&null!==i){var r=document.createElement("img"),a=e.imgResolver(i,r);a&&(r.src=a),r.height=e.regionH,r.width=e.regionW,t.appendChild(r)}}),new c("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,i){e.displayForcedOnlyMode&&!1===i&&(t.style.visibility="hidden")})],h={};for(var p in f)h[f[p].qname]=f[p]}(void 0===n?this.imscHTML={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles)},{42:42,43:43}],40:[function(e,t,n){!function(e,t,n){function i(e,t,r,s,l,u,d,c){if(t<d.begin||t>=d.end)return null;var f="regionID"in d&&""!==d.regionID?d.regionID:u;if(null!==l&&f!==r.id&&(!("contents"in d)||"contents"in d&&0===d.contents.length||""!==f))return null;var h=new a(d);for(var p in d.sets)t<d.sets[p].begin||t>=d.sets[p].end||(h.styleAttrs[d.sets[p].qname]=d.sets[p].value);var m,g={};for(var v in h.styleAttrs)if(g[v]=!0,v===n.byName.writingMode.qname&&!(n.byName.direction.qname in h.styleAttrs)){var y=h.styleAttrs[v];"lrtb"===y||"lr"===y?h.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==y&&"rl"!==y||(h.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==l)for(var _ in n.all){var b=n.all[_];if(b.qname===n.byName.textDecoration.qname){var E=l.styleAttrs[b.qname],T=h.styleAttrs[b.qname],w=[];void 0===T?w=E:-1===T.indexOf("none")?((-1===T.indexOf("noUnderline")&&-1!==E.indexOf("underline")||-1!==T.indexOf("underline"))&&w.push("underline"),(-1===T.indexOf("noLineThrough")&&-1!==E.indexOf("lineThrough")||-1!==T.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===T.indexOf("noOverline")&&-1!==E.indexOf("overline")||-1!==T.indexOf("overline"))&&w.push("overline")):w.push("none"),h.styleAttrs[b.qname]=w}else b.inherit&&b.qname in l.styleAttrs&&!(b.qname in h.styleAttrs)&&(h.styleAttrs[b.qname]=l.styleAttrs[b.qname])}for(var S in n.all){var x=n.all[S];x.qname in h.styleAttrs||("region"===h.kind||!1===x.inherit&&null!==x.initial)&&(h.styleAttrs[x.qname]=x.parse(x.initial),g[x.qname]=!0)}for(var I in n.all){var C=n.all[I];if(C.qname in g&&null!==C.compute){var A=C.compute(e,l,h,h.styleAttrs[C.qname]);null!==A?h.styleAttrs[C.qname]=A:o(c,"Style '"+C.qname+"' on element '"+h.kind+"' cannot be computed")}}if("none"===h.styleAttrs[n.byName.display.qname])return null;for(var M in null===l?m=null===s?[]:[s]:"contents"in d&&(m=d.contents),m){var P=i(e,t,r,s,h,f,m[M]);null!==P&&h.contents.push(P.element)}for(var R in h.styleAttrs)-1===n.byQName[R].applies.indexOf(h.kind)&&delete h.styleAttrs[R];if("span"===h.kind&&h.text&&"default"===h.space){var D=h.text.replace(/\s+/g," ");h.text=D}if("p"===h.kind){var k=[];!function e(t,n){if("contents"in t)for(var i in t.contents)e(t.contents[i],n);else n.push(t)}(h,k);for(var N=0,O="after_br",L=0;;)if("after_br"===O)N>=k.length||"br"===k[N].kind?(O="before_br",L=N,N--):("preserve"!==k[N].space&&(k[N].text=k[N].text.replace(/^\s+/g,"")),k[N].text.length>0?(O="looking_br",N++):k.splice(N,1));else if("before_br"===O)if(N<0||"br"===k[N].kind){if(O="after_br",(N=L+1)>=k.length)break}else if("preserve"!==k[N].space&&(k[N].text=k[N].text.replace(/\s+$/g,"")),k[N].text.length>0){if(O="after_br",(N=L+1)>=k.length)break}else k.splice(N,1),N--;else N>=k.length||"br"===k[N].kind?(O="before_br",L=N,N--):N++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(h)}return"div"===h.kind&&n.byName.backgroundImage.qname in h.styleAttrs||"br"===h.kind||"contents"in h&&h.contents.length>0||"span"===h.kind&&null!==h.text||"region"===h.kind&&"always"===h.styleAttrs[n.byName.showBackground.qname]?{region_id:f,element:h}:null}function r(e){this.contents=[],this.aspectRatio=e.aspectRatio}function a(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function o(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var a=new r(e);for(var o in e.head.layout.regions){var s=i(e,t,e.head.layout.regions[o],e.body,null,"",e.head.layout.regions[o],n);null!==s&&a.contents.push(s.element)}return a}}(void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles)},{42:42,43:43}],41:[function(e,t,n){n.generateISD=e(40).generateISD,n.fromXML=e(38).fromXML,n.renderHTML=e(39).render},{38:38,39:39,40:40}],42:[function(e,t,n){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(void 0===n?this.imscNames={}:n)},{}],43:[function(e,t,n){!function(e,t,n){function i(e,t,n,i,r,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=a,this.initial=n,this.applies=i,this.parse=o,this.compute=s}for(var r in e.all=[new i(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new i(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new i(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new i(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new i(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new i(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var i=n.parseLength(t[0]),r=n.parseLength(t[1]);return r&&i?{h:r,w:i}:null},function(e,t,n,i){var r,a;if("auto"===i)r=1;else if("%"===i.h.unit)r=i.h.value/100;else{if("px"!==i.h.unit)return null;r=i.h.value/e.pxDimensions.h}if("auto"===i)a=1;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:r,w:a}}),new i(t.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var i in t)"'"!==t[i].charAt(0)&&'"'!==t[i].charAt(0)&&"default"===t[i]?n.push("monospaceSerif"):n.push(t[i]);return n},null),new i(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,function(t,n,i,r){var a;if("%"===r.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*r.value/100:r.value/100/t.cellResolution.h;else if("em"===r.unit)a=null!==n?n.styleAttrs[e.byName.fontSize.qname]*r.value:r.value/t.cellResolution.h;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a}),new i(t.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new i(t.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new i(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:n.parseLength(e)},function(t,n,i,r){var a;if("normal"===r)a=r;else if("%"===r.unit)a=i.styleAttrs[e.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=i.styleAttrs[e.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/t.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/t.pxDimensions.h}return a}),new i(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new i(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var i=n.parseLength(t[0]),r=n.parseLength(t[1]);return r&&i?{h:r,w:i}:null},function(e,t,n,i){var r,a;if("auto"===i)r=0;else if("%"===i.h.unit)r=i.h.value/100;else{if("px"!==i.h.unit)return null;r=i.h.value/e.pxDimensions.h}if("auto"===i)a=0;else if("%"===i.w.unit)a=i.w.value/100;else{if("px"!==i.w.unit)return null;a=i.w.value/e.pxDimensions.w}return{h:r,w:a}}),new i(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new i(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;var i=[];for(var r in t){var a=n.parseLength(t[r]);if(!a)return null;i.push(a)}return i},function(t,n,i,r){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]]}var o=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===o||"lr"===o)a=[a[0],a[3],a[2],a[1]];else if("rltb"===o||"rl"===o)a=[a[0],a[1],a[2],a[3]];else if("tblr"===o)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==o&&"tb"!==o)return null;a=[a[3],a[2],a[1],a[0]]}var s=[];for(var l in a)if(0===a[l].value)s[l]=0;else if("%"===a[l].unit)s[l]="0"===l||"2"===l?i.styleAttrs[e.byName.extent.qname].h*a[l].value/100:i.styleAttrs[e.byName.extent.qname].w*a[l].value/100;else if("em"===a[l].unit)s[l]=i.styleAttrs[e.byName.fontSize.qname]*a[l].value;else if("c"===a[l].unit)s[l]=a[l].value/t.cellResolution.h;else{if("px"!==a[l].unit)return null;s[l]=a[l].value/t.pxDimensions.h}return s}),new i(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new i(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,i){return"left"===i?"start":"right"===i?"end":i}),new i(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new i(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},i=e.split(" ");if(0===i.length||i.length>2)return null;var r=n.parseColor(i[0]);if(t.color=r,null!==r&&i.shift(),1!==i.length)return null;var a=n.parseLength(i[0]);return a?(t.thickness=a,t):null},function(t,n,i,r){if("none"===r)return r;var a={};if(null===r.color?a.color=i.styleAttrs[e.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=i.styleAttrs[e.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=i.styleAttrs[e.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/t.cellResolution.h;else{if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/t.pxDimensions.h}return a}),new i(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new i(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new i(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new i(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new i(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new i(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,function(e,t,n,i){return"c"===i.unit?i.value/e.cellResolution.h:null}),new i(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new i(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new i(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[r].qname]=e.all[r];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscUtils?e(44):imscUtils)},{42:42,44:44}],44:[function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\((\d+),(\d+),(\d+)\)/,i=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,r={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,o=null;return e in r?o=r[e]:null!==(a=t.exec(e))?o=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(e))?o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=i.exec(e))&&(o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),o};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=a.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],45:[function(e,t,n){(function(t){!function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);var r=this;(function(e){for(var t=0,n=x.length;t<n;t++)e[x[t]]=""})(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=V.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(L)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),u(r,"onready")}function r(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),i=0,r=0,a=x.length;r<a;r++){var o=e[x[r]].length;if(o>t)switch(x[r]){case"textNode":c(e);break;case"cdata":d(e,"oncdata",e.cdata),e.cdata="";break;case"script":d(e,"onscript",e.script),e.script="";break;default:h(e,"Max buffer length exceeded: "+x[r])}i=Math.max(i,o)}var s=n.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=s+e.position}function a(e,t){if(!(this instanceof a))return new a(e,t);S.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,I.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}function o(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function s(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function l(e,t){return!s(e,t)}function u(e,t,n){e[t]&&e[t](n)}function d(e,t,n){e.textNode&&c(e),u(e,t,n)}function c(e){e.textNode=f(e.opt,e.textNode),e.textNode&&u(e,"ontext",e.textNode),e.textNode=""}function f(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function h(e,t){return c(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,u(e,"onerror",t),e}function p(e){return e.sawRoot&&!e.closedRoot&&m(e,"Unclosed root tag"),e.state!==V.BEGIN&&e.state!==V.BEGIN_WHITESPACE&&e.state!==V.TEXT&&h(e,"Unexpected end"),c(e),e.c="",e.closed=!0,u(e,"onend"),i.call(e,e.strict,e.opt),e}function m(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&h(e,t)}function g(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,d(e,"onopentagstart",n)}function v(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],r=n[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function y(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=v(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==N)m(e,"xml: prefix must be bound to "+N+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==O)m(e,"xmlns: prefix must be bound to "+O+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,d(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function _(e,t){if(e.opt.xmlns){var n=e.tag,i=v(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(m(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){d(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],l=s[0],u=s[1],c=v(l,!0),f=c.prefix,h=c.local,p=""===f?"":n.ns[f]||"",g={name:l,value:u,prefix:f,local:h,uri:p};f&&"xmlns"!==f&&!p&&(m(e,"Unbound namespace prefix: "+JSON.stringify(f)),g.uri=f),e.tag.attributes[l]=g,d(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),d(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=V.TEXT:e.state=V.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function b(e){if(!e.tagName)return m(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=V.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=V.SCRIPT);d(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--&&e.tags[t].name!==i;)m(e,"Unexpected close tag");if(t<0)return m(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=V.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,d(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var n=a.ns[t];d(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=V.TEXT}function E(e){var t,n=e.entity,i=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),r.toLowerCase()!==n?(m(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function T(e,t){"<"===t?(e.state=V.OPEN_WAKA,e.startTagPosition=e.position):l(C,t)&&(m(e,"Non-whitespace before first tag."),e.textNode=t,e.state=V.TEXT)}function w(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}n.parser=function(e,t){return new i(e,t)},n.SAXParser=i,n.SAXStream=a,n.createStream=function(e,t){return new a(e,t)},n.MAX_BUFFER_LENGTH=65536;var S,x=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){p(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return h(t,"Cannot write after close. Assign an onready handler.");if(null===e)return p(t);"object"==typeof e&&(e=e.toString());for(var n=0,i="";i=w(e,n++),t.c=i,i;)switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case V.BEGIN:if(t.state=V.BEGIN_WHITESPACE,"\ufeff"===i)continue;T(t,i);continue;case V.BEGIN_WHITESPACE:T(t,i);continue;case V.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=n-1;i&&"<"!==i&&"&"!==i;)(i=w(e,n++))&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,n-1)}"<"!==i||t.sawRoot&&t.closedRoot&&!t.strict?(!l(C,i)||t.sawRoot&&!t.closedRoot||m(t,"Text data outside of root node."),"&"===i?t.state=V.TEXT_ENTITY:t.textNode+=i):(t.state=V.OPEN_WAKA,t.startTagPosition=t.position);continue;case V.SCRIPT:"<"===i?t.state=V.SCRIPT_ENDING:t.script+=i;continue;case V.SCRIPT_ENDING:"/"===i?t.state=V.CLOSE_TAG:(t.script+="<"+i,t.state=V.SCRIPT);continue;case V.OPEN_WAKA:if("!"===i)t.state=V.SGML_DECL,t.sgmlDecl="";else if(s(C,i));else if(s(F,i))t.state=V.OPEN_TAG,t.tagName=i;else if("/"===i)t.state=V.CLOSE_TAG,t.tagName="";else if("?"===i)t.state=V.PROC_INST,t.procInstName=t.procInstBody="";else{if(m(t,"Unencoded <"),t.startTagPosition+1<t.position){var o=t.position-t.startTagPosition;i=new Array(o).join(" ")+i}t.textNode+="<"+i,t.state=V.TEXT}continue;case V.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===D?(d(t,"onopencdata"),t.state=V.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=V.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===k?(t.state=V.DOCTYPE,(t.doctype||t.sawRoot)&&m(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(d(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=V.TEXT):s(P,i)?(t.state=V.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case V.SGML_DECL_QUOTED:i===t.q&&(t.state=V.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case V.DOCTYPE:">"===i?(t.state=V.TEXT,d(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=V.DOCTYPE_DTD:s(P,i)&&(t.state=V.DOCTYPE_QUOTED,t.q=i));continue;case V.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=V.DOCTYPE:s(P,i)&&(t.state=V.DOCTYPE_DTD_QUOTED,t.q=i);continue;case V.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=V.DOCTYPE_DTD,t.q="");continue;case V.COMMENT:"-"===i?t.state=V.COMMENT_ENDING:t.comment+=i;continue;case V.COMMENT_ENDING:"-"===i?(t.state=V.COMMENT_ENDED,t.comment=f(t.opt,t.comment),t.comment&&d(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==i?(m(t,"Malformed comment"),t.comment+="--"+i,t.state=V.COMMENT):t.state=V.TEXT;continue;case V.CDATA:"]"===i?t.state=V.CDATA_ENDING:t.cdata+=i;continue;case V.CDATA_ENDING:"]"===i?t.state=V.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===i?(t.cdata&&d(t,"oncdata",t.cdata),d(t,"onclosecdata"),t.cdata="",t.state=V.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=V.CDATA);continue;case V.PROC_INST:"?"===i?t.state=V.PROC_INST_ENDING:s(C,i)?t.state=V.PROC_INST_BODY:t.procInstName+=i;continue;case V.PROC_INST_BODY:if(!t.procInstBody&&s(C,i))continue;"?"===i?t.state=V.PROC_INST_ENDING:t.procInstBody+=i;continue;case V.PROC_INST_ENDING:">"===i?(d(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=V.TEXT):(t.procInstBody+="?"+i,t.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:s(j,i)?t.tagName+=i:(g(t),">"===i?_(t):"/"===i?t.state=V.OPEN_TAG_SLASH:(l(C,i)&&m(t,"Invalid character in tag name"),t.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===i?(_(t,!0),b(t)):(m(t,"Forward-slash in opening tag not followed by >"),t.state=V.ATTRIB);continue;case V.ATTRIB:if(s(C,i))continue;">"===i?_(t):"/"===i?t.state=V.OPEN_TAG_SLASH:s(F,i)?(t.attribName=i,t.attribValue="",t.state=V.ATTRIB_NAME):m(t,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===i?t.state=V.ATTRIB_VALUE:">"===i?(m(t,"Attribute without value"),t.attribValue=t.attribName,y(t),_(t)):s(C,i)?t.state=V.ATTRIB_NAME_SAW_WHITE:s(j,i)?t.attribName+=i:m(t,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=V.ATTRIB_VALUE;else{if(s(C,i))continue;m(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",d(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?_(t):s(F,i)?(t.attribName=i,t.state=V.ATTRIB_NAME):(m(t,"Invalid attribute name"),t.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(s(C,i))continue;s(P,i)?(t.q=i,t.state=V.ATTRIB_VALUE_QUOTED):(m(t,"Unquoted attribute value"),t.state=V.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case V.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=V.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}y(t),t.q="",t.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:s(C,i)?t.state=V.ATTRIB:">"===i?_(t):"/"===i?t.state=V.OPEN_TAG_SLASH:s(F,i)?(m(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=V.ATTRIB_NAME):m(t,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(l(R,i)){"&"===i?t.state=V.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}y(t),">"===i?_(t):t.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(t.tagName)">"===i?b(t):s(j,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=V.SCRIPT):(l(C,i)&&m(t,"Invalid tagname in closing tag"),t.state=V.CLOSE_TAG_SAW_WHITE);else{if(s(C,i))continue;l(F,i)?t.script?(t.script+="</"+i,t.state=V.SCRIPT):m(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case V.CLOSE_TAG_SAW_WHITE:if(s(C,i))continue;">"===i?b(t):m(t,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:var u,c;switch(t.state){case V.TEXT_ENTITY:u=V.TEXT,c="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:u=V.ATTRIB_VALUE_QUOTED,c="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:u=V.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===i?(t[c]+=E(t),t.entity="",t.state=u):s(t.entity.length?U:B,i)?t.entity+=i:(m(t,"Invalid character in entity name"),t[c]+="&"+t.entity+i,t.entity="",t.state=u);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&r(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;c(e=this),""!==e.cdata&&(d(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(d(e,"onscript",e.script),e.script="")}};try{S=e(35).Stream}catch(e){S=function(){}}var I=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});a.prototype=Object.create(S.prototype,{constructor:{value:a}}),a.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var i=e(36).StringDecoder;this._decoder=new i("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===I.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),S.prototype.on.call(n,e,t)};var C="\r\n\t ",A="0124356789",M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",P="'\"",R=C+">",D="[CDATA[",k="DOCTYPE",N="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/2000/xmlns/",L={xml:N,xmlns:O};C=o(C),A=o(A),M=o(M);var F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,B=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;P=o(P),R=o(R);var V=0;for(var q in n.STATE={BEGIN:V++,BEGIN_WHITESPACE:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],i="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=i}),n.STATE)n.STATE[n.STATE[q]]=q;V=n.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,i,r=[],a=-1,o=arguments.length;if(!o)return"";for(var s="";++a<o;){var l=Number(arguments[a]);if(!isFinite(l)||l<0||l>1114111||t(l)!==l)throw RangeError("Invalid code point: "+l);l<=65535?r.push(l):(n=55296+((l-=65536)>>10),i=l%1024+56320,r.push(n,i)),(a+1===o||r.length>16384)&&(s+=e.apply(null,r),r.length=0)}return s};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(void 0===n?this.sax={}:n)}).call(this,e(10).Buffer)},{10:10,35:35,36:36}],46:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p.apply(void 0,[u,this].concat(t))}function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p.apply(void 0,[d,this].concat(t))}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p.apply(void 0,[c,this].concat(t))}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p.apply(void 0,[f,this].concat(t))}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p.apply(void 0,[h,this].concat(t))}function p(e,t){if(!(T<e)){var n="",i=null;_&&(i=(new Date).getTime(),n+="["+(i-E)+"]"),b&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),n.length>0&&(n+=" ");for(var r=arguments.length,a=Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];Array.apply(null,a).forEach(function(e){n+=e+" "}),y[e]&&y[e](n),v.trigger(o.default.LOG,{message:n})}}var m,g=this.context,v=(0,a.default)(g).getInstance(),y=[],_=void 0,b=void 0,E=void 0,T=void 0;return m={getLogger:function(e){return{fatal:t.bind(e),error:n.bind(e),warn:i.bind(e),info:r.bind(e),debug:s.bind(e)}},setLogTimestampVisible:function(e){_=e},setCalleeNameVisible:function(e){b=e},setLogToBrowserConsole:function(e){T=e?h:l},getLogToBrowserConsole:function(){return T!==l},setLogLevel:function(e){T=e},getLogLevel:function(){return T}},_=!0,b=!0,T=c,E=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(y[u]=e(window.console.error),y[d]=e(window.console.error),y[c]=e(window.console.warn),y[f]=e(window.console.info),y[h]=e(window.console.debug)),m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48)),l=0,u=1,d=2,c=3,f=4,h=5;r.__dashjs_factory_name="Debug";var p=s.default.getSingletonFactory(r);p.LOG_LEVEL_NONE=l,p.LOG_LEVEL_FATAL=u,p.LOG_LEVEL_ERROR=d,p.LOG_LEVEL_WARNING=c,p.LOG_LEVEL_INFO=f,p.LOG_LEVEL_DEBUG=h,s.default.updateSingletonFactory(r.__dashjs_factory_name,p),n.default=p,t.exports=n.default},{47:47,48:48,51:51}],47:[function(e,t,n){"use strict";function i(){function e(e,n,i){var r=-1;return t[e]?(t[e].some(function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0}),r):r}var t={};return{on:function(n,i,r){var o=arguments.length<=3||void 0===arguments[3]?a:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!i||"function"!=typeof i)throw new Error("listener must be a function: "+i);if(!(e(n,i,r)>=0)){t[n]=t[n]||[];var s={callback:i,scope:r,priority:o};t[n].some(function(e,i){if(e&&o>e.priority)return t[n].splice(i,0,s),!0})||t[n].push(s)}},off:function(n,i,r){if(n&&i&&t[n]){var a=e(n,i,r);a<0||(t[n][a]=null)}},trigger:function(e,n){if(e&&t[e]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=e,t[e]=t[e].filter(function(e){return e}),t[e].forEach(function(e){return e&&e.callback.call(e.scope,n)})}},reset:function(){t={}}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48)),a=0;i.__dashjs_factory_name="EventBus";var o=r.default.getSingletonFactory(i);o.EVENT_PRIORITY_LOW=a,o.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{48:48}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n in a){var i=a[n];if(i.context===e&&i.name===t)return i.instance}return null}function t(e,t){return t[e]}function n(e,t,n){e in n&&(n[e]=t)}function i(e,t,n){var i=void 0,a=e.__dashjs_factory_name,o=t[a];if(o){var s=o.instance;if(!o.override)return s.apply({context:t,factory:r},n);for(var l in i=e.apply({context:t},n),s=s.apply({context:t,factory:r,parent:i},n))i.hasOwnProperty(l)&&(i[l]=s[l])}else i=e.apply({context:t},n);return i.getClassName=function(){return a},i}var r=void 0,a=[],o={},s={};return r={extend:function(e,t,n,i){!i[e]&&t&&(i[e]={instance:t,override:n})},getSingletonInstance:e,setSingletonInstance:function(e,t,n){for(var i in a){var r=a[i];if(r.context===e&&r.name===t)return void(a[i].instance=n)}a.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){var r=t(n.__dashjs_factory_name,o);return r||(r=function(t){var r=void 0;return void 0===t&&(t={}),{getInstance:function(){return r||(r=e(t,n.__dashjs_factory_name)),r||(r=i(n,t,arguments),a.push({name:n.__dashjs_factory_name,context:t,instance:r})),r}}},o[n.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(e){return t(e,o)},updateSingletonFactory:function(e,t){n(e,t,o)},getClassFactory:function(e){var n=t(e.__dashjs_factory_name,s);return n||(n=function(t){return void 0===t&&(t={}),{create:function(){return i(e,t,arguments)}}},s[e.__dashjs_factory_name]=n),n},getClassFactoryByName:function(e){return t(e,s)},updateClassFactory:function(e,t){n(e,t,s)}}}();n.default=i,t.exports=n.default},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return i};var i="2.9.0"},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(52)),a=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=a,t.exports=n.default},{52:52}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(50)),a=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}());n.default=a,t.exports=n.default},{50:50}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();n.default=r,t.exports=n.default},{}],53:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function t(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&w[e.streamInfo.id]?w[e.streamInfo.id][e.index]:null}function n(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e.id===r.id)return r}return null}function i(e){var t=new o.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=E.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=E.getBandwidth(i),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=r(e.adaptation),t}function r(e){var t,n=new s.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=p(e.period),n.representationCount=E.getRepresentationCount(i),n.lang=E.getLanguageForAdaptation(i),t=E.getViewpointForAdaptation(i),n.viewpoint=t?t.value:void 0,n.accessibility=E.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,i=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==f.default&&(i=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),i}),n.audioChannelConfiguration=E.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),n.roles=E.getRolesForAdaptation(i).map(function(e){return e.value}),n.codec=E.getCodec(i),n.mimeType=E.getMimeType(i),n.contentProtection=E.getContentProtectionData(i),n.bitrateList=E.getBitrateListForAdaptation(i),n.contentProtection&&n.contentProtection.forEach(function(e){e.KID=E.getKID(e)}),n.isText=E.getIsTextTrack(n.mimeType),n}function c(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=a.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function h(e){e.type=a.default.IMAGE}function p(e){var t=new l.default;return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=function(e){var t=new u.default;return t.DVRWindowSize=e.timeShiftBufferDepth,t.loadedTime=e.manifest.loadedTime,t.availableFrom=e.availabilityStartTime,t.minBufferTime=e.manifest.minBufferTime,t.maxFragmentDuration=e.maxSegmentDuration,t.duration=E.getDuration(e.manifest),t.isDynamic=E.getIsDynamic(e.manifest),t}(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<1,t}function m(){if(!E||!E.hasOwnProperty("getMpd")||!E.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function g(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function v(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}function y(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("quality argument is not an integer")}function _(){T=[],w={}}var b,E=void 0,T=void 0,w=void 0;return b={convertDataToRepresentationInfo:i,getDataForMedia:t,getStreamsInfo:function(e,t){var n=[],i=T;if(e){m();var r=E.getMpd(e);i=E.getRegularPeriods(r)}t||(t=i.length);for(var a=0;a<t;a++)n.push(p(i[a]));return n},getMediaInfoForType:function(e,t){if(0===T.length)return null;var i=T[0].mpd.manifest,a=E.getAdaptationForType(i,e.index,t,e);if(!a)return null;var o=n(e,T),s=o.id,l=E.getIndexForAdaptation(a,i,e.index);return w[s]=w[s]||E.getAdaptationsForPeriod(o),r(w[s][l])},getAllMediaInfoForType:function(e,t,i){var o,s=T,l=i,u=[],d=void 0,f=void 0,p=void 0,g=void 0,v=void 0;if(l){m();var y=E.getMpd(l);s=E.getRegularPeriods(y)}else{if(!(T.length>0))return u;l=T[0].mpd.manifest}var _=n(e,s),b=_.id,S=E.getAdaptationsForType(l,e.index,t!==a.default.EMBEDDED_TEXT?t:a.default.VIDEO);if(!S)return u;for(w[b]=w[b]||E.getAdaptationsForPeriod(_),g=0,o=S.length;g<o;g++)if(d=S[g],p=E.getIndexForAdaptation(d,l,e.index),f=r(w[b][p]),t===a.default.EMBEDDED_TEXT){var x=f.accessibility.length;for(v=0;v<x;v++)if(f){var I=f.accessibility[v];if(0===I.indexOf("cea-608:")){var C=I.substring(8).split(";");if("CC"===C[0].substring(0,2))for(v=0;v<C.length;v++)f||(f=r.call(this,w[b][p])),c(f,C[v].substring(0,3),C[v].substring(4)),u.push(f),f=null;else for(v=0;v<C.length;v++)f||(f=r.call(this,w[b][p])),c(f,"CC"+(v+1),C[v]),u.push(f),f=null}else 0===I.indexOf("cea-608")&&(c(f,a.default.CC1,"eng"),u.push(f),f=null)}}else t===a.default.IMAGE?(h(f),u.push(f),f=null):f&&u.push(f);return u},getCurrentRepresentationInfo:function(e){v(e);var t=e.getCurrentRepresentation();return t?i(t):null},getRepresentationInfoForQuality:function(e,t){v(e),y(t);var n=e.getRepresentationForQuality(t);return n?i(n):null},updateData:function(e){g(e);var i,r=n(e.getStreamInfo(),T),a=e.getMediaInfo(),o=t(a),s=e.getType(),l=void 0;i=a?a.id:null,T.length>0&&(l=i?E.getAdaptationForId(i,T[0].mpd.manifest,r.index):E.getAdaptationForIndex(a.index,T[0].mpd.manifest,r.index),e.getRepresentationController().updateData(l,o,s))},getInitRequest:function(e,t){var n,i=void 0,r=void 0;return g(e),y(t),i=e.getRepresentationController(),r=e.getIndexHandler(),n=i?i.getRepresentationForQuality(t):null,r?r.getInitRequest(n):null},getNextFragmentRequest:function(t,n){var i,r=void 0;return g(t),i=e(n,t.getRepresentationController()),(r=t.getIndexHandler())?r.getNextSegmentRequest(i):null},getFragmentRequestForTime:function(t,n,i,r){var a,o=void 0;return g(t),a=e(n,t.getRepresentationController()),(o=t.getIndexHandler())?o.getSegmentRequestForTime(a,i,r):null},getIndexHandlerTime:function(e){g(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){g(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)},getEventsFor:function(i,r){var a=[];if(0===T.length)return a;var u=T[0].mpd.manifest;return i instanceof l.default?a=E.getEventsForPeriod(n(i,T)):i instanceof s.default?a=E.getEventStreamForAdaptationSet(u,t(i)):i instanceof o.default&&(a=E.getEventStreamForRepresentation(u,e(i,r.getRepresentationController()))),a},getEvent:function(e,t,n){if(!e||!t)return null;var i=new d.default,r=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,l=e.event_duration,u=e.id,c=e.message_data,f=n*o+s;return t[r]?(i.eventStream=t[r],i.eventStream.value=a,i.eventStream.timescale=o,i.duration=l,i.id=u,i.presentationTime=f,i.messageData=c,i.presentationTimeDelta=s,i):null},setConfig:function(e){e&&e.dashManifestModel&&(E=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;m();var t=E.getMpd(e);T=E.getRegularPeriods(t),w={}},reset:_,resetIndexHandler:function(e){g(e);var t=e.getIndexHandler();t&&t.resetIndex()}},_(),b}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(222)),s=i(e(220)),l=i(e(223)),u=i(e(219)),d=i(e(82)),c=i(e(48)),f=i(e(2));r.__dashjs_factory_name="DashAdapter",n.default=c.default.getSingletonFactory(r),t.exports=n.default},{100:100,2:2,219:219,220:220,222:222,223:223,48:48,82:82}],54:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){B=-1}function n(){t(),V=0,q=NaN,U=null,H=null,z=null}function i(e,t,n){var i=L.resolve(n.path),r=void 0,a=void 0;return i&&t!==i.url&&M.isRelative(t)?(r=i.url,a=i.serviceLocation,t&&(r=M.resolve(t,r))):r=t,!M.isRelative(r)&&(e.url=r,e.serviceLocation=a,!0)}function r(e){var t=!1,n=H?H.getStreamInfo().manifestInfo.isDynamic:null;if(n||B!==e.availableSegmentsNumber){var i=(0,g.getSegmentByIndex)(B,e);if(i){var r=parseFloat((i.presentationStartTime-e.adaptation.period.start).toFixed(5)),a=e.adaptation.period.duration;j.debug(e.segmentInfoType+": "+r+" / "+a),t=(e.segmentInfoType!==o.default.SEGMENT_TIMELINE||!n)&&r>=a}else j.debug("isMediaFinished - no segment found")}else t=!0;return t}function f(e){z.getSegments(e,U,B,E)}function E(e,t){var n=H?H.getStreamInfo().manifestInfo.isDynamic:null;if(e.segments=t,t&&t.length>0&&(q=isNaN(q)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,q),n)){var i=t[t.length-1].presentationStartTime,r=k.getMetricsFor(a.default.STREAM);R.setExpectedLiveEdge(i),k.updateManifestUpdateInfo(D.getCurrentManifestUpdate(r),{presentationStartTime:i})}}function T(e){if(!e)throw new Error("no representation");e.segments=null,f(e)}function w(e,t,n){var i=t.segments,r=i?i.length:null,a=-1,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0;if(i&&r>0)for(n=null==n?N.getSegmentOverlapToleranceTime():n,d=0;d<r;d++)if(l=(s=i[d]).presentationStartTime,u=s.duration,e+(o=null==n?u/2:n)>=l&&e-o<l+u){a=s.availabilityIdx;break}return a}function S(e){if(null==e)return null;var t=new s.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,a=e.media,o=H?H.getType():null;return a=(0,g.replaceTokenForTemplate)(a,"Number",e.replacementNumber),a=(0,g.replaceTokenForTemplate)(a,"Time",e.replacementTime),a=(0,g.replaceTokenForTemplate)(a,"Bandwidth",r),a=(0,g.replaceIDForTemplate)(a,n.id),a=(0,g.unescapeDollarsInTemplate)(a),t.mediaType=o,t.type=u.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=H.getMediaInfo(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,i(t,a,n)?t:void 0}function x(e){var t=e.representation;t.segments&&A.trigger(d.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function I(e){var t=H?H.getType():null,n=H?H.getStreamInfo().manifestInfo.isDynamic:null;if(!e.error&&t===e.mediaType){var i,r=e.segments,a=e.representation,o=[],s=0,l=void 0,u=void 0,c=void 0;for(l=0,i=r.length;l<i;l++)u=r[l],c=(0,g.getTimeBasedSegment)(R,n,a,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,s),o.push(c),c=null,s++;a.segmentAvailabilityRange={start:o[0].presentationStartTime,end:o[i-1].presentationStartTime},a.availableSegmentsNumber=i,E(a,o),m.default.hasInitialization(a)&&A.trigger(d.default.REPRESENTATION_UPDATED,{sender:this,representation:a})}}e=e||{};var C=this.context,A=(0,c.default)(C).getInstance(),M=(0,p.default)(C).getInstance(),P=void 0,R=e.timelineConverter,D=e.dashMetrics,k=e.metricsModel,N=e.mediaPlayerModel,O=e.errHandler,L=e.baseURLController,F=void 0,j=void 0,B=void 0,U=void 0,V=void 0,q=void 0,H=void 0,z=void 0;return F={initialize:function(t){var n=(H=t)?H.getStreamInfo().manifestInfo.isDynamic:null;P.initialize(),z=(0,v.default)(C).create(e,n)},getStreamProcessor:function(){return H},getInitRequest:function(e){return e?function(e,t){var n=new s.default,r=e.adaptation.period,a=r.start,o=H?H.getStreamInfo().manifestInfo.isDynamic:null;if(n.mediaType=t,n.type=u.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=R.calcAvailabilityStartTimeFromPresentationTime(a,r.mpd,o),n.availabilityEndTime=R.calcAvailabilityEndTimeFromPresentationTime(a+r.duration,r.mpd,o),n.quality=e.index,n.mediaInfo=H?H.getMediaInfo():null,n.representationId=e.id,i(n,e.initialization,e))return n}(e,H?H.getType():null):null},getSegmentRequestForTime:function(e,t,n){var i=void 0;if(!e)return null;var a=H?H.getType():null,l=H?H.getStreamInfo().manifestInfo.isDynamic:null,u=B,d=!!n&&n.keepIdx,c=n?n.timeThreshold:null,h=!(!n||!n.ignoreIsFinished);return U!==t&&(U=t,j.debug("Getting the request for "+a+" time : "+t)),f(e),(B=w(t,e,c))<0&&(f(e),B=w(t,e,c)),B>0&&j.debug("Index for "+a+" time "+t+" is "+B),!h&&r(e)?((i=new s.default).action=s.default.ACTION_COMPLETE,i.index=B,i.mediaType=a,i.mediaInfo=H.getMediaInfo(),j.debug("Signal complete in getSegmentRequestForTime -",a)):i=S((0,g.getSegmentByIndex)(B,e)),d&&u>=0&&(B=e.segmentInfoType===o.default.SEGMENT_TIMELINE&&l?B:u),i},getNextSegmentRequest:function(e){var t=void 0,n=void 0;if(!e||-1===B)return null;var i=H?H.getType():null,a=H?H.getStreamInfo().manifestInfo.isDynamic:null;return U=null,B++,j.debug("Getting the next request at index: "+B+", type: "+i),!(0,g.getSegmentByIndex)(B,e)&&a?(j.debug("No segment found at index: "+B+". Wait for next loop"),f(e),B--,null):(r(e)?((t=new s.default).action=s.default.ACTION_COMPLETE,t.index=B,t.mediaType=i,t.mediaInfo=H.getMediaInfo(),j.debug("Signal complete -",i)):(f(e),t=S(n=(0,g.getSegmentByIndex)(B,e)),!n&&a&&B--),t)},updateRepresentation:function(e,n){var i=m.default.hasInitialization(e),r=m.default.hasSegments(e),a=H?H.getType():null,o=H?H.getStreamInfo().manifestInfo.isDynamic:null,s=void 0;if(e.segmentDuration||e.segments||T(e),e.segmentAvailabilityRange=R.calcSegmentAvailabilityRange(e,o),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return s=new l.default(b,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void A.trigger(d.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:s});n||t(),e.segmentDuration&&T(e),i||P.loadInitialization(e),r||P.loadSegments(e,a,e.indexRange),i&&r&&A.trigger(d.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:T,setCurrentTime:function(e){V=e},getCurrentTime:function(){return V},getEarliestTime:function(){return q},reset:function(){n(),A.off(d.default.INITIALIZATION_LOADED,x,F),A.off(d.default.SEGMENTS_LOADED,I,F)},resetIndex:t},j=(0,h.default)(C).getInstance().getLogger(F),n(),(P=function(e){return"webm"===e.split("/")[1].toLowerCase()}(e.mimeType)?(0,_.default)(C).getInstance():(0,y.default)(C).getInstance()).setConfig({baseURLController:L,metricsModel:k,mediaPlayerModel:N,errHandler:O}),A.on(d.default.INITIALIZATION_LOADED,x,F),A.on(d.default.SEGMENTS_LOADED,I,F),F}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(58)),s=i(e(215)),l=i(e(213)),u=e(233),d=i(e(51)),c=i(e(47)),f=i(e(48)),h=i(e(46)),p=i(e(208)),m=i(e(86)),g=e(76),v=i(e(75)),y=i(e(56)),_=i(e(57)),b=1;r.__dashjs_factory_name="DashHandler";var E=f.default.getClassFactory(r);E.SEGMENTS_UNAVAILABLE_ERROR_CODE=b,f.default.updateClassFactory(r.__dashjs_factory_name,E),n.default=E,t.exports=n.default},{100:100,208:208,213:213,215:215,233:233,46:46,47:47,48:48,51:51,56:56,57:57,58:58,75:75,76:76,86:86}],55:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){return r(e,s.default.BUFFER_LEVEL)}function n(e){if(!e)return null;var t=e.HttpList,n=null,i=void 0;if(!t||t.length<=0)return null;for(i=t.length-1;i>=0;){if(t[i].responsecode){n=t[i];break}i--}return n}function i(e){return e&&e.HttpList?e.HttpList:[]}function r(e,t){if(!e)return null;var n=e[t];if(!n)return null;var i=n.length;return i<=0?null:n[i-1]}function o(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var a=n[i],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function u(e,t,n){var i=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(e)for(i=e.AdaptationSet_asArray,o=0;o<i.length;o+=1)for(a=i[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(r=a[s]).id)return n?s:r;return null}function d(e,t){return c.getIsTypeOf(e,t)}var c=(e=e||{}).dashManifestModel,f=e.manifestModel;return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=u(f.getValue().Period_asArray[t],e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return function(e,t){var n=u(e,t,!0);return null!==n?n:-1}(f.getValue().Period_asArray[t],e)},getMaxIndexForBufferType:function(e,t){var n=f.getValue();return n?function(e,t){var n=void 0,i=void 0,r=void 0,a=void 0;if(!e||!t)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(n=i[a],r=n.Representation_asArray,d(n,t))return r.length;return-1}(n.Period_asArray[t],e):-1},getCurrentRepresentationSwitch:function(e){return r(e,s.default.TRACK_SWITCH)},getLatestBufferLevelVO:t,getCurrentBufferLevel:function(e){var n=t(e);return n?l.default.round10(n.level/1e3,-3):0},getCurrentHttpRequest:n,getHttpRequests:i,getCurrentDroppedFrames:function(e){return r(e,s.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return r(e,s.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return r(e,s.default.DVR_INFO)},getCurrentManifestUpdate:function(e){return r(e,s.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var i={},r=n(e);return r&&(i=o(r._responseHeaders)),void 0===i[t]?null:i[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var n,r={},s=void 0,l=void 0;for(l=(n=i(e)).length-1;l>=0;l--)if((s=n[l]).type===a.HTTPRequest.MPD_TYPE){r=o(s._responseHeaders);break}return void 0===r[t]?null:r[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=e(233),o=i(e(48)),s=i(e(101)),l=i(e(74));r.__dashjs_factory_name="DashMetrics",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{101:101,233:233,48:48,74:74}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){if(!S||!S.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function t(e,t){for(var n=e.references,i=n.length,r=e.timescale,a=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size,l=[],u=void 0,d=void 0,c=void 0,f=void 0,h=0;h<i;h++)c=n[h].subsegment_duration,f=n[h].referenced_size,(u=new o.default).duration=c,u.startTime=a,u.timescale=r,d=s+f-1,u.mediaRange=s+"-"+d,l.push(u),a+=c,s+=f;return l}function n(e){if(e.url){var t=new p.default;return t.type=e.init?h.HTTPRequest.INIT_SEGMENT_TYPE:h.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function i(e,t,n){e?c.trigger(l.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):c.trigger(l.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new s.default(null,"error loading segments",null)})}var r=this.context,c=(0,u.default)(r).getInstance(),g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0;return g={setConfig:function(e){e.baseURLController&&(S=e.baseURLController),e.metricsModel&&(E=e.metricsModel),e.mediaPlayerModel&&(T=e.mediaPlayerModel),e.errHandler&&(y=e.errHandler)},initialize:function(){_=(0,d.default)(r).getInstance(),b=(0,a.default)(r).getInstance(),w=(0,m.default)(r).create({errHandler:y,metricsModel:E,mediaPlayerModel:T,requestModifier:b})},loadInitialization:function t(i,r){e();var a=null,o=null,s=S.resolve(i.path),u=r||{init:!0,url:s?s.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};v.debug("Start searching for initialization.");var d=n(u);w.load({request:d,success:function(e){u.bytesLoaded=u.range.end,o=_.parse(e),(a=function(e){var t=e.getBox("ftyp"),n=e.getBox("moov"),i=null,r=void 0,a=void 0;return v.debug("Searching for initialization."),n&&n.isComplete&&(r=t?t.offset:n.offset,a=n.offset+n.size-1,i=r+"-"+a,v.debug("Found the initialization.  Range: "+i)),i}(o))?(i.range=a,c.trigger(l.default.INITIALIZATION_LOADED,{representation:i})):(u.range.end=u.bytesLoaded+u.bytesToLoad,t(i,u))},error:function(){c.trigger(l.default.INITIALIZATION_LOADED,{representation:i})}}),v.debug("Perform init search: "+u.url)},loadSegments:function r(a,o,s,l,u){if(e(),s&&(void 0===s.start||void 0===s.end)){var d=s?s.toString().split("-"):null;s=d?{start:parseFloat(d[0]),end:parseFloat(d[1])}:null}u=u||i;var c=null,f=null,h=!!s,p=S.resolve(a.path),m={init:!1,url:p?p.url:void 0,range:h?s:{start:0,end:1500},searching:!h,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500},g=n(m);w.load({request:g,success:function(e){var n=m.bytesToLoad,i=e.byteLength;if(m.bytesLoaded=m.range.end-m.range.start,c=_.parse(e),(f=c.getBox("sidx"))&&f.isComplete){var s=f.references,l=void 0,d=void 0;null!=s&&s.length>0&&(l=1===s[0].reference_type),l?function(){v.debug("Initiate multiple SIDX load."),m.range.end=m.range.start+f.size;var e=void 0,t=void 0,n=void 0,i=void 0,l=[],d=0,c=(f.offset||m.range.start)+f.size,h=function(e){e?(l=l.concat(e),++d>=t&&u(l,a,o)):u(null,a,o)};for(e=0,t=s.length;e<t;e++)n=c,i=c+s[e].referenced_size-1,c+=s[e].referenced_size,r(a,null,{start:n,end:i},m,h)}():(v.debug("Parsing segments from SIDX."),d=t(f,m),u(d,a,o))}else{if(f)m.range.start=f.offset||m.range.start,m.range.end=m.range.start+(f.size||n);else{if(i<m.bytesLoaded)return void u(null,a,o);var h=c.getLastBox();h&&h.size?(m.range.start=h.offset+h.size,m.range.end=m.range.start+n):m.range.end+=n}r(a,o,m.range,m,u)}},error:function(){u(null,a,o)}}),v.debug("Perform SIDX load: "+m.url)},reset:function(){w.abort(),w=null,y=null,_=null,b=null}},v=(0,f.default)(r).getInstance().getLogger(g),g}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(206)),o=i(e(87)),s=i(e(213)),l=i(e(51)),u=i(e(47)),d=i(e(196)),c=i(e(48)),f=i(e(46)),h=e(233),p=i(e(215)),m=i(e(147));r.__dashjs_factory_name="SegmentBaseLoader",n.default=c.default.getSingletonFactory(r),t.exports=n.default},{147:147,196:196,206:206,213:213,215:215,233:233,46:46,47:47,48:48,51:51,87:87}],57:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=[],n=void 0,i=void 0,r=(0,s.default)(m).create({data:e});for(r.consumeTagAndSize(_.Segment.Cues);r.moreData()&&r.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=r.parseTag(_.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];r.moreData()&&r.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=r.getMatroskaCodedNum(),o=r.getPos();if((i={}).Track=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(i),r.setPos(o+a)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function t(t,n,i,r){var a,o,s=void 0,l=void 0,u=void 0,d=void 0,f=void 0,h=void 0;for(l=[],d=0,o=(a=e(t)).length;d<o;d+=1)u=new c.default,s=0,s=d<a.length-1?a[d+1].CueTime-a[d].CueTime:r-a[d].CueTime,u.duration=s,u.startTime=a[d].CueTime,u.timescale=1e3,f=a[d].CueTracks[0].ClusterPosition+n,h=d<a.length-1?a[d+1].CueTracks[0].ClusterPosition+n-1:i-1,u.mediaRange=f+"-"+h,l.push(u);return y.debug("Parsed cues: "+l.length+" cues."),l}function n(e,n,i,r){var a,o=(0,s.default)(m).create({data:e}),u=void 0,d=void 0,c=i.split("-"),f=null,h={url:n,range:{start:parseFloat(c[0]),end:parseFloat(c[1])},request:f},p=void 0;for(y.debug("Parse EBML header: "+h.url),o.skipOverElement(_.EBML),o.consumeTag(_.Segment),p=o.getMatroskaCodedNum(),p+=o.getPos(),a=o.getPos();o.moreData()&&!o.consumeTagAndSize(_.Segment.Info,!0);)if(!(o.skipOverElement(_.Segment.SeekHead,!0)||o.skipOverElement(_.Segment.Tracks,!0)||o.skipOverElement(_.Segment.Cues,!0)||o.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===u;){var g=o.getMatroskaCodedNum(!0),v=o.getMatroskaCodedNum();switch(g){case _.Segment.Info.Duration.tag:u=o[_.Segment.Info.Duration.parse](v);break;default:o.setPos(o.getPos()+v)}}f=l(h);S.load({request:f,success:function(e){d=t(e,a,p,u),r(d)},error:function(){y.error("Download Error: Cues "+h.url),r(null)}}),y.debug("Perform cues load: "+h.url+" bytes="+h.range.start+"-"+h.range.end)}function i(){if(!x||!x.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function r(e,t,n){e?g.trigger(a.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):g.trigger(a.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function l(e){var t=new h.default;return t.type=e.init?f.HTTPRequest.INIT_SEGMENT_TYPE:f.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}var m=this.context,g=(0,o.default)(m).getInstance(),v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0;return v={setConfig:function(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error("Missing config parameter(s)");x=e.baseURLController,T=e.metricsModel,w=e.mediaPlayerModel,b=e.errHandler},initialize:function(){E=(0,d.default)(m).getInstance(),S=(0,p.default)(m).create({errHandler:b,metricsModel:T,mediaPlayerModel:w,requestModifier:E})},loadInitialization:function(e,t){i();var n=null,r=x.resolve(e.path),o=r?r.url:void 0,s=e.range.split("-"),u=t||{range:{start:parseFloat(s[0]),end:parseFloat(s[1])},request:n,url:o,init:!0};y.info("Start loading initialization."),n=l(u),S.load({request:n,success:function(){g.trigger(a.default.INITIALIZATION_LOADED,{representation:e})},error:function(){g.trigger(a.default.INITIALIZATION_LOADED,{representation:e})}}),y.debug("Perform init load: "+u.url)},loadSegments:function(e,t,a,o){i();var s=null,u=x.resolve(e.path),d=u?u.url:void 0;o=o||r,s=l({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:s,url:d,init:!1}),y.debug("Parsing ebml header"),S.load({request:s,success:function(i){n(i,d,a,function(n){o(n,e,t)})},error:function(){o(null,e,t)}})},reset:function(){b=null,E=null}},y=(0,u.default)(m).getInstance().getLogger(v),_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},v}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(51)),o=i(e(47)),s=i(e(200)),l=i(e(48)),u=i(e(46)),d=i(e(206)),c=i(e(87)),f=e(233),h=i(e(215)),p=i(e(147));r.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=l.default.getSingletonFactory(r),t.exports=n.default},{147:147,200:200,206:206,215:215,233:233,46:46,47:47,48:48,51:51,87:87}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}());n.default=r,t.exports=n.default},{}],59:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){return x}function t(){return C}function n(){w=null,S=-1,x=!0,I=[],A=null,P=null,R=null,D=null,k=null,N=null,O=null}function i(){var e=new Date,n=t(),i=1e3*P.getTime();R.addRepresentationSwitch(n.adaptation.type,e,i,n.id)}function r(){var e=L.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,i=k.calcSegmentAvailabilityRange(C,n);R.addDVRInfo(L.getType(),P.getTime(),t,i)}function d(e){return I[e]}function f(){for(var e=0,t=I.length;e<t;e++){var n=I[e].segmentInfoType;if(null===I[e].segmentAvailabilityRange||!c.default.hasInitialization(I[e])||(n===o.default.SEGMENT_BASE||n===o.default.BASE_URL)&&!I[e].segments)return!1}return!0}function h(t){var n=t;x=!1,E.trigger(u.default.AST_IN_FUTURE,{delay:n}),setTimeout(function(){if(!e()){x=!0,E.trigger(u.default.DATA_UPDATE_STARTED,{sender:T}),I.forEach(function(e){e.segmentAvailabilityRange=null});for(var t=0;t<I.length;t++)M.updateRepresentation(I[t],!0)}},n)}function p(n){if(n.sender.getStreamProcessor()===L&&e()){var l=n.representation,d=R.getMetricsFor(a.default.STREAM),c=R.getMetricsFor(t().adaptation.type),p=O.getCurrentManifestUpdate(d),m=!1,g=0,v=void 0,y=void 0;if(l.adaptation.period.mpd.manifest.type===o.default.DYNAMIC&&!l.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var b=l.segmentAvailabilityRange.end-l.segmentAvailabilityRange.start;g=1e3*(P.computeLiveDelay(C.segmentDuration,L.getStreamInfo().manifestInfo.DVRWindowSize)-b)}if(g>0)return r(),h(g),y=new s.default(_,"Segments update failed",null),void E.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:w,currentRepresentation:C,error:y});if(p){for(var T=0;T<p.representationInfo.length;T++)if((v=p.representationInfo[T]).index===l.index&&v.mediaType===L.getType()){m=!0;break}m||R.addManifestUpdateRepresentationInfo(p,l.id,l.index,l.adaptation.period.index,L.getType(),l.presentationTimeOffset,l.startNumber,l.segmentInfoType)}f()&&(x=!1,A.setPlaybackQuality(L.getType(),L.getStreamInfo(),function(e){return I.indexOf(e)}(C)),R.updateManifestUpdateInfo(p,{latency:C.segmentAvailabilityRange.end-P.getTime()}),O.getCurrentRepresentationSwitch(c)||i(),E.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:w,currentRepresentation:C}))}}function m(e){e.isDynamic&&function(e){for(var t=void 0,n=0,i=I.length;n<i;n++)(t=I[n]).segmentAvailabilityRange=k.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function g(e){e.sender.getStreamProcessor()===L&&(F.getValue().doNotUpdateDVRWindowOnBufferUpdated||r())}function v(e){if(e.mediaType===L.getType()&&L.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){C=d(e.newQuality);var t=A.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||D.setSavedBitrateSettings(e.mediaType,t),i()}}function y(e){if(e.newDuration){var n=t();n&&n.adaptation.period&&(n.adaptation.period.duration=e.newDuration)}}var _=1,b=this.context,E=(0,l.default)(b).getInstance(),T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=void 0,M=void 0,P=void 0,R=void 0,D=void 0,k=void 0,N=void 0,O=void 0,L=void 0,F=void 0;return T={initialize:function(){M=L.getIndexHandler()},setConfig:function(e){e.abrController&&(A=e.abrController),e.domStorage&&(D=e.domStorage),e.metricsModel&&(R=e.metricsModel),e.dashMetrics&&(O=e.dashMetrics),e.dashManifestModel&&(N=e.dashManifestModel),e.playbackController&&(P=e.playbackController),e.timelineConverter&&(k=e.timelineConverter),e.manifestModel&&(F=e.manifestModel),e.streamProcessor&&(L=e.streamProcessor)},getData:function(){return w},getDataIndex:function(){return S},isUpdating:e,updateData:function(e,t,n){var i=L.getStreamInfo(),r=A.getTopQualityIndexFor(n,i.id),o=A.getMinAllowedIndexFor(n),s=void 0,l=null;if(x=!0,E.trigger(u.default.DATA_UPDATE_STARTED,{sender:this}),I=function(e){return S=N.getIndexForAdaptation(w,e.period.mpd.manifest,e.period.index),N.getRepresentationsForAdaptation(e)}(t),null!==w&&w.id==e.id||n===a.default.FRAGMENTED_TEXT?s=A.getQualityFor(n,i):(l=A.getThroughputHistory().getAverageThroughput(n)||A.getInitialBitrateFor(n,i),s=A.getQualityForBitrate(L.getMediaInfo(),l)),void 0!==o&&s<o&&(s=o),s>r&&(s=r),C=d(s),w=e,n!==a.default.VIDEO&&n!==a.default.AUDIO&&n!==a.default.FRAGMENTED_TEXT)return x=!1,void E.trigger(u.default.DATA_UPDATE_COMPLETED,{sender:this,data:w,currentRepresentation:C});for(var c=0;c<I.length;c++)M.updateRepresentation(I[c],!0)},getStreamProcessor:function(){return L},getCurrentRepresentation:t,getRepresentationForQuality:d,reset:function(){E.off(u.default.QUALITY_CHANGE_REQUESTED,v,T),E.off(u.default.REPRESENTATION_UPDATED,p,T),E.off(u.default.WALLCLOCK_TIME_UPDATED,m,T),E.off(u.default.BUFFER_LEVEL_UPDATED,g,T),E.off(u.default.MANIFEST_VALIDITY_CHANGED,y,T),n()}},n(),E.on(u.default.QUALITY_CHANGE_REQUESTED,v,T),E.on(u.default.REPRESENTATION_UPDATED,p,T),E.on(u.default.WALLCLOCK_TIME_UPDATED,m,T),E.on(u.default.BUFFER_LEVEL_UPDATED,g,T),E.on(u.default.MANIFEST_VALIDITY_CHANGED,y,T),T}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(58)),s=i(e(213)),l=i(e(47)),u=i(e(51)),d=i(e(48)),c=i(e(86));r.__dashjs_factory_name="RepresentationController",n.default=d.default.getClassFactory(r),t.exports=n.default},{100:100,213:213,47:47,48:48,51:51,58:58,86:86}],60:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){var n=void 0,i=void 0,r=void 0,s=void 0,l=void 0,u=void 0,d=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),l=t!==a.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty(o.default.CODECS)&&(0===(u=e.Representation_asArray[0].codecs).search(a.default.STPP)||0===u.search(a.default.WVTT)))return t===a.default.FRAGMENTED_TEXT;if(s){if(s.length>1)return t===a.default.MUXED;s[0]&&s[0].contentType===t&&(d=!0,c=!0)}if(e.hasOwnProperty(o.default.MIME_TYPE)&&(d=l.test(e.mimeType),c=!0),!c)for(n=0,i=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!c&&n<i;)(r=e.Representation_asArray[n]).hasOwnProperty(o.default.MIME_TYPE)&&(d=l.test(r.mimeType),c=!0),n++;return d}function n(e){return t(e,a.default.AUDIO)}function i(e){return t(e,a.default.VIDEO)}function r(e){return t(e,a.default.FRAGMENTED_TEXT)}function v(e){return t(e,a.default.MUXED)}function _(e){return t(e,a.default.IMAGE)}function b(e){return"text/vtt"===e||"application/ttml+xml"===e}function E(e){return e&&e.hasOwnProperty(o.default.ROLE_ASARRAY)?e.Role_asArray:[]}function T(e){return E(e).filter(function(e){return e.value===o.default.MAIN})[0]}function w(){return function(e,t){return e.bandwidth-t.bandwidth}}function S(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function x(e,n,i){var r,a=e&&e.Period_asArray&&V(n)&&e.Period_asArray[n]?e.Period_asArray[n].AdaptationSet_asArray:[],o=void 0,s=[];for(o=0,r=a.length;o<r;o++)t(a[o],i)&&s.push(S(a[o]));return s}function I(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===o.default.DYNAMIC),t}function C(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function A(e){if(e&&e.period&&V(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&V(e.index))return S(t.AdaptationSet_asArray[e.index])}}function M(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function P(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=u.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(o.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function R(e,t){var n=[],i=void 0;if(!e)return n;for(i=0;i<e.length;i++){var r=new p.default;if(r.timescale=1,r.representation=t,!e[i].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");r.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(o.default.TIMESCALE)&&(r.timescale=e[i].timescale),e[i].hasOwnProperty(o.default.VALUE)&&(r.value=e[i].value),n.push(r)}return n}function D(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],i=!1;return n.some(function(n){if(n){var r=new h.default,a=n.__text||n;return L.isRelative(a)&&(i=!0,e.baseUri&&(a=L.resolve(a,e.baseUri))),r.url=a,n.hasOwnProperty(o.default.SERVICE_LOCATION)&&n.serviceLocation.length?r.serviceLocation=n.serviceLocation:r.serviceLocation=a,n.hasOwnProperty(o.default.DVB_PRIORITY)&&(r.dvb_priority=n[o.default.DVB_PRIORITY]),n.hasOwnProperty(o.default.DVB_WEIGHT)&&(r.dvb_weight=n[o.default.DVB_WEIGHT]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)&&(r.availabilityTimeOffset=n[o.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)&&(r.availabilityTimeComplete="false"!==n[o.default.AVAILABILITY_TIME_COMPLETE]),t.push(r),i}}),t}e=e||{};var k=void 0,N=void 0,O=this.context,L=(0,g.default)(O).getInstance(),F=e.mediaController,j=e.timelineConverter,B=e.adapter,U="urn:dvb:dash:profile:dvb-dash:2014",V=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return k={getIsTypeOf:t,getIsAudio:n,getIsVideo:i,getIsText:function(e){return t(e,a.default.TEXT)},getIsMuxed:v,getIsTextTrack:b,getIsFragmentedText:r,getIsImage:_,getIsMain:T,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(o.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:E,getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var i=t&&t.Period_asArray&&V(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:null;return i&&V(e)?i[e]:null},getIndexForAdaptation:function(e,t,n){var i=t&&t.Period_asArray&&V(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],r=i.length;if(e)for(var a=0;a<r;a++)if((0,m.default)(O).getInstance().areEqual(i[a],e))return a;return-1},getAdaptationForId:function(e,t,n){var i,r=t&&t.Period_asArray&&V(n)&&t.Period_asArray[n]?t.Period_asArray[n].AdaptationSet_asArray:[],a=void 0;for(a=0,i=r.length;a<i;a++)if(r[a].hasOwnProperty(o.default.ID)&&r[a].id===e)return r[a];return null},getAdaptationsForType:x,getAdaptationForType:function(e,t,n,i){var r=x(e,t,n);if(!r||0===r.length)return null;if(r.length>1&&i){var a=F.getCurrentTrackFor(n,i),o=B.getAllMediaInfoForType(i,n);if(a)for(var s=0,l=r.length;s<l;s++)if(F.isTracksEqual(a,o[s]))return r[s];for(s=0,l=r.length;s<l;s++)if(T(r[s]))return r[s]}return r[0]},getCodec:function(e,t,n){if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=V(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0],r=i.mimeType+';codecs="'+i.codecs+'"';return n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'),r}return null},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(o.default.CENC_DEFAULT_KID)?e[o.default.CENC_DEFAULT_KID]:null},getContentProtectionData:function(e){return e&&e.hasOwnProperty(o.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:I,getIsDVB:function(e){return function(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}(e,U)},getDuration:function(e){return e&&e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?S(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&V(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],n=A(e),i=void 0,r=void 0;if(e&&e.period&&V(e.period.index)){var a=D(e.period.mpd.manifest);a&&(r=a[0])}if(n&&n.Representation_asArray)for(var l=0,u=n.Representation_asArray.length;l<u;++l){var d=n.Representation_asArray[l],c=new s.default;if(c.index=l,c.adaptation=e,d.hasOwnProperty(o.default.ID)&&(c.id=d.id),d.hasOwnProperty(o.default.CODECS)&&(c.codecs=d.codecs),d.hasOwnProperty(o.default.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=d.codecPrivateData),d.hasOwnProperty(o.default.BANDWITH)&&(c.bandwidth=d.bandwidth),d.hasOwnProperty(o.default.WIDTH)&&(c.width=d.width),d.hasOwnProperty(o.default.HEIGHT)&&(c.height=d.height),d.hasOwnProperty(o.default.SCAN_TYPE)&&(c.scanType=d.scanType),d.hasOwnProperty(o.default.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=d.maxPlayoutRate),d.hasOwnProperty(o.default.SEGMENT_BASE)?(i=d.SegmentBase,c.segmentInfoType=o.default.SEGMENT_BASE):d.hasOwnProperty(o.default.SEGMENT_LIST)?(i=d.SegmentList).hasOwnProperty(o.default.SEGMENT_TIMELINE)?(c.segmentInfoType=o.default.SEGMENT_TIMELINE,c.useCalculatedLiveEdgeTime=M(i.SegmentTimeline)):(c.segmentInfoType=o.default.SEGMENT_LIST,c.useCalculatedLiveEdgeTime=!0):d.hasOwnProperty(o.default.SEGMENT_TEMPLATE)?((i=d.SegmentTemplate).hasOwnProperty(o.default.SEGMENT_TIMELINE)?(c.segmentInfoType=o.default.SEGMENT_TIMELINE,c.useCalculatedLiveEdgeTime=M(i.SegmentTimeline)):c.segmentInfoType=o.default.SEGMENT_TEMPLATE,i.hasOwnProperty(o.default.INITIALIZATION_MINUS)&&(c.initialization=i.initialization.split("$Bandwidth$").join(d.bandwidth).split("$RepresentationID$").join(d.id))):c.segmentInfoType=o.default.BASE_URL,c.essentialProperties=C(d),i){if(i.hasOwnProperty(o.default.INITIALIZATION)){var f=i.Initialization;f.hasOwnProperty(o.default.SOURCE_URL)?c.initialization=f.sourceURL:f.hasOwnProperty(o.default.RANGE)&&(c.range=f.range)}else d.hasOwnProperty(o.default.MIME_TYPE)&&b(d.mimeType)&&(c.range=0);i.hasOwnProperty(o.default.TIMESCALE)&&(c.timescale=i.timescale),i.hasOwnProperty(o.default.DURATION)&&(c.segmentDuration=i.duration/c.timescale),i.hasOwnProperty(o.default.MEDIA)&&(c.media=i.media),i.hasOwnProperty(o.default.START_NUMBER)&&(c.startNumber=i.startNumber),i.hasOwnProperty(o.default.INDEX_RANGE)&&(c.indexRange=i.indexRange),i.hasOwnProperty(o.default.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=i.presentationTimeOffset/c.timescale),i.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=i.availabilityTimeOffset:r&&void 0!==r.availabilityTimeOffset&&(c.availabilityTimeOffset=r.availabilityTimeOffset),i.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete="false"!==i.availabilityTimeComplete:r&&void 0!==r.availabilityTimeComplete&&(c.availabilityTimeComplete=r.availabilityTimeComplete)}c.MSETimeOffset=j.calcMSETimeOffset(c),c.path=[e.period.index,e.index,l],t.push(c)}return t},getAdaptationsForPeriod:function(e){var t=e&&V(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,s=[],u=void 0,d=void 0,c=void 0;if(t&&t.AdaptationSet_asArray)for(c=0;c<t.AdaptationSet_asArray.length;c++)d=t.AdaptationSet_asArray[c],u=new l.default,d.hasOwnProperty(o.default.ID)&&(u.id=d.id),u.index=c,u.period=e,v(d)?u.type=a.default.MUXED:n(d)?u.type=a.default.AUDIO:i(d)?u.type=a.default.VIDEO:r(d)?u.type=a.default.FRAGMENTED_TEXT:_(d)?u.type=a.default.IMAGE:u.type=a.default.TEXT,s.push(u);return s},getRegularPeriods:function(e){var t,n=!!e&&I(e.manifest),i=[],r=null,a=null,s=null,l=null,d=void 0;for(d=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;d<t;d++)(a=e.manifest.Period_asArray[d]).hasOwnProperty(o.default.START)?(l=new u.default).start=a.start:null!==r&&r.hasOwnProperty(o.default.DURATION)&&null!==s?(l=new u.default).start=parseFloat((s.start+s.duration).toFixed(5)):0!==d||n||((l=new u.default).start=0),null!==s&&isNaN(s.duration)&&(null!==l?s.duration=parseFloat((l.start-s.start).toFixed(5)):N.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==l&&(l.id=P(a,d),l.index=d,l.mpd=e,a.hasOwnProperty(o.default.DURATION)&&(l.duration=a.duration),i.push(l),r=a,s=l),a=null,l=null;return 0===i.length?i:(null!==s&&isNaN(s.duration)&&(s.duration=parseFloat((function(e){var t=I(e.mpd.manifest),n=void 0;if(e.mpd.manifest.mediaPresentationDuration)n=e.mpd.manifest.mediaPresentationDuration;else if(e.duration)n=e.duration;else{if(!t)throw new Error("Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.");n=Number.POSITIVE_INFINITY}return n}(s)-s.start).toFixed(5))),i)},getMpd:function(e){var t=new d.default;return e&&(t.manifest=e,e.hasOwnProperty(o.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(o.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(a.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(o.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(o.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,i=n&&e&&V(e.index)?n[e.index].EventStream_asArray:null,r=[],s=void 0,l=void 0;if(i)for(s=0;s<i.length;s++){var u=new p.default;if(u.period=e,u.timescale=1,!i[s].hasOwnProperty(a.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(u.schemeIdUri=i[s].schemeIdUri,i[s].hasOwnProperty(o.default.TIMESCALE)&&(u.timescale=i[s].timescale),i[s].hasOwnProperty(o.default.VALUE)&&(u.value=i[s].value),l=0;l<i[s].Event_asArray.length;l++){var d=new f.default;d.presentationTime=0,d.eventStream=u,i[s].Event_asArray[l].hasOwnProperty(o.default.PRESENTATION_TIME)&&(d.presentationTime=i[s].Event_asArray[l].presentationTime),i[s].Event_asArray[l].hasOwnProperty(o.default.DURATION)&&(d.duration=i[s].Event_asArray[l].duration),i[s].Event_asArray[l].hasOwnProperty(o.default.ID)&&(d.id=i[s].Event_asArray[l].id),d.messageData=i[s].Event_asArray[l].messageData||i[s].Event_asArray[l].__text,r.push(d)}}return r},getEventStreamForAdaptationSet:function(e,t){var n=void 0,i=void 0,r=void 0;return e&&e.Period_asArray&&t&&t.period&&V(t.period.index)&&(i=e.Period_asArray[t.period.index])&&i.AdaptationSet_asArray&&V(t.index)&&(r=i.AdaptationSet_asArray[t.index])&&(n=r.InbandEventStream_asArray),R(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,i=void 0,r=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&V(t.adaptation.period.index)&&(i=e.Period_asArray[t.adaptation.period.index])&&i.AdaptationSet_asArray&&V(t.adaptation.index)&&(r=i.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&V(t.index)&&(a=r.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),R(n,t)},getUTCTimingSources:function(e){var t=I(e),n=!!e&&e.hasOwnProperty(o.default.AVAILABILITY_START_TIME),i=e?e.UTCTiming_asArray:null,r=[];return(t||n)&&i&&i.forEach(function(e){var t=new c.default;e.hasOwnProperty(a.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(o.default.VALUE)&&(t.value=e.value.toString(),r.push(t)))}),r},getBaseURLsFromElement:D,getRepresentationSortFunction:w,getLocation:function(e){if(e&&e.hasOwnProperty(a.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=A(e).Representation_asArray[0],n=void 0;return t.hasOwnProperty(o.default.SEGMENT_LIST)?!(n=t.SegmentList).hasOwnProperty(o.default.SEGMENT_TIMELINE)||M(n.SegmentTimeline):!(!t.hasOwnProperty(o.default.SEGMENT_TEMPLATE)||(n=t.SegmentTemplate,!n.hasOwnProperty(o.default.SEGMENT_TIMELINE)))&&M(n.SegmentTimeline)}},N=(0,y.default)(O).getInstance().getLogger(k),k}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(58)),s=i(e(86)),l=i(e(80)),u=i(e(85)),d=i(e(84)),c=i(e(88)),f=i(e(82)),h=i(e(81)),p=i(e(83)),m=i(e(205)),g=i(e(208)),v=i(e(48)),y=i(e(46));r.__dashjs_factory_name="DashManifestModel",n.default=v.default.getSingletonFactory(r),t.exports=n.default},{100:100,205:205,208:208,46:46,48:48,58:58,80:80,81:81,82:82,83:83,84:84,85:85,86:86,88:88}],61:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=void 0,n=void 0,i=void 0,r=void 0,a=void 0;return t={parse:function(e){var t,i=window.performance.now();if(!(t=r.xml_str2json(e)))throw new Error("parsing the manifest failed");var o=window.performance.now();a.run(t);var s=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(o-i).toPrecision(3)+"ms, objectiron: "+(s-o).toPrecision(3)+"ms, total: "+((s-i)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return i},getIron:function(){return a}},n=(0,o.default)(e).getInstance().getLogger(t),i=[new d.default,new c.default,new f.default,new u.default],r=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:i}),a=(0,s.default)(e).create({adaptationset:new h.default,period:new p.default}),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s=i(e(71)),l=i(e(3)),u=i(e(70)),d=i(e(68)),c=i(e(67)),f=i(e(69)),h=i(e(64)),p=i(e(65));r.__dashjs_factory_name="DashParser",n.default=a.default.getClassFactory(r),t.exports=n.default},{3:3,46:46,48:48,64:64,65:65,67:67,68:68,69:69,70:70,71:71}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._name=t,this._merge=function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}(t)}return i(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();n.default=r,t.exports=n.default},{}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(62)),a=function(){function e(t,n,i){var a=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._name=t||"",this._properties=[],this._children=i||[],Array.isArray(n)&&n.forEach(function(e){a._properties.push(new r.default(e))})}return i(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();n.default=a,t.exports=n.default},{62:62}],64:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},a=i(e(63)),o=i(e(58)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e,[new a.default(o.default.SUB_REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{58:58,63:63}],65:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},a=i(e(63)),o=i(e(58)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new a.default(o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{58:58,63:63}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._test=t,this._converter=n}return i(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();n.default=r,t.exports=n.default},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(66)),a=60,o=60,s=1e3,l=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,u=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return l.test(e.value)},function(e){var t=l.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*s||0),t[9]&&t[10]){var i=parseInt(t[9],10)*o+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*i*a*s}return new Date(n)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=u,t.exports=n.default},{66:66}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},a=i(e(66)),o=i(e(100)),s=i(e(58)),l=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,u=31536e3,d=2592e3,c=86400,f=3600,h=60,p=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,o.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,o.default.START_TIME,s.default.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return l.test(e.value);return!1},function(e){var t=l.exec(e),n=parseFloat(t[2]||0)*u+parseFloat(t[4]||0)*d+parseFloat(t[6]||0)*c+parseFloat(t[8]||0)*f+parseFloat(t[10]||0)*h+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=p,t.exports=n.default},{100:100,58:58,66:66}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(66)),a=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return a.test(e.value)},function(e){return parseFloat(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=o,t.exports=n.default},{66:66}],70:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},o=i(e(66)),s=i(e(58)),l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,i=(r(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),r(n,s.default.PERIOD,[s.default.ID]),r(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),r(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),r(n,s.default.INITIALIZATION,[s.default.RANGE]),r(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),r(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),r(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),r(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),r(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),r(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),r(n,s.default.EVENT_STREAM,[s.default.VALUE]),r(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),r(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),r(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),r(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),r(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),r(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),r(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),r(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),r(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),r(n,s.default.RATING,[s.default.VALUE,s.default.ID]),r(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),r(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),r(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),r(n,s.default.SUBSET,[s.default.ID]),r(n,s.default.METRICS,[s.default.METRICS_MINUS]),r(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(i.hasOwnProperty(t)){var a=i[t];return void 0!==a&&a.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();n.default=l,t.exports=n.default},{58:58,66:66}],71:[function(e,t,n){"use strict";function i(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,i){for(var r=0,a=e.length;r<a;++r){var o=e[r];if(n[o.name])if(i[o.name]){if(o.merge){var s=n[o.name],l=i[o.name];"object"==typeof s&&"object"==typeof l?t(s,l):i[o.name]=s+l}}else i[o.name]=n[o.name]}}function i(e,t){for(var r=0,a=e.children.length;r<a;++r){var o=e.children[r],s=t[o.name+"_asArray"];if(s)for(var l=0,u=s.length;l<u;++l){var d=s[l];n(e.properties,t,d),i(o,d)}}}return{run:function(t){if(null===t||"object"!=typeof t)return t;if("period"in e)for(var n=e.period,r=t.Period_asArray,a=0,o=r.length;a<o;++a){var s=r[a];if(i(n,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var u=e.adaptationset,d=0,c=l.length;d<c;++d)i(u,l[d])}}return t}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="ObjectIron";var a=r.default.getClassFactory(i);n.default=a,t.exports=n.default},{48:48}],72:[function(e,t,n){"use strict";function i(){var e=void 0;return{getSamplesInfo:function(t){if(!e)throw new Error("boxParser is undefined");if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var n,i,r=e.parse(t),a=r.getBoxes("moof"),o=r.getBoxes("mfhd"),s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0;i=r.getBoxes("moof").length,n=o[o.length-1].sequence_number,l=0,c=[];var E=-1,T=-1;for(g=0;g<a.length;g++){var w=a[g],S=w.getChildBoxes("traf");for(p=0;p<S.length;p++){var x=S[p],I=x.getChildBox("tfhd"),C=x.getChildBox("tfdt");d=C.baseMediaDecodeTime;var A=x.getChildBoxes("trun"),M=x.getChildBoxes("subs");for(m=0;m<A.length;m++){var P=A[m];for(l=P.sample_count,_=(I.base_data_offset||0)+(P.data_offset||0),h=0;h<l;h++){s=void 0!==(f=P.samples[h]).sample_duration?f.sample_duration:I.default_sample_duration,u=void 0!==f.sample_size?f.sample_size:I.default_sample_size;var R={dts:d,cts:d+(void 0!==f.sample_composition_time_offset?f.sample_composition_time_offset:0),duration:s,offset:w.offset+_,size:u,subSizes:[u]};if(M)for(v=0;v<M.length;v++){var D=M[v];if(E<D.entry_count&&h>T&&(E++,T+=D.entries[E].sample_delta),h==T){R.subSizes=[];var k=D.entries[E];for(y=0;y<k.subsample_count;y++)R.subSizes.push(k.subsamples[y].subsample_size)}}c.push(R),_+=u,d+=s}}b=d-C.baseMediaDecodeTime}}return{sampleList:c,lastSequenceNumber:n,totalDuration:b,numSequences:i}},getMediaTimescaleFromMoov:function(t){if(!e)throw new Error("boxParser is undefined");var n=e.parse(t),i=n?n.getBox("mdhd"):void 0;return i?i.timescale:NaN},setConfig:function(t){t&&t.boxParser&&(e=t.boxParser)}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="FragmentedTextBoxParser",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],73:[function(e,t,n){"use strict";function i(e,t){var n=(e=e||{}).timelineConverter;return{getSegments:function(e,i,r,o){var s,l,u,d,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,f=c.SegmentURL_asArray.length,h=[],p=void 0,m=void 0,g=void 0;for(d=e.startNumber,s=(0,a.decideSegmentListRangeForTemplate)(n,t,e,i,r,o),l=Math.max(s.start,0),u=Math.min(s.end,c.SegmentURL_asArray.length-1),p=l;p<=u;p++)g=c.SegmentURL_asArray[p],(m=(0,a.getIndexBasedSegment)(n,t,e,p)).replacementTime=(d+p-1)*e.segmentDuration,m.media=g.media?g.media:"",m.mediaRange=g.mediaRange,m.index=g.index,m.indexRange=g.indexRange,h.push(m),m=null;return e.availableSegmentsNumber=f,h}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48)),a=e(76);i.__dashjs_factory_name="ListSegmentsGetter";var o=r.default.getClassFactory(i);n.default=o,t.exports=n.default},{48:48,76:76}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"round10",value:function(e,t){return function(e,t,n){return void 0===n||0==+n?Math[e](t):(n=+n,null===(t=+t)||isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}("round",e,t)}}]),e}();n.default=r,t.exports=n.default},{}],75:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n,i=this.context,r=void 0,o=void 0,d=void 0;return n={getSegments:function(e,t,n,i,s){var l=void 0,u=e.segmentInfoType;u!==a.default.SEGMENT_BASE&&u!==a.default.BASE_URL&&function(e,t){var n=e.segments,i=!1,r=void 0,a=void 0;return n&&0!==n.length?(a=n[0].availabilityIdx,r=n[n.length-1].availabilityIdx,i=t<a||t>r):i=!0,i}(e,n)?(u===a.default.SEGMENT_TIMELINE?l=r.getSegments(e,t,n,s):u===a.default.SEGMENT_TEMPLATE?l=o.getSegments(e,t,n,s):u===a.default.SEGMENT_LIST&&(l=d.getSegments(e,t,n,s)),i&&i(e,l)):l=e.segments}},r=(0,s.default)(i).create(e,t),o=(0,l.default)(i).create(e,t),d=(0,u.default)(i).create(e,t),n}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(58)),o=i(e(48)),s=i(e(79)),l=i(e(77)),u=i(e(73));r.__dashjs_factory_name="SegmentsGetter";var d=o.default.getClassFactory(r);n.default=d,t.exports=n.default},{48:48,58:58,73:73,77:77,79:79}],76:[function(e,t,n){"use strict";function i(e,t){for(;e.length<t;)e="0"+e;return e}function r(e,t){return e.representation.startNumber+t}function a(e,t,n){var r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=t.length,c="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",r+d))<0)return e;if((o=e.indexOf("%0",r+d))>r&&o<a)switch(s=e.charAt(a-1),l=parseInt(e.substring(o+c,a-1),10),s){case"d":case"i":case"u":u=i(n.toString(),l);break;case"x":u=i(n.toString(16),l);break;case"X":u=i(n.toString(16),l).toUpperCase();break;case"o":u=i(n.toString(8),l);break;default:return e}else u=n;e=e.substring(0,r)+u+e.substring(a+1)}}function o(e,t){if(!t||!t.segments)return null;var n=t.segments.length,i=void 0,r=void 0;if(e<n&&(i=t.segments[e])&&i.availabilityIdx===e)return i;for(r=0;r<n;r++)if((i=t.segments[r])&&i.availabilityIdx===e)return i;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=a,n.getIndexBasedSegment=function(e,t,n,i){var a,o,l=void 0,u=void 0;return u=n.segmentDuration,isNaN(u)&&(u=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+i*u).toFixed(5)),o=parseFloat((a+u).toFixed(5)),(l=new s.default).representation=n,l.duration=u,l.presentationStartTime=a,l.mediaStartTime=e.calcMediaTimeFromPresentationTime(l.presentationStartTime,n),l.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(l.presentationStartTime,n.adaptation.period.mpd,t),l.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(o,n.adaptation.period.mpd,t),l.wallStartTime=e.calcWallTimeForSegment(l,t),l.replacementNumber=r(l,i),l.availabilityIdx=i,l},n.getTimeBasedSegment=function(e,t,n,i,o,l,u,d,c,f){var h,p,m=i/l,g=Math.min(o/l,n.adaptation.period.mpd.maxSegmentDuration),v=void 0;return p=(h=e.calcPresentationTimeFromMediaTime(m,n))+g,(v=new s.default).representation=n,v.duration=g,v.mediaStartTime=m,v.presentationStartTime=h,v.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,v.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(p,n.adaptation.period.mpd,t),v.wallStartTime=e.calcWallTimeForSegment(v,t),v.replacementTime=f||i,v.replacementNumber=r(v,c),u=a(u,"Number",v.replacementNumber),u=a(u,"Time",v.replacementTime),v.media=u,v.mediaRange=d,v.availabilityIdx=c,v},n.getSegmentByIndex=o,n.decideSegmentListRangeForTemplate=function(e,t,n,i,r,a){var s=n.segmentDuration,l=n.adaptation.period.mpd.manifest.minBufferTime,u=n.segmentAvailabilityRange,d={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.end:NaN)},c=n.segments,f=2*s,h=a||Math.max(2*l,10*s),p=NaN,m=null,g=void 0;return d.start=Math.max(d.start,0),t&&!e.isTimeSyncCompleted()?{start:g=Math.floor(d.start/s),end:Math.floor(d.end/s)}:(p=c&&c.length>0?(m=o(r,n))?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,m.presentationStartTime):r>0?r*s:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,i):r>0?r*s:t?d.end:d.start,{start:g=Math.floor(Math.max(p-f,d.start)/s),end:Math.floor(Math.min(g+h/s,d.end/s))})};var s=function(e){return e&&e.__esModule?e:{default:e}}(e(87))},{87:87}],77:[function(e,t,n){"use strict";function i(e,t){var n=e.timelineConverter;return{getSegments:function(e,i,r,o){var s,l,u,d,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,f=e.segmentDuration,h=e.segmentAvailabilityRange,p=[],m=null,g=null,v=void 0;for(d=e.startNumber,l=(s=isNaN(f)&&!t?{start:d,end:d}:(0,a.decideSegmentListRangeForTemplate)(n,t,e,i,r,o)).start,u=s.end,v=l;v<=u;v++)(g=(0,a.getIndexBasedSegment)(n,t,e,v)).replacementTime=(d+v-1)*e.segmentDuration,m=c.media,m=(0,a.replaceTokenForTemplate)(m,"Number",g.replacementNumber),m=(0,a.replaceTokenForTemplate)(m,"Time",g.replacementTime),g.media=m,p.push(g),g=null;return isNaN(f)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((h.end-h.start)/f),p}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48)),a=e(76);i.__dashjs_factory_name="TemplateSegmentsGetter";var o=r.default.getClassFactory(i);n.default=o,t.exports=n.default},{48:48,76:76}],78:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){u=e}function t(e,t,n,i){return i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-u)):t.availabilityStartTime}function n(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*u)/1e3}function i(t){d||void 0!==t.offset&&(e(t.offset/1e3),d=!0)}function r(){u=0,d=!1,c=NaN}var s=this.context,l=(0,a.default)(s).getInstance(),u=void 0,d=void 0,c=void 0;return{initialize:function(){r(),l.on(o.default.TIME_SYNCHRONIZATION_COMPLETED,i,this)},isTimeSyncCompleted:function(){return d},setTimeSyncCompleted:function(e){d=e},getClientTimeOffset:function(){return u},setClientTimeOffset:e,getExpectedLiveEdge:function(){return c},setExpectedLiveEdge:function(e){c=e},calcAvailabilityStartTimeFromPresentationTime:function(e,n,i){return t.call(this,e,n,i)},calcAvailabilityEndTimeFromPresentationTime:function(e,n,i){return t.call(this,e,n,i,!0)},calcPresentationTimeFromWallTime:n,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var i=e.adaptation.period,r={start:i.start,end:i.start+i.duration};if(!t)return r;if(!d&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var a=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=n(new Date,i),s=i.start+i.duration;r.start=Math.max(o-i.mpd.timeShiftBufferDepth,i.start);var l=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<a?a-e.availabilityTimeOffset:a;return r.end=o>=s&&o-l<s?s:o-l,r},calcWallTimeForSegment:function(e,t){var n=void 0,i=void 0,r=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,i=e.presentationStartTime+n,r=new Date(e.availabilityStartTime.getTime()+1e3*i)),r},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){l.off(o.default.TIME_SYNCHRONIZATION_COMPLETED,i,this),r()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48));r.__dashjs_factory_name="TimelineConverter",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{47:47,48:48,51:51}],79:[function(e,t,n){"use strict";function i(e,t){var n=(e=e||{}).timelineConverter;return{getSegments:function(e,i,r,o){if(function(){if(!(n&&n.hasOwnProperty("calcMediaTimeFromPresentationTime")&&n.hasOwnProperty("calcSegmentAvailabilityRange")&&n.hasOwnProperty("calcMediaTimeFromPresentationTime")))throw new Error("Missing config parameter(s)")}(),!e)throw new Error("no representation");void 0===i&&(i=null);var s,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=l.SegmentTimeline,d=l.SegmentURL_asArray,c=e.availableSegmentsNumber>0;s=o||(r>-1||null!==i?10:1/0);var f,h,p,m=0,g=0,v=-1,y=[],_=null,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=function(i,r){var o=l.media,s=i.mediaRange;return d&&(o=d[r].media||"",s=d[r].mediaRange),(0,a.getTimeBasedSegment)(n,t,e,m,i.d,C,o,s,v,i.tManifest)};for(C=e.timescale,f=u.S_asArray,p=r,null!==i&&(_=n.calcMediaTimeFromPresentationTime(i,e)),E=0,h=f.length;E<h;E++){if(w=0,(b=f[E]).hasOwnProperty("r")&&(w=b.r),b.hasOwnProperty("t")&&(g=(m=b.t)/C),w<0){if((x=f[E+1])&&x.hasOwnProperty("t"))S=x.t/C;else{var M=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end;S=n.calcMediaTimeFromPresentationTime(M,e),e.segmentDuration=b.d/C}w=Math.ceil((S-g)/(b.d/C))-1}if(I){if(c)break;v+=w+1}else for(T=0;T<=w;T++)if(v++,y.length>s){if(I=!0,c)break}else null!==_?g>=_-b.d/C*1.5&&y.push(A(b,v)):v>=p&&y.push(A(b,v)),g=(m+=b.d)/C}return c||(e.availableSegmentsNumber=v+1),y}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48)),a=e(76);i.__dashjs_factory_name="TimelineSegmentsGetter";var o=r.default.getClassFactory(i);n.default=o,t.exports=n.default},{48:48,76:76}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e(58)),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==r.default.BASE_URL&&e.segmentInfoType!==r.default.SEGMENT_BASE&&!e.indexRange}}]),e}();n.default=a,t.exports=n.default},{58:58}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],89:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,n=(0,l.default)(t).getInstance(),i=void 0,r=void 0;return i={checkForExistence:function(e){var t=function(t){n.trigger(u.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var i=new o.default(e.url);r.load({request:i,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var t=function(t,r){n.trigger(u.default.LOADING_COMPLETED,{request:e,response:t||null,error:r||null,sender:i})};e?r.load({request:e,progress:function(t){n.trigger(u.default.LOADING_PROGRESS,{request:e}),t.data&&n.trigger(u.default.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:i})},success:function(e){t(e)},error:function(e,n,i){t(void 0,new s.default(c,i,n))},abort:function(e){e&&n.trigger(u.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:i})}}):t(void 0,new s.default(f,h))},abort:function(){r&&r.abort()},reset:function(){r&&(r.abort(),r=null)}},r=(0,a.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()}),i}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(147)),o=i(e(216)),s=i(e(213)),l=i(e(47)),u=i(e(51)),d=i(e(48)),c=1,f=2,h="request is null";r.__dashjs_factory_name="FragmentLoader";var p=d.default.getClassFactory(r);p.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=c,p.FRAGMENT_LOADER_ERROR_NULL_REQUEST=f,d.default.updateClassFactory(r.__dashjs_factory_name,p),n.default=p,t.exports=n.default},{147:147,213:213,216:216,47:47,48:48,51:51}],90:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function n(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(x&&(t=x.createMssParser(),x.registerEvents()),t):e.indexOf("MPD")>-1?(0,m.default)(i).create():t}e=e||{};var i=this.context,r=(0,f.default)(i).getInstance(),p=(0,l.default)(i).getInstance(),b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=e.mssHandler,I=e.errHandler;return b={load:function(e){var t=new u.default(e,c.HTTPRequest.MPD_TYPE);T.load({request:t,success:function(t,i,o){if(w){var s=void 0,l=void 0,u=void 0;if(o&&o!==e?(l=p.parseBaseUrl(o),s=o):(p.isRelative(e)&&(e=p.resolve(e,window.location.href)),l=p.parseBaseUrl(e)),null===S&&(S=n(t)),null===S)return void r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(v,"Failed detecting manifest type or manifest type unsupported : "+e)});w.setMatchers(S.getMatchers()),w.setIron(S.getIron());try{u=S.parse(t)}catch(t){return void r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(v,"Failed parsing manifest : "+e)})}u?(u.url=s||e,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(a.default.LOCATION)&&(l=p.parseBaseUrl(u.Location_asArray[0]),E.debug("BaseURI set by Location to: "+l)),u.baseUri=l,u.loadedTime=new Date,w.resolveManifestOnLoad(u)):r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(v,_)})}},error:function(t,n,i){r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(y,"Failed loading manifest: "+e+", "+i)})}})},reset:function(){r.off(h.default.XLINK_READY,t,b),w&&(w.reset(),w=null),T&&(T.abort(),T=null),x&&x.reset()}},E=(0,g.default)(i).getInstance().getLogger(b),r.on(h.default.XLINK_READY,t,b),T=(0,s.default)(i).create({errHandler:I,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),w=(0,o.default)(i).create({errHandler:I,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),S=null,b}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(115)),s=i(e(147)),l=i(e(208)),u=i(e(224)),d=i(e(213)),c=e(233),f=i(e(47)),h=i(e(51)),p=i(e(48)),m=i(e(61)),g=i(e(46)),v=1,y=2,_="parsing failed";r.__dashjs_factory_name="ManifestLoader";var b=p.default.getClassFactory(r);b.MANIFEST_LOADER_ERROR_PARSING_FAILURE=v,b.MANIFEST_LOADER_ERROR_LOADING_FAILURE=y,p.default.updateClassFactory(r.__dashjs_factory_name,b),n.default=b,t.exports=n.default},{100:100,115:115,147:147,208:208,213:213,224:224,233:233,46:46,47:47,48:48,51:51,61:61}],91:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){v=NaN,b=!1,_=!0,t()}function t(){null!==y&&(clearInterval(y),y=null)}function n(e){t(),isNaN(e)&&!isNaN(v)&&(e=1e3*v),isNaN(e)||(g.debug("Refresh manifest in "+e+" milliseconds."),y=setTimeout(s,e))}function i(){b=!0;var e=T.getValue(),t=e.url,n=w.getLocation(e);n&&(t=n),E.load(t)}function r(e){T.setValue(e);var t=new Date,i=(t.getTime()-e.loadedTime.getTime())/1e3;1e3*(v=w.getManifestUpdatePeriod(e,i))>2147483647&&(v=2147483.647),p.trigger(o.default.MANIFEST_UPDATED,{manifest:e}),g.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),_||n()}function s(){if(!_||S.getScheduleWhilePaused())return b?void n(S.getManifestUpdateRetryInterval()):void i()}function u(e){e.error?x.manifestError(e.error.message,e.error.code):r(e.manifest)}function d(){_=!1,n()}function c(){_=!0,t()}function f(){b=!1}var h=this.context,p=(0,a.default)(h).getInstance(),m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0;return m={initialize:function(){e(),p.on(o.default.STREAMS_COMPOSED,f,this),p.on(o.default.PLAYBACK_STARTED,d,this),p.on(o.default.PLAYBACK_PAUSED,c,this),p.on(o.default.INTERNAL_MANIFEST_LOADED,u,this)},setManifest:function(e){r(e)},refreshManifest:i,setConfig:function(e){e&&(e.manifestModel&&(T=e.manifestModel),e.dashManifestModel&&(w=e.dashManifestModel),e.mediaPlayerModel&&(S=e.mediaPlayerModel),e.manifestLoader&&(E=e.manifestLoader),e.errHandler&&(x=e.errHandler))},reset:function(){p.off(o.default.PLAYBACK_STARTED,d,this),p.off(o.default.PLAYBACK_PAUSED,c,this),p.off(o.default.STREAMS_COMPOSED,f,this),p.off(o.default.INTERNAL_MANIFEST_LOADED,u,this),e()}},g=(0,l.default)(h).getInstance().getLogger(m),m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48)),l=i(e(46));r.__dashjs_factory_name="ManifestUpdater",n.default=s.default.getClassFactory(r),t.exports=n.default},{46:46,47:47,48:48,51:51}],92:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){return!!pe&&!!Le.getElement()}function t(){return(0,P.getVersionString)()}function n(){if(!ye)throw ie;return De.isPaused()}function i(e){var t=J();if(!t)return 0;var n=De.getLiveDelay(),i=t.range.start+e;return i>t.range.end-n&&(i=t.range.end-n),i}function r(e){if(!ye)throw ie;var t=G().currentTime;if(void 0!==e)t=Re.getTimeRelativeToStreamId(t,e);else if(De.getIsDynamic()){var n=J();t=null===n?0:j()-(n.range.end-n.time)}return t}function j(){if(!ye)throw ie;var e=G().duration;if(De.getIsDynamic()){var t,n=J();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function B(e){_e=e}function U(e,t){V(e,t);var n=new s.default;n.schemeIdUri=e,n.value=t,Ae.getUTCTimingSources().push(n)}function V(e,t){var n=Ae.getUTCTimingSources();n.forEach(function(i,r){i.schemeIdUri===e&&i.value===t&&n.splice(r,1)})}function q(){U(b.default.DEFAULT_UTC_TIMING_SOURCE.scheme,b.default.DEFAULT_UTC_TIMING_SOURCE.value)}function H(){return ke}function z(e){return Ce.getReadOnlyMetricsFor(e)}function G(){if(!Le.getElement())throw re;return Le.getElement()}function Y(e){if(!ge)throw oe;Le.setElement(e),e&&(Q(),function(){if(!Se){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(ue).create();Se=t.createMetricsReporting({debug:ce,eventBus:de,mediaElement:G(),dashManifestModel:Ne,metricsModel:Ce,events:C.default,constants:a.default,metricsConstants:o.default})}}}(),function(){if(!xe){var e=dashjs.MssHandler;"function"==typeof e&&(xe=e(ue).create({eventBus:de,mediaPlayerModel:Ae,metricsModel:Ce,playbackController:De,protectionController:we,baseURLController:(0,c.default)(ue).getInstance(),errHandler:Me,events:C.default,constants:a.default,debug:ce,initSegmentType:O.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:L.default,ISOBoxer:F.default}))}}(),Re&&Re.switchToVideoElement()),ye&&W(),te()}function $(e){if(!ve)throw ne;var t=Re.getActiveStreamInfo();return t?Te.getTracksFor(e,t):[]}function K(t){if(!ge)throw oe;"string"==typeof t&&(0,y.default)(ue).getInstance().initialize(t),pe=t,(ve||ye)&&W(),e()&&te()}function W(){ye=!1,ve=!1,Ie.reset(),Re.reset(),De.reset(),be.reset(),Te.reset(),Fe.reset(),we&&(Ae.getKeepProtectionMediaKeys()?we.stop():(we.reset(),we=null,Q()))}function X(){return(0,f.default)(ue).create({errHandler:Me,metricsModel:Ce,mediaPlayerModel:Ae,requestModifier:(0,g.default)(ue).getInstance(),mssHandler:xe})}function Q(){if(we)return we;var e=dashjs.Protection;if("function"==typeof e){var t=e(ue).create();return C.default.extend(e.events),A.default.extend(e.events,{publicOnly:!0}),Pe||(Pe=(0,p.default)(ue).getInstance()),we=t.createProtectionSystem({debug:ce,errHandler:Me,videoModel:Le,capabilities:Pe,eventBus:de,events:C.default,BASE64:L.default,constants:a.default})}return null}function J(){var e=Ce.getReadOnlyMetricsFor(a.default.VIDEO)||Ce.getReadOnlyMetricsFor(a.default.AUDIO);return ke.getCurrentDVRInfo(e)}function Z(e){var t=J();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ee(){if(!ve)throw ne;var e=Re.getActiveStreamInfo();return e?Re.getStreamById(e.id):null}function te(){var t;!ve&&pe&&(ve=!0,he.info("Streaming Initialized"),t=X(),Re||(Re=(0,u.default)(ue).getInstance()),Te.setConfig({errHandler:Me,domStorage:je}),Re.setConfig({capabilities:Pe,manifestLoader:t,manifestModel:Oe,dashManifestModel:Ne,mediaPlayerModel:Ae,protectionController:we,adapter:Ie,metricsModel:Ce,dashMetrics:ke,errHandler:Me,timelineConverter:Ee,videoModel:Le,playbackController:De,domStorage:je,abrController:be,mediaController:Te,textController:Fe}),De.setConfig({streamController:Re,metricsModel:Ce,dashMetrics:ke,manifestModel:Oe,mediaPlayerModel:Ae,dashManifestModel:Ne,adapter:Ie,videoModel:Le}),be.setConfig({streamController:Re,domStorage:je,mediaPlayerModel:Ae,metricsModel:Ce,dashMetrics:ke,dashManifestModel:Ne,manifestModel:Oe,videoModel:Le,adapter:Ie}),be.createAbrRulesCollection(),Fe.setConfig({errHandler:Me,manifestModel:Oe,dashManifestModel:Ne,mediaController:Te,streamController:Re,videoModel:Le}),Re.initialize(_e,me),"string"==typeof pe?Re.load(pe):Re.loadWithManifest(pe)),!ye&&e()&&(ye=!0,he.info("Playback Initialized"))}var ne="You must first call initialize() and set a source before calling this method",ie="You must first call initialize() and set a valid source and view before calling this method",re="You must first call attachView() to set the video element before calling this method",ae="You must first call attachSource() with a valid source before calling this method",oe="MediaPlayer not initialized!",se="MediaPlayer Invalid Arguments!",le="Playback catchup rate invalid argument! Use a number from 0 to 0.2",ue=this.context,de=(0,I.default)(ue).getInstance(),ce=(0,x.default)(ue).getInstance(),fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,be=void 0,Ee=void 0,Te=void 0,we=void 0,Se=void 0,xe=void 0,Ie=void 0,Ce=void 0,Ae=void 0,Me=void 0,Pe=void 0,Re=void 0,De=void 0,ke=void 0,Ne=void 0,Oe=void 0,Le=void 0,Fe=void 0,je=void 0;return fe={initialize:function(e,n,i){Pe||(Pe=(0,p.default)(ue).getInstance()),Me=(0,h.default)(ue).getInstance(),Pe.supportsMediaSource()?ge||(ge=!0,Ee=(0,N.default)(ue).getInstance(),be||(be=(0,T.default)(ue).getInstance()),De||(De=(0,l.default)(ue).getInstance()),Te||(Te=(0,d.default)(ue).getInstance()),Ie=(0,R.default)(ue).getInstance(),Ne=(0,D.default)(ue).getInstance({mediaController:Te,timelineConverter:Ee,adapter:Ie}),Oe=(0,_.default)(ue).getInstance(),ke=(0,k.default)(ue).getInstance({manifestModel:Oe,dashManifestModel:Ne}),Ce=(0,E.default)(ue).getInstance(),Fe=(0,v.default)(ue).getInstance(),je=(0,S.default)(ue).getInstance({mediaPlayerModel:Ae}),Ie.setConfig({dashManifestModel:Ne}),Ce.setConfig({adapter:Ie}),q(),B(void 0===i||i),e&&Y(e),n&&K(n),he.info("[dash.js "+t()+"] MediaPlayer has been initialized")):Me.capabilityError("mediasource")},setConfig:function(e){e&&(e.capabilities&&(Pe=e.capabilities),e.streamController&&(Re=e.streamController),e.playbackController&&(De=e.playbackController),e.mediaPlayerModel&&(Ae=e.mediaPlayerModel),e.abrController&&(be=e.abrController),e.mediaController&&(Te=e.mediaController))},on:function(e,t,n){de.on(e,t,n)},off:function(e,t,n){de.off(e,t,n)},extend:function(e,t,n){M.default.extend(e,t,n,ue)},attachView:Y,attachSource:K,isReady:e,preload:function(){if(Le.getElement()||ve)return!1;if(!pe)throw ae;te()},play:function(){if(!ye)throw ie;(!_e||n()&&ye)&&De.play()},isPaused:n,pause:function(){if(!ye)throw ie;De.pause()},isSeeking:function(){if(!ye)throw ie;return De.isSeeking()},isDynamic:function(){if(!ye)throw ie;return De.getIsDynamic()},seek:function(e){if(!ye)throw ie;if("number"!=typeof e||isNaN(e))throw se;var t=De.getIsDynamic()?i(e):e;De.seek(t)},setPlaybackRate:function(e){if(!Le.getElement())throw re;G().playbackRate=e},getPlaybackRate:function(){if(!Le.getElement())throw re;return G().playbackRate},setCatchUpPlaybackRate:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>.2)throw le;De.setCatchUpPlaybackRate(e)},getCatchUpPlaybackRate:function(){return De.getCatchUpPlaybackRate()},setMute:function(e){if(!Le.getElement())throw re;G().muted=e},isMuted:function(){if(!Le.getElement())throw re;return G().muted},setVolume:function(e){if(!Le.getElement())throw re;G().volume=e},getVolume:function(){if(!Le.getElement())throw re;return G().volume},time:r,duration:j,timeAsUTC:function(){if(!ye)throw ie;return r()<0?NaN:Z(r())},durationAsUTC:function(){if(!ye)throw ie;return Z(j())},getActiveStream:ee,getDVRWindowSize:function(){var e=J();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:i,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(i<10?"0"+i.toString():i.toString())},formatUTC:function(e,t,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=new Date(1e3*e),a=r.toLocaleDateString(t),o=r.toLocaleTimeString(t,{hour12:n});return i?o+" "+a:o},getVersion:t,getDebug:function(){return ce},getBufferLength:function(e){var t,n=[a.default.VIDEO,a.default.AUDIO,a.default.FRAGMENTED_TEXT];return e?-1!==n.indexOf(e)?(t=H().getCurrentBufferLevel(z(e)))||NaN:(he.warn("getBufferLength requested for invalid type"),NaN):(t=n.map(function(e){return $(e).length>0?H().getCurrentBufferLevel(z(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getVideoContainer:function(){return Le?Le.getVideoContainer():null},getTTMLRenderingDiv:function(){return Le?Le.getTTMLRenderingDiv():null},getVideoElement:G,getSource:function(){if(!pe)throw ae;return pe},setLiveDelayFragmentCount:function(e){Ae.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){Ae.setLiveDelay(e)},getLiveDelay:function(){return Ae.getLiveDelay()},getCurrentLiveLatency:function(){if(!ge)throw oe;return ye?De.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){Ae.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){Ae.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){Ae.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){be.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return be.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(e){if(!ve)throw ne;return be.getTopBitrateInfoFor(e)},setMinAllowedBitrateFor:function(e,t){be.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return be.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){be.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return be.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:B,getAutoPlay:function(){return _e},setScheduleWhilePaused:function(e){Ae.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return Ae.getScheduleWhilePaused()},getDashMetrics:H,getMetricsFor:z,getQualityFor:function(e){if(!ve)throw ne;if(e===a.default.IMAGE){var t=ee();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return be.getQualityFor(e,Re.getActiveStreamInfo())},setQualityFor:function(e,t){if(!ve)throw ne;if(e===a.default.IMAGE){var n=ee();if(!n)return;var i=n.getThumbnailController();i&&i.setTrackByIndex(t)}be.setPlaybackQuality(e,Re.getActiveStreamInfo(),t)},updatePortalSize:function(){be.setElementSize(),be.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return be.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){be.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return be.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){be.setUsePixelRatioInLimitBitrateByPortal(e)},setTextDefaultLanguage:function(e){void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.getTextDefaultEnabled()},enableText:function(e){void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.enableText(e)},enableForcedTextStreaming:function(e){void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.isTextEnabled()},setTextTrack:function(e){if(!ye)throw ie;void 0===Fe&&(Fe=(0,v.default)(ue).getInstance()),Fe.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!ve)throw ne;var t=ee();return t?t.getBitrateListFor(e):[]},setInitialBitrateFor:function(e,t){be.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(e){if(!ve)throw ne;return be.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(e,t){be.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return be.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(e){if(!ve)throw ne;return Ie.getStreamsInfo(e)},getTracksFor:$,getTracksForTypeFromManifest:function(e,t,n){if(!ve)throw ne;return(n=n||Ie.getStreamsInfo(t,1)[0])?Ie.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!ve)throw ne;var t=Re.getActiveStreamInfo();return t?Te.getCurrentTrackFor(e,t):null},setInitialMediaSettingsFor:function(e,t){if(!ge)throw oe;Te.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!ge)throw oe;return Te.getInitialSettings(e)},setCurrentTrack:function(e){if(!ve)throw ne;Te.setTrack(e)},getTrackSwitchModeFor:function(e){if(!ge)throw oe;return Te.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!ge)throw oe;Te.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!ge)throw oe;Te.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!ge)throw oe;return Te.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){Ae.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return Ae.getFastSwitchEnabled()},setMovingAverageMethod:function(e){e===a.default.MOVING_AVERAGE_SLIDING_WINDOW||e===a.default.MOVING_AVERAGE_EWMA?Ae.setMovingAverageMethod(e):he.warn("Warning: Ignoring setMovingAverageMethod("+e+") - unknown value.")},getMovingAverageMethod:function(){return Ae.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return be.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){be.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){e===a.default.ABR_STRATEGY_DYNAMIC||e===a.default.ABR_STRATEGY_BOLA||e===a.default.ABR_STRATEGY_THROUGHPUT?Ae.setABRStrategy(e):he.warn("Ignoring setABRStrategy("+e+") - unknown value.")},getABRStrategy:function(){return Ae.getABRStrategy()},useDefaultABRRules:function(e){Ae.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,n){Ae.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){Ae.removeABRCustomRule(e)},removeAllABRCustomRule:function(){Ae.removeAllABRCustomRule()},setBandwidthSafetyFactor:function(e){Ae.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return Ae.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=be.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){Ae.setAbandonLoadTimeout(e)},retrieveManifest:function(e,t){var n=X(),i=this;de.on(C.default.INTERNAL_MANIFEST_LOADED,function e(r){r.error?t(null,r.error):t(r.manifest),de.off(C.default.INTERNAL_MANIFEST_LOADED,e,i),n.reset()},i),(0,y.default)(ue).getInstance().initialize(e),n.load(e)},addUTCTimingSource:U,removeUTCTimingSource:V,clearDefaultUTCTimingSources:function(){Ae.setUTCTimingSources([])},restoreDefaultUTCTimingSources:q,setBufferToKeep:function(e){Ae.setBufferToKeep(e)},setBufferAheadToKeep:function(e){Ae.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){Ae.setBufferPruningInterval(e)},setStableBufferTime:function(e){Ae.setStableBufferTime(e)},getStableBufferTime:function(){return Ae.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){Ae.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return Ae.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){Ae.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return Ae.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){Ae.setFragmentRetryAttempts(e)},setFragmentLoaderRetryInterval:function(e){Ae.setFragmentRetryInterval(e)},setManifestLoaderRetryAttempts:function(e){Ae.setManifestRetryAttempts(e)},setManifestLoaderRetryInterval:function(e){Ae.setManifestRetryInterval(e)},setXHRWithCredentialsForType:function(e,t){Ae.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return Ae.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){Ae.setJumpGaps(e)},getJumpGaps:function(){return Ae.getJumpGaps()},setSmallGapLimit:function(e){Ae.setSmallGapLimit(e)},getSmallGapLimit:function(){return Ae.getSmallGapLimit()},getLowLatencyEnabled:function(){return Ae.getLowLatencyEnabled()},setLowLatencyEnabled:function(e){Ae.setLowLatencyEnabled(e)},setManifestUpdateRetryInterval:function(e){Ae.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return Ae.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){Ae.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){Ae.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){Ae.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return Q()},attachProtectionController:function(e){we=e},setProtectionData:function(e){me=e,Re&&Re.setProtectionData(me)},enableManifestDateHeaderTimeSource:function(e){Ae.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,m.default)(ue).getInstance();t.setConfig({videoModel:Le}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){if(!Le.getElement())throw re;Le.setVideoContainer(e)},attachTTMLRenderingDiv:function(e){if(!Le.getElement())throw re;Le.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return Fe&&(e=Fe.getCurrentTrackIdx()),e},getUseDeadTimeLatencyForAbr:function(){return be.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){if("boolean"!=typeof e)throw se;be.setUseDeadTimeLatency(e)},getThumbnail:function(e){if(e<0)return null;var t=De.getIsDynamic()?i(e):e,n=Re.getStreamForTime(t);if(null===n)return null;var r=n.getThumbnailController(),a=n.getStreamInfo();if(!r||!a)return null;var o=Re.getTimeRelativeToStreamId(t,n.getId());return r.get(o)},keepProtectionMediaKeys:function(e){Ae.setKeepProtectionMediaKeys(e)},reset:function(){K(null),Y(null),me=null,we&&(we.reset(),we=null),Se&&(Se.reset(),Se=null)}},he=ce.getLogger(fe),ge=!1,ye=!1,ve=!1,_e=!0,we=null,me=null,Ie=null,C.default.extend(A.default),Ae=(0,b.default)(ue).getInstance(),Le=(0,w.default)(ue).getInstance(),fe}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(101)),s=i(e(88)),l=i(e(111)),u=i(e(113)),d=i(e(109)),c=i(e(104)),f=i(e(90)),h=i(e(201)),p=i(e(197)),m=i(e(192)),g=i(e(206)),v=i(e(190)),y=i(e(144)),_=i(e(141)),b=i(e(142)),E=i(e(143)),T=i(e(103)),w=i(e(145)),S=i(e(199)),x=i(e(46)),I=i(e(47)),C=i(e(51)),A=i(e(93)),M=i(e(48)),P=e(49),R=i(e(53)),D=i(e(60)),k=i(e(55)),N=i(e(78)),O=e(233),L=i(e(1)),F=i(e(6));r.__dashjs_factory_name="MediaPlayer";var j=M.default.getClassFactory(r);j.events=A.default,M.default.updateClassFactory(r.__dashjs_factory_name,j),n.default=j,t.exports=n.default},{1:1,100:100,101:101,103:103,104:104,109:109,111:111,113:113,141:141,142:142,143:143,144:144,145:145,190:190,192:192,197:197,199:199,201:201,206:206,233:233,46:46,47:47,48:48,49:49,51:51,53:53,55:55,6:6,60:60,78:78,88:88,90:90,93:93}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(52)),a=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_CATCHUP_START="playbackCatchupStart",this.PLAYBACK_CATCHUP_END="playbackCatchupEnd",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}());n.default=a,t.exports=n.default},{52:52}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e(92)),r=function(){function e(e,t,a){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var o=void 0,s=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==n})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return a=a||{},(o=(0,i.default)(a).create()).initialize(e,t.src,e.autoplay),r||(r=o.getDebug().getLogger()),r.debug("Converted "+s+" to dash.js player and added content: "+t.src),e._dashjs_player=o,o}function t(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}var n="application/dash+xml",r=void 0;return{create:e,createAll:function(i,r){var a=[];i=i||"[data-dashjs-player]";for(var o=(r=r||document).querySelectorAll(i),s=0;s<o.length;s++){var l=e(o[s],null);a.push(l)}var u=r.querySelectorAll('source[type="'+n+'"]');for(s=0;s<u.length;s++)l=e(t(u[s]),null),a.push(l);return a}}}(),a=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?r.createAll():a=window.setInterval(function(){window.dashjs&&(window.clearInterval(a),r.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),r.createAll()})),n.default=r,t.exports=n.default},{92:92}],95:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){o=o.filter(function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))})}var n=this.context,i=void 0,r=void 0,o=[],s=void 0,l=e;return i={getAllBufferRanges:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var i={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(i,"length",{get:function(){return e.length}}),i},append:function(e){"InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),s=null):s=e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),l&&l({chunk:e})},remove:t,abort:function(){},discharge:function(e,n){var i=function(e,t){return o.filter(function(n){return(isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e)})}(e,n);return s&&(i.push(s),s=null),t(e,n),i},reset:function(){o=[],s=null,l=null},updateTimestampOffset:function(){}},r=(0,a.default)(n).getInstance().getLogger(i),i}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(46)),o=i(e(48));r.__dashjs_factory_name="PreBufferSink";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{46:46,48:48}],96:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){function r(){try{return _.buffered}catch(e){return y.error("getAllBufferRanges exception: "+e.message),null}}function u(){if(E.length>0){var e=E.shift();_.updating?p(_,e):(e(),u())}}function c(){_.updating||u()}function f(){_.updating||u()}function h(){y.error("SourceBufferSink error",t.type)}function p(e,t){E.push(t),e.updating||u()}var m=this.context,g=(0,s.default)(m).getInstance(),v=void 0,y=void 0,_=void 0,b=void 0,E=[],T=[],w=n,S=void 0;return v={getAllBufferRanges:r,getBuffer:function(){return _},append:function(e){T.push(e),b||p(_,function e(){var t=this,n=this;T.length>0&&function(){b=!0;var i=T[0];T.splice(0,1);var a=[],s=function(){var t=r();(function(e,t,n,i){t&&t.length>0&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var i=Math.round(e.start(n)),r=Math.round(e.end(n));if(r===t.start||i===t.end||t.start>=i&&t.end<=r)return!0}return!1}(t,i)&&g.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0})})(n,a,t,i),T.length>0?e.call(this):(b=!1,w&&w({chunk:i}))};try{0===i.bytes.length?s.call(t):(a=r(),_.appendBuffer?_.appendBuffer(i.bytes):_.append(i.bytes,i),p(_,s.bind(t)))}catch(t){y.fatal('SourceBuffer append failed "'+t+'"'),T.length>0?e():b=!1,w&&w({chunk:i,error:new o.default(t.code,t.message,null)})}}()}.bind(this))},remove:function(t,n,i){var r=this;p(_,function(){try{t>=0&&n>t&&(i||"ended"!==e.readyState)&&_.remove(t,n),p(_,function(){g.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1})})}catch(e){g.trigger(l.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new o.default(e.code,e.message,null)})}})},abort:function(){try{"open"===e.readyState?_.abort():_.setTextTrack&&"ended"===e.readyState&&_.abort()}catch(e){y.error('SourceBuffer append abort failed: "'+e+'"')}T=[]},reset:function(t){if(_){if("function"==typeof _.removeEventListener&&(_.removeEventListener("updateend",f,!1),_.removeEventListener("error",h,!1),_.removeEventListener("abort",h,!1)),clearInterval(S),!t){try{_.getClassName&&"TextSourceBuffer"===_.getClassName()||e.removeSourceBuffer(_)}catch(e){y.error("Failed to remove source buffer from media source.")}_=null}b=!1}T=[],w=null},updateTimestampOffset:function(e){_.timestampOffset===e||isNaN(e)||p(_,function(){_.timestampOffset=e})}},function(){y=(0,a.default)(m).getInstance().getLogger(v),b=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if("function"==typeof(_=i||e.addSourceBuffer(n)).addEventListener)try{_.addEventListener("updateend",f,!1),_.addEventListener("error",h,!1),_.addEventListener("abort",h,!1)}catch(e){S=setInterval(c,50)}else S=setInterval(c,50)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var r=(0,d.default)(m).getInstance();_=r.getTextSourceBuffer()}}(),v}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(46)),o=i(e(213)),s=i(e(47)),l=i(e(51)),u=i(e(48)),d=i(e(190));r.__dashjs_factory_name="SourceBufferSink";var c=u.default.getClassFactory(r);n.default=c,t.exports=n.default},{190:190,213:213,46:46,47:47,48:48,51:51}],97:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){for(var t=X?X.length:0,n=0;n<t;n++)X[n].getFragmentModel().removeExecutedRequestsBeforeTime(h()+r()),X[n].reset(!1,e);X=[],Q=!1,J=!1,M(!1),k.off(c.default.CURRENT_TRACK_CHANGED,y,K)}function n(){t(),Z=null,ee={},te=!1}function i(){z&&z.pause(),ie&&(ie.reset(),ie=null),n(),k.off(c.default.DATA_UPDATE_COMPLETED,x,K),k.off(c.default.BUFFERING_COMPLETED,S,K),k.off(c.default.KEY_ERROR,g,K),k.off(c.default.SERVER_CERTIFICATE_UPDATED,g,K),k.off(c.default.LICENSE_REQUEST_COMPLETE,g,K),k.off(c.default.KEY_SYSTEM_SELECTED,g,K),k.off(c.default.KEY_SESSION_CREATED,g,K),k.off(c.default.KEY_STATUSES_CHANGED,g,K),M(!1)}function r(){return Z?Z.duration:NaN}function h(){return Z?Z.start:NaN}function p(){return Z}function m(){if(!(H&&H.hasOwnProperty("getBitrateList")&&j&&j.hasOwnProperty("getAllMediaInfoForType")&&j.hasOwnProperty("getEventsFor")))throw new Error("Missing config parameter(s)")}function g(e){e.error&&(U.mediaKeySessionError(e.error),W.fatal(e.error),i())}function v(e){var t,n=e.type,i=void 0;if(n===a.default.MUXED&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",W.fatal(i),U.manifestError(i,"multiplexedrep",N.getValue()),!1;if(n===a.default.TEXT||n===a.default.FRAGMENTED_TEXT||n===a.default.EMBEDDED_TEXT||n===a.default.IMAGE)return!0;if(t=e.codec,W.debug(n+" codec: "+t),e.contentProtection&&!B.supportsEncryptedMedia())U.capabilityError("encryptedmedia");else if(!B.supportsCodec(t))return i=n+"Codec ("+t+") is not supported.",W.error(i),!1;return!0}function y(e){if(e.newMediaInfo.streamInfo.id===Z.id){var t=I(e.newMediaInfo);if(t){var n=z.getTime();W.info("Stream -  Process track changed at current time "+n);var i=e.newMediaInfo,r=N.getValue();W.debug("Stream -  Update stream controller"),r.refreshManifestOnSwitchTrack?(W.debug("Stream -  Refreshing manifest for switch track"),se=e,F.refreshManifest()):(t.selectMediaInfo(i),i.type!==a.default.FRAGMENTED_TEXT?(H.updateTopQualityIndex(i),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),j.setIndexHandlerTime(t,n),j.resetIndexHandler(t)))}}}function _(t,n,i,r){var s=(0,o.default)(D).create({type:t.type,mimeType:t.mimeType,timelineConverter:V,adapter:j,manifestModel:N,dashManifestModel:O,mediaPlayerModel:L,metricsModel:q,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:K,abrController:H,domStorage:e.domStorage,playbackController:z,mediaController:G,streamController:e.streamController,textController:Y,errHandler:U});if(s.initialize(i),H.updateTopQualityIndex(t),r?(s.setBuffer(r.buffer),s.getIndexHandler().setCurrentTime(r.currentTime),X[r.replaceIdx]=s):X.push(s),!r||!r.ignoreMediaInfo)if(t.type===a.default.TEXT||t.type===a.default.FRAGMENTED_TEXT){for(var l=void 0,u=0;u<n.length;u++)n[u].index===t.index&&(l=u),s.addMediaInfo(n[u]);s.selectMediaInfo(n[l])}else s.addMediaInfo(t,!0)}function b(t,n){var i=j.getAllMediaInfoForType(Z,t),r=null,o=void 0;if(i&&0!==i.length){for(var s=0,l=i.length;s<l;s++)if(r=i[s],t===a.default.EMBEDDED_TEXT)Y.addEmbeddedTrack(r);else{if(!v(r))continue;G.addTrack(r)}if(t!==a.default.EMBEDDED_TEXT&&0!==G.getTracksFor(t,Z).length){if(t===a.default.IMAGE)return void(re=(0,u.default)(D).create({dashManifestModel:O,adapter:j,baseURLController:e.baseURLController,stream:K}));(t!==a.default.FRAGMENTED_TEXT||t===a.default.FRAGMENTED_TEXT&&Y.getTextDefaultEnabled())&&(G.checkInitialMediaSettingsForType(t,Z),o=G.getCurrentTrackFor(t,Z)),t!==a.default.FRAGMENTED_TEXT||Y.getTextDefaultEnabled()||(o=G.getTracksFor(t,Z)[0]),_(o,i,n)}}else W.info("No "+t+" data.")}function E(e){var t=O.getAdaptationForType(N.getValue(),Z.index,e,Z);if(!t||!Array.isArray(t.Representation_asArray))return null;t.Representation_asArray=t.Representation_asArray.filter(function(e,n){if(0===n)return!0;var i=O.getCodec(t,n,!0);return!!B.supportsCodec(i)||(W.error("[Stream] codec not supported: "+i),!1)})}function T(){for(var e=X.length,t=!!ee.audio||!!ee.video?new Error(R,"Data update failed",null):null,n=0;n<e;n++)if(X[n].isUpdating()||te)return;if(J){if(ne)for(n=0;n<e&&X[n];n++)X[n].getType()!==a.default.AUDIO&&X[n].getType()!==a.default.VIDEO&&X[n].getType()!==a.default.FRAGMENTED_TEXT||ne.initializeForMedia(X[n].getMediaInfo());k.trigger(c.default.STREAM_INITIALIZED,{streamInfo:Z,error:t})}}function w(e){for(var t={},n=0,i=X.length;n<i;n++)t[X[n].getType()]=X[n].createBuffer(e).getBuffer();return t}function S(e){if(e.streamInfo===Z){var t=C(),n=t.length;if(0===n)return void W.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");for(var i=0;i<n;i++)if(!t[i].isBufferingCompleted()&&(t[i].getType()===a.default.AUDIO||t[i].getType()===a.default.VIDEO))return void W.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because streamProcessor "+t[i].getType()+" is not buffering completed");W.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),k.trigger(c.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Z})}}function x(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===Z&&(ee[t.getType()]=e.error,T())}function I(e){return!!e&&C().filter(function(t){return t.getType()===e.type})[0]}function C(){for(var e=X.length,t=[],n=void 0,i=void 0,r=0;r<e;r++)(n=(i=X[r]).getType())!==a.default.AUDIO&&n!==a.default.VIDEO&&n!==a.default.FRAGMENTED_TEXT&&n!==a.default.TEXT||t.push(i);return t}function A(e,t){if(!e)return!1;var n=e.getStreamInfo(),i=p();if(!n||!i)return!1;var r=O.getAdaptationForType(N.getValue(),n.index,t,n),a=O.getAdaptationForType(N.getValue(),i.index,t,i);if(!r||!a)return!r&&!a;var o=r&&a&&r.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),l=r.Representation_asArray.map(function(e){return e.codecs}),u=l.some(function(e){return s.indexOf(e)>-1}),d=l.some(function(e){return s.some(function(t){return function(e,t){var n=e.split(".")[0],i=le.find(function(e){return e.codec===n}),r=0===t.indexOf(n);return i?r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):r}(t,e)})});return u||d&&o}function M(e){oe=e}function P(){return oe}var R=1;e=e||{};var D=this.context,k=(0,d.default)(D).getInstance(),N=e.manifestModel,O=e.dashManifestModel,L=e.mediaPlayerModel,F=e.manifestUpdater,j=e.adapter,B=e.capabilities,U=e.errHandler,V=e.timelineConverter,q=e.metricsModel,H=e.abrController,z=e.playbackController,G=e.mediaController,Y=e.textController,$=e.videoModel,K=void 0,W=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];return K={initialize:function(e,t){Z=e,(ne=t)&&(k.on(c.default.KEY_ERROR,g,K),k.on(c.default.SERVER_CERTIFICATE_UPDATED,g,K),k.on(c.default.LICENSE_REQUEST_COMPLETE,g,K),k.on(c.default.KEY_SYSTEM_SELECTED,g,K),k.on(c.default.KEY_SESSION_CREATED,g,K),k.on(c.default.KEY_STATUSES_CHANGED,g,K))},activate:function(e,t){if(!Q){var n=void 0;return P()?(function(){if(te=!0,m(),E(a.default.VIDEO),E(a.default.AUDIO),J=!0,te=!1,0===X.length){var e="No streams to play.";U.manifestError(e,"nostreams",N.getValue()),W.debug(e)}else T()}(),n=t):n=function(e,t){m();var n=void 0,i=$.getElement();ae||((ae=(0,s.default)(D).create()).setConfig({manifestModel:N,manifestUpdater:F,playbackController:z}),n=j.getEventsFor(Z),ae.addInlineEvents(n)),te=!0,E(a.default.VIDEO),E(a.default.AUDIO),(null===i||i&&/^VIDEO$/i.test(i.nodeName))&&b(a.default.VIDEO,e),b(a.default.AUDIO,e),b(a.default.TEXT,e),b(a.default.FRAGMENTED_TEXT,e),b(a.default.EMBEDDED_TEXT,e),b(a.default.MUXED,e),b(a.default.IMAGE,e);var r=w(t);if(J=!0,te=!1,0===X.length){var o="No streams to play.";U.manifestError(o,"nostreams",N.getValue()),W.fatal(o)}else T();return r}(e,t),k.on(c.default.CURRENT_TRACK_CHANGED,y,K),Q=!0,n}return t},deactivate:t,isActive:function(){return Q},getDuration:r,getStartTime:h,getId:function(){return Z?Z.id:NaN},getStreamInfo:p,preload:function(e,t){var n=void 0;ae||((ae=(0,s.default)(D).create()).setConfig({manifestModel:N,manifestUpdater:F,playbackController:z}),n=j.getEventsFor(Z),ae.addInlineEvents(n)),b(a.default.VIDEO,e),b(a.default.AUDIO,e),b(a.default.TEXT,e),b(a.default.FRAGMENTED_TEXT,e),b(a.default.EMBEDDED_TEXT,e),b(a.default.MUXED,e),b(a.default.IMAGE,e),w(t),k.on(c.default.CURRENT_TRACK_CHANGED,y,K);for(var i=0;i<X.length&&X[i];i++)X[i].getScheduleController().start();M(!0)},getFragmentController:function(){return ie},getThumbnailController:function(){return re},getEventController:function(){return ae},getBitrateListFor:function(e){if(m(),e===a.default.IMAGE)return re?re.getBitrateList():[];var t=function(e){for(var t=X.length,n=null,i=0;i<t;i++)if((n=X[i]).getType()===e)return n.getMediaInfo();return null}(e);return H.getBitrateList(t)},startEventController:function(){ae&&ae.start()},stopEventController:function(){ae&&ae.stop()},updateData:function(e){if(W.info("Manifest updated... updating data system wide."),Q=!1,te=!0,Z=e,ae){var t=j.getEventsFor(Z);ae.addInlineEvents(t)}E(a.default.VIDEO),E(a.default.AUDIO);for(var n=0,i=X.length;n<i;n++){var r=X[n],o=j.getMediaInfoForType(Z,r.getType());H.updateTopQualityIndex(o),r.addMediaInfo(o,!0)}if(se&&"fragmentedText"!==(o=se.newMediaInfo).type){var s=I(se.oldMediaInfo);if(!s)return;s.switchTrackAsked(),se=void 0}te=!1,T()},reset:i,getProcessors:C,setMediaSource:function(e){for(var t=0;t<X.length;)v(X[t].getMediaInfo())?(X[t].setMediaSource(e),t++):(X[t].reset(),X.splice(t,1));for(t=0;t<X.length;t++)X[t].dischargePreBuffer();if(0===X.length){var n="No streams to play.";U.manifestError(n,"nostreams",N.getValue()),W.fatal(n)}},isCompatibleWithStream:function(e){return A(e,a.default.VIDEO)&&A(e,a.default.AUDIO)},getPreloaded:P},W=(0,f.default)(D).getInstance().getLogger(K),n(),ie=(0,l.default)(D).create({mediaPlayerModel:L,metricsModel:q,errHandler:U}),k.on(c.default.BUFFERING_COMPLETED,S,K),k.on(c.default.DATA_UPDATE_COMPLETED,x,K),K}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(98)),s=i(e(107)),l=i(e(108)),u=i(e(193)),d=i(e(47)),c=i(e(51)),f=i(e(46)),h=i(e(48));r.__dashjs_factory_name="Stream",n.default=h.default.getClassFactory(r),t.exports=n.default},{100:100,107:107,108:108,193:193,46:46,47:47,48:48,51:51,98:98}],98:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){B=[]}function n(){k=[],D=null,t()}function i(){return E?E.getStreamInfo():null}function r(){return D}e=e||{};var c=this.context,h=void 0,p=e.type,m=e.errHandler,g=e.mimeType,v=e.timelineConverter,y=e.adapter,_=e.manifestModel,b=e.mediaPlayerModel,E=e.stream,T=e.abrController,w=e.playbackController,S=e.streamController,x=e.mediaController,I=e.textController,C=e.domStorage,A=e.metricsModel,M=e.dashMetrics,P=e.dashManifestModel,R=void 0,D=void 0,k=void 0,N=void 0,O=void 0,L=void 0,F=void 0,j=void 0,B=void 0;return R={initialize:function(t){(h=(0,f.default)(c).create({mimeType:g,timelineConverter:v,dashMetrics:M,metricsModel:A,mediaPlayerModel:b,baseURLController:e.baseURLController,errHandler:m})).initialize(R),T.registerStreamType(p,R),(j=E.getFragmentController().getModel(p)).setStreamProcessor(R),N=function(e){return e===a.default.VIDEO||e===a.default.AUDIO?(0,s.default)(c).create({type:e,metricsModel:A,mediaPlayerModel:b,manifestModel:_,errHandler:m,streamController:S,mediaController:x,adapter:y,textController:I,abrController:T,playbackController:w,streamProcessor:R}):(0,l.default)(c).create({type:e,mimeType:g,metricsModel:A,mediaPlayerModel:b,manifestModel:_,errHandler:m,streamController:S,mediaController:x,adapter:y,textController:I,abrController:T,playbackController:w,streamProcessor:R})}(p),O=(0,u.default)(c).create({type:p,mimeType:g,metricsModel:A,adapter:y,dashMetrics:M,dashManifestModel:P,timelineConverter:v,mediaPlayerModel:b,abrController:T,playbackController:w,streamController:S,textController:I,streamProcessor:R,mediaController:x}),(F=(0,d.default)(c).create()).setConfig({abrController:T,domStorage:C,metricsModel:A,dashMetrics:M,dashManifestModel:P,manifestModel:_,playbackController:w,timelineConverter:v,streamProcessor:R}),N.initialize(t),O.initialize(),F.initialize()},isUpdating:function(){return!!F&&F.isUpdating()},getType:function(){return p},getBufferController:function(){return N},getFragmentModel:function(){return j},getScheduleController:function(){return O},getLiveEdgeFinder:function(){return L},getEventController:function(){return E?E.getEventController():null},getFragmentController:function(){return E?E.getFragmentController():null},getRepresentationController:function(){return F},getIndexHandler:function(){return h},getPlaybackController:function(){return w},getCurrentRepresentationInfo:function(){return y.getCurrentRepresentationInfo(F)},getRepresentationInfoForQuality:function(e){return y.getRepresentationInfoForQuality(F,e)},getBufferLevel:function(){return N.getBufferLevel()},switchInitData:function(e,t){N&&N.switchInitData(i().id,e,t)},isBufferingCompleted:function(){return!!N&&N.getIsBufferingCompleted()},timeIsBuffered:function(e){return!!N&&null!==N.getRangeAt(e,0)},createBuffer:function(e){return N.getBuffer()||N.createBuffer(D,e)},getStreamInfo:i,selectMediaInfo:function(e){e===D||e&&D&&e.type!==D.type||(D=e),y.updateData(this)},addMediaInfo:function(e,t){-1===k.indexOf(e)&&k.push(e),t&&this.selectMediaInfo(e)},switchTrackAsked:function(){O.switchTrackAsked()},getMediaInfoArr:function(){return k},getMediaInfo:r,getMediaSource:function(){return N.getMediaSource()},setMediaSource:function(e){N.setMediaSource(e,r())},dischargePreBuffer:function(){N.dischargePreBuffer()},getBuffer:function(){return N.getBuffer()},setBuffer:function(e){N.setBuffer(e)},registerExternalController:function(e){B.push(e)},unregisterExternalController:function(e){var t=B.indexOf(e);-1!==t&&B.splice(t,1)},getExternalControllers:function(){return B},unregisterAllExternalController:t,reset:function(e,t){h.reset(),N&&(N.reset(e,t),N=null),O&&(O.reset(),O=null),F&&(F.reset(),F=null),T&&T.unRegisterStreamType(p),B.forEach(function(e){e.reset()}),n(),p=null,E=null,L&&(L.reset(),L=null)}},w&&w.getIsDynamic()&&(L=(0,o.default)(c).create({timelineConverter:v,streamProcessor:R})),n(),R}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(204)),s=i(e(106)),l=i(e(189)),u=i(e(112)),d=i(e(59)),c=i(e(48)),f=i(e(54));r.__dashjs_factory_name="StreamProcessor",n.default=c.default.getClassFactory(r),t.exports=n.default},{100:100,106:106,112:112,189:189,204:204,48:48,54:54,59:59}],99:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t="urn:mpeg:dash:resolve-to-zero:2013",n=this.context,i=(0,u.default)(n).getInstance(),r=(0,o.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,n,o){var u=function(t,r){n.resolved=!0,n.resolvedContent=t||null,i.trigger(d.default.XLINK_ELEMENT_LOADED,{element:n,resolveObject:o,error:t||r?null:new a.default(f,"Failed loading Xlink element: "+e)})};if(e===t)u(null,!0);else{var c=new l.default(e,s.HTTPRequest.XLINK_TYPE);r.load({request:c,success:function(e){u(e)},error:function(){u(null)}})}},reset:function(){r&&(r.abort(),r=null)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(213)),o=i(e(147)),s=e(233),l=i(e(224)),u=i(e(47)),d=i(e(51)),c=i(e(48)),f=1;r.__dashjs_factory_name="XlinkLoader";var h=c.default.getClassFactory(r);h.XLINK_LOADER_ERROR_LOADING_FAILURE=f,c.default.updateClassFactory(r.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{147:147,213:213,224:224,233:233,47:47,48:48,51:51}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma"}}]),e}());n.default=r,t.exports=n.default},{}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}());n.default=r,t.exports=n.default},{}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}());n.default=r,t.exports=n.default},{}],103:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){(z=(0,a.default)(B).create({metricsModel:ge,dashMetrics:ve,mediaPlayerModel:ue,adapter:se})).initialize()}function t(){Y={video:!0,audio:!0},$={},K={},W={},X={},J={},Q={},fe={},me={},ee=!1,ye=!0,te=!1,void 0===ne&&(ne=!1),ce=void 0,he=void 0,pe=void 0,clearTimeout(Z),Z=null}function n(e){e.mediaType===o.default.VIDEO&&(ce=e.oldQuality,he.push(ce,le.getPlaybackQuality()))}function i(e){e.metric!==s.default.HTTP_REQUEST||!e.value||e.value.type!==y.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||pe.push(e.mediaType,e.value,ye),e.metric!==s.default.BUFFER_LEVEL||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||function(e,t){var n=ue.getABRStrategy();if(n===o.default.ABR_STRATEGY_BOLA)return void(me[e]=!0);if(n===o.default.ABR_STRATEGY_THROUGHPUT)return void(me[e]=!1);var i=ue.getStableBufferTime(),r=i,a=.5*i,s=me[e],l=t>(s?a:r);me[e]=l,l!==s&&(l?H.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):H.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function r(e,t){return $[t]=$[t]||{},$[t].hasOwnProperty(e)||($[t][e]=0),function(e,t){if(t!==o.default.VIDEO||!ee||!Q[t])return e;ne||F();var n=ae.getValue(),i=oe.getAdaptationForType(n,0,t).Representation,r=e;if(ie>0&&re>0){for(;r>0&&i[r]&&ie<i[r].width&&ie-i[r-1].width<i[r].width-ie;)r-=1;i.length-2>=r&&i[r].width===i[r+1].width&&(r=Math.min(e,r+1))}return r}(function(e,t,n){var i=A(t);return isNaN(i)||i>=1||i<0?e:Math.min(e,Math.round(n*i))}(function(e,t){var n=e;if(!Q[t])return n;var i=C(t);void 0!==i&&(n=Math.max(e,i));var r=I(t);return void 0!==r&&(n=Math.min(n,r)),n}($[t][e],e),e,$[t][e]),e)}function f(e){return W.hasOwnProperty("max")&&W.max.hasOwnProperty(e)?W.max[e]:NaN}function x(e){return W.hasOwnProperty("min")&&W.min.hasOwnProperty(e)?W.min[e]:NaN}function I(e){var t=f(e);return t?k(Q[e].getMediaInfo(),t):void 0}function C(e){var t=x(e);if(t){var n=N(Q[e].getMediaInfo()),i=k(Q[e].getMediaInfo(),t);return n[i]&&i<n.length-1&&n[i].bitrate<1e3*t&&i++,i}}function A(e){return X.hasOwnProperty("max")&&X.max.hasOwnProperty(e)?X.max[e]:1}function M(e){return Y[e]}function P(e,t,n,i){var a=t.id,o=L(e);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var s=r(e,a);n!==o&&n>=0&&n<=s&&R(e,o,n,s,i)}function R(e,t,n,i,r){if(e&&Q[e]){var a=Q[e].getStreamInfo(),o=a?a.id:null;if(U.getLogToBrowserConsole()){var s=ve.getCurrentBufferLevel(ge.getReadOnlyMetricsFor(e));H.info("AbrController ("+e+") switch from "+t+" to "+n+"/"+i+" (buffer: "+s+") "+(r?JSON.stringify(r):"."))}(function(e,t,n){K[t]=K[t]||{},K[t][e]=n})(e,o,n),V.trigger(c.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:r})}}function D(e,t){J[e].state=t}function k(e,t,n){if(ye&&n&&Q[e.type].getCurrentRepresentationInfo()&&Q[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var i=Q[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>i)return 0;t*=1-n/i}var r=N(e);if(!r||0===r.length)return S;for(var a=r.length-1;a>=0;a--)if(1e3*t>=r[a].bitrate)return a;return 0}function N(e){if(!e||!e.bitrateList)return null;for(var t=e.bitrateList,n=e.type,i=[],r=void 0,a=0,o=t.length;a<o;a++)(r=new l.default).mediaType=n,r.qualityIndex=a,r.bitrate=t[a].bandwidth,r.width=t[a].width,r.height=t[a].height,r.scanType=t[a].scanType,i.push(r);return i}function O(e){return me[e]}function L(e){if(e&&Q[e]){var t=Q[e].getStreamInfo(),n=t?t.id:null;if(n)return K[n]=K[n]||{},K[n].hasOwnProperty(e)||(K[n][e]=S),K[n][e]}return S}function F(){if(le){var e=te&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ie=le.getClientWidth()*e,re=le.getClientHeight()*e}}function j(e){var t=e.request.mediaType;if(M(t)){var n=Q[t];if(!n)return;var i=(0,h.default)(B).create({abrController:q,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:O(t)}),r=z.shouldAbandonFragment(i);if(r.quality>p.default.NO_CHANGE){var a=n.getFragmentModel();a.getRequests({state:u.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(a.abortRequests(),D(t,b),fe[t].reset(),fe[t].push({oldValue:L(t,G.getActiveStreamInfo()),newValue:r.quality,confidence:1,reason:r.reason}),P(t,G.getActiveStreamInfo(),r.quality,r.reason),clearTimeout(Z),Z=setTimeout(function(){D(t,E),Z=null},ue.getAbandonLoadTimeout()))}}}var B=this.context,U=(0,_.default)(B).getInstance(),V=(0,d.default)(B).getInstance(),q=void 0,H=void 0,z=void 0,G=void 0,Y=void 0,$=void 0,K=void 0,W=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0;return q={isPlayingAtTopQuality:function(e){var t=e.id,n=L(o.default.AUDIO),i=L(o.default.VIDEO);return n===r(o.default.AUDIO,t)&&i===r(o.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,i=e.representationCount-1;return function(e,t,n){$[t]=$[t]||{},$[t][e]=n}(t,n,i),i},getThroughputHistory:function(){return pe},getBitrateList:N,getQualityForBitrate:k,getMaxAllowedBitrateFor:f,getTopBitrateInfoFor:function(e){if(e&&Q&&Q[e]){var t=Q[e].getStreamInfo();if(t.id){var n=r(e,t.id),i=N(Q[e].getMediaInfo());return i[n]?i[n]:null}}return null},getMinAllowedBitrateFor:x,setMaxAllowedBitrateFor:function(e,t){W.max=W.max||{},W.max[e]=t},setMinAllowedBitrateFor:function(e,t){W.min=W.min||{},W.min[e]=t},getMaxAllowedIndexFor:I,getMinAllowedIndexFor:C,getMaxAllowedRepresentationRatioFor:A,setMaxAllowedRepresentationRatioFor:function(e,t){X.max=X.max||{},X.max[e]=t},getInitialBitrateFor:function(e){var t=de.getSavedBitrateSettings(e);if(!W.hasOwnProperty(e))if(X.hasOwnProperty(e)){var n=ae.getValue(),i=oe.getAdaptationForType(n,0,e).Representation;if(Array.isArray(i)){var r=Math.max(Math.round(i.length*X[e])-1,0);W[e]=i[r].bandwidth}else W[e]=0}else isNaN(t)?W[e]=e===o.default.VIDEO?T:w:W[e]=t;return W[e]},setInitialBitrateFor:function(e,t){W[e]=t},getInitialRepresentationRatioFor:function(e){return X.hasOwnProperty(e)?X[e]:null},setInitialRepresentationRatioFor:function(e,t){X[e]=t},setAutoSwitchBitrateFor:function(e,t){Y[e]=t},getAutoSwitchBitrateFor:M,getUseDeadTimeLatency:function(){return ye},setUseDeadTimeLatency:function(e){ye=e},setLimitBitrateByPortal:function(e){ee=e},getLimitBitrateByPortal:function(){return ee},getUsePixelRatioInLimitBitrateByPortal:function(){return te},setUsePixelRatioInLimitBitrateByPortal:function(e){te=e},getQualityFor:L,getAbandonmentStateFor:function(e){return J[e]?J[e].state:null},setPlaybackQuality:P,checkPlaybackQuality:function(e){if(e&&Q&&Q[e]){var t=Q[e].getStreamInfo(),n=t?t.id:null,i=L(e),a=(0,h.default)(B).create({abrController:q,streamProcessor:Q[e],currentValue:i,switchHistory:fe[e],droppedFramesHistory:he,useBufferOccupancyABR:O(e)});if(he){var o=le.getPlaybackQuality();o&&he.push(ce,o)}if(M(e)){var s=C(e),l=r(e,n),u=z.getMaxQuality(a),d=u.quality;if(void 0!==s&&d<s&&(d=s),d>l&&(d=l),fe[e].push({oldValue:i,newValue:d}),d>p.default.NO_CHANGE&&d!=i)(J[e].state===E||d>i)&&R(e,i,d,l,u.reason);else if(U.getLogToBrowserConsole()){var c=ve.getCurrentBufferLevel(ge.getReadOnlyMetricsFor(e));H.debug("AbrController ("+e+") stay on "+i+"/"+l+" (buffer: "+c+")")}}}},getTopQualityIndexFor:r,setElementSize:F,setWindowResizeEventCalled:function(e){ne=e},createAbrRulesCollection:e,registerStreamType:function(t,r){fe[t]=(0,m.default)(B).create(),Q[t]=r,J[t]=J[t]||{},J[t].state=E,me[t]=!1,V.on(c.default.LOADING_PROGRESS,j,this),t==o.default.VIDEO&&(V.on(c.default.QUALITY_CHANGE_RENDERED,n,this),he=(0,g.default)(B).create(),F()),V.on(c.default.METRIC_ADDED,i,this),V.on(c.default.PERIOD_SWITCH_COMPLETED,e,this),pe=(0,v.default)(B).create({mediaPlayerModel:ue})},unRegisterStreamType:function(e){delete Q[e]},setConfig:function(e){e&&(e.streamController&&(G=e.streamController),e.domStorage&&(de=e.domStorage),e.mediaPlayerModel&&(ue=e.mediaPlayerModel),e.metricsModel&&(ge=e.metricsModel),e.dashMetrics&&(ve=e.dashMetrics),e.dashManifestModel&&(oe=e.dashManifestModel),e.adapter&&(se=e.adapter),e.manifestModel&&(ae=e.manifestModel),e.videoModel&&(le=e.videoModel))},reset:function(){t(),V.off(c.default.LOADING_PROGRESS,j,this),V.off(c.default.QUALITY_CHANGE_RENDERED,n,this),V.off(c.default.METRIC_ADDED,i,this),V.off(c.default.PERIOD_SWITCH_COMPLETED,e,this),z&&z.reset()}},H=U.getLogger(q),t(),q}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(178)),o=i(e(100)),s=i(e(101)),l=i(e(212)),u=i(e(140)),d=i(e(47)),c=i(e(51)),f=i(e(48)),h=i(e(174)),p=i(e(175)),m=i(e(176)),g=i(e(173)),v=i(e(177)),y=e(233),_=i(e(46)),b="abandonload",E="allowload",T=1e3,w=100,S=0;r.__dashjs_factory_name="AbrController";var x=f.default.getSingletonFactory(r);x.ABANDON_LOAD=b,x.QUALITY_DEFAULT=S,f.default.updateSingletonFactory(r.__dashjs_factory_name,x),n.default=x,t.exports=n.default},{100:100,101:101,140:140,173:173,174:174,175:175,176:176,177:177,178:178,212:212,233:233,46:46,47:47,48:48,51:51}],104:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){f.invalidateSelectedIndexes(e.entry)}var t=void 0,n=void 0,i=this.context,r=(0,d.default)(i).getInstance(),u=(0,s.default)(i).getInstance(),f=void 0,h=void 0;return t={reset:function(){f.reset(),h.reset()},initialize:function(e){f.setConfig({dashManifestModel:n}),h.setConfig({dashManifestModel:n}),function(e){f.update(e),h.chooseSelectorFromManifest(e)}(e)},resolve:function(e){var t=f.getForPath(e).reduce(function(e,t){var n=h.select(t);return n?(u.isRelative(n.url)?e.url=u.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new l.default},new l.default);if(!u.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(f=e.baseURLTreeModel),e.baseURLSelector&&(h=e.baseURLSelector),e.dashManifestModel&&(n=e.dashManifestModel)}},f=(0,a.default)(i).create(),h=(0,o.default)(i).create(),r.on(c.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,t),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(139)),o=i(e(195)),s=i(e(208)),l=i(e(81)),u=i(e(48)),d=i(e(47)),c=i(e(51));r.__dashjs_factory_name="BaseURLController",n.default=u.default.getSingletonFactory(r),t.exports=n.default},{139:139,195:195,208:208,47:47,48:48,51:51,81:81}],105:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){-1===i.indexOf(e)&&(i.push(e),r.trigger(a,{entry:e}))}function n(e){t(e.entry)}e=e||{};var i=[],r=(0,o.default)(this.context).getInstance(),a=e.updateEventName,s=e.addBlacklistEventName;return function(){s&&r.on(s,n,this)}(),{add:t,contains:function(e){return!!(i.length&&e&&e.length)&&-1!==i.indexOf(e)},reset:function(){i=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(47));r.__dashjs_factory_name="BlackListController",n.default=a.default.getClassFactory(r),t.exports=n.default},{47:47,48:48}],106:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){if(!Ce||!e||!ce)return null;if(ye)try{"function"==typeof(Ee=t&&t[de]?(0,s.default)(Z).create(ye,e,x.bind(this),t[de]):(0,s.default)(Z).create(ye,e,x.bind(this))).getBuffer().initialize&&Ee.getBuffer().initialize(de,ce)}catch(e){he.fatal("Caught error on create SourceBuffer: "+e),ie.mediaSourceError("Error creating "+de+" source buffer.")}else Ee=(0,l.default)(Z).create(x.bind(this));return H(ce.getRepresentationInfoForQuality(pe).MSETimeOffset),Ee}function n(e){e.fragmentModel===ce.getFragmentModel()&&(he.info("Init fragment finished loading saving to",de+"'s init cache"),Ce.save(e.chunk),he.debug("Append Init fragment",de," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality),r(e.chunk))}function i(e){if(e.fragmentModel===ce.getFragmentModel()){var t=e.chunk,n=t.bytes,i=t.quality,a=ce.getRepresentationInfoForQuality(i),s=oe.getEventsFor(a.mediaInfo,ce),l=oe.getEventsFor(a,ce);if(s&&s.length>0||l&&l.length>0){var u=function(e,t,n,i){for(var r=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=n.concat(i),l=0,u=s.length;l<u;l++)a[s[l].schemeIdUri]=s[l];for(var d=(0,h.default)(Z).getInstance().parse(e).getBoxes("emsg"),l=0,u=d.length;l<u;l++){var c=oe.getEvent(d[l],a,r);c&&o.push(c)}return o}(n,ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:i,index:t.index})[0],s,l);ce.getEventController().addInbandEvents(u)}if(Re){De=t;var d=Ee&&Ee.getAllBufferRanges();d&&d.length>0&&ue.getTimeToStreamEnd()>b&&(he.debug("Clearing buffer because track changed - "+(d.end(d.length-1)+E)),U([{start:0,end:d.end(d.length-1)+E,force:!0}]))}else r(t)}}function r(e){Ee.append(e),e.mediaInfo.type===a.default.VIDEO&&ee.trigger(f.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function p(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)he.debug("Buffered Range for type:",de,":",e.start(t)," - ",e.end(t)," currentTime = ",ue.getTime())}function x(e){if(e.error){if(e.error.code===w&&(ve=.8*X(),he.warn("Quota exceeded for type: "+de+", Critical Buffer: "+ve),ve>0)){var t=Math.max(.2*ve,1),n=ve-t;ne.setBufferToKeep(parseFloat(t).toFixed(5)),ne.setBufferAheadToKeep(parseFloat(n).toFixed(5))}e.error.code!==w&&Q()||(he.warn("Clearing playback buffer to overcome quota exceed situation for type: "+de),ee.trigger(f.default.QUOTA_EXCEEDED,{sender:fe,criticalBufferLevel:ve}),M())}else{(Se=e.chunk)&&!isNaN(Se.index)&&(_e=Math.max(Se.index,_e),L());var i=Ee.getAllBufferRanges();if(Se.segmentType===v.HTTPRequest.MEDIA_SEGMENT_TYPE)p(i),P();else if(Re){var r=ue.getTime();he.debug("AppendToBuffer seek target should be "+r),ce.getScheduleController().setSeekTarget(r),oe.setIndexHandlerTime(ce,r)}var a={sender:fe,quality:Se.quality,startTime:Se.start,index:Se.index,bufferedRanges:i};Se&&!Se.endFragment?ee.trigger(f.default.BYTES_APPENDED,a):Se&&ee.trigger(f.default.BYTES_APPENDED_END_FRAGMENT,a)}}function I(e){pe!==e.newQuality&&de===e.mediaType&&ce.getStreamInfo().id===e.streamInfo.id&&(H(ce.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),pe=e.newQuality)}function C(){me&&(Me=!0,me=!1,be=Number.POSITIVE_INFINITY),de!==a.default.FRAGMENTED_TEXT?M():P()}function A(){Ae=void 0}function M(){var e=function(){var e=[],t=Ee.getAllBufferRanges();if(!t||0===t.length)return e;var n=ue.getTime(),i=t.end(t.length-1)+E,r=ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:T})[0];if(r){var a={start:0,end:r.startTime-b},s=ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:r.startTime-r.duration/2,threshold:T})[0];s&&s.startTime!=r.startTime&&(a.end=s.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a);var l={start:r.startTime+r.duration+b,end:i},u=ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:r.startTime+r.duration+b,threshold:T})[0];u&&u.startTime!==r.startTime&&(l.start=u.startTime+u.duration+b),l.start<l.end&&l.start<i&&e.push(l)}else he.debug("getAllRangesWithSafetyFactor for",de,"- No request found in current time position, removing full buffer 0 -",i),e.push({start:0,end:i});return e}();e&&0!==e.length||P(),U(e)}function P(){(!Re||de===a.default.FRAGMENTED_TEXT&&se.isTextEnabled())&&(N(),O())}function R(){F()}function D(){F()}function k(e,t){var n=Ee.getAllBufferRanges(),i=0,r=0,a=null,o=null,s=0,l=void 0,u=void 0,d=t||.15;if(null!=n){for(u=0,l=n.length;u<l;u++)if(i=n.start(u),r=n.end(u),null===a)s=Math.abs(i-e),e>=i&&e<r?(a=i,o=r):s<=d&&(a=i,o=r);else{if(!((s=i-o)<=d))break;o=r}if(null!==a)return{start:a,end:o}}return null}function N(){var e,t,n;ue&&(e=function(){var e=ue.getTime();if(Ae){var t=Ee.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),Ae))}return e}()||0,ge=null===(n=k(e,t))?0:n.end-e,ee.trigger(f.default.BUFFER_LEVEL_UPDATED,{sender:fe,bufferLevel:ge}),F())}function O(){ce&&re&&ce.getStreamInfo()&&(te.addBufferState(de,we,ce.getScheduleController().getBufferTarget()),te.addBufferLevel(de,new Date,1e3*ge))}function L(){_e>=be-1&&!me&&void 0===Ee.discharge&&(me=!0,he.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),ee.trigger(f.default.BUFFERING_COMPLETED,{sender:fe,streamInfo:ce.getStreamInfo()}))}function F(){"audio"!==de&&"video"!==de||(Me&&!me&&ue&&ue.getTimeToStreamEnd()-ge<b&&(Me=!1,me=!0,he.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),ee.trigger(f.default.BUFFERING_COMPLETED,{sender:fe,streamInfo:ce.getStreamInfo()})),(!ne.getLowLatencyEnabled()&&ge<b||0===ge)&&!me?j(_):(me||ge>=ne.getStableBufferTime())&&j(y))}function j(e){we===e||e===_&&0===ue.getTime()||de===a.default.FRAGMENTED_TEXT&&!se.isTextEnabled()||(we=e,O(),ee.trigger(f.default.BUFFER_LEVEL_STATE_CHANGED,{sender:fe,state:e,mediaType:de,streamInfo:ce.getStreamInfo()}),ee.trigger(e===y?f.default.BUFFER_LOADED:f.default.BUFFER_EMPTY,{mediaType:de}),he.debug(e===y?"Got enough buffer to start for "+de:"Waiting for more buffer before starting playback for "+de))}function B(){Ee&&de!==a.default.FRAGMENTED_TEXT&&(me||U(function(){var e=[],t=Ee.getAllBufferRanges();if(!t||0===t.length)return e;var n=ue.getTime(),i={start:Math.max(0,n-ne.getBufferToKeep()),end:n+ne.getBufferAheadToKeep()},r=ce.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:T})[0];if(r)i.start=Math.min(r.startTime,i.start),i.end=Math.max(r.startTime+r.duration,i.end);else if(0===n&&ue.getIsDynamic())return[];if(t.start(0)<=i.start){for(var a={start:0,end:i.start},s=0;s<t.length&&t.end(s)<=i.start;s++)a.end=t.end(s);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=i.end){var l={start:i.end,end:t.end(t.length-1)+T};l.start<l.end&&e.push(l)}return e}()))}function U(e){e&&Ee&&0!==e.length&&(Pe.push.apply(Pe,e),Ie||V())}function V(){if(0===Pe.length||!Ee)return he.debug("Nothing to prune, halt pruning"),Pe=[],void(Ie=!1);var e=Ee.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return he.debug("SourceBuffer is empty (or does not exist), halt pruning"),Pe=[],void(Ie=!1);var t=Pe.shift();he.debug("Removing",de,"buffer from:",t.start,"to",t.end),Ie=!0;var n=ue.getTime();n<t.end&&(me=!1,_e=0,Re||(ce.getScheduleController().setSeekTarget(n),oe.setIndexHandlerTime(ce,n))),Ee.remove(t.start,t.end,t.force)}function q(e){Ee===e.buffer&&(he.debug("onRemoved buffer from:",e.from,"to",e.to),p(Ee.getAllBufferRanges()),0===Pe.length&&(Ie=!1),e.unintended&&(he.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),oe.setIndexHandlerTime(ce,e.from)),Ie?V():(Re?(Re=!1,De&&r(De)):(he.debug("onRemoved : call updateBufferLevel"),N()),ee.trigger(f.default.BUFFER_CLEARED,{sender:fe,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Q()})))}function H(e){Ee&&Ee.updateTimestampOffset&&Ee.updateTimestampOffset(e)}function z(e){e.sender.getStreamProcessor()!==ce||e.error||H(e.currentRepresentation.MSETimeOffset)}function G(e){e.fragmentModel===ce.getFragmentModel()&&(be=e.request.index,L())}function Y(e){var t=Ee&&Ee.getAllBufferRanges();t&&e.newMediaInfo.type===de&&e.newMediaInfo.streamInfo.id===ce.getStreamInfo().id&&(he.info("Track change asked"),ae.getSwitchMode(de)===d.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&ue.getTimeToStreamEnd()>b&&(me=!1,be=Number.POSITIVE_INFINITY))}function $(){++xe*(ne.getWallclockTimeUpdateInterval()/1e3)>=ne.getBufferPruningInterval()&&(xe=0,B())}function K(){F()}function W(e,n){ye=e,Ee&&n&&"function"==typeof Ee.discharge&&(Te=Ee,t(n))}function X(){var e,t=Ee.getAllBufferRanges(),n=0,i=void 0;if(!t)return n;for(i=0,e=t.length;i<e;i++)n+=t.end(i)-t.start(i);return n}function Q(){return X()<ve}function J(e,t){ve=Number.POSITIVE_INFINITY,we=void 0,pe=u.default.QUALITY_DEFAULT,be=Number.POSITIVE_INFINITY,_e=0,Se=null,me=!1,Ie=!1,Me=!1,ge=0,xe=0,Pe=[],Ee&&(e||Ee.abort(),Ee.reset(t),Ee=null),Re=!1}e=e||{};var Z=this.context,ee=(0,c.default)(Z).getInstance(),te=e.metricsModel,ne=e.mediaPlayerModel,ie=e.errHandler,re=e.streamController,ae=e.mediaController,oe=e.adapter,se=e.textController,le=e.abrController,ue=e.playbackController,de=e.type,ce=e.streamProcessor,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,be=void 0,Ee=void 0,Te=void 0,we=void 0,Se=void 0,xe=void 0,Ie=void 0,Ce=void 0,Ae=void 0,Me=void 0,Pe=void 0,Re=void 0,De=void 0;return fe={getBufferControllerType:function(){return S},initialize:function(e){W(e),pe=le.getQualityFor(de,ce.getStreamInfo()),ee.on(f.default.DATA_UPDATE_COMPLETED,z,this),ee.on(f.default.INIT_FRAGMENT_LOADED,n,this),ee.on(f.default.MEDIA_FRAGMENT_LOADED,i,this),ee.on(f.default.QUALITY_CHANGE_REQUESTED,I,this),ee.on(f.default.STREAM_COMPLETED,G,this),ee.on(f.default.PLAYBACK_PLAYING,D,this),ee.on(f.default.PLAYBACK_PROGRESS,P,this),ee.on(f.default.PLAYBACK_TIME_UPDATED,P,this),ee.on(f.default.PLAYBACK_RATE_CHANGED,K,this),ee.on(f.default.PLAYBACK_SEEKING,C,this),ee.on(f.default.PLAYBACK_SEEKED,A,this),ee.on(f.default.PLAYBACK_STALLED,R,this),ee.on(f.default.WALLCLOCK_TIME_UPDATED,$,this),ee.on(f.default.CURRENT_TRACK_CHANGED,Y,this,c.default.EVENT_PRIORITY_HIGH),ee.on(f.default.SOURCEBUFFER_REMOVE_COMPLETED,q,this)},createBuffer:t,dischargePreBuffer:function(){if(Ee&&Te&&"function"==typeof Te.discharge){var e=Te.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+de+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";he.debug(t)}else he.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var i=Te.discharge(),r=null,a=0;a<i.length;a++){var o=i[a],s=Ce.extract(o.streamId,o.representationId);s&&(r!==s&&(Ee.append(s),r=s),Ee.append(o))}Te.reset(),Te=null}},getType:function(){return de},getStreamProcessor:function(){return ce},setSeekStartTime:function(e){Ae=e},getBuffer:function(){return Ee},setBuffer:function(e){Ee=e},getBufferLevel:function(){return ge},getRangeAt:k,setMediaSource:W,getMediaSource:function(){return ye},getIsBufferingCompleted:function(){return me},switchInitData:function(e,t,n){var i=Ce.extract(e,t);Re=!0===n&&n,i?(he.info("Append Init fragment",de," with representationId:",i.representationId," and quality:",i.quality),r(i)):ee.trigger(f.default.INIT_REQUESTED,{sender:fe})},getIsPruningInProgress:function(){return Ie},reset:function(e,t){ee.off(f.default.DATA_UPDATE_COMPLETED,z,this),ee.off(f.default.QUALITY_CHANGE_REQUESTED,I,this),ee.off(f.default.INIT_FRAGMENT_LOADED,n,this),ee.off(f.default.MEDIA_FRAGMENT_LOADED,i,this),ee.off(f.default.STREAM_COMPLETED,G,this),ee.off(f.default.CURRENT_TRACK_CHANGED,Y,this),ee.off(f.default.PLAYBACK_PLAYING,D,this),ee.off(f.default.PLAYBACK_PROGRESS,P,this),ee.off(f.default.PLAYBACK_TIME_UPDATED,P,this),ee.off(f.default.PLAYBACK_RATE_CHANGED,K,this),ee.off(f.default.PLAYBACK_SEEKING,C,this),ee.off(f.default.PLAYBACK_SEEKED,A,this),ee.off(f.default.PLAYBACK_STALLED,R,this),ee.off(f.default.WALLCLOCK_TIME_UPDATED,$,this),ee.off(f.default.SOURCEBUFFER_REMOVE_COMPLETED,q,this),J(e,t)}},he=(0,m.default)(Z).getInstance().getLogger(fe),Ce=(0,g.default)(Z).getInstance(),J(),fe}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(140)),s=i(e(96)),l=i(e(95)),u=i(e(103)),d=i(e(109)),c=i(e(47)),f=i(e(51)),h=i(e(196)),p=i(e(48)),m=i(e(46)),g=i(e(202)),v=e(233),y="bufferLoaded",_="bufferStalled",b=.5,E=.5,T=.01,w=22,S="BufferController";r.__dashjs_factory_name=S;var x=p.default.getClassFactory(r);x.BUFFER_LOADED=y,x.BUFFER_EMPTY=_,p.default.updateClassFactory(r.__dashjs_factory_name,x),n.default=x,t.exports=n.default},{100:100,103:103,109:109,140:140,196:196,202:202,233:233,46:46,47:47,48:48,51:51,95:95,96:96}],107:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){x=!1,g={},v={},y={},_=null,E=(b=100)/1e3}function t(){if(!T||!w||!S)throw new Error("setConfig function has to be called previously")}function n(){null!==_&&x&&(clearInterval(_),_=null,x=!1)}function i(e){if(e.eventStream.value==c){var t,n=e.eventStream.timescale||1,i=e.presentationTime/n;t=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,m.info("Manifest validity changed: Valid until: "+i+"; remaining duration: "+t),h.trigger(l.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:i,newDuration:t,newManifestValidAfter:NaN})}}function r(){u(v),u(g),function(){if(y)for(var e=S.getTime(),t=Object.keys(y),n=0;n<t.length;n++){var i=t[n],r=y[i];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(m.debug("Remove Event "+i+" at time "+e),r=null,delete y[i])}}()}function a(){t(),w.refreshManifest()}function u(e){var t,n=S.getTime();if(e)for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r],s=e[o];void 0!==s&&(0==(t=s.presentationTime/s.eventStream.timescale)||t<=n&&t+E>n)&&(m.debug("Start Event "+o+" at "+n),s.duration>0&&(y[o]=s),s.eventStream.schemeIdUri==d&&s.eventStream.value==c?0===s.duration&&0===s.presentationTimeDelta||a():h.trigger(s.eventStream.schemeIdUri,{event:s}),delete e[o])}}var d="urn:mpeg:dash:event:2012",c=1,f=this.context,h=(0,s.default)(f).getInstance(),p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0;return p={addInlineEvents:function(e){if(t(),g={},e)for(var n=0;n<e.length;n++){var i=e[n];g[i.id]=i,m.debug("Add inline event with id "+i.id)}m.debug("Added "+e.length+" inline events")},addInbandEvents:function(e){t();for(var n=0;n<e.length;n++){var r=e[n];r.id in v?m.debug("Repeated event with id "+r.id):(r.eventStream.schemeIdUri===d&&void 0===v[r.id]&&i(r),v[r.id]=r,m.debug("Add inband event with id "+r.id))}},stop:n,start:function(){t(),m.debug("Start Event Controller"),x||isNaN(b)||(x=!0,_=setInterval(r,b))},setConfig:function(e){e&&(e.manifestModel&&(T=e.manifestModel),e.manifestUpdater&&(w=e.manifestUpdater),e.playbackController&&(S=e.playbackController))},reset:function(){n(),e()}},m=(0,o.default)(f).getInstance().getLogger(p),e(),p}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s=i(e(47)),l=i(e(51));r.__dashjs_factory_name="EventController",n.default=a.default.getClassFactory(r),t.exports=n.default},{46:46,47:47,48:48,51:51}],108:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){return e&&e.type&&e.type===o.HTTPRequest.INIT_SEGMENT_TYPE}function n(){for(var e in b)b[e].reset();b={}}function i(e){if(b[e.request.mediaType]===e.sender){var n=e.request,i=e.response,r=t(n),o=n.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==a.default.AUDIO&&e.request.mediaType!==a.default.VIDEO&&e.request.mediaType!==a.default.FRAGMENTED_TEXT||h.trigger(f.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),!i||!o)return void _.warn("No "+n.mediaType+" bytes to push or stream is inactive.");var l=function(e,t,n,i){var r=new s.default;return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r.endFragment=i,r}(i,n,o.id,e.type!==f.default.FRAGMENT_LOADING_PROGRESS);h.trigger(r?f.default.INIT_FRAGMENT_LOADED:f.default.MEDIA_FRAGMENT_LOADED,{chunk:l,fragmentModel:e.sender})}}e=e||{};var r=this.context,h=(0,c.default)(r).getInstance(),m=e.errHandler,g=e.mediaPlayerModel,v=e.metricsModel,y=void 0,_=void 0,b=void 0;return y={getModel:function(e){var t=b[e];return t||(t=(0,l.default)(r).create({metricsModel:v,fragmentLoader:(0,u.default)(r).create({metricsModel:v,mediaPlayerModel:g,errHandler:m,requestModifier:(0,d.default)(r).getInstance()})}),b[e]=t),t},isInitializationRequest:t,reset:function(){h.off(f.default.FRAGMENT_LOADING_COMPLETED,i,this),h.off(f.default.FRAGMENT_LOADING_PROGRESS,i,this),n()}},_=(0,p.default)(r).getInstance().getLogger(y),n(),h.on(f.default.FRAGMENT_LOADING_COMPLETED,i,y),h.on(f.default.FRAGMENT_LOADING_PROGRESS,i,y),y}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=e(233),s=i(e(214)),l=i(e(140)),u=i(e(89)),d=i(e(206)),c=i(e(47)),f=i(e(51)),h=i(e(48)),p=i(e(46));r.__dashjs_factory_name="FragmentController",n.default=h.default.getClassFactory(r),t.exports=n.default},{100:100,140:140,206:206,214:214,233:233,46:46,47:47,48:48,51:51,89:89}],109:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e,t){if(!e||!t)return[];var n=t.id;return S[n]&&S[n][e]?S[n][e].list:[]}function t(e,t){return!e||!t||t&&!S[t.id]?null:S[t.id][e].current}function n(e){if(e){var n=e.type,i=e.streamInfo,r=i.id,a=t(n,i);if(S[r]&&S[r][n]&&!g(e,a)){S[r][n].current=e,S[r][n].current&&E.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:C[n]});var s=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}(e);s&&S[r][n].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),A.setSavedMediaSettings(n,s))}}}function i(e,t){e&&t&&(x[e]=t)}function r(e){return e?x[e]:null}function l(){return I||p}function m(e){return e===a.default.AUDIO||e===a.default.VIDEO||e===a.default.TEXT||e===a.default.FRAGMENTED_TEXT||e===a.default.IMAGE}function g(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&i&&r&&a&&o&&s}function v(){S={},x={audio:null,video:null},C={audio:c,video:d}}function y(e,t){var n=!e.lang||e.lang===t.lang,i=!e.viewpoint||e.viewpoint===t.viewpoint,r=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&i&&r&&a&&o}function _(e){var t=l(),n=[],i=function(e){var t=0,n=[],i=void 0;return e.forEach(function(e){(i=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})))>t?(t=i,n=[e]):i===t&&n.push(e)}),n},r=function(e){var t=0,n=[],i=void 0;return e.forEach(function(e){(i=e.representationCount)>t?(t=i,n=[e]):i===t&&n.push(e)}),n};switch(t){case f:(n=i(e)).length>1&&(n=r(n));break;case h:(n=r(e)).length>1&&(n=i(e));break;default:w.warn("Track selection mode is not supported: "+t)}return n[0]}var b=this.context,E=(0,s.default)(b).getInstance(),T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=void 0,M=[c,d],P=[f,h];return T={checkInitialMediaSettingsForType:function(t,o){var s=r(t),l=e(t,o),u=[];t!==a.default.FRAGMENTED_TEXT?(s||i(t,s=A.getSavedMediaSettings(t)),l&&0!==l.length&&(s&&l.forEach(function(e){y(s,e)&&u.push(e)}),n(0===u.length?_(l):u.length>1?_(u):u[0]))):n(l[0])},addTrack:function(e){if(e){var i=e.type;if(m(i)){var a=e.streamInfo.id;S[a]||(S[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var o=S[a][i].list,s=0,l=o.length;s<l;++s)if(g(o[s],e))return;o.push(e);var u=r(i);u&&y(u,e)&&!t(i,e.streamInfo)&&n(e)}}},getTracksFor:e,getCurrentTrackFor:t,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return S[n]&&S[n][t]&&g(S[n][t].current,e)},setTrack:n,setInitialSettings:i,getInitialSettings:r,setSwitchMode:function(e,t){-1!==M.indexOf(t)?C[e]=t:w.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return C[e]},setSelectionModeForInitialTrack:function(e){-1!==P.indexOf(e)?I=e:w.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:l,isMultiTrackSupportedByType:m,isTracksEqual:g,setConfig:function(e){e&&(e.errHandler&&e.errHandler,e.domStorage&&(A=e.domStorage))},reset:v},w=(0,u.default)(b).getInstance().getLogger(T),v(),T}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(51)),s=i(e(47)),l=i(e(48)),u=i(e(46)),d="neverReplace",c="alwaysReplace",f="highestBitrate",h="widestRange",p=f;r.__dashjs_factory_name="MediaController";var m=l.default.getSingletonFactory(r);m.TRACK_SWITCH_MODE_NEVER_REPLACE=d,m.TRACK_SWITCH_MODE_ALWAYS_REPLACE=c,m.TRACK_SELECTION_MODE_HIGHEST_BITRATE=f,m.TRACK_SELECTION_MODE_WIDEST_RANGE=h,m.DEFAULT_INIT_TRACK_SELECTION_MODE=p,l.default.updateSingletonFactory(r.__dashjs_factory_name,m),n.default=m,t.exports=n.default},{100:100,46:46,47:47,48:48,51:51}],110:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=void 0,t=void 0,n=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){var n=e.sourceBuffers,i=n.length;if("open"===e.readyState){for(var r=0;r<i;r++){if(n[r].updating)return;if(0===n[r].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,o.default)(n).getInstance().getLogger(e),e}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46));r.__dashjs_factory_name="MediaSourceController",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{46:46,48:48}],111:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){!fe&&e.fromStreamInfo&&void 0!==le[e.fromStreamInfo.id]&&(delete de[e.fromStreamInfo.id],delete le[e.fromStreamInfo.id])}function t(){return parseFloat((n()-v()).toFixed(5))}function n(){var e=I(!0),t=fe?e-ce.start:0;return e+(ce.duration-t)}function i(){ce&&ae&&ae.getElement()?ae.play():pe=!0}function r(){return ce&&ae?ae.isPaused():null}function d(){ce&&ae&&ae.pause()}function m(){return ce&&ae?ae.isSeeking():null}function g(e,t,n){ce&&ae&&(!0===n?e!==ae.getTime()&&(ae.removeEventListener("seeking",L),J.info("Requesting seek to time: "+e),ae.setCurrentTime(e,t)):(X.trigger(u.default.PLAYBACK_SEEK_ASKED),J.info("Requesting seek to time: "+e),ae.setCurrentTime(e,t)))}function v(){return ce&&ae?ae.getTime():null}function y(){return ce&&ae?ae.getPlaybackRate():null}function _(){return ce&&ae?ae.getEnded():null}function b(){return fe}function E(){return _e}function T(){if(!fe||isNaN(ve))return NaN;var e=v();return isNaN(e)||0===e?0:(Math.round((new Date).getTime()-(1e3*e+ve))/1e3).toFixed(3)}function w(){if(ae){var e=ge||1;e!==y()&&(J.info("Stopping live catchup mechanism. Setting playback rate to",e),ae.getElement().playbackRate=e,X.trigger(u.default.PLAYBACK_CATCHUP_END,{sender:Q}))}}function S(){0,oe=NaN,pe=!1,le={},ue=0,ve=0,_e=h,de={},ae&&(X.off(u.default.DATA_UPDATE_COMPLETED,P,this),X.off(u.default.BUFFER_LEVEL_STATE_CHANGED,$,this),X.off(u.default.BYTES_APPENDED_END_FRAGMENT,Y,this),X.off(u.default.PERIOD_SWITCH_STARTED,e,this),X.off(u.default.PLAYBACK_PROGRESS,G,this),X.off(u.default.PLAYBACK_TIME_UPDATED,G,this),X.off(u.default.PLAYBACK_ENDED,H,this),A(),ae.removeEventListener("canplay",R),ae.removeEventListener("play",D),ae.removeEventListener("waiting",k),ae.removeEventListener("playing",N),ae.removeEventListener("pause",O),ae.removeEventListener("error",z),ae.removeEventListener("seeking",L),ae.removeEventListener("seeked",F),ae.removeEventListener("timeupdate",j),ae.removeEventListener("progress",B),ae.removeEventListener("ratechange",U),ae.removeEventListener("loadedmetadata",V),ae.removeEventListener("stalled",K),ae.removeEventListener("ended",q)),se=null,ae=null,ce=null,fe=null}function x(){var e=(0,s.default)(W).getInstance().getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);n>=0&&ce&&n<ce.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.floor(Date.now()/1e3)-ce.manifestInfo.DVRWindowSize+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function I(e,t){var n,i=void 0,r=x();if(n=r?e?ce.start:isNaN(r.fragS)?r.fragT:r.fragS:0,fe)isNaN(n)||((i=n-ce.manifestInfo.availableFrom.getTime()/1e3)>oe||i<(isNaN(t)?NaN:t-ce.manifestInfo.DVRWindowSize))&&(i=null),i=i||oe;else if(!isNaN(n)&&n<Math.max(ce.manifestInfo.duration,ce.duration)&&n>=0)i=n;else{var a=le[ce.id];i=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,ce.start):ce.start}return i}function C(){if(null===se){se=setInterval(function(){var e;X.trigger(u.default.WALLCLOCK_TIME_UPDATED,{isDynamic:fe,time:new Date}),b()&&r()&&(e=Date.now(),(!me||e>me+f)&&(me=e,j()))},he.getWallclockTimeUpdateInterval())}}function A(){clearInterval(se),se=null}function M(){if(!r()&&fe&&0!==ae.getReadyState()){var e=v(),t=function(e){var t=ee.getReadOnlyMetricsFor(a.default.VIDEO)||ee.getReadOnlyMetricsFor(a.default.AUDIO),n=te.getCurrentDVRInfo(t),i=n?n.range:null,r=void 0;if(!i)return NaN;if(e>i.end)r=Math.max(i.end-2*ce.manifestInfo.minBufferTime,i.start);else{if(!(e+.25<i.start))return e;r=i.start}return r}(e);!isNaN(t)&&t!==e&&g(t)}}function P(e){if(!e.error){var t=re.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;ce.id===t.id&&(ce=t,M())}}function R(){X.trigger(u.default.CAN_PLAY)}function D(){J.info("Native video element event: play"),M(),C(),X.trigger(u.default.PLAYBACK_STARTED,{startTime:v()})}function k(){J.info("Native video element event: waiting"),X.trigger(u.default.PLAYBACK_WAITING,{playingTime:v()})}function N(){J.info("Native video element event: playing"),X.trigger(u.default.PLAYBACK_PLAYING,{playingTime:v()})}function O(){J.info("Native video element event: pause"),X.trigger(u.default.PLAYBACK_PAUSED,{ended:_()})}function L(){var e=v();J.info("Seeking to: "+e),C(),X.trigger(u.default.PLAYBACK_SEEKING,{seekTime:e})}function F(){J.info("Native video element event: seeked"),X.trigger(u.default.PLAYBACK_SEEKED),ae.addEventListener("seeking",L)}function j(){var e=v();e,X.trigger(u.default.PLAYBACK_TIME_UPDATED,{timeToEnd:t(),time:e})}function B(){X.trigger(u.default.PLAYBACK_PROGRESS)}function U(){var e=y();J.info("Native video element event: ratechange: ",e),X.trigger(u.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function V(){J.info("Native video element event: loadedmetadata"),X.trigger(u.default.PLAYBACK_METADATA_LOADED),C()}function q(){J.info("Native video element event: ended"),d(),A(),X.trigger(u.default.PLAYBACK_ENDED,{isLast:Z.getActiveStreamInfo().isLast})}function H(e){se&&e.isLast&&(J.info("[PlaybackController] onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),ae.setCurrentTime(n()),d(),A())}function z(e){var t=e.target||e.srcElement;X.trigger(u.default.PLAYBACK_ERROR,{error:t.error})}function G(){fe&&he.getLowLatencyEnabled()&&E()>0&&(E()+1!==y()&&T()>he.getLiveDelay()*(1+p)?function(){if(ae){var e=1+E(),t=y();e!==t&&(J.info("Starting live catchup mechanism. Setting playback rate to",e),ge=t,ae.getElement().playbackRate=e,X.trigger(u.default.PLAYBACK_CATCHUP_START,{sender:Q}))}}():T()<=he.getLiveDelay()&&w())}function Y(e){var t=void 0,n=void 0,i=e.bufferedRanges;if(i&&i.length&&(!le[ce.id]||!0!==le[ce.id].started)){var r=e.sender.getType();void 0===de[ce.id]&&(de[ce.id]=[]),de[ce.id][r]=i,void 0===le[ce.id]&&(le[ce.id]=[],le[ce.id].started=!1),void 0===le[ce.id][r]&&(le[ce.id][r]=Math.max(i.start(0),ce.start));var a=Z.isVideoTrackPresent(),o=Z.isAudioTrackPresent();n=I(!1),o&&a?isNaN(le[ce.id].audio)||isNaN(le[ce.id].video)||(le[ce.id].audio<le[ce.id].video?(t=le[ce.id].video>n?le[ce.id].video:n,i=de[ce.id].audio):(t=le[ce.id].audio>n?le[ce.id].audio:n,i=de[ce.id].video),function(e,t){if(t&&t.length>0)for(var n=0,i=t.length;n<i;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}(t,i)&&(m()||ye||0===t||g(t,!0,!0),le[ce.id].started=!0)):le[ce.id][r]&&(t=le[ce.id][r]>n?le[ce.id][r]:n,m()||ye||g(t,!1,!0),le[ce.id].started=!0)}}function $(e){e.streamInfo.id===ce.id&&ae.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY)}function K(e){X.trigger(u.default.PLAYBACK_STALLED,{e:e})}var W=this.context,X=(0,l.default)(W).getInstance(),Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=h;return Q={initialize:function(t,n){ce=t,ae.addEventListener("canplay",R),ae.addEventListener("play",D),ae.addEventListener("waiting",k),ae.addEventListener("playing",N),ae.addEventListener("pause",O),ae.addEventListener("error",z),ae.addEventListener("seeking",L),ae.addEventListener("seeked",F),ae.addEventListener("timeupdate",j),ae.addEventListener("progress",B),ae.addEventListener("ratechange",U),ae.addEventListener("loadedmetadata",V),ae.addEventListener("stalled",K),ae.addEventListener("ended",q),fe=ce.manifestInfo.isDynamic,oe=ce.start,ye=n,X.on(u.default.DATA_UPDATE_COMPLETED,P,this),X.on(u.default.BYTES_APPENDED_END_FRAGMENT,Y,this),X.on(u.default.BUFFER_LEVEL_STATE_CHANGED,$,this),X.on(u.default.PERIOD_SWITCH_STARTED,e,this),X.on(u.default.PLAYBACK_PROGRESS,G,this),X.on(u.default.PLAYBACK_TIME_UPDATED,G,this),X.on(u.default.PLAYBACK_ENDED,H,this),pe&&(pe=!1,i())},setConfig:function(e){e&&(e.streamController&&(Z=e.streamController),e.metricsModel&&(ee=e.metricsModel),e.dashMetrics&&(te=e.dashMetrics),e.manifestModel&&(ne=e.manifestModel),e.dashManifestModel&&(ie=e.dashManifestModel),e.mediaPlayerModel&&(he=e.mediaPlayerModel),e.adapter&&(re=e.adapter),e.videoModel&&(ae=e.videoModel))},getStartTimeFromUriParameters:x,getStreamStartTime:I,getTimeToStreamEnd:t,getTime:v,getPlaybackRate:y,getPlayedRanges:function(){return ce&&ae?ae.getPlayedRanges():null},getEnded:_,getIsDynamic:b,getStreamController:function(){return Z},setCatchUpPlaybackRate:function(e){_e=e,0===e&&y()>1&&w()},setLiveStartTime:function(e){oe=e},getLiveStartTime:function(){return oe},computeLiveDelay:function(e,t){var n,i=ie.getMpd(ne.getValue()),r=void 0;if(n=he.getUseSuggestedPresentationDelay()&&i.hasOwnProperty(a.default.SUGGESTED_PRESENTATION_DELAY)?i.suggestedPresentationDelay:he.getLowLatencyEnabled()?0:he.getLiveDelay()?he.getLiveDelay():isNaN(e)?2*ce.manifestInfo.minBufferTime:e*he.getLiveDelayFragmentCount(),i.availabilityStartTime&&(ve=i.availabilityStartTime.getTime()),t>0){var o=Math.max(t-10,t/2);r=Math.min(n,o)}else r=n;return ue=r,r},getLiveDelay:function(){return ue},getCurrentLiveLatency:T,play:i,isPaused:r,pause:d,isSeeking:m,seek:g,reset:S},J=(0,c.default)(W).getInstance().getLogger(Q),S(),Q}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(106)),s=i(e(144)),l=i(e(47)),u=i(e(51)),d=i(e(48)),c=i(e(46)),f=500,h=.05,p=.35;r.__dashjs_factory_name="PlaybackController",n.default=d.default.getSingletonFactory(r),t.exports=n.default},{100:100,106:106,144:144,46:46,47:47,48:48,51:51}],112:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){se&&!ne.isBufferingCompleted()?(ae.debug("Schedule Controller starts"),V(),ue=!1,le&&(le=!1),r(0)):ae.warn("Start denied to Schedule Controller")}function n(){ue||(ae.debug("Schedule Controller stops"),ue=!0,clearTimeout(me))}function i(){var e=ne.getBufferController();if(ue||he||!e||J.isPaused()&&!_e||!(te!==a.default.FRAGMENTED_TEXT&&te!==a.default.TEXT||ee.isTextEnabled()))ae.debug("Schedule stop!");else if(e.getIsBufferingCompleted())ae.debug("Schedule stop because buffering is completed!");else{!function(){var e=1.5*se.fragmentDuration,t=oe.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,time:J.getTime()+e,threshold:0})[0];if(t&&-1===we.indexOf(t)&&!K.getIsTextTrack(te)){var n=X.getFastSwitchEnabled(),i=ne.getBufferLevel(),r=Q.getAbandonmentStateFor(te),a=!ie.isCurrentTrack(t.mediaInfo)&&ie.getSwitchMode(t.mediaInfo.type)===g.default.TRACK_SWITCH_MODE_NEVER_REPLACE,o=t.quality<se.quality;n&&(a||o)&&i>=e&&r!==s.default.ABANDON_LOAD?(_(t),ae.debug("Reloading outdated fragment at index: ",t.index)):t.quality>se.quality&&j(J.getTime()+ne.getBufferLevel())}}();var t=we.length>0,n=ne.getStreamInfo();if(xe||isNaN(Te)||Se||t||function(e,t){Ee[t]=Ee[t]||{};var n=Q.getTopQualityIndexFor(e,t);return Ee[t][e]!=n&&(ae.info("Top quality "+e+" index has changed from "+Ee[t][e]+" to "+n),Ee[t][e]=n,!0)}(se.mediaInfo.type,n.id)||ve.execute(ne,Z.isVideoTrackPresent())){v(!0),t||Se||Q.checkPlaybackQuality(te),function(){var e=ne.getFragmentController();if(se.quality!==Te)ae.debug("Quality has changed, get init request for representationid = "+se.id),Te=se.quality,ne.switchInitData(se.id);else if(Se)ae.debug("Switch track has been asked, get init request for "+te+" with representationid = "+se.id),xe=ie.getSwitchMode(te)===g.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,ne.switchInitData(se.id,xe),Te=se.quality,Se=!1;else{var t=we.shift();if(e.isInitializationRequest(t))ne.switchInitData(t.representationId);else{var i=void 0;ne.getBufferController().getIsPruningInProgress()||!(i=ye.execute(ne,t))&&n.manifestInfo&&n.manifestInfo.isDynamic&&ae.info("Playing at the bleeding live edge and frag is not available yet"),i?(ae.debug("getNextFragment - request is "+i.url),oe.executeRequest(i)):(v(!1),r(X.getLowLatencyEnabled()?100:500))}}}()}else r(500)}}function r(e){clearTimeout(me),me=setTimeout(i,e)}function p(e){e.sender&&e.sender.getStreamProcessor()===ne&&y(se.quality)}function v(e){he!==e?he=e:ae.debug("isFragmentProcessingInProgress is already equal to",e)}function y(e){var t=Y.getInitRequest(ne,e);t&&(v(!0),oe.executeRequest(t))}function _(e){we.push(e)}function b(e){if(te===e.mediaType&&ne.getStreamInfo().id===e.streamInfo.id){if(null===(se=ne.getRepresentationInfoForQuality(e.newQuality))||void 0===se)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");U(new Date,o.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),V()}}function E(e){if(J&&oe){var t=oe.getRequests({state:c.default.FRAGMENT_MODEL_EXECUTED,time:J.getTime(),threshold:0})[0];t&&J.getTime()>=t.startTime&&((!be.mediaInfo||t.mediaInfo.type===be.mediaInfo.type&&t.mediaInfo.id!==be.mediaInfo.id)&&e&&z.trigger(h.default.TRACK_CHANGE_RENDERED,{mediaType:te,oldMediaInfo:be.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===be.quality&&t.adaptationIndex===be.adaptationIndex||!e||z.trigger(h.default.QUALITY_CHANGE_RENDERED,{mediaType:te,oldQuality:be.quality,newQuality:t.quality}),be={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function T(e){e.error||e.sender.getStreamProcessor()!==ne||(se=Y.convertDataToRepresentationInfo(e.currentRepresentation))}function w(e){e.error||ne.getStreamInfo().id!==e.streamInfo.id||(se=ne.getCurrentRepresentationInfo(),le&&(J.getIsDynamic()?(W.setTimeSyncCompleted(!0),function(){var e=ne.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=se.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,i=t-J.computeLiveDelay(se.fragmentDuration,n),r=Y.getFragmentRequestForTime(ne,se,i,{ignoreIsFinished:!0});if(r)if(X.getLowLatencyEnabled()){var o=r.duration<X.getLiveDelay()?r.startTime:r.startTime+r.duration-X.getLiveDelay();J.setLiveStartTime(o)}else J.setLiveStartTime(r.startTime);else ae.debug("setLiveEdgeSeekTarget : getFragmentRequestForTime returned undefined request object");ge=J.getStreamStartTime(!1,t),ne.getBufferController().setSeekStartTime(ge),ge>se.mediaInfo.streamInfo.start+se.mediaInfo.streamInfo.duration&&J.seek(ge);var s=$.getCurrentManifestUpdate(G.getMetricsFor(a.default.STREAM));G.updateManifestUpdateInfo(s,{currentTime:ge,presentationStartTime:t,latency:t-ge,clientTimeOffset:W.getClientTimeOffset()})}}()):(ge=J.getStreamStartTime(!1),ne.getBufferController().setSeekStartTime(ge))),ue&&t())}function S(e){e.fragmentModel===oe&&(n(),v(!1),ae.info("Stream is complete"))}function x(e){e.sender===oe&&(ae.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined"),K.getIsTextTrack(te)&&v(!1),e.error&&e.request.serviceLocation&&!ue&&(_(e.request),v(!1),r(0)),xe&&(Ie=e.request))}function I(){E(!0)}function C(e){e.sender.getStreamProcessor()===ne&&(xe&&!isNaN(e.startTime)&&(xe=!1,oe.addExecutedRequest(Ie)),v(!1),r(0))}function A(e){e.streamProcessor===ne&&(ae.info("onFragmentLoadingAbandoned for "+te+", request: "+e.request.url+" has been aborted"),J.isSeeking()||Se||(ae.info("onFragmentLoadingAbandoned for "+te+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),_(e.request)),v(!1),r(0))}function M(e){e.sender.getStreamProcessor()===ne&&n()}function P(e){e.sender.getStreamProcessor()===ne&&(e.unintended?ne.getFragmentModel().removeExecutedRequestsAfterTime(e.from,ne.getStreamInfo().duration):ne.getFragmentModel().syncExecutedRequestsWithBufferedRange(ne.getBufferController().getBuffer().getAllBufferRanges(),ne.getStreamInfo().duration),e.hasEnoughSpaceToAppend&&ue&&t())}function R(e){e.sender.getStreamProcessor()!==ne||e.state!==l.default.BUFFER_EMPTY||J.isSeeking()||(ae.info("Buffer is empty! Stalling!"),U(new Date,o.PlayListTrace.REBUFFERING_REASON))}function D(e){e.sender.getStreamProcessor()===ne&&(n(),v(!1))}function k(){oe.abortRequests(),n()}function N(e){e.sender.getStreamProcessor()===ne&&ee.isTextEnabled()&&y(e.index)}function O(){!ue&&_e||t()}function L(e){ge=e.seekTime,B(0),ue&&t();var n=$.getCurrentManifestUpdate(G.getMetricsFor(a.default.STREAM)),i=se.DVRWindow&&J?se.DVRWindow.end-J.getTime():NaN;G.updateManifestUpdateInfo(n,{latency:i}),he?(ae.debug("onPlaybackSeeking for "+te+", call fragmentModel.abortRequests in order to seek quicker"),oe.abortRequests()):r(0)}function F(e){ce&&(ce.playbackspeed=e.playbackRate.toString())}function j(e){ge=e}function B(e){pe=e}function U(e,t){if(de&&!1===fe){var n=ce.start,i=e.getTime()-n.getTime();ce.duration=i,ce.stopreason=t,de.trace.push(ce),fe=!0}}function V(){de&&!0===fe&&se&&(fe=!1,(ce=new o.PlayListTrace).representationid=se.id,ce.start=new Date,ce.mstart=1e3*J.getTime(),ce.playbackspeed=J.getPlaybackRate().toString())}function q(){he=!1,pe=0,ge=NaN,de=null,ce=null,fe=!0,le=!0,Te=NaN,be={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},Ee={},we=[],ue=!0,Se=!1,xe=!1,Ie=null}e=e||{};var H=this.context,z=(0,f.default)(H).getInstance(),G=e.metricsModel,Y=e.adapter,$=e.dashMetrics,K=e.dashManifestModel,W=e.timelineConverter,X=e.mediaPlayerModel,Q=e.abrController,J=e.playbackController,Z=e.streamController,ee=e.textController,te=e.type,ne=e.streamProcessor,ie=e.mediaController,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,be=void 0,Ee=void 0,Te=void 0,we=void 0,Se=void 0,xe=void 0,Ie=void 0;return re={initialize:function(){oe=ne.getFragmentModel(),_e=X.getScheduleWhilePaused(),ve=(0,u.default)(H).create({abrController:Q,dashMetrics:$,metricsModel:G,mediaPlayerModel:X,textController:ee}),ye=(0,d.default)(H).create({adapter:Y,textController:ee}),K.getIsTextTrack(e.mimeType)&&z.on(h.default.TIMED_TEXT_REQUESTED,N,this),z.on(h.default.QUALITY_CHANGE_REQUESTED,b,this),z.on(h.default.DATA_UPDATE_STARTED,M,this),z.on(h.default.DATA_UPDATE_COMPLETED,T,this),z.on(h.default.FRAGMENT_LOADING_COMPLETED,x,this),z.on(h.default.STREAM_COMPLETED,S,this),z.on(h.default.STREAM_INITIALIZED,w,this),z.on(h.default.BUFFER_LEVEL_STATE_CHANGED,R,this),z.on(h.default.BUFFER_CLEARED,P,this),z.on(h.default.BYTES_APPENDED_END_FRAGMENT,C,this),z.on(h.default.INIT_REQUESTED,p,this),z.on(h.default.QUOTA_EXCEEDED,D,this),z.on(h.default.PLAYBACK_SEEKING,L,this),z.on(h.default.PLAYBACK_STARTED,O,this),z.on(h.default.PLAYBACK_RATE_CHANGED,F,this),z.on(h.default.PLAYBACK_TIME_UPDATED,I,this),z.on(h.default.URL_RESOLUTION_FAILED,k,this),z.on(h.default.FRAGMENT_LOADING_ABANDONED,A,this)},getType:function(){return te},getSeekTarget:function(){return ge},setSeekTarget:j,setTimeToLoadDelay:B,getTimeToLoadDelay:function(){return pe},replaceRequest:_,switchTrackAsked:function(){Se=!0},isStarted:function(){return!1===ue},start:t,stop:n,reset:function(){z.off(h.default.DATA_UPDATE_STARTED,M,this),z.off(h.default.DATA_UPDATE_COMPLETED,T,this),z.off(h.default.BUFFER_LEVEL_STATE_CHANGED,R,this),z.off(h.default.QUALITY_CHANGE_REQUESTED,b,this),z.off(h.default.FRAGMENT_LOADING_COMPLETED,x,this),z.off(h.default.STREAM_COMPLETED,S,this),z.off(h.default.STREAM_INITIALIZED,w,this),z.off(h.default.QUOTA_EXCEEDED,D,this),z.off(h.default.BYTES_APPENDED_END_FRAGMENT,C,this),z.off(h.default.BUFFER_CLEARED,P,this),z.off(h.default.INIT_REQUESTED,p,this),z.off(h.default.PLAYBACK_RATE_CHANGED,F,this),z.off(h.default.PLAYBACK_SEEKING,L,this),z.off(h.default.PLAYBACK_STARTED,O,this),z.off(h.default.PLAYBACK_TIME_UPDATED,I,this),z.off(h.default.URL_RESOLUTION_FAILED,k,this),z.off(h.default.FRAGMENT_LOADING_ABANDONED,A,this),K.getIsTextTrack(te)&&z.off(h.default.TIMED_TEXT_REQUESTED,N,this),n(),E(!1),q()},setPlayList:function(e){de=e},getBufferTarget:function(){return ve.getBufferTarget(ne,Z.isVideoTrackPresent())},finalisePlayList:function(e,t){U(e,t),de=null}},ae=(0,m.default)(H).getInstance().getLogger(re),q(),re}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=e(235),s=i(e(103)),l=i(e(106)),u=i(e(185)),d=i(e(186)),c=i(e(140)),f=i(e(47)),h=i(e(51)),p=i(e(48)),m=i(e(46)),g=i(e(109));r.__dashjs_factory_name="ScheduleController",n.default=p.default.getClassFactory(r),t.exports=n.default},{100:100,103:103,106:106,109:109,140:140,185:185,186:186,235:235,46:46,47:47,48:48,51:51}],113:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){if(N()){var e=Se.getPlaybackQuality();e&&ne.addDroppedFrames(a.default.VIDEO,e)}}function t(){if(!(!Ie.getJumpGaps()||!ge||0===ge.getProcessors().length||xe.isSeeking()||Ce||be||Ee||Te)&&++Oe>=G){var e=xe.getTime();Be===e?function(e){for(var t=ge.getProcessors(),n=Ie.getSmallGapLimit(),i=void 0,r=0;r<t.length;r++){var a=t[r].getBuffer(),o=a.getAllBufferRanges(),s=void 0;if(o&&!(o.length<=1)){for(var l=0;l<o.length;l++)if(e<o.start(l)){s=o.start(l);break}if(s>0){var u=s-e;u>0&&u<=n&&(void 0===i||s>i)&&(i=s)}}}var c=xe.getTimeToStreamEnd();void 0===i&&!isNaN(c)&&c<n&&(i=e+c),i>0&&(!isNaN(c)&&i>=e+c?(W.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),$.trigger(d.default.PLAYBACK_ENDED,{isLast:B().isLast})):(W.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",i),xe.seek(i)))}(e):Be=e,Oe=0}}function n(e){var t=S(e.seekTime);ke&&(f(),De=!1),Ne&&(W.debug("[PreloadTimer] stop period preload timer."),clearTimeout(Ne),Ne=void 0),t===ge&&je&&je.deactivate(!0),t&&(t!==ge||je&&!ge.isActive())?(L(h.PlayListTrace.END_OF_PERIOD_STOP_REASON),C(ge,t,e.seekTime)):L(h.PlayListTrace.USER_REQUEST_STOP_REASON),F(h.PlayList.SEEK_START_REASON)}function i(){W.debug("[onPlaybackStarted]"),Ae?(Ae=!1,F(h.PlayList.INITIAL_PLAYOUT_START_REASON)):Ce&&(Ce=!1,F(h.PlayList.RESUME_FROM_PAUSE_START_REASON),E())}function r(e){W.debug("[onPlaybackPaused]"),e.ended||(Ce=!0,L(h.PlayListTrace.USER_REQUEST_STOP_REASON),E())}function f(){W.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(ke),ke=void 0}function E(){if(De)if(ke)f();else{var e=xe.getTimeToStreamEnd(),t=e>0?1e3*e:0;W.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in "+t+" milliseconds"),ke=setTimeout(function(){$.trigger(d.default.PLAYBACK_ENDED,{isLast:B().isLast})},t);var n=t<2e3?t/4:t-2e3;W.info("[StreamController][toggleEndPeriodTimer] Going to fire preload in "+n),Ne=setTimeout(w,n)}}function T(){var e=B().isLast;we&&e?(W.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),re.signalEndOfStream(we)):we&&void 0===ke&&(W.info("[StreamController][onStreamBufferingCompleted] end of period detected"),De=!0,!1===Ce&&E())}function w(){var e=B().isLast;we&&!e&&function(){var e=I();(Fe=ge.isCompatibleWithStream(e))&&(W.info("[StreamController][onStreamCanLoadNext] Preloading next stream"),ge.stopEventController(),ge.deactivate(!0),e.preload(we,Le),je=e,e.getProcessors().forEach(function(t){te.setIndexHandlerTime(t,e.getStartTime())}))}()}function S(e){var t=0,n=null,i=me.length;i>0&&(t+=me[0].getStartTime());for(var r=0;r<i;r++)if(n=me[r],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function x(){var e=I();e?(Re=void 0,Pe=void 0,C(ge,e,NaN)):W.debug("StreamController no next stream found"),L(e?h.PlayListTrace.END_OF_PERIOD_STOP_REASON:h.PlayListTrace.END_OF_CONTENT_STOP_REASON),ke=void 0,De=!1}function I(){if(ge){var e=function(){var e=ge.getStreamInfo().start,t=ge.getStreamInfo().duration;return{v:me.filter(function(n){return n.getStreamInfo().start===parseFloat((e+t).toFixed(5))})[0]}}();if("object"==typeof e)return e.v}}function C(e,t,n){be||!t||e===t&&t.isActive()||(be=!0,$.trigger(d.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),Fe=!1,e&&(e.stopEventController(),Fe=ge.isCompatibleWithStream(t)&&!n||t.getPreloaded(),e.deactivate(Fe)),ge=t,je=!1,xe.initialize(ge.getStreamInfo(),Fe),Se.getElement()?A(n,e,!1,Fe):function(e){M(e,Fe)}(n))}function A(e,t,n,i){function r(){we&&(W.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),we.removeEventListener("sourceopen",r),we.removeEventListener("webkitsourceopen",r),P(),t||$.trigger(d.default.SOURCE_INITIALIZED),n?ge.setMediaSource(we):M(e,i))}var a=void 0;we?i?(M(e,i),t||$.trigger(d.default.SOURCE_INITIALIZED)):(re.detachMediaSource(Se),we.addEventListener("sourceopen",r,!1),we.addEventListener("webkitsourceopen",r,!1),a=re.attachMediaSource(we,Se),W.debug("MediaSource attached to element.  Waiting on open...")):((we=re.createMediaSource()).addEventListener("sourceopen",r,!1),we.addEventListener("webkitsourceopen",r,!1),a=re.attachMediaSource(we,Se),W.debug("MediaSource attached to element.  Waiting on open..."))}function M(e,t){Le=ge.activate(we,t?Le:void 0),Re=O(a.default.AUDIO),Pe=O(a.default.VIDEO),Ae||(isNaN(e)?function(){var e=xe.getStreamStartTime(!0);t||ge.getProcessors().forEach(function(t){te.setIndexHandlerTime(t,e)})}():xe.seek(e)),ge.startEventController(),!_e&&Ae||xe.play(),be=!1,$.trigger(d.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ge.getStreamInfo()})}function P(e){var t=e||ge.getStreamInfo().manifestInfo.duration,n=re.setDuration(we,t);W.debug("Duration successfully set to: "+n)}function R(e){for(var t=0,n=me.length;t<n;t++)if(me[t].getId()===e.id)return me[t];return null}function D(){var e=Z.getValue();ve&&($.trigger(d.default.PROTECTION_CREATED,{controller:ve,manifest:e}),ve.setMediaElement(Se.getElement()),ye&&ve.setProtectionData(ye)),function(){try{var e=te.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var t=ie.getCurrentManifestUpdate(ne.getMetricsFor(a.default.STREAM));ne.updateManifestUpdateInfo(t,{currentTime:xe.getTime(),buffered:Se.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:pe.getClientTimeOffset()});for(var n=0,i=e.length;n<i;n++){var r=e[n],o=R(r);o?o.updateData(r):(o=(0,s.default)(Y).create({manifestModel:Z,dashManifestModel:ee,mediaPlayerModel:Ie,metricsModel:ne,dashMetrics:ie,manifestUpdater:Q,adapter:te,timelineConverter:pe,capabilities:X,errHandler:he,baseURLController:oe,domStorage:se,abrController:le,playbackController:xe,mediaController:ue,textController:de,videoModel:Se,streamController:K}),me.push(o),o.initialize(r,ve)),ne.addManifestUpdateStreamInfo(t,r.id,r.index,r.start,r.duration)}if(!ge){var l=xe.getStartTimeFromUriParameters(),u=null;l&&(u=S(isNaN(l.fragS)?l.fragT:l.fragS)),C(null,null!==u?u:me[0],NaN)}$.trigger(d.default.STREAMS_COMPOSED)}catch(e){he.manifestError(e.message,"nostreamscomposed",Z.getValue()),Te=!0,H()}}()}function k(e){e.error?(Te=!0,H()):function(){var t=e.manifest;te.updatePeriods(t);var n=te.getStreamsInfo(void 0,1)[0],i=te.getMediaInfoForType(n,a.default.VIDEO)||te.getMediaInfoForType(n,a.default.AUDIO),r=void 0;i&&(r=ee.getUseCalculatedLiveEdgeTimeForAdaptation(te.getDataForMedia(i)))&&(W.debug("SegmentTimeline detected using calculated Live Edge Time"),Ie.setUseManifestDateHeaderTimeSource(!1));var o=ee.getUTCTimingSources(e.manifest),s=!ee.getIsDynamic(t)||r?o:o.concat(Ie.getUTCTimingSources()),l=fe.isHTTPS(e.manifest.url);s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===c.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),W.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),oe.initialize(t),ae.setConfig({metricsModel:ne,dashMetrics:ie,baseURLController:oe}),ae.initialize(s,Ie.getUseManifestDateHeaderTimeSource())}()}function N(){return Pe}function O(e){var t=!1;return ge&&ge.getProcessors().forEach(function(n){n.getMediaInfo().type===e&&(t=!0)}),t}function L(e,t){t=t||new Date,Me&&(ge&&ge.getProcessors().forEach(function(n){var i=n.getScheduleController();i&&i.finalisePlayList(t,e)}),ne.addPlayList(Me),Me=null)}function F(e){(Me=new h.PlayList).start=new Date,Me.mstart=1e3*xe.getTime(),Me.starttype=e,ge&&ge.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Me)})}function j(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}Ee=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),W.fatal("Video Element Error: "+t),e.error&&W.fatal(e.error),he.mediaSourceError(t),H()}}function B(){return ge?ge.getStreamInfo():null}function U(){if(!(J&&J.hasOwnProperty("load")&&pe&&pe.hasOwnProperty("initialize")&&pe.hasOwnProperty("reset")&&pe.hasOwnProperty("getClientTimeOffset")))throw new Error("setConfig function has to be called previously")}function V(e){isNaN(e.newDuration)||P(e.newDuration)}function q(){me=[],ve=null,be=!1,ge=null,Ee=!1,Te=!1,Pe=void 0,Re=void 0,Ae=!0,Ce=!1,_e=!0,Me=null,ke=void 0,De=!1,Oe=0}function H(){U(),ae.reset(),L(Ee||Te?h.PlayListTrace.FAILURE_STOP_REASON:h.PlayListTrace.USER_REQUEST_STOP_REASON);for(var t=0,a=me?me.length:0;t<a;t++)me[t].reset(Ee);$.off(d.default.PLAYBACK_TIME_UPDATED,e,this),$.off(d.default.PLAYBACK_SEEKING,n,this),$.off(d.default.PLAYBACK_ERROR,j,this),$.off(d.default.PLAYBACK_STARTED,i,this),$.off(d.default.PLAYBACK_PAUSED,r,this),$.off(d.default.PLAYBACK_ENDED,x,this),$.off(d.default.MANIFEST_UPDATED,k,this),$.off(d.default.STREAM_BUFFERING_COMPLETED,T,this),$.off(v.default.METRIC_ADDED,z,this),$.off(d.default.MANIFEST_VALIDITY_CHANGED,V,this),oe.reset(),Q.reset(),ne.clearAllCurrentMetrics(),Z.setValue(null),J.reset(),pe.reset(),ce.reset(),we&&(re.detachMediaSource(Se),we=null),Se=null,ve&&(ve.setMediaElement(null),ve=null,ye=null,Z.getValue()&&$.trigger(d.default.PROTECTION_DESTROYED,{data:Z.getValue().url})),$.trigger(d.default.STREAM_TEARDOWN_COMPLETE),q()}function z(e){e.metric===o.default.DVR_INFO&&e.mediaType===a.default.AUDIO&&re.setSeekable(we,e.value.range.start,e.value.range.end)}var G=40,Y=this.context,$=(0,u.default)(Y).getInstance(),K=void 0,W=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,be=void 0,Ee=void 0,Te=void 0,we=void 0,Se=void 0,xe=void 0,Ie=void 0,Ce=void 0,Ae=void 0,Me=void 0,Pe=void 0,Re=void 0,De=void 0,ke=void 0,Ne=void 0,Oe=void 0,Le=void 0,Fe=void 0,je=void 0,Be=void 0;return K={initialize:function(a,o){U(),_e=a,ye=o,pe.initialize(),(Q=(0,l.default)(Y).create()).setConfig({manifestModel:Z,dashManifestModel:ee,mediaPlayerModel:Ie,manifestLoader:J,errHandler:he}),Q.initialize(),oe.setConfig({dashManifestModel:ee}),$.on(d.default.TIME_SYNCHRONIZATION_COMPLETED,D,this),$.on(d.default.PLAYBACK_SEEKING,n,this),$.on(d.default.PLAYBACK_TIME_UPDATED,e,this),$.on(d.default.PLAYBACK_ENDED,x,this),$.on(d.default.PLAYBACK_ERROR,j,this),$.on(d.default.PLAYBACK_STARTED,i,this),$.on(d.default.PLAYBACK_PAUSED,r,this),$.on(d.default.MANIFEST_UPDATED,k,this),$.on(d.default.STREAM_BUFFERING_COMPLETED,T,this),$.on(d.default.MANIFEST_VALIDITY_CHANGED,V,this),$.on(d.default.WALLCLOCK_TIME_UPDATED,t,this),$.on(v.default.METRIC_ADDED,z,this)},getActiveStreamInfo:B,isVideoTrackPresent:N,isAudioTrackPresent:function(){return Re},switchToVideoElement:function(e){ge&&(xe.initialize(ge.getStreamInfo()),A(e,null,!0,!1))},getStreamById:function(e){return me.filter(function(t){return t.getId()===e})[0]},getStreamForTime:S,getTimeRelativeToStreamId:function(e,t){for(var n=null,i=0,r=0,a=null,o=me.length,s=0;s<o;s++){if(r=(n=me[s]).getStartTime(),a=n.getDuration(),Number.isFinite(r)&&(i=r),n.getId()===t)return e-i;Number.isFinite(a)&&(i+=a)}return null},load:function(e){U(),J.load(e)},loadWithManifest:function(e){(function(){if(!Q||!Q.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),Q.setManifest(e)},getActiveStreamProcessors:function(){return ge?ge.getProcessors():[]},setConfig:function(e){e&&(e.capabilities&&(X=e.capabilities),e.manifestLoader&&(J=e.manifestLoader),e.manifestModel&&(Z=e.manifestModel),e.dashManifestModel&&(ee=e.dashManifestModel),e.mediaPlayerModel&&(Ie=e.mediaPlayerModel),e.protectionController&&(ve=e.protectionController),e.adapter&&(te=e.adapter),e.metricsModel&&(ne=e.metricsModel),e.dashMetrics&&(ie=e.dashMetrics),e.errHandler&&(he=e.errHandler),e.timelineConverter&&(pe=e.timelineConverter),e.videoModel&&(Se=e.videoModel),e.playbackController&&(xe=e.playbackController),e.domStorage&&(se=e.domStorage),e.abrController&&(le=e.abrController),e.mediaController&&(ue=e.mediaController),e.textController&&(de=e.textController))},setProtectionData:function(e){ye=e},reset:H},W=(0,p.default)(Y).getInstance().getLogger(K),ae=(0,y.default)(Y).getInstance(),oe=(0,_.default)(Y).getInstance(),re=(0,b.default)(Y).getInstance(),ce=(0,m.default)(Y).getInstance(),fe=(0,g.default)(Y).getInstance(),q(),K}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(101)),s=i(e(97)),l=i(e(91)),u=i(e(47)),d=i(e(51)),c=i(e(142)),f=i(e(48)),h=e(235),p=i(e(46)),m=i(e(202)),g=i(e(208)),v=i(e(93)),y=i(e(114)),_=i(e(104)),b=i(e(110));r.__dashjs_factory_name="StreamController",n.default=f.default.getSingletonFactory(r),t.exports=n.default},{100:100,101:101,104:104,110:110,114:114,142:142,202:202,208:208,235:235,46:46,47:47,48:48,51:51,91:91,93:93,97:97}],114:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){I=e}function t(e){e}function n(e){x=e}function i(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,n=void 0,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function r(e){return Date.parse(e)}function d(e){return Date.parse(e)}function m(e,t,n){n()}function g(e,t,n){var r=i(e);isNaN(r)?n():t(r)}function v(e,t,n,i,r){var a,o,l=!1,u=new XMLHttpRequest,d=r?s.HTTPRequest.HEAD:s.HTTPRequest.GET,c=t.match(/\S+/g);if(t=c.shift(),a=function(){l||(l=!0,c.length?v(e,c.join(" "),n,i,r):i())},o=function(){var t=void 0,i=void 0;200===u.status&&(t=r?u.getResponseHeader("Date"):u.response,i=e(t),isNaN(i)||(n(i),l=!0))},T.isRelative(t)){var f=R.resolve();f&&(t=T.resolve(t,f.url))}u.open(d,t),u.timeout=p||0,u.onload=o,u.onloadend=a,u.send()}function y(e,t,n){v(d,e,t,n,!0)}function _(t,n,i){e(!1),E.trigger(u.default.TIME_SYNCHRONIZATION_COMPLETED,{time:n,offset:i,error:t?new o.default(h):null})}var b=this.context,E=(0,l.default)(b).getInstance(),T=(0,f.default)(b).getInstance(),w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=void 0,M=void 0,P=void 0,R=void 0;return w={initialize:function(o,s){C=s,x=0,I=!1,!1,A={"urn:mpeg:dash:utc:http-head:2014":y,"urn:mpeg:dash:utc:http-xsdate:2014":v.bind(null,i),"urn:mpeg:dash:utc:http-iso:2014":v.bind(null,r),"urn:mpeg:dash:utc:direct:2014":g,"urn:mpeg:dash:utc:http-head:2012":y,"urn:mpeg:dash:utc:http-xsdate:2012":v.bind(null,i),"urn:mpeg:dash:utc:http-iso:2012":v.bind(null,r),"urn:mpeg:dash:utc:direct:2012":g,"urn:mpeg:dash:utc:http-ntp:2014":m,"urn:mpeg:dash:utc:ntp:2014":m,"urn:mpeg:dash:utc:sntp:2014":m},I||(function t(i,r){var o=r||0,s=i[o],l=function(e,t){var i=!e||!t;i&&C?function(){var e=M.getReadOnlyMetricsFor(a.default.STREAM),t=P.getLatestMPDRequestHeaderValueByID(e,"Date"),i=null!==t?new Date(t).getTime():Number.NaN;isNaN(i)?_(!0):(n(i-(new Date).getTime()),_(!1,i/1e3,x))}():_(i,e,t)};e(!0),s?A.hasOwnProperty(s.schemeIdUri)?A[s.schemeIdUri](s.value,function(e){var t=(new Date).getTime(),i=1e3*Math.trunc((e-t)/1e3);n(i),S.debug("Local time: "+new Date(t)),S.debug("Server time: "+new Date(e)),S.info("Server Time - Local Time (ms): "+i),l(e,i)},function(){t(i,o+1)}):t(i,o+1):(n(0),l())}(o),t(!0))},getOffsetToDeviceTimeMs:function(){return x},setConfig:function(e){e&&(e.metricsModel&&(M=e.metricsModel),e.dashMetrics&&(P=e.dashMetrics),e.baseURLController&&(R=e.baseURLController))},reset:function(){t(!1),e(!1)}},S=(0,c.default)(b).getInstance().getLogger(w),w}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(213)),s=e(233),l=i(e(47)),u=i(e(51)),d=i(e(48)),c=i(e(46)),f=i(e(208)),h=1,p=5e3;r.__dashjs_factory_name="TimeSyncController";var m=d.default.getSingletonFactory(r);m.TIME_SYNC_FAILED_ERROR_CODE=h,m.HTTP_TIMEOUT_MS=p,d.default.updateSingletonFactory(r.__dashjs_factory_name,m),n.default=m,t.exports=n.default},{100:100,208:208,213:213,233:233,46:46,47:47,48:48,51:51}],115:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t,n){var r={},a=void 0,o=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&i(r);for(var s=0;s<r.elements.length;s++)a=r.elements[s],o=_.isHTTPURL(a.url)?a.url:a.originalContent.BaseURL+a.url,x.load(o,a,r)}function n(e){var t,n=void 0,r="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var a=0;0===n.resolvedContent.indexOf("<?xml")&&(a=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,a)+"<response>"+n.resolvedContent.substr(a)+"</response>",n.resolvedContent=S.xml_str2json(r)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&i(t)}function i(e){var n=[],i=void 0,a=void 0;if(function(e){var t=[],n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;a>=0;a--){if(n=e.elements[a],i=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[i].length;o++)r=n.resolvedContent[i][o],t.push(r)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[i].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[i].splice(n.index+s,0,t[s]);t=[]}e.elements.length>0&&T.run(w)}(e),e.resolveType===f&&y.trigger(s.default.XLINK_READY,{manifest:w}),e.resolveType===c)switch(e.type){case h:for(i=0;i<w[h+"_asArray"].length;i++)(a=w[h+"_asArray"][i]).hasOwnProperty(p+"_asArray")&&(n=n.concat(r(a[p+"_asArray"],a,p,c))),a.hasOwnProperty(m+"_asArray")&&(n=n.concat(r(a[m+"_asArray"],a,m,c)));t(n,p,c);break;case p:y.trigger(s.default.XLINK_READY,{manifest:w})}}function r(e,t,n,i){var r=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;o>=0;o--)(a=e[o]).hasOwnProperty("xlink:href")&&a["xlink:href"]===g&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===i&&(s=l(a["xlink:href"],t,n,o,i,a),r.push(s));return r}function l(e,t,n,i,r,a){return{url:e,parentElement:t,type:n,index:i,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1}}e=e||{};var v=this.context,y=(0,o.default)(v).getInstance(),_=(0,d.default)(v).getInstance(),b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0;return b={resolveManifestOnLoad:function(e){S=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:E}),t(r((w=e).Period_asArray,w,h,c),h,c)},setMatchers:function(e){e&&(E=e)},setIron:function(e){e&&(T=e)},reset:function(){y.off(s.default.XLINK_ELEMENT_LOADED,n,b),x&&(x.reset(),x=null)}},y.on(s.default.XLINK_ELEMENT_LOADED,n,b),x=(0,a.default)(v).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),b}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(99)),o=i(e(47)),s=i(e(51)),l=i(e(48)),u=i(e(3)),d=i(e(208)),c="onLoad",f="onActuate",h="Period",p="AdaptationSet",m="EventStream",g="urn:mpeg:dash:resolve-to-zero:2013";r.__dashjs_factory_name="XlinkController",n.default=l.default.getClassFactory(r),t.exports=n.default},{208:208,3:3,47:47,48:48,51:51,99:99}],116:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context;return{createMetricsReporting:function(t){return(0,a.default)(e).getInstance({eventBus:t.eventBus,metricsModel:t.metricsModel,metricsConstants:t.metricsConstants,events:t.events}),(0,s.default)(e).create(t)},getReportingFactory:function(){return(0,u.default)(e).getInstance()},getMetricsHandlerFactory:function(){return(0,l.default)(e).getInstance()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(130)),o=i(e(117)),s=i(e(118)),l=i(e(123)),u=i(e(128));r.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(r);d.events=o.default,dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,d),n.default=d,t.exports=n.default},{117:117,118:118,123:123,128:128,130:130}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(52)),a=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}());n.default=a,t.exports=n.default},{52:52}],118:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t){if(!t.error){var n=Object.keys(i);(0,o.default)(r).getInstance({dashManifestModel:e.dashManifestModel,constants:e.constants}).getMetrics(t.manifest).forEach(function(t){var o=JSON.stringify(t);if(i.hasOwnProperty(o))n.splice(o,1);else try{var s=(0,a.default)(r).create(e);s.initialize(t),i[o]=s}catch(t){}}),n.forEach(function(e){i[e].reset(),delete i[e]}),l.trigger(s.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(i).forEach(function(e){i[e].reset()}),i={}}e=e||{};var i={},r=this.context,l=e.eventBus,u=e.events;return l.on(u.MANIFEST_UPDATED,t),l.on(u.STREAM_TEARDOWN_COMPLETE,n),{reset:function(){l.off(u.MANIFEST_UPDATED,t),l.off(u.STREAM_TEARDOWN_COMPLETE,n)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(119)),o=i(e(132)),s=i(e(117));r.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{117:117,119:119,132:132}],119:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){n&&n.reset(),i&&i.reset(),r&&r.reset()}e=e||{};var n=void 0,i=void 0,r=void 0,l=this.context;return{initialize:function(u){try{(r=(0,a.default)(l).create({mediaElement:e.mediaElement})).initialize(u.Range),(i=(0,o.default)(l).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(u.Reporting,r),(n=(0,s.default)(l).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(u.metrics,i)}catch(e){throw t(),e}},reset:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(121)),o=i(e(122)),s=i(e(120));r.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{120:120,121:121,122:122}],120:[function(e,t,n){"use strict";function i(e){function t(e){n.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}e=e||{};var n=[],i=void 0,a=this.context,o=e.eventBus,s=e.events,l=(0,r.default)(a).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});return i={initialize:function(e,r){e.split(",").forEach(function(e,t,i){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=i[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete i[t+1])}(a=l.create(e,r))&&n.push(a)}),o.on(s.METRIC_ADDED,t,i),o.on(s.METRIC_UPDATED,t,i)},reset:function(){o.off(s.METRIC_ADDED,t,i),o.off(s.METRIC_UPDATED,t,i),n.forEach(function(e){return e.reset()}),n=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(123));i.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{123:123}],121:[function(e,t,n){"use strict";function i(e){e=e||{};var t,n=!1,i=this.context,a=void 0,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;a.add(t,n)}),n=!!e[0]._useWallClockTime)},reset:function(){a.clear()},isEnabled:function(){var e,t=a.length;if(!t)return!0;e=n?(new Date).getTime()/1e3:o.currentTime;for(var i=0;i<t;i+=1){var r=a.start(i),s=a.end(i);if(r<=e&&e<s)return!0}return!1}},a=(0,r.default)(i).create(),t}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(198));i.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{198:198}],122:[function(e,t,n){"use strict";function i(e){var t=[],n=(0,r.default)(this.context).getInstance(e);return{initialize:function(e,i){e.some(function(e){var r=n.create(e,i);if(r)return t.push(r),!0})},reset:function(){t.forEach(function(e){return e.reset()}),t=[]},report:function(e,n){t.forEach(function(t){return t.report(e,n)})}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(128));i.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{128:128}],123:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(e=e||{}).debug,n=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,i=this.context,r={BufferLevel:a.default,DVBErrors:o.default,HttpList:s.default,PlayList:l.default,RepSwitchList:l.default,TcpList:l.default};return{create:function(a,o){var s,l=a.match(n);if(l){try{(s=r[l[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(l[1],o,l[3],l[5])}catch(e){s=null,t.error("MetricsHandlerFactory: Could not create handler for type "+l[1]+" with args "+l[3]+", "+l[5]+" ("+e.message+")")}return s}},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(124)),o=i(e(125)),s=i(e(127)),l=i(e(126));r.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{124:124,125:125,126:126,127:127}],124:[function(e,t,n){"use strict";function i(e){function t(){var e=function(){try{return Object.keys(d).map(function(e){return d[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&s!==e.t&&(s=e.t,n.report(a,e))}e=e||{};var n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=this.context,u=(0,r.default)(l).getInstance(),d=[],c=e.metricsConstants;return{initialize:function(e,r,s){r&&(i=u.validateN(s),n=r,a=u.reconstructFullMetricName(e,s),o=setInterval(t,i))},reset:function(){clearInterval(o),o=null,i=0,n=null,s=null},handleNewMetric:function(e,t,n){e===c.BUFFER_LEVEL&&(d[n]=t)}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(131));i.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{131:131}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e(117));n.default=dashjs.FactoryMaker.getClassFactory(function(e){function t(){r.off(i.default.METRICS_INITIALISATION_COMPLETE,t,this),r.trigger(i.default.BECAME_REPORTING_PLAYER)}var n=void 0,r=(e=e||{}).eventBus,a=e.metricsConstants;return{initialize:function(e,a){a&&(n=a,r.on(i.default.METRICS_INITIALISATION_COMPLETE,t,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===a.DVB_ERRORS&&n&&n.report(e,t)}}}),t.exports=n.default},{117:117}],126:[function(e,t,n){"use strict";function i(){var e=void 0,t=void 0;return{initialize:function(n,i){e=n,t=i},reset:function(){t=null,e=void 0},handleNewMetric:function(n,i){n===e&&t&&t.report(e,i)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{}],127:[function(e,t,n){"use strict";function i(e){function t(){var e=l;e.length&&n&&n.report(o,e),l=[]}e=e||{};var n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=[],u=(0,r.default)(this.context).getInstance(),d=e.metricsConstants;return{initialize:function(e,r,l,d){r&&(i=u.validateN(l),n=r,d&&d.length&&(a=d),o=u.reconstructFullMetricName(e,l,d),s=setInterval(t,i))},reset:function(){clearInterval(s),s=null,i=null,a=null,l=[],n=null},handleNewMetric:function(e,t){e===d.HTTP_REQUEST&&(a&&a!==t.type||l.push(t))}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(131));i.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{131:131}],128:[function(e,t,n){"use strict";function i(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":r.default},n=this.context,i=e.debug,a=e.metricsConstants;return{create:function(e,r){var o=void 0;try{(o=t[e.schemeIdUri](n).create({metricsConstants:a})).initialize(e,r)}catch(t){o=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return o},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(129));i.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{129:129}],129:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,n=(0,a.default)(t).getInstance(),i=(0,o.default)(t).getInstance(),r=!0,s=!1,l=!1,u=null,d=null,c=!0,f=[],h=e.metricsConstants;return{report:function(e,t){Array.isArray(t)||(t=[t]),s&&d.isEnabled()&&t.forEach(function(t){var i=n.serialise(t);r&&e!==h.DVB_ERRORS&&(i="metricname="+e+"&"+i),function(e,t,n){var i=new XMLHttpRequest,r=function(){var e=f.indexOf(i);-1!==e&&(f.splice(e,1),i.status>=200&&i.status<300?t&&t():n&&n())};f.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}(i=u+"?"+i,null,function(){s=!1})})},initialize:function(e,t){var n=void 0;if(d=t,!(u=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");l||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=i.random())&&(s=!0),l=!0)},reset:function(){c||(f.forEach(function(e){return e.abort()}),f=[]),l=!1,s=!1,u=null,d=null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(133)),o=i(e(134));r.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{133:133,134:134}],130:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){var t=new a.default;if(h){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=h.originalUrl||h.url),t.terror||(t.terror=new Date),f.addDVBErrors(t)}}function n(e){e.error||(h=e.manifest)}function i(e){t({errorcode:a.default.BASE_URL_CHANGED,servicelocation:e.entry})}function r(){t({errorcode:a.default.BECAME_REPORTER})}function s(e){switch(e.metric){case p.HTTP_REQUEST:!function(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||a.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}(e.value)}}function l(e){var n=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:n=a.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=a.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function u(){c.on(m.MANIFEST_UPDATED,n,d),c.on(m.SERVICE_LOCATION_BLACKLIST_CHANGED,i,d),c.on(m.METRIC_ADDED,s,d),c.on(m.METRIC_UPDATED,s,d),c.on(m.PLAYBACK_ERROR,l,d),c.on(o.default.BECAME_REPORTING_PLAYER,r,d)}var d=void 0,c=(e=e||{}).eventBus,f=e.metricsModel,h=void 0,p=e.metricsConstants,m=e.events;return d={initialise:u,reset:function(){c.off(m.MANIFEST_UPDATED,n,d),c.off(m.SERVICE_LOCATION_BLACKLIST_CHANGED,i,d),c.off(m.METRIC_ADDED,s,d),c.off(m.METRIC_UPDATED,s,d),c.off(m.PLAYBACK_ERROR,l,d),c.off(o.default.BECAME_REPORTING_PLAYER,r,d)}},u(),d}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(135)),o=i(e(117));r.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{117:117,135:135}],131:[function(e,t,n){"use strict";function i(){return{reconstructFullMetricName:function(e,t,n){var i=e;return t&&(i+="("+t,n&&n.length&&(i+=","+n),i+=")"),i},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],132:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t,r){var a,o,s=n.getMpd(e),l=0;return t?l=s.availabilityStartTime.getTime()/1e3:(a=this.getRegularPeriods(s)).length&&(l=a[0].start),o=l,r&&r.hasOwnProperty(i.START_TIME)&&(o+=r.starttime),o}var n=(e=e||{}).dashManifestModel,i=e.constants;return{getMetrics:function(e){var r=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(l){var u=new a.default,d=n.getIsDynamic(e);l.hasOwnProperty("metrics")&&(u.metrics=l.metrics,l.Range_asArray&&l.Range_asArray.forEach(function(i){var r=new o.default;r.starttime=t(e,d,i),i.hasOwnProperty("duration")?r.duration=i.duration:r.duration=n.getDuration(e),r._useWallClockTime=d,u.Range.push(r)}),l.Reporting_asArray&&(l.Reporting_asArray.forEach(function(e){var t=new s.default;if(e.hasOwnProperty(i.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);u.Reporting.push(t)}}),r.push(u)))}),r}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(136)),o=i(e(137)),s=i(e(138));r.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{136:136,137:137,138:138}],133:[function(e,t,n){"use strict";function i(){return{serialise:function e(t){var n=[],i=[],r=void 0,a=void 0;for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null!=(a=t[r])||(a=""),Array.isArray(a)){if(!a.length)continue;i=[],a.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);i.push(n?t:e(t))}),a=i.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));n.push(r+"="+a)}return n.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],134:[function(e,t,n){"use strict";function i(){function e(){n&&(o||(o=new i(a)),n.getRandomValues(o),s=0)}var t,n=window.crypto||window.msCrypto,i=Uint32Array,r=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0;return t={random:function(t,i){var a=void 0;return t||(t=0),i||(i=1),n?(s===o.length&&e(),a=o[s]/r,s+=1):a=Math.random(),a*(i-t)+t}},e(),t}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],139:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e,t,n){var i=r.getBaseURLsFromElement(n);e[t]?u.areEqual(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=s):e[t]=new l(i)}function t(){i=new l}var n,i=void 0,r=void 0,o=this.context,u=(0,a.default)(o).getInstance();return n={reset:t,update:function(t){!function(t){var n=r.getBaseURLsFromElement(t);u.areEqual(n,i.data.baseUrls)||(i.data.baseUrls=n,i.data.selectedIdx=s),t.Period_asArray&&t.Period_asArray.forEach(function(t,n){e(i.children,n,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,a){e(i.children[n].children,a,t),t.Representation_asArray&&t.Representation_asArray.sort(r.getRepresentationSortFunction()).forEach(function(t,r){e(i.children[n].children[a].children,r,t)})})})}(t)},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(e){!function e(t,n){var r=n||i;t(r.data),r.children&&r.children.forEach(function(n){return e(t,n)})}(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=s)})},setConfig:function(e){e.dashManifestModel&&(r=e.dashManifestModel)}},t(),n}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(205)),o=i(e(48)),s=NaN,l=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data={baseUrls:t||null,selectedIdx:n||s},this.children=[]};r.__dashjs_factory_name="BaseURLTreeModel",n.default=o.default.getClassFactory(r),t.exports=n.default},{205:205,48:48}],140:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){return!!e&&function(t){var n=!1;return t.some(function(t){if(function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex&&e.type===t.type}(e,t)||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,t)||function(e,t){return e.action===l.default.ACTION_COMPLETE&&e.action===t.action}(e,t))return n=!0}),n}(x)}function n(e){return isNaN(e.duration)?.25:e.duration/8}function i(e){x=x.filter(function(t){var i=n(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-i})}function r(e,t){t<=e+.5||(x=x.filter(function(i){var r=n(i);return isNaN(i.startTime)||i.startTime>=t-r||isNaN(i.duration)||i.startTime+i.duration<=e+r}))}function s(e,t,i){for(var r=e.length-1;r>=0;r--){var a=e[r],o=a.startTime,s=o+a.duration;if(i=isNaN(i)?n(a):i,!isNaN(o)&&!isNaN(s)&&t+i>=o&&t-i<s||isNaN(o)&&isNaN(t))return a}return null}function h(e,t){b.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),b.addRequestsQueue(e.mediaType,I,x)}function p(e){e.sender===E&&(I.splice(I.indexOf(e.request),1),e.response&&!e.error&&x.push(e.request),h(e.request,e.error?f:c),_.trigger(o.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function m(e){e.sender===E&&_.trigger(o.default.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function g(e){e.sender===E&&_.trigger(o.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function v(){x=[],I=[]}e=e||{};var y=this.context,_=(0,a.default)(y).getInstance(),b=e.metricsModel,E=e.fragmentLoader,T=void 0,w=void 0,S=void 0,x=void 0,I=void 0;return T={setStreamProcessor:function(e){S=e},getStreamProcessor:function(){return S},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach(function(t){var i=function(e){var t=void 0;switch(e){case d:t=I;break;case c:t=x;break;default:t=[]}return t}(t);n=n.concat(function(e,t){return t.hasOwnProperty("time")?[s(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}(i,e))}),n},isFragmentLoaded:t,isFragmentLoadedOrPending:function(e){var n=!1,i=0,r=void 0;if(!(n=t(e)))for(i=0;i<I.length;i++)r=I[i],e.url===r.url&&e.startTime===r.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:i,removeExecutedRequestsAfterTime:function(e){x=x.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime+t.duration<e})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,a=0,o=e.length;a<o;a++)r(n,e.start(a)),n=e.end(a);t>0&&r(n,t)}else i()},abortRequests:function(){E.abort(),I=[]},executeRequest:function(e){switch(e.action){case l.default.ACTION_COMPLETE:x.push(e),h(e,c),w.debug("executeRequest trigger STREAM_COMPLETED"),_.trigger(o.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case l.default.ACTION_DOWNLOAD:h(e,d),I.push(e),function(e){_.trigger(o.default.FRAGMENT_LOADING_STARTED,{sender:T,request:e}),E.load(e)}(e);break;default:w.warn("Unknown request action.")}},reset:function(){_.off(o.default.LOADING_COMPLETED,p,this),_.off(o.default.LOADING_DATA_PROGRESS,m,this),_.off(o.default.LOADING_ABANDONED,g,this),E&&E.reset(),v()},addExecutedRequest:function(e){x.push(e)}},w=(0,u.default)(y).getInstance().getLogger(T),v(),_.on(o.default.LOADING_COMPLETED,p,T),_.on(o.default.LOADING_DATA_PROGRESS,m,T),_.on(o.default.LOADING_ABANDONED,g,T),T}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48)),l=i(e(215)),u=i(e(46)),d="loading",c="executed",f="failed";r.__dashjs_factory_name="FragmentModel";var h=s.default.getClassFactory(r);h.FRAGMENT_MODEL_LOADING=d,h.FRAGMENT_MODEL_EXECUTED=c,h.FRAGMENT_MODEL_CANCELED="canceled",h.FRAGMENT_MODEL_FAILED=f,s.default.updateClassFactory(r.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{215:215,46:46,47:47,48:48,51:51}],141:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){n=e,e&&t.trigger(o.default.MANIFEST_LOADED,{data:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48));r.__dashjs_factory_name="ManifestModel",n.default=s.default.getSingletonFactory(r),t.exports=n.default},{47:47,48:48,51:51}],142:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){function e(e){var t=void 0;for(t=0;t<oe.length;t++)if(oe[t].rulename===e)return t;return-1}function t(){return ce}var n,i=void 0,a=void 0,o=void 0,j=void 0,B=void 0,U=void 0,V=void 0,q=void 0,H=void 0,z=void 0,G=void 0,Y=void 0,$=void 0,K=void 0,W=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,ie=void 0,re=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0;return n={setABRStrategy:function(e){ne=e},getABRStrategy:function(){return ne},setUseDefaultABRRules:function(e){ie=e},getUseDefaultABRRules:function(){return ie},getABRCustomRules:function(){return oe},addABRCustomRule:function(t,n,i){var r=e(n);-1===r?oe.push({type:t,rulename:n,rule:i}):(oe[r].type=t,oe[r].rule=i)},removeABRCustomRule:function(t){var n=e(t);-1!==n&&oe.splice(n,1)},removeAllABRCustomRule:function(){oe=[]},setBandwidthSafetyFactor:function(e){Q=e},getBandwidthSafetyFactor:function(){return Q},setAbandonLoadTimeout:function(e){J=e},getAbandonLoadTimeout:function(){return J},setLastBitrateCachingInfo:function(e,t){z.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(z.ttl=t)},getLastBitrateCachingInfo:function(){return z},setLastMediaSettingsCachingInfo:function(e,t){G.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(G.ttl=t)},getLastMediaSettingsCachingInfo:function(){return G},setStableBufferTime:function(e){Y=e},getStableBufferTime:function(){var e=isNaN(Y)?ae?y:v:Y;return t()?e/N:e},setBufferTimeAtTopQuality:function(e){$=e},getBufferTimeAtTopQuality:function(){return $},setBufferTimeAtTopQualityLongForm:function(e){K=e},getBufferTimeAtTopQualityLongForm:function(){return K},setLongFormContentDurationThreshold:function(e){W=e},getLongFormContentDurationThreshold:function(){return W},setSegmentOverlapToleranceTime:function(e){X=e},getSegmentOverlapToleranceTime:function(){return X},getCacheLoadThresholdForType:function(e){return le[e]},setCacheLoadThresholdForType:function(e,t){le[e]=t},setBufferToKeep:function(e){V=e},getBufferToKeep:function(){return V},setBufferAheadToKeep:function(e){q=e},getBufferAheadToKeep:function(){return q},setBufferPruningInterval:function(e){H=e},getBufferPruningInterval:function(){return H},setFragmentRetryAttempts:function(e){Z[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryAttempts:function(){return Z[s.HTTPRequest.MEDIA_SEGMENT_TYPE]},setManifestRetryAttempts:function(e){Z[s.HTTPRequest.MPD_TYPE]=e},getManifestRetryAttempts:function(){return Z[s.HTTPRequest.MPD_TYPE]},setRetryAttemptsForType:function(e,t){Z[e]=t},getRetryAttemptsForType:function(e){return t()?Z[e]*O:Z[e]},setFragmentRetryInterval:function(e){ee[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryInterval:function(){return ee[s.HTTPRequest.MEDIA_SEGMENT_TYPE]},setManifestRetryInterval:function(e){ee[s.HTTPRequest.MPD_TYPE]=e},getManifestRetryInterval:function(){return ee[s.HTTPRequest.MPD_TYPE]},setRetryIntervalForType:function(e,t){ee[e]=t},getRetryIntervalForType:function(e){return t()?ee[e]/N:ee[e]},setWallclockTimeUpdateInterval:function(e){te=e},getWallclockTimeUpdateInterval:function(){return te},setScheduleWhilePaused:function(e){U=e},getScheduleWhilePaused:function(){return U},getUseSuggestedPresentationDelay:function(){return a},setUseSuggestedPresentationDelay:function(e){a=e},setLiveDelayFragmentCount:function(e){j=e},getLiveDelayFragmentCount:function(){return j},getLiveDelay:function(){return ce?B||k:B},setLiveDelay:function(e){B=e},setUseManifestDateHeaderTimeSource:function(e){i=e},getUseManifestDateHeaderTimeSource:function(){return i},setUTCTimingSources:function(e){o=e},getUTCTimingSources:function(){return o},setXHRWithCredentialsForType:function e(t,n){t?re[t]=!!n:Object.keys(re).forEach(function(t){e(t,n)})},getXHRWithCredentialsForType:function(e){var t=re[e];return void 0===t?re.default:t},setFastSwitchEnabled:function(e){"boolean"==typeof e&&(ae=e)},getFastSwitchEnabled:function(){return ae},setMovingAverageMethod:function(e){se=e},getMovingAverageMethod:function(){return se},setJumpGaps:function(e){ue=e},getJumpGaps:function(){return ue},setSmallGapLimit:function(e){de=e},getSmallGapLimit:function(){return de},getLowLatencyEnabled:t,setLowLatencyEnabled:function(e){"boolean"==typeof e&&(ce=e)},setManifestUpdateRetryInterval:function(e){fe=e},getManifestUpdateRetryInterval:function(){return fe},setKeepProtectionMediaKeys:function(e){he=e},getKeepProtectionMediaKeys:function(){return he},reset:function(){}},function(){var e,t;o=[],a=!1,i=!0,U=!0,ne=l.default.ABR_STRATEGY_DYNAMIC,ie=!0,ae=!1,z={enabled:!0,ttl:d},G={enabled:!0,ttl:c},j=u,B=void 0,V=p,q=m,H=g,Y=NaN,$=_,K=b,W=E,X=T,Q=f,J=h,te=L,ue=!1,de=w,fe=S,re={default:F},oe=[],se=l.default.MOVING_AVERAGE_SLIDING_WINDOW,ce=!1,r(e={},s.HTTPRequest.MPD_TYPE,M),r(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,R),r(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,C),r(e,s.HTTPRequest.INIT_SEGMENT_TYPE,C),r(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,C),r(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,C),r(e,s.HTTPRequest.OTHER_TYPE,C),Z=e,r(t={},s.HTTPRequest.MPD_TYPE,P),r(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,D),r(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,A),r(t,s.HTTPRequest.INIT_SEGMENT_TYPE,A),r(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,A),r(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,A),r(t,s.HTTPRequest.OTHER_TYPE,A),ee=t,(le={})[l.default.VIDEO]=x,le[l.default.AUDIO]=I,he=!1}(),n}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(48)),s=e(233),l=i(e(100)),u=4,d=36e4,c=36e4,f=.9,h=1e4,p=20,m=80,g=10,v=12,y=20,_=30,b=60,E=600,T=.2,w=.8,S=100,x=50,I=5,C=3,A=1e3,M=3,P=500,R=1,D=500,k=2.8,N=10,O=5,L=50,F=!1;a.__dashjs_factory_name="MediaPlayerModel";var j=o.default.getSingletonFactory(a);j.DEFAULT_UTC_TIMING_SOURCE={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},o.default.updateSingletonFactory(a.__dashjs_factory_name,j),n.default=j,t.exports=n.default},{100:100,233:233,48:48}],143:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){x.trigger(_.default.METRICS_CHANGED)}function t(t){x.trigger(_.default.METRIC_CHANGED,{mediaType:t}),e()}function n(e,n,i){x.trigger(_.default.METRIC_UPDATED,{mediaType:e,metric:n,value:i}),t(e)}function i(e,n,i){x.trigger(_.default.METRIC_ADDED,{mediaType:e,metric:n,value:i}),t(e)}function r(e){var t=void 0;return I.hasOwnProperty(e)?t=I[e]:(t=new s.default,I[e]=t),t}function b(e,t,n){var i=r(e);i[t].push(n),i[t].length>w&&i[t].shift()}function E(e,t,n){b(e,t,n),i(e,t,n)}var T,w=1e3,S=this.context,x=(0,v.default)(S).getInstance(),I=void 0;return T={clearCurrentMetricsForType:function(e){delete I[e],t(e)},clearAllCurrentMetrics:function(){I={},e()},getReadOnlyMetricsFor:function(e){return I.hasOwnProperty(e)?I[e]:null},getMetricsFor:r,addTcpConnection:function(e,t,n,i,r,a){var s=new l.default;return s.tcpid=t,s.dest=n,s.topen=i,s.tclose=r,s.tconnect=a,E(e,o.default.TCP_CONNECTION,s),s},addHttpRequest:function e(t,n,i,r,a,s,l,d,c,f,h,p,m,g){var v=new u.HTTPRequest;return a&&a!==r&&(e(t,null,i,r,null,null,l,d,null,null,null,p,null,null),v.actualurl=a),v.tcpid=n,v.type=i,v.url=r,v.range=l,v.trequest=d,v.tresponse=c,v.responsecode=h,v._tfinish=f,v._stream=t,v._mediaduration=p,v._responseHeaders=m,v._serviceLocation=s,g?g.forEach(function(e){!function(e,t,n,i){var r=new u.HTTPRequestTrace;r.s=t,r.d=n,r.b=i,e.trace.push(r),e.interval||(e.interval=0),e.interval+=n}(v,e.s,e.d,e.b)}):(delete v.interval,delete v.trace),E(t,o.default.HTTP_REQUEST,v),v},addRepresentationSwitch:function(e,t,n,i,r){var a=new d.default;return a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,E(e,o.default.TRACK_SWITCH,a),a},addBufferLevel:function(e,t,n){var i=new c.default;return i.t=t,i.level=n,E(e,o.default.BUFFER_LEVEL,i),i},addBufferState:function(e,t,n){var i=new f.default;return i.target=n,i.state=t,E(e,o.default.BUFFER_STATE,i),i},addDVRInfo:function(e,t,n,i){var r=new h.default;return r.time=t,r.range=i,r.manifestInfo=n,E(e,o.default.DVR_INFO,r),r},addDroppedFrames:function(e,t){var n=new p.default,i=r(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,i.length>0&&i[i.length-1]==n?i[i.length-1]:(E(e,o.default.DROPPED_FRAMES,n),n)},addSchedulingInfo:function(e,t,n,i,r,a,s,l,u){var d=new g.default;return d.mediaType=e,d.t=t,d.type=n,d.startTime=i,d.availabilityStartTime=r,d.duration=a,d.quality=s,d.range=l,d.state=u,E(e,o.default.SCHEDULING_INFO,d),d},addRequestsQueue:function(e,t,n){var a=new y.default;a.loadingRequests=t,a.executedRequests=n,r(e).RequestsQueue=a,i(e,o.default.REQUESTS_QUEUE,a)},addManifestUpdate:function(e,t,n,r,s,l,u,d,c,f){var h=new m.ManifestUpdate;return h.mediaType=e,h.type=t,h.requestTime=n,h.fetchTime=r,h.availabilityStartTime=s,h.presentationStartTime=l,h.clientTimeOffset=u,h.currentTime=d,h.buffered=c,h.latency=f,b(a.default.STREAM,o.default.MANIFEST_UPDATE,h),i(e,o.default.MANIFEST_UPDATE,h),h},updateManifestUpdateInfo:function(e,t){if(e){for(var i in t)e[i]=t[i];n(e.mediaType,o.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,i,r,a){if(e){var s=new m.ManifestUpdateStreamInfo;return s.id=t,s.index=i,s.start=r,s.duration=a,e.streamInfo.push(s),n(e.mediaType,o.default.MANIFEST_UPDATE_STREAM_INFO,e),s}return null},addManifestUpdateRepresentationInfo:function(e,t,i,r,a,s,l,u){if(e){var d=new m.ManifestUpdateRepresentationInfo;return d.id=t,d.index=i,d.streamIndex=r,d.mediaType=a,d.startNumber=l,d.fragmentInfoType=u,d.presentationTimeOffset=s,e.representationInfo.push(d),n(e.mediaType,o.default.MANIFEST_UPDATE_TRACK_INFO,e),d}return null},addPlayList:function(e){var t=a.default.STREAM;return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,E(t,o.default.PLAY_LIST,e),e},addDVBErrors:function(e){return E(a.default.STREAM,o.default.DVB_ERRORS,e),e},setConfig:function(e){e&&e.adapter&&e.adapter}},I={},T}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(101)),s=i(e(221)),l=i(e(239)),u=e(233),d=i(e(236)),c=i(e(229)),f=i(e(230)),h=i(e(231)),p=i(e(232)),m=e(234),g=i(e(238)),v=i(e(47)),y=i(e(237)),_=i(e(51)),b=i(e(48));r.__dashjs_factory_name="MetricsModel",n.default=b.default.getSingletonFactory(r),t.exports=n.default},{100:100,101:101,221:221,229:229,230:230,231:231,232:232,233:233,234:234,236:236,237:237,238:238,239:239,47:47,48:48,51:51}],144:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=void 0;return{initialize:function(t){if(e=new a.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),r=0,o=i.length;r<o;++r){var s=i[r],l=s.indexOf("=");if(-1!==l){var u=s.substring(0,l);e.hasOwnProperty(u)&&(e[u]=s.substr(l+1))}}},getURIFragmentData:function(){return e}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(228)),o=i(e(48));r.__dashjs_factory_name="URIFragmentModel",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{228:228,48:48}],145:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){d&&(d.playbackRate=h||1,d.removeEventListener("canplay",e))}function t(t){d&&(d.readyState<=2&&t>0?d.addEventListener("canplay",e):d.playbackRate=t)}function n(){return v.length>0}function i(){if(d&&n()&&0===d.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),d.dispatchEvent(e)}}function r(){return d?d.buffered:null}var a=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p="element is not video or audio DOM type!",m=this.context,g=(0,o.default)(m).getInstance(),v=[];return a={initialize:function(){g.on(s.default.PLAYBACK_PLAYING,i,this)},setCurrentTime:function(e,t){if(d){if(d.currentTime==e)return;try{e=t?function(e){var t=r(),n=e,i=9999999999;if(t)for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a),l=Math.abs(o-e),u=Math.abs(s-e);if(e>=o&&e<=s)return e;l<i&&(i=l,n=o),u<i&&(i=u,n=s)}return n}(e):e,d.currentTime=e}catch(t){0===d.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){d.currentTime=e},400)}}},play:function(){if(d){d.autoplay=!0;var e=d.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&g.trigger(s.default.PLAYBACK_NOT_ALLOWED),u.warn("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return d?d.paused:null},pause:function(){d&&(d.pause(),d.autoplay=!1)},isSeeking:function(){return d?d.seeking:null},getTime:function(){return d?d.currentTime:null},getPlaybackRate:function(){return d?d.playbackRate:null},getPlayedRanges:function(){return d?d.played:null},getEnded:function(){return d?d.ended:null},setStallState:function(e,i){!function(e,i){i?function(e){var n=void 0;null===e||d.seeking||-1!==v.indexOf(e)||(v.push(e),d&&1===v.length&&((n=document.createEvent("Event")).initEvent("waiting",!0,!1),h=d.playbackRate,t(0),d.dispatchEvent(n)))}(e):function(e){var i=v.indexOf(e),r=void 0;null!==e&&(-1!==i&&v.splice(i,1),d&&!1===n()&&0===d.playbackRate&&(t(h||1),d.paused||((r=document.createEvent("Event")).initEvent("playing",!0,!1),d.dispatchEvent(r))))}(e)}(e,i)},getElement:function(){return d},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw p;(d=e)&&(d.preload="auto")},setSource:function(e){d&&(e?d.src=e:(d.removeAttribute("src"),d.load()))},getSource:function(){return d?d.src:null},getVideoContainer:function(){return f},setVideoContainer:function(e){f=e},getTTMLRenderingDiv:function(){return c},setTTMLRenderingDiv:function(e){(c=e).style.position="absolute",c.style.display="flex",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.top=0,c.style.left=0},getPlaybackQuality:function(){if(!d)return null;var e="webkitDroppedFrameCount"in d&&"webkitDecodedFrameCount"in d,t=null;return"getVideoPlaybackQuality"in d?t=d.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:d.webkitDroppedFrameCount,totalVideoFrames:d.webkitDroppedFrameCount+d.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){d&&d.addEventListener(e,t)},removeEventListener:function(e,t){d&&d.removeEventListener(e,t)},getReadyState:function(){return d?d.readyState:NaN},getBufferRange:r,getClientWidth:function(){return d?d.clientWidth:NaN},getClientHeight:function(){return d?d.clientHeight:NaN},getTextTracks:function(){return d?d.textTracks:[]},getTextTrack:function(e,t,n,i,r){if(d)for(var a=0;a<d.textTracks.length;a++)if(d.textTracks[a].kind===e&&(!t||d.textTracks[a].label==t)&&d.textTracks[a].language===n&&d.textTracks[a].isTTML===i&&d.textTracks[a].isEmbedded===r)return d.textTracks[a];return null},addTextTrack:function(e,t,n){return d?d.addTextTrack(e,t,n):null},appendChild:function(e){d&&(d.appendChild(e),void 0!==e.isTTML&&(d.textTracks[d.textTracks.length-1].isTTML=e.isTTML,d.textTracks[d.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){d&&d.removeChild(e)},getVideoWidth:function(){return d?d.videoWidth:NaN},getVideoHeight:function(){return d?d.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return d&&d.parentNode?d.getBoundingClientRect().top-d.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return d&&d.parentNode?d.getBoundingClientRect().left-d.parentNode.getBoundingClientRect().left:NaN},reset:function(){g.off(s.default.PLAYBACK_PLAYING,i,this)}},u=(0,l.default)(m).getInstance().getLogger(a),a}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(47)),s=i(e(51)),l=i(e(46));r.__dashjs_factory_name="VideoModel",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{46:46,47:47,48:48,51:51}],146:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){e.reader.read().then(t).catch(function(t){e.onerror&&200===e.response.status&&e.onerror(t)})}function n(e,t){if((e=e.filter(function(n){return n.bytes>t/4/e.length})).length>1){var n=function(){var t=0,n=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach(function(i,r){var a=e[r+1];if(a){var o=a.ts-i.ts;t+=o<n?o:0}}),{v:t}}();if("object"==typeof n)return n.v}return null}var i=(e=e||{}).requestModifier;return{load:function(e){var r=new Date,a=e.request,s=new Headers;a.range&&s.append("Range","bytes="+a.range),a.requestStartDate||(a.requestStartDate=r),i&&i.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var l=void 0;"function"==typeof window.AbortController&&(l=new AbortController,e.abortController=l);var u={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:l?l.signal:void 0};fetch(e.url,u).then(function(i){e.response||(e.response={}),e.response.status=i.status,e.response.statusText=i.statusText,e.response.responseURL=i.url,i.ok||e.onerror();var r="",a=!0,s=!1,l=void 0;try{for(var u,d=i.headers.keys()[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var c=u.value;r+=c+": "+i.headers.get(c)+"\n"}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}if(e.response.responseHeaders=r,!i.body)return i.arrayBuffer().then(function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength};e.progress(n),e.onload(),e.onend()});var f=parseInt(i.headers.get("Content-Length"),10),h=0,p=!1,m=new Uint8Array,g=0;e.reader=i.body.getReader();var v=[];t(e,function i(r){var a=r.value;if(r.done)return m&&(e.progress({loaded:h,total:isNaN(f)?h:f,lengthComputable:!0,time:n(v,h)}),e.response.response=m.buffer),e.onload(),void e.onend();if(a&&a.length>0){m=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(m,a),h+=a.length,v.push({ts:Date.now(),bytes:a.length});var s=(0,o.default)().getInstance().findLastTopIsoBoxCompleted(["moov","mdat"],m,g);if(s.found){var l=s.lastCompletedOffset+s.size,u=void 0;l===m.length?(u=m,m=new Uint8Array):(u=new Uint8Array(m.subarray(0,l)),m=m.subarray(l)),e.progress({data:u.buffer,lengthComputable:!1,noTrace:!0}),g=0}else g=s.lastCompletedOffset,p||(e.progress({lengthComputable:!1,noTrace:!0}),p=!0)}t(e,i)})}).catch(function(t){e.onerror&&e.onerror(t)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:n}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(196));r.__dashjs_factory_name="FetchLoader";var s=a.default.getClassFactory(r);n.default=s,t.exports=n.default},{196:196,48:48}],147:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){e=e||{};var t,n=this.context,i=e.errHandler,a=e.metricsModel,u=e.mediaPlayerModel,c=e.requestModifier,f=e.useFetch||!1,h=void 0,p=void 0,m=void 0,g=void 0;return t={load:function(e){e.request&&function e(t,r){var d=t.request,v=[],y=!0,_=!0,b=new Date,E=b,T=0,w=void 0;if(!c||!a||!i)throw new Error("config object is not correct or missing");var S=function(e){_=!1,d.requestStartDate=b,d.requestEndDate=new Date,d.firstByteDate=d.firstByteDate||b,d.checkExistenceOnly||a.addHttpRequest(d.mediaType,null,d.type,d.url,w.response?w.response.responseURL:null,d.serviceLocation||null,d.range||null,d.requestStartDate,d.firstByteDate,d.requestEndDate,w.response?w.response.status:null,d.duration,w.response&&w.response.getAllResponseHeaders?w.response.getAllResponseHeaders():w.response?w.response.responseHeaders:[],e?v:null)},x=function(){-1!==h.indexOf(w)&&(h.splice(h.indexOf(w),1),_&&(S(!1),r>0?(r--,m.push(setTimeout(function(){e(t,r)},u.getRetryIntervalForType(d.type)))):(i.downloadError(g[d.type],d.url,d),t.error&&t.error(d,"error",w.response.statusText),t.complete&&t.complete(d,w.response.statusText))))},I=void 0;I=f&&window.fetch&&"arraybuffer"===d.responseType?(0,s.default)(n).create({requestModifier:c}):(0,o.default)(n).create({requestModifier:c});var C=c.modifyRequestURL(d.url),A=d.checkExistenceOnly?l.HTTPRequest.HEAD:l.HTTPRequest.GET,M=u.getXHRWithCredentialsForType(d.type);w={url:C,method:A,withCredentials:M,request:d,onload:function(){w.response.status>=200&&w.response.status<=299&&(S(!0),t.success&&t.success(w.response.response,w.response.statusText,w.response.responseURL),t.complete&&t.complete(d,w.response.statusText))},onend:x,onerror:x,progress:function(e){var n=new Date;y&&(y=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(d.firstByteDate=n)),e.lengthComputable&&(d.bytesLoaded=e.loaded,d.bytesTotal=e.total),e.noTrace||(v.push({s:E,d:e.time?e.time:n.getTime()-E.getTime(),b:[e.loaded?e.loaded-T:0]}),E=n,T=e.loaded),t.progress&&e&&t.progress(e)},onabort:function(){t.abort&&t.abort(d)},loader:I};var P=(new Date).getTime();isNaN(d.delayLoadingTime)||P>=d.delayLoadingTime?(h.push(w),I.load(w)):function(){var e={httpRequest:w};p.push(e),e.delayTimeout=setTimeout(function(){if(-1!==p.indexOf(e)){p.splice(p.indexOf(e),1);try{b=new Date,E=b,h.push(e.httpRequest),I.load(e.httpRequest)}catch(t){e.httpRequest.onerror()}}},d.delayLoadingTime-P)}()}(e,u.getRetryAttemptsForType(e.request.type))},abort:function(){m.forEach(function(e){return clearTimeout(e)}),m=[],p.forEach(function(e){return clearTimeout(e.delayTimeout)}),p=[],h.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),h=[]}},function(){var e;h=[],p=[],m=[],r(e={},l.HTTPRequest.MPD_TYPE,d.default.DOWNLOAD_ERROR_ID_MANIFEST),r(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,d.default.DOWNLOAD_ERROR_ID_XLINK),r(e,l.HTTPRequest.INIT_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_INITIALIZATION),r(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),r(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),r(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),r(e,l.HTTPRequest.OTHER_TYPE,d.default.DOWNLOAD_ERROR_ID_CONTENT),g=e}(),t}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(148)),s=i(e(146)),l=e(233),u=i(e(48)),d=i(e(201));a.__dashjs_factory_name="HTTPLoader";var c=u.default.getClassFactory(a);n.default=c,t.exports=n.default},{146:146,148:148,201:201,233:233,48:48}],148:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,i=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),i.responseType&&(r.responseType=i.responseType),i.range&&r.setRequestHeader("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=n),t&&(r=t.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(i);n.default=a,t.exports=n.default},{48:48}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"===i.schemeIdUri.toLowerCase()&&"cenc"===i.value.toLowerCase()&&(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,i>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var i=e.parsePSSHList(n);return i.hasOwnProperty(t.uuid.toLowerCase())?i[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n={},i=0;;){var r,a=void 0,o=void 0,s=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i))if(i+=4,0===(a=t.getUint8(i))||1===a){i++,i+=3,o="";var l=void 0,u=void 0;for(l=0;l<4;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<6;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i+=6,o=o.toLowerCase(),t.getUint32(i),i+=4,n[o]=t.buffer.slice(s,r),i=r}else i=r;else i=r}return n}}]),e}();n.default=r,t.exports=n.default},{}],150:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var r=e.debug,a=r.getLogger(n),o=e.eventBus,s=e.errHandler,h=e.videoModel?e.videoModel.getElement():null;return h&&void 0===h.onencrypted||h&&void 0===h.mediaKeys?t(h,f)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,u.default)(i).create({debug:r,eventBus:o,events:e.events,api:t(h,f)})):t(h,c)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,d.default)(i).create({debug:r,eventBus:o,errHandler:s,events:e.events,api:t(h,c)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,l.default)(i).create({debug:r,eventBus:o,events:e.events}))}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}var n=void 0,i=this.context;return n={createProtectionSystem:function(t){var n=null,r=(0,o.default)(i).getInstance();r.setConfig({debug:t.debug,BASE64:t.BASE64}),r.initialize();var s=e(t);return!n&&s&&(n=(0,a.default)(i).create({protectionModel:s,protectionKeyController:r,eventBus:t.eventBus,debug:t.debug,events:t.events,BASE64:t.BASE64,constants:t.constants}),t.capabilities.setEncryptedMediaSupported(!0)),n}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(152)),o=i(e(153)),s=i(e(151)),l=i(e(159)),u=i(e(160)),d=i(e(158)),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],f=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];r.__dashjs_factory_name="Protection";var h=dashjs.FactoryMaker.getClassFactory(r);h.events=s.default,dashjs.FactoryMaker.updateClassFactory(r.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{151:151,152:152,153:153,158:158,159:159,160:160}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(52)),a=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}());n.default=a,t.exports=n.default},{52:52}],152:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){var n=a.default.getPSSHForKeySystem(D,e),i=r(D);if(n){for(var o=y.getAllInitData(),s=0;s<o.length;s++)if(v.initDataEquals(n,o[s]))return void I.warn("DRM: Ignoring initData because we have already seen it!");try{y.createKeySession(n,i,c(D),t)}catch(e){_.trigger(b.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else e?y.createKeySession(e,i,c(D),t):_.trigger(b.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+D.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function n(e,t){y.loadKeySession(e,t,c(D))}function i(e){e?(y.setMediaElement(e),_.on(b.NEED_KEY,g,this)):null===e&&(y.setMediaElement(e),_.off(b.NEED_KEY,g,this))}function r(e){var t=null;if(e){var n=e.systemString;M&&(t=n in M?M[n]:null)}return t}function d(e){var t=r(e),n=[],i=[],a=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:R,l=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:R,u=c(e),d=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",f=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return A.forEach(function(e){e.type===w.AUDIO?n.push(new o.default(e.codec,a)):e.type===w.VIDEO&&i.push(new o.default(e.codec,l))}),new s.default(n,i,d,f,[u])}function c(e){var t=r(e);return t&&t.sessionType?t.sessionType:P}function f(e,i){var a=this,o=[],s=void 0;if(D){for(s=0;s<e.length;s++)if(D===e[s].ks){if("break"===function(){o.push({ks:e[s].ks,configs:[d(D)]});return _.on(b.KEY_SYSTEM_ACCESS_COMPLETE,function r(o){_.off(b.KEY_SYSTEM_ACCESS_COMPLETE,r,a),o.error?i||_.trigger(b.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+o.error}):(I.info("DRM: KeySystem Access Granted"),_.trigger(b.KEY_SYSTEM_SELECTED,{data:o.data}),e[s].sessionId?n(e[s].sessionId,e[s].initData):e[s].initData&&t(e[s].initData,e[s].cdmData))},a),y.requestKeySystemAccess(o),"break"}())break}}else if(void 0===D){var l;!function(){D=null,C.push(e);for(var u=0;u<e.length;u++)o.push({ks:e[u].ks,configs:[d(e[u].ks)]});var c=void 0,f=function e(t){_.off(b.KEY_SYSTEM_ACCESS_COMPLETE,e,a),t.error?(D=void 0,_.off(b.INTERNAL_KEY_SYSTEM_SELECTED,l,a),i||_.trigger(b.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+t.error})):(c=t.data,I.info("DRM: KeySystem Access Granted ("+c.keySystem.systemString+")!  Selecting key system..."),y.selectKeySystem(c))};l=function e(o){if(_.off(b.INTERNAL_KEY_SYSTEM_SELECTED,e,a),_.off(b.KEY_SYSTEM_ACCESS_COMPLETE,f,a),o.error)D=void 0,i||_.trigger(b.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+o.error});else{if(!y)return;D=y.getKeySystem(),_.trigger(b.KEY_SYSTEM_SELECTED,{data:c});var l=r(D);l&&l.serverCertificate&&l.serverCertificate.length>0&&y.setServerCertificate(T.decodeArray(l.serverCertificate).buffer);for(var u=0;u<C.length;u++)for(s=0;s<C[u].length;s++)if(D===C[u][s].ks){if(v.isClearKey(D)&&l&&l.hasOwnProperty("clearkeys")){var d={kids:Object.keys(l.clearkeys)};C[u][s].initData=(new TextEncoder).encode(JSON.stringify(d))}C[u][s].sessionId?n(C[u][s].sessionId,C[u][s].initData):null!==C[u][s].initData&&t(C[u][s].initData,C[u][s].cdmData);break}}},_.on(b.INTERNAL_KEY_SYSTEM_SELECTED,l,a),_.on(b.KEY_SYSTEM_ACCESS_COMPLETE,f,a),y.requestKeySystemAccess(o)}()}else C.push(e)}function h(e,t){_.trigger(b.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function p(e){e.error?_.trigger(b.KEY_STATUSES_CHANGED,{data:null,error:"DRM: KeyStatusChange error! -- "+e.error}):I.debug("DRM: key status = "+e.status)}function m(e){if(I.debug("DRM: onKeyMessage"),e.error)I.error(e.error);else{var t=e.data;_.trigger(b.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",i=t.message,o=t.sessionToken,s=r(D),l=D?D.systemString:null,u=v.getLicenseServer(D,s,n),d={sessionToken:o,messageType:n};if(i&&0!==i.byteLength){if(!u)return I.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+o.getSessionID()),void h(d);if(v.isClearKey(D)){var c=v.processClearKeyLicenseRequest(D,s,i);if(c)return I.debug("DRM: ClearKey license request handled by application!"),h(d),void y.updateKeySession(o,c)}var f=new XMLHttpRequest,p=null;if(s&&s.serverURL){var m=s.serverURL;"string"==typeof m&&""!==m?p=m:"object"==typeof m&&m.hasOwnProperty(n)&&(p=m[n])}else s&&s.laURL&&""!==s.laURL?p=s.laURL:(p=D.getLicenseServerURLFromInitData(a.default.getPSSHData(o.initData)))||(p=e.data.laURL);if(p=u.getServerURLFromMessage(p,i,n)){var g=function(e,t,n,i){var r=e.response?u.getErrorResponse(e.response,n,i):"NONE";h(t,"DRM: "+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r)};f.open(u.getHTTPMethod(n),p,!0),f.responseType=u.getResponseType(l,n),f.onload=function(){if(y)if(200==this.status){var e=u.getLicenseMessage(this.response,l,n);null!==e?(h(d),y.updateKeySession(o,e)):g(this,d,l,n)}else g(this,d,l,n)},f.onabort=function(){h(d,"DRM: "+l+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},f.onerror=function(){h(d,"DRM: "+l+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var E=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(f.withCredentials=!0),f.setRequestHeader(t,e[t])};s&&E(s.httpRequestHeaders),E(D.getRequestHeadersFromMessage(i)),s&&"boolean"==typeof s.withCredentials&&(f.withCredentials=s.withCredentials),f.send(D.getLicenseRequestFromMessage(i))}else h(d,"DRM: No license server URL specified!")}else h(d,"DRM: Empty key message from CDM")}}function g(e,t){if(I.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===A.length&&(I.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<l))S.push(setTimeout(function(){g(e,t)},u));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),D){var i=a.default.getPSSHForKeySystem(D,n);if(i)for(var r=y.getAllInitData(),o=0;o<r.length;o++)if(v.initDataEquals(i,r[o]))return void I.warn("DRM: Ignoring initData because we have already seen it!")}I.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));var s=v.getSupportedKeySystems(n,M);0!==s.length?f(s,!1):I.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else I.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}var v=(e=e||{}).protectionKeyController,y=e.protectionModel,_=e.eventBus,b=e.events,E=e.debug,T=e.BASE64,w=e.constants,S=[],x=void 0,I=void 0,C=void 0,A=void 0,M=void 0,P=void 0,R=void 0,D=void 0;return x={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");(function(){if(!(_&&_.hasOwnProperty("on")&&v&&v.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")})(),_.on(b.INTERNAL_KEY_MESSAGE,m,this),_.on(b.INTERNAL_KEY_STATUS_CHANGED,p,this),A.push(e);var t=v.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&t.length>0&&f(t,!0)},createKeySession:t,loadKeySession:n,removeKeySession:function(e){y.removeKeySession(e)},closeKeySession:function(e){y.closeKeySession(e)},setServerCertificate:function(e){y.setServerCertificate(e)},setMediaElement:i,setSessionType:function(e){P=e},setRobustnessLevel:function(e){R=e},setProtectionData:function(e){M=e,v.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return v.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return v?v.getKeySystems():[]},stop:function(){y&&y.stop()},reset:function(){_.off(b.INTERNAL_KEY_MESSAGE,m,this),_.off(b.INTERNAL_KEY_STATUS_CHANGED,p,this),i(null),D=void 0,y&&(y.reset(),y=null),S.forEach(function(e){return clearTimeout(e)}),S=[],A=[]}},I=E.getLogger(x),C=[],A=[],P="temporary",R="",x}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(149)),o=i(e(171)),s=i(e(170)),l=5,u=500;r.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{149:149,170:170,171:171}],153:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=void 0,n=void 0,i=void 0,r=void 0,m=void 0,g=void 0,v=void 0;return t={initialize:function(){r=[];var t=void 0;t=(0,u.default)(e).getInstance({BASE64:m}),r.push(t),t=(0,l.default)(e).getInstance({BASE64:m}),r.push(t),t=(0,o.default)(e).getInstance({BASE64:m}),r.push(t),g=t,t=(0,s.default)(e).getInstance({BASE64:m,debug:n}),r.push(t),v=t},setProtectionData:function(e){for(var t=function(t){var n=null;return e&&(n=t in e?e[t]:null),n},n=0;n<r.length;n++){var i=r[n];i.hasOwnProperty("init")&&i.init(t(i.systemString))}},isClearKey:function(e){return e===g||e===v},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0}return!1},getKeySystems:function(){return r},getKeySystemBySystemString:function(e){for(var t=0;t<r.length;t++)if(r[t].systemString===e)return r[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,i=void 0,a=void 0,o=[];if(e)for(i=0;i<r.length;++i)for(n=r[i],a=0;a<e.length;++a)(t=e[a]).schemeIdUri.toLowerCase()===n.schemeIdURI&&o.push({ks:n,initData:n.getInitData(t),cdmData:n.getCDMData(),sessionId:n.getSessionId(t)});return o},getSupportedKeySystems:function(e,t){for(var n=[],i=a.default.parsePSSHList(e),o=void 0,s=void 0,l=void 0,u=0;u<r.length;++u)s=(o=r[u]).systemString,l=!t||s in t,o.uuid in i&&l&&n.push({ks:o,initData:i[o.uuid],cdmData:o.getCDMData(),sessionId:o.getSessionId()});return n},getLicenseServer:function(t,n,i){if("license-release"===i||"individualization-request"===i)return null;var r=null;return n&&n.hasOwnProperty("drmtoday")?r=(0,d.default)(e).getInstance({BASE64:m}):t.systemString===p.default.WIDEVINE_KEYSTEM_STRING?r=(0,f.default)(e).getInstance():t.systemString===p.default.PLAYREADY_KEYSTEM_STRING?r=(0,c.default)(e).getInstance():t.systemString===p.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,h.default)(e).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return i.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,i=n.getLogger(t)),e.BASE64&&(m=e.BASE64))}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(149)),o=i(e(154)),s=i(e(156)),l=i(e(157)),u=i(e(155)),d=i(e(162)),c=i(e(163)),f=i(e(164)),h=i(e(161)),p=i(e(102));r.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,149:149,154:154,155:155,156:156,157:157,161:161,162:162,163:163,164:164}],154:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(e=e||{}).BASE64;return{uuid:u,schemeIdURI:c,systemString:d,getInitData:function(e){return s.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],s=0;s<i.kids.length;s++){var l=i.kids[s],u=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!u)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");r.push(new a.default(l,u))}n=new o.default(r)}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(168)),o=i(e(165)),s=i(e(149)),l=i(e(102)),u="e2719d58-a985-b3c9-781a-b030af78d30e",d=l.default.CLEARKEY_KEYSTEM_STRING,c="urn:uuid:"+u;r.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,149:149,165:165,168:168}],155:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){if(!i||!i.hasOwnProperty("decodeArray")||!i.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}var n="utf16",i=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:u,systemString:l,getInitData:function(e){var n,r,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,d=null,c=void 0,f=void 0;if(t(),"pssh"in e)return a.default.parseInitDataFromContentProtection(e,i);if("pro"in e)d=i.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=i.decodeArray(e.prheader.__text)}return n=d.length,r=4+s.length+l.length+4+n,o=new ArrayBuffer(r),c=new Uint8Array(o),(f=new DataView(o)).setUint32(u,r),u+=4,c.set(s,u),u+=s.length,c.set(l,u),u+=l.length,f.setUint32(u,n),u+=4,c.set(d,u),u+=n,c.buffer},getRequestHeadersFromMessage:function(e){var t,i=void 0,r={},a=new DOMParser,o="utf16"===n?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o);for(var s=(i=a.parseFromString(t,"application/xml")).getElementsByTagName("name"),l=i.getElementsByTagName("value"),u=0;u<s.length;u++)r[s[u].childNodes[0].nodeValue]=l[u].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r.hasOwnProperty("Content-Type")||(r["Content-Type"]="text/xml; charset="+n),r},getLicenseRequestFromMessage:function(e){var r=null,a=new DOMParser,o="utf16"===n?new Uint16Array(e):new Uint8Array(e);t();var s=String.fromCharCode.apply(null,o),l=a.parseFromString(s,"application/xml");if(l.getElementsByTagName("Challenge")[0]){var u=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;u&&(r=i.decode(u))}else if(l.getElementsByTagName("parsererror").length)return e;return r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,a=0;a<n;a++){var o=t.getUint16(i,!0);i+=2;var s=t.getUint16(i,!0);if(i+=2,1===o){var l=e.slice(i,i+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),d=r.parseFromString(u,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var f=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else i+=s}return null},getCDMData:function(){var e=void 0,n=void 0,r=void 0,a=void 0;if(t(),c&&c.cdmData){for(e=[],a=0;a<c.cdmData.length;++a)e.push(c.cdmData.charCodeAt(a)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=i.encode(e),n=d.replace("%CUSTOMDATA%",e),r=[],a=0;a<n.length;++a)r.push(n.charCodeAt(a)),r.push(0);return new Uint8Array(r).buffer}return null},getSessionId:function(){return null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);n=e},init:function(e){e&&(c=e)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(149)),o=i(e(102)),s="9a04f079-9840-4286-ab92-e65be0885f95",l=o.default.PLAYREADY_KEYSTEM_STRING,u="urn:uuid:"+s,d='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',c=void 0;r.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,149:149}],156:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0,n=e.BASE64,i=e.debug.getLogger(t);return{uuid:u,schemeIdURI:c,systemString:d,getInitData:function(e){return s.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],l=0;l<r.kids.length;l++){var u=r.kids[l],d=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new a.default(u,d))}n=new o.default(s),i.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(168)),o=i(e(165)),s=i(e(149)),l=i(e(102)),u="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",d=l.default.CLEARKEY_KEYSTEM_STRING,c="urn:uuid:"+u;r.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,149:149,165:165,168:168}],157:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=null,n=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:u,systemString:l,init:function(e){e&&(t=e)},getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(149)),o=i(e(102)),s="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=o.default.WIDEVINE_KEYSTEM_STRING,u="urn:uuid:"+s;r.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{102:102,149:149}],158:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){_&&r();for(var e=0;e<w.length;e++)n(w[e]);f.trigger(h.TEARDOWN_COMPLETE)}function n(e){try{_[m.cancelKeyRequest](b.systemString,e.sessionID)}catch(t){f.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function i(e,t){if(t&&e){for(var n=e.length,i=0;i<n;i++)if(e[i].sessionID==t)return e[i];return null}return null}function r(){_.removeEventListener(m.keyerror,x),_.removeEventListener(m.needkey,x),_.removeEventListener(m.keymessage,x),_.removeEventListener(m.keyadded,x)}e=e||{};var c=this.context,f=e.eventBus,h=e.events,p=e.debug,m=e.api,g=e.errHandler,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0;return v={getAllInitData:function(){for(var e=[],t=0;t<T.length;t++)e.push(T[t].initData);for(t=0;t<w.length;t++)e.push(w[t].initData);return e},requestKeySystemAccess:function(e){var t=_;t||(t=document.createElement("video"));for(var n=!1,i=0;i<e.length;i++)for(var r=e[i].ks.systemString,a=e[i].configs,o=null,s=null,l=0;l<a.length;l++){var c=a[l].videoCapabilities;if(c&&0!==c.length){s=[];for(var p=0;p<c.length;p++)""!==t.canPlayType(c[p].contentType,r)&&s.push(c[p])}if(s&&(!s||0!==s.length)){n=!0;var m=new u.default(o,s),g=E.getKeySystemBySystemString(r);f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:new d.default(g,m)});break}}n||f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return b},selectKeySystem:function(e){b=e.keySystem,f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){_!==e&&(_&&r(),(_=e)&&(_.addEventListener(m.keyerror,x),_.addEventListener(m.needkey,x),_.addEventListener(m.keymessage,x),_.addEventListener(m.keyadded,x),f.trigger(h.VIDEO_ELEMENT_SELECTED)))},createKeySession:function(e){if(!b)throw new Error("Can not create sessions until you have selected a key system");if(S||0===w.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return T.push(t),_[m.generateKeyRequest](b.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(E.isClearKey(b))for(var i=0;i<t.keyPairs.length;i++)_[m.addKey](b.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else _[m.addKey](b.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:n,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},y=p.getLogger(v),_=null,b=null,T=[],w=[],E=(0,a.default)(c).getInstance(),x={handleEvent:function(e){var t=null;switch(e.type){case m.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(h.NEED_KEY,{key:new o.default(n,"cenc")});break;case m.keyerror:if((t=i(w,e.sessionId))||(t=i(T,e.sessionId)),t){var r="";switch(e.errorCode.code){case 1:r+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:r+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:r+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:r+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:r+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:r+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}r+="  System Code = "+e.systemCode,f.trigger(h.KEY_ERROR,{data:new s.default(t,r)})}else y.error("No session token found for key error");break;case m.keyadded:(t=i(w,e.sessionId))||(t=i(T,e.sessionId)),t?(y.debug("DRM: Key added."),f.trigger(h.KEY_ADDED,{data:t})):y.debug("No session token found for key added");break;case m.keymessage:if((S=null!==e.sessionId&&void 0!==e.sessionId)?!(t=i(w,e.sessionId))&&T.length>0&&(t=T.shift(),w.push(t),t.sessionID=e.sessionId,f.trigger(h.KEY_SESSION_CREATED,{data:t})):T.length>0&&(t=T.shift(),w.push(t),0!==T.length&&g.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var a=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=a,f.trigger(h.INTERNAL_KEY_MESSAGE,{data:new l.default(t,a,e.defaultURL)})}else y.warn("No session token found for key message")}}},v}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(153)),o=i(e(172)),s=i(e(166)),l=i(e(167)),u=i(e(170)),d=i(e(169));r.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{153:153,166:166,167:167,169:169,170:170,172:172}],159:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function n(e){for(var t=0;t<b.length;t++)if(b[t]===e){b.splice(t,1),g.debug("DRM: Session removed.  SessionID = "+e.getSessionID());break}}function i(e){var t=void 0,n=void 0;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function r(e,t,r,a){var o={session:e,initData:t,sessionId:a,handleEvent:function(e){switch(e.type){case"keystatuseschange":f.trigger(h.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=i(arguments);switch(e.status){case"expired":f.trigger(h.INTERNAL_KEY_STATUS_CHANGED,{error:"License has expired"});break;default:f.trigger(h.INTERNAL_KEY_STATUS_CHANGED,e)}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;f.trigger(h.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){"usable"===i(arguments).status&&(t=!0)}),t},getSessionType:function(){return r}};return e.addEventListener("keystatuseschange",o),e.addEventListener("message",o),e.closed.then(function(){n(o),g.debug("DRM: Session closed.  SessionID = "+o.getSessionID()),f.trigger(h.KEY_SESSION_CLOSED,{data:o.getSessionID()})}),b.push(o),o}e=e||{};var c=this.context,f=e.eventBus,h=e.events,p=e.debug,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0;return m={getAllInitData:function(){for(var e=[],t=0;t<b.length;t++)b[t].initData&&e.push(b[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?function(n){var i=t[n].ks,r=t[n].configs;navigator.requestMediaKeySystemAccess(i.systemString,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new u.default(i,t);n.mksa=e,f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(i){++n<t.length?e(t,n):f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+i.message})})}(n):f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}(e,0)},getKeySystem:function(){return v},selectKeySystem:function(e){e.mksa.createMediaKeys().then(function(t){v=e.keySystem,_=t,y?y.setMediaKeys(_).then(function(){f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED)}):f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){y!==e&&(y&&(y.removeEventListener("encrypted",E),y.setMediaKeys&&y.setMediaKeys(null)),(y=e)&&(y.addEventListener("encrypted",E),y.setMediaKeys&&_&&y.setMediaKeys(_)))},setServerCertificate:function(e){if(!v||!_)throw new Error("Can not set server certificate until you have selected a key system");_.setServerCertificate(e).then(function(){g.info("DRM: License server certificate successfully updated."),f.trigger(h.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){f.trigger(h.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})},createKeySession:function(e,t,i){if(!v||!_)throw new Error("Can not create sessions until you have selected a key system");var a=_.createSession(i),o=r(a,e,i),s=this.getKeySystem().systemString===d.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";a.generateRequest(s,e).then(function(){g.debug("DRM: Session created.  SessionID = "+o.getSessionID()),f.trigger(h.KEY_SESSION_CREATED,{data:o})}).catch(function(e){n(o),f.trigger(h.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})},updateKeySession:function(e,t){var n=e.session;T.isClearKey(v)&&(t=t.toJWK()),n.update(t).catch(function(t){f.trigger(h.KEY_ERROR,{data:new s.default(e,"Error sending update() message! "+t.name)})})},loadKeySession:function(e,t,i){if(!v||!_)throw new Error("Can not load sessions until you have selected a key system");for(var a=0;a<b.length;a++)if(e===b[a].sessionId)return void g.warn("DRM: Ignoring session ID because we have already seen it!");var o=_.createSession(i),s=r(o,t,i,e);o.load(e).then(function(t){t?(g.debug("DRM: Session loaded.  SessionID = "+s.getSessionID()),f.trigger(h.KEY_SESSION_CREATED,{data:s})):(n(s),f.trigger(h.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"}))}).catch(function(t){n(s),f.trigger(h.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})},removeKeySession:function(e){e.session.remove().then(function(){g.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),f.trigger(h.KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){f.trigger(h.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})},closeKeySession:function(e){t(e).catch(function(t){n(e),f.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})},stop:function(){for(var e=void 0,i=0;i<b.length;i++)(e=b[i]).getUsable()||(n(e),t(e))},reset:function(){var e=b.length,i=void 0;0!==e?function(){for(var r=function(e){n(e),0===b.length&&(y?(y.removeEventListener("encrypted",E),y.setMediaKeys(null).then(function(){f.trigger(h.TEARDOWN_COMPLETE)})):f.trigger(h.TEARDOWN_COMPLETE))},a=0;a<e;a++)!function(e){i.session.closed.then(function(){r(e)}),t(i).catch(function(){r(e)})}(i=b[a])}():f.trigger(h.TEARDOWN_COMPLETE)}},g=p.getLogger(m),v=null,y=null,_=null,b=[],T=(0,a.default)(c).getInstance(),E={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(h.NEED_KEY,{key:new o.default(t,e.initDataType)})}}}},m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(153)),o=i(e(172)),s=i(e(166)),l=i(e(167)),u=i(e(169)),d=i(e(102));r.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{102:102,153:153,166:166,167:167,169:169,172:172}],160:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){try{for(var e=0;e<E.length;e++)n(E[e]);v&&v.removeEventListener(p.needkey,T),c.trigger(f.TEARDOWN_COMPLETE)}catch(e){c.trigger(f.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function n(e){var t=e.session;t.removeEventListener(p.error,e),t.removeEventListener(p.message,e),t.removeEventListener(p.ready,e),t.removeEventListener(p.close,e);for(var n=0;n<E.length;n++)if(E[n]===e){E.splice(n,1);break}t[p.release]()}function i(){var e=null,t=function(){v.removeEventListener("loadedmetadata",e),v[p.setMediaKeys](_),c.trigger(f.VIDEO_ELEMENT_SELECTED)};v.readyState>=1?t():(e=t.bind(this),v.addEventListener("loadedmetadata",e))}e=e||{};var r=this.context,c=e.eventBus,f=e.events,h=e.debug,p=e.api,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0;return m={getAllInitData:function(){for(var e=[],t=0;t<E.length;t++)e.push(E[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,r=e[n].configs,a=null,o=null,s=0;s<r.length;s++){var l=r[s].audioCapabilities,h=r[s].videoCapabilities;if(l&&0!==l.length){a=[];for(var m=0;m<l.length;m++)window[p.MediaKeys].isTypeSupported(i,l[m].contentType)&&a.push(l[m])}if(h&&0!==h.length){o=[];for(var g=0;g<h.length;g++)window[p.MediaKeys].isTypeSupported(i,h[g].contentType)&&o.push(h[g])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var v=new u.default(a,o),y=w.getKeySystemBySystemString(i);c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:new d.default(y,v)});break}}t||c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return y},selectKeySystem:function(e){try{_=e.mediaKeys=new window[p.MediaKeys](e.keySystem.systemString),y=e.keySystem,b=e,v&&i(),c.trigger(f.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){c.trigger(f.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+y.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){v!==e&&(v&&v.removeEventListener(p.needkey,T),(v=e)&&(v.addEventListener(p.needkey,T),_&&i()))},createKeySession:function(e,t,n,i){if(!y||!_||!b)throw new Error("Can not create sessions until you have selected a key system");var r=null;if(b.ksConfiguration.videoCapabilities&&b.ksConfiguration.videoCapabilities.length>0&&(r=b.ksConfiguration.videoCapabilities[0]),null===r&&b.ksConfiguration.audioCapabilities&&b.ksConfiguration.audioCapabilities.length>0&&(r=b.ksConfiguration.audioCapabilities[0]),null===r)throw new Error("Can not create sessions for unknown content types.");var a=r.contentType,o=_.createSession(a,new Uint8Array(e),i?new Uint8Array(i):null),u=function(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case p.error:c.trigger(f.KEY_ERROR,{data:new s.default(this,"KeyError")});break;case p.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;c.trigger(f.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,e.destinationURL)});break;case p.ready:g.debug("DRM: Key added."),c.trigger(f.KEY_ADDED);break;case p.close:g.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),c.trigger(f.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(o,e);o.addEventListener(p.error,u),o.addEventListener(p.message,u),o.addEventListener(p.ready,u),o.addEventListener(p.close,u),E.push(u),g.debug("DRM: Session created.  SessionID = "+u.getSessionID()),c.trigger(f.KEY_SESSION_CREATED,{data:u})},updateKeySession:function(e,t){var n=e.session;w.isClearKey(y)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:n,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},g=h.getLogger(m),v=null,y=null,_=null,b=null,E=[],w=(0,a.default)(r).getInstance(),T={handleEvent:function(e){switch(e.type){case p.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;c.trigger(f.NEED_KEY,{key:new o.default(t,"cenc")})}}}},m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(153)),o=i(e(172)),s=i(e(166)),l=i(e(167)),u=i(e(170)),d=i(e(169));r.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{153:153,166:166,167:167,169:169,170:170,172:172}],161:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var i=0;i<n.kids.length;i++)e+=n.kids[i]+"&";return e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],r=i.kid.replace(/=/g,""),s=i.k.replace(/=/g,"");t.push(new a.default(r,s))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(168)),o=i(e(165));r.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{165:165,168:168}],162:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,i){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[i].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(102));i.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{102:102}],163:[function(e,t,n){"use strict";function i(){function e(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function t(t){if(window.DOMParser){var n=e(t),r=(new window.DOMParser).parseFromString(n,"text/xml"),a=r?r.getElementsByTagNameNS(i,"Envelope")[0]:null,o=a?a.getElementsByTagNameNS(i,"Body")[0]:null;if(o&&o.getElementsByTagNameNS(i,"Fault")[0])return null}return t}function n(t){var n="",r="",a="",o=-1,s=-1;if(window.DOMParser){var l=e(t),u=(new window.DOMParser).parseFromString(l,"text/xml"),d=u?u.getElementsByTagNameNS(i,"Envelope")[0]:null,c=d?d.getElementsByTagNameNS(i,"Body")[0]:null,f=c?c.getElementsByTagNameNS(i,"Fault")[0]:null,h=f?f.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,m=null;if(null===f)return l;n=(m=f.getElementsByTagName("faultstring")[0].firstChild)?m.nodeValue:null,null!==p&&(r=(m=p.getElementsByTagName("StatusCode")[0])?m.firstChild.nodeValue:null,o=(a=(m=p.getElementsByTagName("Message")[0])?m.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}var g="code: "+r+", name: "+n;return a&&(g+=", message: "+a),g}var i="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return t.call(this,e)},getErrorResponse:function(e){return n.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],164:[function(e,t,n){"use strict";function i(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),i.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return i(e,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(i)}this.type&&(n.type=this.type);var r=JSON.stringify(n),a=r.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=r.charCodeAt(e);return o}}]),e}();n.default=r,t.exports=n.default},{}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.error=n},t.exports=n.default},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},t.exports=n.default},{}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=a},t.exports=n.default},{}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],173:[function(e,t,n){"use strict";function i(){var e=[],t=0,n=0;return{push:function(i,r){var a=r&&r.droppedVideoFrames?r.droppedVideoFrames:0,o=r&&r.totalVideoFrames?r.totalVideoFrames:0,s=a-t;t=a;var l=o-n;n=o,isNaN(i)||(e[i]?(e[i].droppedVideoFrames+=s,e[i].totalVideoFrames+=l):e[i]={droppedVideoFrames:s,totalVideoFrames:l})},getFrameHistory:function(){return e},reset:function(i){e=[],t=i.droppedVideoFrames,n=i.totalVideoFrames}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(i);n.default=a,t.exports=n.default},{48:48}],174:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).abrController,n=e.streamProcessor,i=e.streamProcessor.getCurrentRepresentationInfo(),r=e.switchHistory,a=e.droppedFramesHistory,o=e.currentRequest,s=e.useBufferOccupancyABR;return{getMediaType:function(){return i.mediaInfo.type},getMediaInfo:function(){return i.mediaInfo},getDroppedFramesHistory:function(){return a},getCurrentRequest:function(){return o},getSwitchHistory:function(){return r},getStreamInfo:function(){return i.mediaInfo.streamInfo},getStreamProcessor:function(){return n},getAbrController:function(){return t},getRepresentationInfo:function(){return i},useBufferOccupancyABR:function(){return s}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="RulesContext",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],175:[function(e,t,n){"use strict";function i(e,t,n){var i,r;return i=void 0===e?a:e,r=function(e){var t=o.DEFAULT;return e!==o.DEFAULT&&e!==o.STRONG&&e!==o.WEAK||(t=e),t}(n),{quality:i,reason:void 0===t?null:t,priority:r}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48)),a=-1,o={DEFAULT:.5,STRONG:1,WEAK:0};i.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(i);s.NO_CHANGE=a,s.PRIORITY=o,r.default.updateClassFactory(i.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{48:48}],176:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=[],t=[];return{push:function(n){n.newValue===o.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var i=n.newValue-n.oldValue,r=i<0?1:0,a=r?-i:0,l=r?0:1;if(e[n.oldValue].drops+=r,e[n.oldValue].dropSize+=a,e[n.oldValue].noDrops+=l,t.push({idx:n.oldValue,noDrop:l,drop:r,dropSize:a}),t.length>s){var u=t.shift();e[u.idx].drops-=u.drop,e[u.idx].dropSize-=u.dropSize,e[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(175)),s=8;r.__dashjs_factory_name="SwitchRequestHistory";var l=a.default.getClassFactory(r);n.default=l,t.exports=n.default},{175:175,48:48}],177:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t,n){return e===a.default.VIDEO?n<y.getCacheLoadThresholdForType(a.default.VIDEO):e===a.default.AUDIO?n<y.getCacheLoadThresholdForType(a.default.AUDIO):void 0}function n(e,t,n,i){var r=Math.pow(.5,n/i.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate;var a=Math.pow(.5,n/i.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function i(e,t,n){return y.getMovingAverageMethod()!==a.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?w.throughputHalfLife:w.latencyHalfLife,i=e?E[t]:T[t];if(!i||i.totalWeight<=0)return NaN;var r=i.fastEstimate/(1-Math.pow(.5,i.totalWeight/n.fast)),a=i.slowEstimate/(1-Math.pow(.5,i.totalWeight/n.slow));return e?Math.min(r,a):Math.max(r,a)}(e,t):function(e,t,n){var i=function(e,t,n){var i=void 0,r=void 0;if(e?(i=_[t],r=n?u:d):(i=b[t],r=c),i){if(r>=i.length)r=i.length;else if(e)for(var a=1;a<r;++a){var o=i[a]/i[a-1];if((o>=h||o<=1/f)&&(r+=1)===i.length)break}}else r=0;return r}(e,t,n),r=(e?_:b)[t];return 0!==i&&r&&0!==r.length?(r=r.slice(-i)).reduce(function(e,t){return e+t})/r.length:NaN}(e,t,n)}function r(e,t){return i(!0,e,t)}function o(e){_[e]=_[e]||[],b[e]=b[e]||[],E[e]=E[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},T[e]=T[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function s(){_={},b={},E={},T={}}var l=20,u=3,d=4,c=4,f=1.3,h=1.3,p=8,m=3,g=2,v=1,y=(e=e||{}).mediaPlayerModel,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S={push:function(e,i,r){if(i.trace&&i.trace.length){var a=i.tresponse.getTime()-i.trequest.getTime()||1,s=i._tfinish.getTime()-i.tresponse.getTime()||1,u=i.trace.reduce(function(e,t){return e+t.d},0),d=i.trace.reduce(function(e,t){return e+t.b[0]},0),c=r?s:a+s;c=y.getLowLatencyEnabled()?u:c;var f=Math.round(8*d/c);if(o(e),t(e,0,s)){if(_[e].length>0&&!_[e].hasCachedEntries)return;_[e].hasCachedEntries=!0}else _[e]&&_[e].hasCachedEntries&&function(e){delete _[e],delete b[e],delete E[e],delete T[e],o(e)}(e);_[e].push(f),_[e].length>l&&_[e].shift(),b[e].push(a),b[e].length>l&&b[e].shift(),n(E[e],f,.001*s,w.throughputHalfLife),n(T[e],a,1,w.latencyHalfLife)}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){var n=r(e,t);return isNaN(n)||(n*=y.getBandwidthSafetyFactor()),n},getAverageLatency:function(e){return i(!1,e)},reset:s};return w={throughputHalfLife:{fast:m,slow:p},latencyHalfLife:{fast:v,slow:g}},s(),S}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(48));r.__dashjs_factory_name="ThroughputHistory",n.default=o.default.getClassFactory(r),t.exports=n.default},{100:100,48:48}],178:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){return e.filter(function(e){return e.quality>f.default.NO_CHANGE})}function n(e){var t={},n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(0!==e.length){for(t[f.default.PRIORITY.STRONG]=f.default.NO_CHANGE,t[f.default.PRIORITY.WEAK]=f.default.NO_CHANGE,t[f.default.PRIORITY.DEFAULT]=f.default.NO_CHANGE,n=0,r=e.length;n<r;n+=1)(a=e[n]).quality!==f.default.NO_CHANGE&&(t[a.priority]=t[a.priority]>f.default.NO_CHANGE?Math.min(t[a.priority],a.quality):a.quality);return t[f.default.PRIORITY.WEAK]!==f.default.NO_CHANGE&&(o=t[f.default.PRIORITY.WEAK]),t[f.default.PRIORITY.DEFAULT]!==f.default.NO_CHANGE&&(o=t[f.default.PRIORITY.DEFAULT]),t[f.default.PRIORITY.STRONG]!==f.default.NO_CHANGE&&(o=t[f.default.PRIORITY.STRONG]),o!==f.default.NO_CHANGE&&(s=o),(0,f.default)(i).create(s)}}e=e||{};var i=this.context,r=e.mediaPlayerModel,c=e.metricsModel,m=e.dashMetrics,g=void 0,v=void 0;return{initialize:function(){g=[],v=[],r.getUseDefaultABRRules()&&(g.push((0,d.default)(i).create({metricsModel:c,dashMetrics:m,mediaPlayerModel:r})),g.push((0,a.default)(i).create({metricsModel:c,dashMetrics:m})),g.push((0,o.default)(i).create({metricsModel:c,dashMetrics:m})),g.push((0,u.default)(i).create()),g.push((0,l.default)(i).create()),v.push((0,s.default)(i).create({metricsModel:c,dashMetrics:m,mediaPlayerModel:r}))),r.getABRCustomRules().forEach(function(e){e.type===h&&g.push(e.rule(i).create()),e.type===p&&v.push(e.rule(i).create())})},reset:function(){[g,v].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),g=[],v=[]},getMaxQuality:function(e){return n(t(g.map(function(t){return t.getMaxIndex(e)})))||(0,f.default)(i).create()},shouldAbandonFragment:function(e){return n(t(v.map(function(t){return t.shouldAbandon(e)})))||(0,f.default)(i).create()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(184)),o=i(e(182)),s=i(e(179)),l=i(e(181)),u=i(e(183)),d=i(e(180)),c=i(e(48)),f=i(e(175)),h="qualitySwitchRules",p="abandonFragmentRules";r.__dashjs_factory_name="ABRRulesCollection";var m=c.default.getClassFactory(r);m.QUALITY_SWITCH_RULES=h,m.ABANDON_FRAGMENT_RULES=p,c.default.updateSingletonFactory(r.__dashjs_factory_name,m),n.default=m,t.exports=n.default},{175:175,179:179,180:180,181:181,182:182,183:183,184:184,48:48}],179:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){p={},m={},g=[]}e=e||{};var n=1.8,i=500,o=5,l=this.context,u=e.mediaPlayerModel,d=e.metricsModel,c=e.dashMetrics,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;return f={shouldAbandon:function(e){var t=(0,a.default)(l).create(a.default.NO_CHANGE,{name:r.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var s=e.getMediaInfo(),f=e.getMediaType(),v=e.getCurrentRequest();if(!isNaN(v.index)){!function(e,t){p[e]=p[e]||{},p[e][t]=p[e][t]||{}}(f,v.index);var y=u.getStableBufferTime();if(c.getCurrentBufferLevel(d.getReadOnlyMetricsFor(f))>y)return t;var _=p[f][v.index];if(null===_||null===v.firstByteDate||m.hasOwnProperty(_.id))return t;if(void 0===_.firstByteTime&&(g[f]=[],_.firstByteTime=v.firstByteDate.getTime(),_.segmentDuration=v.duration,_.bytesTotal=v.bytesTotal,_.id=v.index),_.bytesLoaded=v.bytesLoaded,_.elapsedTime=(new Date).getTime()-_.firstByteTime,_.bytesLoaded>0&&_.elapsedTime>0&&function(e,t){g[e]=g[e]||[],g[e].push(t)}(f,Math.round(8*_.bytesLoaded/_.elapsedTime)),g[f].length>=o&&_.elapsedTime>i&&_.bytesLoaded<_.bytesTotal){var b=g[f].reduce(function(e,t){return e+t},0);if(_.measuredBandwidthInKbps=Math.round(b/g[f].length),_.estimatedTimeOfDownload=+(8*_.bytesTotal/_.measuredBandwidthInKbps/1e3).toFixed(2),_.estimatedTimeOfDownload<_.segmentDuration*n||0===e.getRepresentationInfo().quality)return t;if(!m.hasOwnProperty(_.id)){var E=e.getAbrController(),T=_.bytesTotal-_.bytesLoaded,w=E.getBitrateList(s),S=E.getQualityForBitrate(s,_.measuredBandwidthInKbps*u.getBandwidthSafetyFactor());T>_.bytesTotal*w[S].bitrate/w[E.getQualityFor(f,s.streamInfo)].bitrate&&(t.quality=S,t.reason.throughput=_.measuredBandwidthInKbps,t.reason.fragmentID=_.id,m[_.id]=_,h.debug("( ",f,"frag id",_.id,") is asking to abandon and switch to quality to ",S," measured bandwidth was",_.measuredBandwidthInKbps),delete p[f][_.id])}}else _.bytesLoaded===_.bytesTotal&&delete p[f][_.id]}return t},reset:t},h=(0,s.default)(l).getInstance().getLogger(f),t(),f}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(175)),o=i(e(48)),s=i(e(46));r.__dashjs_factory_name="AbandonRequestsRule",n.default=o.default.getClassFactory(r),t.exports=n.default},{175:175,46:46,48:48}],180:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t,n){var i=n.reduce(function(e,t,i){return t>n[e]?i:e},0);if(0===i)return null;var r=Math.max(e,m+g*t.length),a=(n[i]-1)/(r/m-1);return{gp:a,Vp:m/a}}function n(e){var n={},r=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),a=function(e){return e.map(function(e){return Math.log(e)})}(r);a=a.map(function(e){return e-a[0]+1});var o=k.getStableBufferTime(),s=t(o,r,a);return s?(n.state=h,n.bitrates=r,n.utilities=a,n.stableBufferTime=o,n.Vp=s.Vp,n.gp=s.gp,n.lastQuality=0,i(n)):n.state=f,n}function i(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function r(e,n){var i=k.getStableBufferTime();if(e.stableBufferTime!==i){var r=t(i,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var a=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(n)),o=a+e.placeholderBuffer;o-=m,o*=r.Vp/e.Vp,o+=m,e.stableBufferTime=i,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,o-a)}}}function s(e){var t=e.getMediaType(),i=F[t];return i?i.state!==f&&r(i,t):(i=n(e),F[t]=i),i}function y(e,t){return e.Vp*(e.utilities[t]+e.gp)}function _(e,t){for(var n=e.bitrates[t],i=e.utilities[t],r=0,a=t-1;a>=0;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],l=e.Vp*(e.gp+(n*s-o*i)/(n-o));r=Math.max(r,l)}return r}function b(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var i=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,i)}}else{i=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,r(e,t)}function E(){for(var e in F)F.hasOwnProperty(e)&&F[e].state===p&&(F[e].placeholderBuffer=0)}function T(){for(var e in F)if(F.hasOwnProperty(e)){var t=F[e];t.state!==f&&(t.state=h,i(t))}}function w(){}function S(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=F[e.chunk.mediaInfo.type];if(t&&t.state!==f){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,I(t,e.chunk.mediaInfo.type)}}}function x(e){if(e&&e.metric===a.default.HTTP_REQUEST&&e.value&&e.value.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=F[e.mediaType];t&&t.state!==f&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),I(t,e.mediaType))}}function I(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=v,!isNaN(e.lastSegmentFinishTimeMs)){var n=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),i=y(e,e.lastQuality),r=Math.max(0,i-n);e.placeholderBuffer=Math.min(r,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function C(e){if(e){var t=F[e.mediaType];t&&t.state!==f&&(t.abrQuality=e.newQuality)}}function A(e){if(e){var t=F[e.mediaType];if(t&&t.state!==f){var n,i=R.getCurrentBufferLevel(D.getReadOnlyMetricsFor(e.mediaType));n=t.abrQuality>0?_(t,t.abrQuality):m;var r=Math.max(0,n-i);t.placeholderBuffer=Math.min(t.placeholderBuffer,r)}}}function M(){F={}}e=e||{};var P=this.context,R=e.dashMetrics,D=e.metricsModel,k=e.mediaPlayerModel,N=(0,u.default)(P).getInstance(),O=void 0,L=void 0,F=void 0;return O={getMaxIndex:function(e){var t=e.getMediaInfo(),n=e.getMediaType(),r=D.getReadOnlyMetricsFor(n),a=e.getStreamProcessor(),l=e.getStreamInfo(),u=e.getAbrController(),d=u.getThroughputHistory(),c=l?l.id:null,m=l&&l.manifestInfo&&l.manifestInfo.isDynamic,g=e.useBufferOccupancyABR(),v=(0,o.default)(P).create();if(v.reason=v.reason||{},!g)return v;a.getScheduleController().setTimeToLoadDelay(0);var E=s(e);if(E.state===f)return v;var T=R.getCurrentBufferLevel(r),w=d.getAverageThroughput(n,m),S=d.getSafeAverageThroughput(n,m),x=d.getAverageLatency(n),I=void 0;if(v.reason.state=E.state,v.reason.throughput=w,v.reason.latency=x,isNaN(w))return v;switch(E.state){case h:I=u.getQualityForBitrate(t,S,x),v.quality=I,v.reason.throughput=S,E.placeholderBuffer=Math.max(0,_(E,I)-T),E.lastQuality=I,!isNaN(E.lastSegmentDurationS)&&T>=E.lastSegmentDurationS&&(E.state=p);break;case p:b(E,n),I=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||o>=r)&&(r=o,i=a)}return i}(E,T+E.placeholderBuffer);var C=u.getQualityForBitrate(t,S,x);I>E.lastQuality&&I>C&&(I=Math.max(C,E.lastQuality));var A=Math.max(0,T+E.placeholderBuffer-y(E,I));A<=E.placeholderBuffer?(E.placeholderBuffer-=A,A=0):(A-=E.placeholderBuffer,E.placeholderBuffer=0,I<u.getTopQualityIndexFor(n,c)?a.getScheduleController().setTimeToLoadDelay(1e3*A):A=0),v.quality=I,v.reason.throughput=w,v.reason.latency=x,v.reason.bufferLevel=T,v.reason.placeholderBuffer=E.placeholderBuffer,v.reason.delay=A,E.lastQuality=I;break;default:L.debug("BOLA ABR rule invoked in bad state."),v.quality=u.getQualityForBitrate(t,S,x),v.reason.state=E.state,v.reason.throughput=S,v.reason.latency=x,E.state=h,i(E)}return v},reset:function(){M(),N.off(d.default.BUFFER_EMPTY,E,O),N.off(d.default.PLAYBACK_SEEKING,T,O),N.off(d.default.PERIOD_SWITCH_STARTED,w,O),N.off(d.default.MEDIA_FRAGMENT_LOADED,S,O),N.off(d.default.METRIC_ADDED,x,O),N.off(d.default.QUALITY_CHANGE_REQUESTED,C,O),N.off(d.default.FRAGMENT_LOADING_ABANDONED,A,O)}},L=(0,c.default)(P).getInstance().getLogger(O),M(),N.on(d.default.BUFFER_EMPTY,E,O),N.on(d.default.PLAYBACK_SEEKING,T,O),N.on(d.default.PERIOD_SWITCH_STARTED,w,O),N.on(d.default.MEDIA_FRAGMENT_LOADED,S,O),N.on(d.default.METRIC_ADDED,x,O),N.on(d.default.QUALITY_CHANGE_REQUESTED,C,O),N.on(d.default.FRAGMENT_LOADING_ABANDONED,A,O),O}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(101)),o=i(e(175)),s=i(e(48)),l=e(233),u=i(e(47)),d=i(e(51)),c=i(e(46)),f=0,h=1,p=2,m=10,g=2,v=.99;r.__dashjs_factory_name="BolaRule",n.default=s.default.getClassFactory(r),t.exports=n.default},{101:101,175:175,233:233,46:46,47:47,48:48,51:51}],181:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=void 0,n=void 0,i=.15,r=375;return t={getMaxIndex:function(t){var a=t.getDroppedFramesHistory();if(a){for(var s=a.getFrameHistory(),l=0,u=0,d=o.default.NO_CHANGE,c=1;c<s.length;c++)if(s[c]&&(l=s[c].droppedVideoFrames,(u=s[c].totalVideoFrames)>r&&l/u>i)){d=c-1,n.debug("index: "+d+" Dropped Frames: "+l+" Total Frames: "+u);break}return(0,o.default)(e).create(d,{droppedFrames:l})}return(0,o.default)(e).create()}},n=(0,s.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(175)),s=i(e(46));r.__dashjs_factory_name="DroppedFramesRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{175:175,46:46,48:48}],182:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){g[e]=g[e]||{};var n=!1;return g[e].firstBufferLoadedEvent?n=!0:t&&t.state===a.default.BUFFER_LOADED&&(g[e].firstBufferLoadedEvent=!0,n=!0),n}function n(){g={}}function i(){n()}e=e||{};var r=.5,l=this.context,c=(0,o.default)(l).getInstance(),f=e.metricsModel,h=e.dashMetrics,p=void 0,m=void 0,g=void 0;return p={getMaxIndex:function(e){var n=(0,d.default)(l).create();if(!e||!e.hasOwnProperty("getMediaType"))return n;!function(){if(!(f&&f.hasOwnProperty("getReadOnlyMetricsFor")&&h&&h.hasOwnProperty("getCurrentBufferLevel")))throw new Error("Missing config parameter(s)")}();var i=e.getMediaType(),o=f.getReadOnlyMetricsFor(i),s=o.BufferState.length>0?o.BufferState[o.BufferState.length-1]:null,u=e.getRepresentationInfo().fragmentDuration;if(!s||!t(i,s)||!u)return n;if(s.state===a.default.BUFFER_EMPTY)m.info("Switch to index 0; buffer is empty."),n.quality=0,n.reason="InsufficientBufferRule: Buffer is empty";else{var c=e.getMediaInfo(),p=e.getAbrController(),g=p.getThroughputHistory(),v=h.getCurrentBufferLevel(o),y=g.getAverageThroughput(i),_=g.getAverageLatency(i),b=y*(v/u)*r;n.quality=p.getQualityForBitrate(c,b,_),n.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return n},reset:function(){n(),c.off(s.default.PLAYBACK_SEEKING,i,p)}},m=(0,u.default)(l).getInstance().getLogger(p),n(),c.on(s.default.PLAYBACK_SEEKING,i,p),p}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(106)),o=i(e(47)),s=i(e(51)),l=i(e(48)),u=i(e(46)),d=i(e(175));r.__dashjs_factory_name="InsufficientBufferRule",n.default=l.default.getClassFactory(r),t.exports=n.default},{106:106,175:175,46:46,47:47,48:48,51:51}],183:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=void 0,n=void 0,i=.075,r=6;return t={getMaxIndex:function(t){for(var a=t?t.getSwitchHistory():null,o=a?a.getSwitchRequests():[],l=0,u=0,d=0,c=(0,s.default)(e).create(),f=0;f<o.length;f++)if(void 0!==o[f]&&(l+=o[f].drops,u+=o[f].noDrops,d+=o[f].dropSize,l+u>=r&&l/u>i)){c.quality=f>0&&o[f].drops>0?f-1:f,c.reason={index:c.quality,drops:l,noDrops:u,dropSize:d},n.info("Switch history rule index: "+c.quality+" samples: "+(l+u)+" drops: "+l);break}return c}},n=(0,o.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s=i(e(175));r.__dashjs_factory_name="SwitchHistoryRule",n.default=a.default.getClassFactory(r),t.exports=n.default},{175:175,46:46,48:48}],184:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,n=e.metricsModel,i=void 0,r=void 0;return i={getMaxIndex:function(e){var i=(0,u.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getStreamProcessor")))return i;!function(){if(!n||!n.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error("Missing config parameter(s)")}();var s=e.getMediaInfo(),l=e.getMediaType(),d=n.getReadOnlyMetricsFor(l),c=e.getStreamProcessor(),f=e.getAbrController(),h=e.getStreamInfo(),p=h&&h.manifestInfo?h.manifestInfo.isDynamic:null,m=f.getThroughputHistory(),g=m.getSafeAverageThroughput(l,p),v=m.getAverageLatency(l),y=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,_=e.useBufferOccupancyABR();return!d||isNaN(g)||!y||_?i:(f.getAbandonmentStateFor(l)!==o.default.ABANDON_LOAD&&(y.state===a.default.BUFFER_LOADED||p)&&(i.quality=f.getQualityForBitrate(s,g,v),c.getScheduleController().setTimeToLoadDelay(0),r.info("requesting switch to index: ",i.quality,"type: ",l,"Average throughput",Math.round(g),"kbps"),i.reason={throughput:g,latency:v}),i)},reset:function(){}},r=(0,l.default)(t).getInstance().getLogger(i),i}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(106)),o=i(e(103)),s=i(e(48)),l=i(e(46)),u=i(e(175));r.__dashjs_factory_name="ThroughputRule",n.default=s.default.getClassFactory(r),t.exports=n.default},{103:103,106:106,175:175,46:46,48:48}],185:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){var l=NaN;if(!e)return l;var u=e.getType(),d=e.getCurrentRepresentationInfo();if(u===a.default.FRAGMENTED_TEXT)l=o.isTextEnabled()?d.fragmentDuration:0;else if(u===a.default.AUDIO&&t){var c=n.getCurrentBufferLevel(i.getReadOnlyMetricsFor(a.default.VIDEO));l=isNaN(d.fragmentDuration)?c:Math.max(c,d.fragmentDuration)}else{var f=d.mediaInfo.streamInfo;if(s.isPlayingAtTopQuality(f))l=f.manifestInfo.duration>=r.getLongFormContentDurationThreshold()?r.getBufferTimeAtTopQualityLongForm():r.getBufferTimeAtTopQuality();else l=r.getStableBufferTime()}return l}var n=(e=e||{}).dashMetrics,i=e.metricsModel,r=e.mediaPlayerModel,o=e.textController,s=e.abrController;return{execute:function(e,r){return n.getCurrentBufferLevel(i.getReadOnlyMetricsFor(e.getType()))<t(e,r)},getBufferTarget:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(48));r.__dashjs_factory_name="BufferLevelRule",n.default=o.default.getClassFactory(r),t.exports=n.default},{100:100,48:48}],186:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var t=this.context,n=e.adapter,i=e.textController,r=void 0,s=void 0;return r={execute:function(e,t){if(!e)return null;var r=e.getCurrentRepresentationInfo(),o=r.mediaInfo.type,u=e.getScheduleController(),d=u.getSeekTarget(),c=!isNaN(d),f=e.getBufferController(),h=e.getPlaybackController().getTime(),p=c?d:n.getIndexHandlerTime(e),m=!1,g=void 0;if(c&&u.setSeekTarget(NaN),isNaN(p)||o===a.default.FRAGMENTED_TEXT&&!i.isTextEnabled())return null;if(f){var v=f.getRangeAt(p),y=f.getRangeAt(h),_=f.getBuffer().getAllBufferRanges(),b=_?_.length:0;null===v&&null===y||c||((!v||y&&y.start!=v.start&&y.end!=v.end)&&(b>1&&(e.getFragmentModel().removeExecutedRequestsAfterTime(y.end),m=!0),v=y),s.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",o,".",p,"was changed to",v.end),p=v.end)}if(t)p=t.startTime+t.duration/2,g=n.getFragmentRequestForTime(e,r,p,{timeThreshold:0,ignoreIsFinished:!0});else{for(g=n.getFragmentRequestForTime(e,r,p,{keepIdx:!c&&!m});g&&g.action!==l.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(g);)g=n.getNextFragmentRequest(e,r);g&&(isNaN(g.startTime+g.duration)||n.setIndexHandlerTime(e,g.startTime+g.duration),g.delayLoadingTime=(new Date).getTime()+u.getTimeToLoadDelay(),u.setTimeToLoadDelay(0))}return g}},s=(0,o.default)(t).getInstance().getLogger(r),r}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(46)),s=i(e(48)),l=i(e(215));r.__dashjs_factory_name="NextFragmentRequestRule",n.default=s.default.getClassFactory(r),t.exports=n.default},{100:100,215:215,46:46,48:48}],187:[function(e,t,n){"use strict";function i(){function e(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function t(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function i(e,t){var i=e.videoHeight/15;return t?"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+i+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function r(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}var o=0;return{createHTMLCaptionsFromScreen:function(n,s,l,u){var d=null,c=!1,f=-1,h={start:s,end:l,spans:[]},p="style_cea608_white_black",m={},g={},v=[],y=void 0,_=void 0;for(y=0;y<15;++y){var b=u.rows[y],E="",T=null;if(!1===b.isEmpty()){var w=e(b.chars);null===d&&(d={x:w,y1:y,y2:y+1,p:[]}),w!==f&&c&&(d.p.push(h),h={start:s,end:l,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d={x:w,y1:y,y2:y+1,p:[]});for(var S=0;S<b.chars.length;++S){var x=b.chars[S],I=x.penState;if(null===T||!I.equals(T)){E.trim().length>0&&(h.spans.push({name:p,line:E,row:y}),E="");var C="style_cea608_"+I.foreground+"_"+I.background;I.underline&&(C+="_underline"),I.italics&&(C+="_italics"),g.hasOwnProperty(C)||(g[C]=JSON.parse(JSON.stringify(I))),T=I,p=C}E+=x.uchar}E.trim().length>0&&h.spans.push({name:p,line:E,row:y}),c=!0,f=w}else c=!1,f=-1,d&&(d.p.push(h),h={start:s,end:l,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d=null)}d&&(d.p.push(h),d.y2=y+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):m[d.name].p.contat(d.p),d=null);var A=[];for(y=0;y<v.length;++y){var M=v[y],P="sub_cea608_"+o++,R=document.createElement("div");R.id=P;var D=t(M);R.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+D;var k=document.createElement("div");k.className="paragraph bodyStyle",k.style.cssText=i(n);var N=document.createElement("div");N.className="cueUniWrapper",N.style.cssText="unicode-bidi: normal; direction: ltr;";for(var O=0;O<M.p.length;++O){var L=M.p[O],F=0;for(_=0;_<L.spans.length;++_){var j=L.spans[_];if(j.line.length>0){if(0!==_&&F!=j.row){var B=document.createElement("br");B.className="lineBreak",N.appendChild(B)}var U=!1;F===j.row&&(U=!0),F=j.row;var V=g[j.name],q=document.createElement("span");q.className="spanPadding "+j.name+" customSpanColor",q.style.cssText=i(n,V),0!==_&&U?_===L.spans.length-1?q.textContent=a(j.line):q.textContent=j.line:L.spans.length>1&&_<L.spans.length-1&&j.row===L.spans[_+1].row?q.textContent=r(j.line):q.textContent=j.line.trim(),N.appendChild(q)}}}k.appendChild(N),R.appendChild(k);var H={bodyStyle:["%",90]};for(var z in g)g.hasOwnProperty(z)&&(H[z]=["%",90]);A.push({type:"html",start:s,end:l,cueHTMLElement:R,cueID:P,cellResolution:[32,15],isFromCEA608:!0,regions:v,regionID:M.name,videoHeight:n.videoHeight,videoWidth:n.videoWidth,fontSize:H,lineHeight:{},linePadding:{}})}return A}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],188:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){E=e}function n(e){e.sender.getStreamProcessor()===v&&(w.extract(v.getStreamInfo().id,e.sender.getCurrentRepresentation().id)||l.trigger(s.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender}))}function i(e){e.fragmentModel===v.getFragmentModel()&&e.chunk.bytes&&(w.save(e.chunk),T.append(e.chunk),l.trigger(s.default.STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}e=e||{};var r=this.context,l=(0,o.default)(r).getInstance(),h=(0,c.default)(r).getInstance(),p=e.errHandler,m=e.type,g=e.mimeType,v=e.streamProcessor,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0;return y={getBufferControllerType:function(){return f},initialize:function(e){t(e),v.getRepresentationController(),w=(0,u.default)(r).getInstance()},createBuffer:function(e){try{if(T=(0,d.default)(r).create(E,e),!b){var t=T.getBuffer();t.hasOwnProperty(a.default.INITIALIZE)&&t.initialize(g,v),b=!0}return T}catch(t){if(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt'))try{T=h.getTextSourceBuffer()}catch(e){p.mediaSourceError("Error creating "+m+" source buffer.")}else p.mediaSourceError("Error creating "+m+" source buffer.")}},getType:function(){return m},getStreamProcessor:function(){return v},setSeekStartTime:function(){},getBuffer:function(){return T},getBufferLevel:function(){return 0},setMediaSource:t,getMediaSource:function(){return E},getIsBufferingCompleted:function(){return _},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){w.extract(e,t)||l.trigger(s.default.TIMED_TEXT_REQUESTED,{index:0,sender:y})},getRangeAt:function(){return null},reset:function(e){l.off(s.default.DATA_UPDATE_COMPLETED,n,y),l.off(s.default.INIT_FRAGMENT_LOADED,i,y),!e&&T&&(T.abort(),T.reset(),T=null)},updateTimestampOffset:function(e){T.timestampOffset===e||isNaN(e)||(T.timestampOffset=e)}},b=!1,E=null,null,_=!1,l.on(s.default.DATA_UPDATE_COMPLETED,n,y),l.on(s.default.INIT_FRAGMENT_LOADED,i,y),y}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(47)),s=i(e(51)),l=i(e(48)),u=i(e(202)),d=i(e(96)),c=i(e(190)),f="NotFragmentedTextBufferController";r.__dashjs_factory_name=f,n.default=l.default.getClassFactory(r),t.exports=n.default},{100:100,190:190,202:202,47:47,48:48,51:51,96:96}],189:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){return r.getBuffer()}e=e||{};var n,i=this.context,r=void 0;return n={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getStreamProcessor:function(){r.getStreamProcessor()},setSeekStartTime:function(e){r.setSeekStartTime(e)},getBuffer:t,setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},switchInitData:function(e,t){r.switchInitData(e,t)},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e)},updateTimestampOffset:function(e){var n=t();n.timestampOffset===e||isNaN(e)||(n.timestampOffset=e)}},r=e.type===a.default.FRAGMENTED_TEXT?(0,s.default)(i).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,l.default)(i).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),n}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(48)),s=i(e(106)),l=i(e(188));r.__dashjs_factory_name="TextBufferController",n.default=o.default.getClassFactory(r),t.exports=n.default},{100:100,106:106,188:188,48:48}],190:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var n=this,i=e.tracks,r=e.index;i.some(function(e,t){if(e.lang===w)return n.setTextTrack(t),r=t,!0}),x||this.setTextTrack(-1),S=r,T.trigger(f.default.TEXT_TRACKS_ADDED,{enabled:t(),index:r,tracks:i})}function t(){var e=!0;return I&&!C&&(e=!1),e}function n(){I=!1}var i=this.context,r=void 0,o=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0;return r={setConfig:function(e){e&&(e.errHandler&&(h=e.errHandler),e.dashManifestModel&&(p=e.dashManifestModel),e.manifestModel&&(m=e.manifestModel),e.mediaController&&(g=e.mediaController),e.videoModel&&(v=e.videoModel),e.streamController&&(y=e.streamController),e.textTracks&&(_=e.textTracks),e.vttParser&&(b=e.vttParser),e.ttmlParser&&(E=e.ttmlParser),o.setConfig({errHandler:h,dashManifestModel:p,manifestModel:m,mediaController:g,videoModel:v,streamController:y,textTracks:_,vttParser:b,ttmlParser:E}))},getTextSourceBuffer:function(){return o},getAllTracksAreDisabled:function(){return I},addEmbeddedTrack:function(e){o.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return w},setTextDefaultLanguage:function(e){"string"==typeof e&&(w=e)},setTextDefaultEnabled:function(e){"boolean"==typeof e&&((x=e)||this.setTextTrack(-1))},getTextDefaultEnabled:function(){return x},enableText:function(e){"boolean"==typeof e&&t()!==e&&(e&&this.setTextTrack(S),e||(S=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:t,setTextTrack:function(e){var t=o.getConfig(),n=t.fragmentModel,i=t.fragmentedTracks,r=t.videoModel,s=void 0,l=void 0;I=-1===e;var u=_.getCurrentTrackIdx();if(u!==e){_.setModeForTrackIdx(u,a.default.TEXT_HIDDEN),_.setCurrentTrackIdx(e),_.setModeForTrackIdx(e,a.default.TEXT_SHOWING);var d=_.getCurrentTrackInfo();if(d&&d.isFragmented&&!d.isEmbedded)for(var c=0;c<i.length;c++){var f=i[c];if(d.lang===f.lang&&d.index===f.index&&(f.id?d.label===f.id:d.label===f.index))if(f!==g.getCurrentTrackFor(a.default.FRAGMENTED_TEXT,y.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),o.remove(),_.deleteCuesFromTrackIdx(u),g.setTrack(f),o.setCurrentFragmentedTrackIdx(c);else if(-1===u){for(var h=y.getActiveStreamProcessors(),p=0;p<h.length;p++)if(h[p].getType()===a.default.FRAGMENTED_TEXT){l=h[p];break}l.getIndexHandler().setCurrentTime(r.getTime()),l.getScheduleController().start()}}else if(d&&!d.isFragmented){for(h=y.getActiveStreamProcessors(),c=0;c<h.length;c++)if(h[c].getType()===a.default.TEXT){s=(l=h[c]).getMediaInfoArr();break}if(l&&s)for(c=0;c<s.length;c++)if(s[c].index===d.index&&s[c].lang===d.lang){l.selectMediaInfo(s[c]);break}}}},getCurrentTrackIdx:function(){return _.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){"boolean"==typeof e&&(C=e)},reset:function(){n(),o.resetEmbedded(),o.reset()}},w="",S=-1,x=!0,C=!1,_=(0,l.default)(i).getInstance(),b=(0,u.default)(i).getInstance(),E=(0,d.default)(i).getInstance(),o=(0,s.default)(i).getInstance(),T=(0,c.default)(i).getInstance(),_.initialize(),T.on(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,e,r),n(),r}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(48)),s=i(e(191)),l=i(e(192)),u=i(e(209)),d=i(e(207)),c=i(e(47)),f=i(e(51));r.__dashjs_factory_name="TextController",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{100:100,191:191,192:192,207:207,209:209,47:47,48:48,51:51}],191:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){O=null,F=NaN,j=[],V=null,L=!1,k=[],M=null}function t(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&r(t.bytes,t)}function n(){H=[],(N=(0,h.default)(_).getInstance()).setConfig({videoModel:B}),N.initialize(),S=(0,u.default)(_).getInstance(),(D=(0,l.default)(_).getInstance()).setConfig({boxParser:S}),q=null,!1,z=0,$=[],Y=[],G=null,E=!0,K=(0,p.default)(_).getInstance();var e=U.getActiveStreamProcessors();for(var n in e)if("video"===e[n].getType()){W=e[n].getCurrentRepresentationInfo().MSETimeOffset;break}b.on(y.default.VIDEO_CHUNK_RECEIVED,t,this)}function i(e,t){var n=new s.default,i={subtitle:"subtitles",caption:"captions"};n.captionData=e,n.lang=t.lang,n.label=t.id?t.id:t.index,n.index=t.index,n.isTTML=function(){var e=!1;return t.codec&&t.codec.search(a.default.STPP)>=0&&(e=!0),t.mimeType&&t.mimeType.search(a.default.TTML)>=0&&(e=!0),e}(),n.defaultTrack=function(e){var t=!1;return H.length>1&&e.isEmbedded?t=e.id&&e.id===a.default.CC1:1===H.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===H.length&&(t=e.index===k[0].index),t}(t),n.isFragmented=!I.getIsTextTrack(t.mimeType),n.isEmbedded=!!t.isEmbedded,n.kind=function(){var e=t.roles.length>0?i[t.roles[0]]:i.caption;return e===i.caption||e===i.subtitle?e:i.caption}(),n.roles=t.roles,n.accessibility=t.accessibility;var r=(k?k.length:0)+H.length;N.addTextTrack(n,r)}function r(e,t){var n=void 0,r=void 0,s=void 0,l=void 0,u=void 0,d=void 0,f=void 0,h=t.mediaInfo,p=h.type,v=h.mimeType,y=h.codec||v;if(y){if(p===a.default.FRAGMENTED_TEXT)if(L)if(r=(d=D.getSamplesInfo(e)).sampleList,!V&&r.length>0&&(V=r[0].cts-t.start*F),y.search(a.default.STPP)>=0)for(M=null!==M?M:c(y),s=0;s<r.length;s++){var _=(k=r[s]).cts,b=_-V;this.buffered.add(b/F,(b+k.duration)/F);var E=new DataView(e,k.offset,k.subSizes[0]);f=m.default.Utils.dataViewToString(E,a.default.UTF8);var T=[],S=k.offset+k.subSizes[0];for(l=1;l<k.subSizes.length;l++){var I=new Uint8Array(e,S,k.subSizes[l]),A=String.fromCharCode.apply(null,I);T.push(A),S+=k.subSizes[l]}try{var P=C.getValue().ttmlTimeIsRelative?_/F:0;n=M.parse(f,P,_/F,(_+k.duration)/F,T),N.addCaptions(q,V/F,n)}catch(e){O.removeExecutedRequestsBeforeTime(),this.remove(),w.error("TTML parser error: "+e.message)}}else{var R=[];for(s=0;s<r.length;s++){var k;(k=r[s]).cts-=V,this.buffered.add(k.cts/F,(k.cts+k.duration)/F);var j=e.slice(k.offset,k.offset+k.size),U=m.default.parseBuffer(j);for(l=0;l<U.boxes.length;l++){var X=U.boxes[l];if(w.debug("VTT box1: "+X.type),"vtte"!==X.type&&"vttc"===X.type)for(w.debug("VTT vttc boxes.length = "+X.boxes.length),u=0;u<X.boxes.length;u++){var Q=X.boxes[u];if(w.debug("VTT box2: "+Q.type),"payl"===Q.type){var J=Q.cue_text;w.debug("VTT cue_text = "+J);var Z=k.cts/F,ee=(k.cts+k.duration)/F;R.push({start:Z,end:ee,data:J,styles:{}}),w.debug("VTT "+Z+"-"+ee+" : "+J)}}}}R.length>0&&N.addCaptions(q,0,R)}else L=!0,F=D.getMediaTimescaleFromMoov(e);else if(p===a.default.TEXT){E=new DataView(e,0,e.byteLength);f=m.default.Utils.dataViewToString(E,a.default.UTF8);try{n=c(y).parse(f,0),N.addCaptions(N.getCurrentTrackIdx(),0,n)}catch(e){x.timedTextError(e,"parse",f)}}else if(p===a.default.VIDEO)if(t.segmentType===o.HTTPRequest.INIT_SEGMENT_TYPE){if(0===z)for(z=D.getMediaTimescaleFromMoov(e),s=0;s<H.length;s++)i(null,H[s])}else{if(0===z)return void w.warn("CEA-608: No timescale for embeddedTextTrack yet");var te=function(e,t){return function(e,n,i){var r=null;(r=B.getTTMLRenderingDiv()?K.createHTMLCaptionsFromScreen(B.getElement(),e,n,i):[{start:e,end:n,data:i.getDisplayText(),styles:{}}])&&N.addCaptions(t,0,r)}},ne=(d=D.getSamplesInfo(e)).lastSequenceNumber;if(!$[0]&&!$[1]){var ie=void 0,re=void 0;for(s=0;s<H.length;s++){if(H[s].id===a.default.CC1?re=N.getTrackIdxForId(a.default.CC1):H[s].id===a.default.CC3&&(re=N.getTrackIdxForId(a.default.CC3)),-1===re)return void w.warn("CEA-608: data before track is ready.");ie=te(0,re),$[s]=new g.default.Cea608Parser(s+1,{newCue:ie},null)}}if(z&&-1==Y.indexOf(ne)){if(null!==G&&ne!==G+d.numSequences)for(s=0;s<$.length;s++)$[s]&&$[s].reset();for(var ae=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},i=new DataView(e),r=0;r<t.length;r++)for(var a=t[r],o=g.default.findCea608Nalus(i,a.offset,a.size),s=null,l=0,u=0;u<o.length;u++)for(var d=g.default.extractCea608DataFromRange(i,o[u]),c=0;c<2;c++)d[c].length>0&&(a.cts!==s?l=0:l+=1,n.fields[c].push([a.cts+W*z,d[c],l]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,d.sampleList),oe=0;oe<$.length;oe++){var se=ae.fields[oe],le=$[oe];if(le)for(s=0;s<se.length;s++)le.addData(se[s][0]/z,se[s][1])}G=ne,Y.push(ne)}}}else w.error("No text type defined")}function c(e){var t=void 0;return e.search(a.default.VTT)>=0?t=P:(e.search(a.default.TTML)>=0||e.search(a.default.STPP)>=0)&&(t=R),t}var _=this.context,b=(0,v.default)(_).getInstance(),E=!1,T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=void 0,M=void 0,P=void 0,R=void 0,D=void 0,k=void 0,N=void 0,O=void 0,L=void 0,F=void 0,j=void 0,B=void 0,U=void 0,V=void 0,q=void 0,H=void 0,z=void 0,G=void 0,Y=void 0,$=void 0,K=void 0,W=void 0;return T={initialize:function(e,t){E||n(),N.setConfig({videoModel:B}),N.initialize(),S||(S=(0,u.default)(_).getInstance(),(D=(0,l.default)(_).getInstance()).setConfig({boxParser:S})),function(e,t){var n=!I.getIsTextTrack(e);if(t){if(k=k.concat(t.getMediaInfoArr()),n){O=t.getFragmentModel(),T.buffered=(0,d.default)(_).create(),j=A.getTracksFor(a.default.FRAGMENTED_TEXT,U.getActiveStreamInfo());for(var r=A.getCurrentTrackFor(a.default.FRAGMENTED_TEXT,U.getActiveStreamInfo()),o=0;o<j.length;o++)if(j[o]===r){q=o;break}}for(var o=0;o<k.length;o++)i(null,k[o])}}(e,t)},append:r,abort:function(){N.deleteAllTextTracks(),D=null,S=null,k=[],O=null,L=!1,j=[]},addEmbeddedTrack:function(e){if(E||n(),e)if(e.id===a.default.CC1||e.id===a.default.CC3){for(var t=0;t<H.length;t++)if(H[t].id===e.id)return;H.push(e)}else w.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){b.off(y.default.VIDEO_CHUNK_RECEIVED,t,this),N&&N.deleteAllTextTracks(),E=!1,H=[],$=[null,null],Y=[],G=null},setConfig:function(e){e&&(e.errHandler&&(x=e.errHandler),e.dashManifestModel&&(I=e.dashManifestModel),e.manifestModel&&(C=e.manifestModel),e.mediaController&&(A=e.mediaController),e.videoModel&&(B=e.videoModel),e.streamController&&(U=e.streamController),e.textTracks&&(N=e.textTracks),e.vttParser&&(P=e.vttParser),e.ttmlParser&&(R=e.ttmlParser))},getConfig:function(){return{fragmentModel:O,fragmentedTracks:j,videoModel:B}},setCurrentFragmentedTrackIdx:function(e){q=e},remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){e(),U=null,B=null,N=null}},w=(0,f.default)(_).getInstance().getLogger(T),e(),T}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=e(233),s=i(e(225)),l=i(e(72)),u=i(e(196)),d=i(e(198)),c=i(e(48)),f=i(e(46)),h=i(e(192)),p=i(e(187)),m=i(e(6)),g=i(e(2)),v=i(e(47)),y=i(e(51));r.__dashjs_factory_name="TextSourceBuffer",n.default=c.default.getSingletonFactory(r),t.exports=n.default},{100:100,187:187,192:192,196:196,198:198,2:2,225:225,233:233,46:46,47:47,48:48,51:51,6:6,72:72}],192:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=_[e].kind,n=void 0!==_[e].label?_[e].label:_[e].lang,i=_[e].lang,r=_[e].isTTML,a=_[e].isEmbedded,o=y.addTextTrack(t,n,i);return o.isEmbedded=a,o.isTTML=r,o}function t(e,t){var n=y.getClientWidth(),i=y.getClientHeight(),r=y.getVideoWidth(),a=y.getVideoHeight(),o=y.getVideoRelativeOffsetTop(),l=y.getVideoRelativeOffsetLeft(),u=r/a,d=!1;e.isFromCEA608&&(u=3.5/3,d=!0);var c=function(e,t,n,i,r,a){var o=0,s=0;e/t>n/i?o=(s=t)/i*n:s=(o=e)/n*i;var l,u,d=0,c=0;return o/s>r?(c=s,d=s*r):(d=o,c=o/r),l=(e-d)/2,u=(t-c)/2,a?{x:l+.1*d,y:u+.1*c,w:.8*d,h:.8*c}:{x:l,y:u,w:d,h:c}}.call(this,n,i,r,a,u,d),f=c.w,h=c.h,m=c.x,g=c.y;if(f!=S||h!=x||m!=T||g!=w||t){if(T=m+l,w=g+o,S=f,x=h,I){var v=I.style;v.left=T+"px",v.top=w+"px",v.width=S+"px",v.height=x+"px",v.zIndex=A&&document[A]||M?R:null,p.trigger(s.default.CAPTION_CONTAINER_RESIZE,{})}var _=e.activeCues;if(_)for(var b=_.length,E=0;E<b;++E){var C=_[E];C.scaleCue(C)}}}function n(e){var t=S,n=x,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0;if(e.cellResolution){var u=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){a=(e.linePadding[r]*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),c=0;c<d.length;c++)d[c].style.cssText=d[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a),d[c].style.cssText=d[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?o=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.fontSize[r][1]),a=(o*u[1]).toString(),l="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var f=0;f<l.length;f++)l[f].style.cssText=l[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?s=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(s=e.lineHeight[r][1]),a=(s*u[1]).toString(),l=document.getElementsByClassName(r);for(var h=0;h<l.length;h++)l[h].style.cssText=l[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+a)}}}if(e.isd){var p=document.getElementById(e.cueID);p&&I.removeChild(p),i(e)}}function i(e){if(I){var t=document.createElement("div");I.appendChild(t),P=(0,d.renderHTML)(e.isd,t,function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,i=/^#(.*)$/;if(n.test(t)){var r=n.exec(t),a=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(e.images[a])}if(i.test(t)){a=(r=i.exec(t))[1];return"data:image/png;base64,"+e.embeddedImages[a]}return null},I.clientHeight,I.clientWidth,!1,function(e){g.info("renderCaption :",e)},P,!0),t.id=e.cueID,p.trigger(s.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:E})}}function r(e){return e>=0&&_[e]?y.getTextTrack(_[e].kind,_[e].label,_[e].lang,_[e].isTTML,_[e].isEmbedded):null}function l(e){if(e!==E){var n=r(E=e);(function(e){f.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=y.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){g.info(""+e.message)}}}.call(this):function(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}.call(this)}).call(this,n),C&&(clearInterval(C),C=null),n&&"html"===n.renderingType&&(t.call(this,n,!0),C=setInterval(t.bind(this,n),500))}}function c(e){if(e.cues)for(var t=e.cues,n=t.length-1;n>=0;n--)e.removeCue(t[n])}function f(){if(I)for(;I.firstChild;)I.removeChild(I.firstChild)}var h=this.context,p=(0,o.default)(h).getInstance(),m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,b=void 0,E=void 0,T=void 0,w=void 0,S=void 0,x=void 0,I=void 0,C=void 0,A=void 0,M=void 0,P=void 0,R=void 0;return m={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(v=window.VTTCue||window.TextTrackCue,_=[],b=[],E=-1,T=0,w=0,S=0,x=0,I=null,C=null,M=!1,R=2147483647,P=null,void 0!==document.fullscreenElement?A="fullscreenElement":void 0!==document.webkitIsFullScreen?A="webkitIsFullScreen":document.msFullscreenElement?A="msFullscreenElement":document.mozFullScreen&&(A="mozFullScreen"))},displayCConTop:function(e){M=e,I&&!document[A]&&(I.style.zIndex=e?R:null)},addTextTrack:function(t,n){if(_.length!==n){if(_.push(t),_.length===n){_.sort(function(e,t){return e.index-t.index}),I=y.getTTMLRenderingDiv();for(var i=-1,o=0;o<_.length;o++){var u=e.call(this,o);b.push(u),_[o].defaultTrack&&(u.default=!0,i=o);var d=r(o);d&&(d.mode=a.default.TEXT_SHOWING,I&&(_[o].isTTML||_[o].isEmbedded)?d.renderingType="html":d.renderingType="default"),this.addCaptions(o,0,_[o].captionData),p.trigger(s.default.TEXT_TRACK_ADDED)}if(l.call(this,i),i>=0)for(var c=0;c<_.length;c++){var f=r(c);f&&(f.mode=c===i?a.default.TEXT_SHOWING:a.default.TEXT_HIDDEN)}p.trigger(s.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:E,tracks:_})}}else g.error("Trying to add too many tracks.")},addCaptions:function(e,t,o){var s=r(e),l=this;if(s&&o&&0!==o.length)for(var u=0;u<o.length;u++){var d=void 0,f=o[u];s.cellResolution=f.cellResolution,s.isFromCEA608=f.isFromCEA608,"html"===f.type&&I?((d=new v(f.start-t,f.end-t,"")).cueHTMLElement=f.cueHTMLElement,d.isd=f.isd,d.images=f.images,d.embeddedImages=f.embeddedImages,d.cueID=f.cueID,d.scaleCue=n.bind(l),d.cellResolution=f.cellResolution,d.lineHeight=f.lineHeight,d.linePadding=f.linePadding,d.fontSize=f.fontSize,I.style.left=T+"px",I.style.top=w+"px",I.style.width=S+"px",I.style.height=x+"px",d.onenter=function(){s.mode===a.default.TEXT_SHOWING&&(this.isd?(i(this),g.debug("Cue enter id:"+this.cueID)):(I.appendChild(this.cueHTMLElement),n.call(l,this)))},d.onexit=function(){if(I)for(var e=I.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(g.debug("Cue exit id:"+e[t].id),I.removeChild(e[t]))}):f.data&&(d=new v(f.start-t,f.end-t,f.data),f.styles&&(void 0!==f.styles.align&&"align"in d&&(d.align=f.styles.align),void 0!==f.styles.line&&"line"in d&&(d.line=f.styles.line),void 0!==f.styles.position&&"position"in d&&(d.position=f.styles.position),void 0!==f.styles.size&&"size"in d&&(d.size=f.styles.size)));try{d?s.addCue(d):g.error("impossible to display subtitles.")}catch(e){throw c(s),s.addCue(d),e}}},getCurrentTrackIdx:function(){return E},setCurrentTrackIdx:l,getTrackIdxForId:function(e){for(var t=-1,n=0;n<_.length;n++)if(_[n].label===e){t=n;break}return t},getCurrentTrackInfo:function(){return _[E]},setModeForTrackIdx:function(e,t){var n=r(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e){var t=r(e);t&&c(t)},deleteAllTextTracks:function(){for(var e=b?b.length:0,t=0;t<e;t++){var n=r(t);n&&(c.call(this,n),n.mode="disabled")}b=[],_=[],C&&(clearInterval(C),C=null),E=-1,f.call(this)},deleteTextTrack:function(e){y.removeChild(b[e]),b.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(y=e.videoModel)}},g=(0,u.default)(h).getInstance().getLogger(m),m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(47)),s=i(e(51)),l=i(e(48)),u=i(e(46)),d=e(41);r.__dashjs_factory_name="TextTracks",n.default=l.default.getSingletonFactory(r),t.exports=n.default},{100:100,41:41,46:46,47:47,48:48,51:51}],193:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){r&&r.reset()}var n,i=this.context,r=void 0;return n={get:function(e){var t=r.getCurrentTrack();if(!t||t.segmentDuration<=0)return null;var n=Math.floor(e/t.segmentDuration),i=e%t.segmentDuration,a=Math.floor(i*t.tilesHor*t.tilesVert/t.segmentDuration),o=new s.default;return o.url=function(e,t){var n=t+e.startNumber,i=(0,d.replaceTokenForTemplate)(e.templateUrl,"Number",n);return i=(0,d.replaceTokenForTemplate)(i,"Time",(n-1)*e.segmentDuration),i=(0,d.replaceTokenForTemplate)(i,"Bandwidth",e.bandwidth),(0,d.unescapeDollarsInTemplate)(i)}(t,n),o.width=Math.floor(t.widthPerTile),o.height=Math.floor(t.heightPerTile),o.x=Math.floor(a%t.tilesHor)*t.widthPerTile,o.y=Math.floor(a/t.tilesHor)*t.heightPerTile,o},setTrackByIndex:function(e){r.setTrackByIndex(e)},getCurrentTrackIndex:function(){return r.getCurrentTrackIndex()},getBitrateList:function(){var e=r.getTracks();if(!e||0===e.length)return[];var t=0;return e.map(function(e){var n=new u.default;return n.mediaType=o.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n})},reset:t},t(),r=(0,l.default)(i).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream}),n}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(100)),s=i(e(226)),l=i(e(194)),u=i(e(212)),d=e(76);r.__dashjs_factory_name="ThumbnailController",n.default=a.default.getClassFactory(r),t.exports=n.default},{100:100,194:194,212:212,226:226,48:48,76:76}],194:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){i(),function(){if(m&&f&&h){var e=m?m.getStreamInfo():null;if(e){var t=h.getMediaInfoForType(e,a.default.IMAGE);if(t){var i=h.getDataForMedia(t);if(i){var r=f.getRepresentationsForAdaptation(i);r&&r.length>0&&r.forEach(function(e){e.segmentInfoType===o.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media&&n(e)}),v.length>0&&(v.sort(function(e,t){return e.bitrate-t.bitrate}),y=v.length-1)}}}}}()}function n(e){var t=new l.default;t.id=e.id,t.bitrate=e.bandwidth,t.width=e.width,t.height=e.height,t.tilesHor=1,t.tilesVert=1,t.startNumber=e.startNumber,t.segmentDuration=e.segmentDuration,t.timescale=e.timescale,t.templateUrl=function(e){var t=g.isRelative(e.media)?g.resolve(e.media,p.resolve(e.path).url):e.media;return t?(0,d.replaceIDForTemplate)(t,e.id):""}(e),e.essentialProperties&&e.essentialProperties.forEach(function(e){if(e.schemeIdUri===c&&e.value){var n=e.value.split("x");2!==n.length||isNaN(n[0])||isNaN(n[1])||(t.tilesHor=parseInt(n[0],10),t.tilesVert=parseInt(n[1],10))}}),t.tilesHor>0&&t.tilesVert>0&&(t.widthPerTile=t.width/t.tilesHor,t.heightPerTile=t.height/t.tilesVert,v.push(t))}function i(){v=[],y=-1}var r,s=this.context,f=e.dashManifestModel,h=e.adapter,p=e.baseURLController,m=e.stream,g=(0,u.default)(s).getInstance(),v=void 0,y=void 0;return r={initialize:t,getTracks:function(){return v},reset:i,setTrackByIndex:function(e){v&&0!==v.length&&(e>=v.length&&(e=v.length-1),y=e)},getCurrentTrack:function(){return y<0?null:v[y]},getCurrentTrackIndex:function(){return y}},t(),r}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(100)),o=i(e(58)),s=i(e(48)),l=i(e(227)),u=i(e(208)),d=e(76),c="http://dashif.org/thumbnail_tile";r.__dashjs_factory_name="ThumbnailTracks",n.default=s.default.getClassFactory(r),t.exports=n.default},{100:100,208:208,227:227,48:48,58:58,76:76}],195:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){d.reset()}var t,n=this.context,i=(0,a.default)(n).getInstance(),r=void 0,d=void 0,h=void 0,p=void 0,m=void 0;return t={chooseSelectorFromManifest:function(e){(function(){if(!r||!r.hasOwnProperty("getIsDVB"))throw new Error("Missing config parameter(s)")})(),m=r.getIsDVB(e)?p:h},select:function(t){var n=t.baseUrls,r=t.selectedIdx;if(!isNaN(r))return n[r];var a=m.select(n);return a?(t.selectedIdx=n.indexOf(a),a):(i.trigger(o.default.URL_RESOLUTION_FAILED,{error:new Error(c,f)}),void(m===h&&e()))},reset:e,setConfig:function(e){e.selector&&(m=e.selector),e.dashManifestModel&&(r=e.dashManifestModel)}},d=(0,s.default)(n).create({updateEventName:o.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:o.default.SERVICE_LOCATION_BLACKLIST_ADD}),h=(0,u.default)(n).create({blacklistController:d}),p=(0,l.default)(n).create({blacklistController:d}),m=h,t}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(105)),l=i(e(211)),u=i(e(210)),d=i(e(48)),c=1,f="Failed to resolve a valid URL";r.__dashjs_factory_name="BaseURLSelector";var h=d.default.getClassFactory(r);h.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=c,h.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=f,d.default.updateClassFactory(r.__dashjs_factory_name,h),n.default=h,t.exports=n.default},{105:105,210:210,211:211,47:47,48:48,51:51}],196:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function t(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}var n=this.context;return{parse:function(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),i=(0,a.default)(n).create();return i.setData(t),i},findLastTopIsoBoxCompleted:function(n,i,r){if(void 0===r&&(r=0),!i||r+8>=i.byteLength)return new l.default(0,!1);for(var a=i instanceof ArrayBuffer?new Uint8Array(i):i,o=void 0,s=0;r<a.byteLength;){var u=e(a,r),d=t(a,r+4);if(0===u)break;r+u<=a.byteLength&&(n.indexOf(d)>=0?o=new l.default(r,!0,u):s=r+u),r+=u}return o||new l.default(s,!1)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(203)),o=i(e(48)),s=i(e(6)),l=i(e(218));r.__dashjs_factory_name="BoxParser",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{203:203,218:218,48:48,6:6}],197:[function(e,t,n){"use strict";function i(){var e,t=void 0;return e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}},t=!1,e}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="Capabilities",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],198:[function(e,t,n){"use strict";function i(){function e(e){if(null===e||isNaN(e)||e%1!=0)throw new Error("index argument is not an integer")}return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(t){return e(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return e(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="CustomTimeRanges",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],199:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){if(void 0!==v)return v;v=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return g.warn("DOMStorage access denied: "+e.message),v}if(!t||e!==d&&e!==c)return v;try{t.setItem("1","1"),t.removeItem("1"),v=!0}catch(e){g.warn("DOMStorage is supported, but cannot be used: "+e.message)}return v}function n(){return 6e5*Math.round((new Date).getTime()/6e5)}function i(e,n){return t(e)&&p["get"+n+"CachingInfo"]().enabled}function r(){if(!p||!p.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error("Missing config parameter(s)")}e=e||{};var a=this.context,p=e.mediaPlayerModel,m=void 0,g=void 0,v=void 0;return m={getSavedBitrateSettings:function(e){var t=NaN;if(r(),i(d,f)){var n=l.replace(/\?/,e);try{var a=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=p.getLastMediaSettingsCachingInfo().ttl||!1,s=parseFloat(a.bitrate);isNaN(s)||o?o&&localStorage.removeItem(n):(t=s,g.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(i(d,f)&&t){var r=l.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:n()}))}catch(e){g.error(e.message)}}},getSavedMediaSettings:function(e){if(r(),!i(d,h))return null;var t=null,n=u.replace(/\?/,e);try{var a=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(a.timestamp,10)>=p.getLastMediaSettingsCachingInfo().ttl||!1;t=a.settings,o&&(localStorage.removeItem(n),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(i(d,h)){var r=u.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:n()}))}catch(e){g.error(e.message)}}}},g=(0,o.default)(a).getInstance().getLogger(m),t(d)&&s.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){g.error(e.message)}}}),m}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],l="dashjs_?_bitrate",u="dashjs_?_settings",d="localStorage",c="sessionStorage",f="LastBitrate",h="LastMediaSettings";r.__dashjs_factory_name="DOMStorage";var p=a.default.getSingletonFactory(r);n.default=p,t.exports=n.default},{46:46,48:48}],200:[function(e,t,n){"use strict";function i(e){function t(e,t){var n=!0,i=0;if(void 0===t&&(t=!1),e.tag>16777215?(r.getUint32(a)!==e.tag&&(n=!1),i=4):e.tag>65535?(256*r.getUint16(a)+r.getUint8(a+2)!==e.tag&&(n=!1),i=3):e.tag>255?(r.getUint16(a)!==e.tag&&(n=!1),i=2):(r.getUint8(a)!==e.tag&&(n=!1),i=1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(a+=i),n}function n(e){var t=1,n=128,i=-1,o=0,s=r.getUint8(a),l=0;for(l=0;l<8;l+=1){if((s&n)===n){o=void 0===e?s&~n:s,i=l;break}n>>=1}for(l=0;l<i;l+=1,t+=1)o=o<<8|255&r.getUint8(a+t);return a+=t,o}e=e||{};var i=void 0,r=new DataView(e.data),a=0;return i={getPos:function(){return a},setPos:function(e){a=e},consumeTag:t,consumeTagAndSize:function(e,i){var r=t(e,i);return r&&n(),r},parseTag:function(e){var r;return t(e),r=n(),i[e.parse](r)},skipOverElement:function(e,i){var r=t(e,i),o=void 0;return r&&(o=n(),a+=o),r},getMatroskaCodedNum:n,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=r.getFloat32(a),a+=4;break;case 8:t=r.getFloat64(a),a+=8}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&r.getUint8(a+n);return a+=e,t},moreData:function(){return a<r.byteLength}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="EBMLParser",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],201:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,t=(0,a.default)(e).getInstance();return{capabilityError:function(e){t.trigger(o.default.ERROR,{error:"capability",event:e})},downloadError:function(e,n,i){t.trigger(o.default.ERROR,{error:"download",event:{id:e,url:n,request:i}})},manifestError:function(e,n,i,r){t.trigger(o.default.ERROR,{error:"manifestError",event:{message:e,id:n,manifest:i,event:r}})},timedTextError:function(e,n,i){t.trigger(o.default.ERROR,{error:"cc",event:{message:e,id:n,cc:i}})},mediaSourceError:function(e){t.trigger(o.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){t.trigger(o.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){t.trigger(o.default.ERROR,{error:"key_message",event:e})},mssError:function(e){t.trigger(o.default.ERROR,{error:"mssError",event:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(47)),o=i(e(51)),s=i(e(48));r.__dashjs_factory_name="ErrorHandler";var l=s.default.getSingletonFactory(r);l.CAPABILITY_ERROR_MEDIASOURCE="mediasource",l.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",l.DOWNLOAD_ERROR_ID_MANIFEST="manifest",l.DOWNLOAD_ERROR_ID_SIDX="SIDX",l.DOWNLOAD_ERROR_ID_CONTENT="content",l.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",l.DOWNLOAD_ERROR_ID_XLINK="xlink",l.MANIFEST_ERROR_ID_CODEC="codec",l.MANIFEST_ERROR_ID_PARSE="parse",l.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",l.TIMED_TEXT_ERROR_ID_PARSE="parse",s.default.updateSingletonFactory(r.__dashjs_factory_name,l),n.default=l,t.exports=n.default},{47:47,48:48,51:51}],202:[function(e,t,n){"use strict";function i(){var e={};return{save:function(t){var n=t.streamId,i=t.representationId;e[n]=e[n]||{},e[n][i]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="InitCache",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],203:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var i=[];if(!e||!n||"function"!=typeof n.fetchAll)return i;for(var r=n.fetchAll(e),a=void 0,o=0,s=r.length;o<s;o++)(a=t(r[o]))&&i.push(a);return i}function t(e){if(!e)return null;var t=new a.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}var n=void 0;return{getBox:function(e){return e&&n&&n.boxes&&0!==n.boxes.length&&"function"==typeof n.fetch?t(n.fetch(e)):null},getBoxes:e,setData:function(e){n=e},getLastBox:function(){if(!n||!n.boxes||!n.boxes.length)return null;var t=e(n.boxes[n.boxes.length-1].type);return t.length>0?t[t.length-1]:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(217)),o=i(e(48));r.__dashjs_factory_name="IsoFile",n.default=o.default.getClassFactory(r),t.exports=n.default},{217:217,48:48}],204:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).timelineConverter,n=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(t&&t.hasOwnProperty("getExpectedLiveEdge")&&n&&n.hasOwnProperty("getCurrentRepresentationInfo")))throw new Error("Missing config parameter(s)")}();var e=n.getCurrentRepresentationInfo(),i=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(i=t.getExpectedLiveEdge(),t.setClientTimeOffset(i-e.DVRWindow.end)),i},reset:function(){t=null,n=null}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="LiveEdgeFinder",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],205:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return{areEqual:function(e,t){return(0,o.default)(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(7));r.__dashjs_factory_name="ObjectUtils",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{48:48,7:7}],206:[function(e,t,n){"use strict";function i(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="RequestModifier",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],207:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){var e="cue_TTML_"+a;return a++,e}var t=this.context,n=(0,s.default)(t).getInstance(),i=void 0,r=void 0,a=0;return i={parse:function(t,i,a,o,s){var d=void 0,c="",f=[],h=void 0,p=void 0,m={},g={},v="",y="",_={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void r.warn("smpte-tt imagetype != PNG. Discarded");v=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){v&&(g[v]=y.trim()),y="",v=""},onText:function(e){v&&(y+=e)}};if(!t)throw c="no ttml data to parse",new Error(c);m.data=t,n.trigger(l.default.TTML_TO_PARSE,m);var b=(0,u.fromXML)(m.data,function(e){c=e},_);n.trigger(l.default.TTML_PARSED,{ttmlString:m.data,ttmlDoc:b});var E=b.getMediaTimeEvents();for(d=0;d<E.length;d++){var T=(0,u.generateISD)(b,E[d],function(e){c=e});T.contents.some(function(e){return e.contents.length})&&(h=E[d]+i<a?a:E[d]+i)<(p=E[d+1]+i>o?o:E[d+1]+i)&&f.push({start:h,end:p,type:"html",cueID:e(),isd:T,images:s,embeddedImages:g})}if(""!==c)throw r.error(c),new Error(c);return f}},r=(0,o.default)(t).getInstance().getLogger(i),i}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s=i(e(47)),l=i(e(51)),u=e(41);r.__dashjs_factory_name="TTMLParser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{41:41,46:46,47:47,48:48,51:51}],208:[function(e,t,n){"use strict";function i(){function e(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function t(e){var t=e.match(d);return t?t[1]:""}function n(e){var t=e.match(s);return t?t[0]:""}function i(e){return!s.test(e)}function r(e){return i(e)&&"/"===e.charAt(0)}function a(e){return 0===e.indexOf("//")}var o=void 0,s=/^[a-z][a-z0-9+\-.]*:/i,l=/^https?:\/\//i,u=/^https:\/\//i,d=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,c=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},f=function(o,s){var l=e;if(!s)return o;if(!i(o))return o;r(o)&&(l=t),a(o)&&(l=n);var u=l(s);return[u,o].join("/"!==u.charAt(u.length-1)&&"/"!==o.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),o=c}catch(e){}finally{o=o||f}}(),{parseBaseUrl:e,parseOrigin:t,parseScheme:n,isRelative:i,isPathAbsolute:r,isSchemeRelative:a,isHTTPURL:function(e){return l.test(e)},isHTTPS:function(e){return u.test(e)},resolve:function(e,t){return o(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="URLUtils",n.default=r.default.getSingletonFactory(i),t.exports=n.default},{48:48}],209:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function t(e){var t=e.split(d),i=t[1].split(f);return i.shift(),t[1]=i[0],i.shift(),{cuePoints:t,styles:n(i)}}function n(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function i(e,t){for(var n,i=t,r="",a="";""!==e[i]&&i<e.length;)i++;if((n=i-t)>1)for(var o=0;o<n;o++){if((a=e[t+o]).match(d)){r="";break}r+=a,o!==n-1&&(r+="\n")}else(a=e[t]).match(d)||(r=a);return r}var r=this.context,a=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0;return a={parse:function(n){var r,a=[],o=void 0;if(!n)return a;r=(n=n.split(u)).length,o=-1;for(var f=0;f<r;f++){var h=n[f];if(h.length>0&&h!==s&&h.match(d)){var p=t(h),m=p.cuePoints,g=p.styles,v=i(n,f+1),y=e(m[0].replace(c,"")),_=e(m[1].replace(c,""));!isNaN(y)&&!isNaN(_)&&y>=o&&_>y?""!==v?(o=y,a.push({start:y,end:_,data:v,styles:g})):l.error("Skipping cue due to empty/malformed cue text"):l.error("Skipping cue due to incorrect cue timing")}}return a}},l=(0,o.default)(r).getInstance().getLogger(a),u=/(?:\r\n|\r|\n)/gm,d=/-->/,c=/(^[\s]+|[\s]+$)/g,f=/\s\b/g,a}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(48)),o=i(e(46)),s="WEBVTT";r.__dashjs_factory_name="VTTParser",n.default=a.default.getSingletonFactory(r),t.exports=n.default},{46:46,48:48}],210:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n=0,i=void 0;return e&&e.some(function(e,i){return n=i,!t.contains(e.serviceLocation)})&&(i=e[n]),i}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="BasicSelector",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],211:[function(e,t,n){"use strict";function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],i=0,r=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return a.length>1&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t)}),r=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return i=t,!(r<e)})),a[i]}(function(e){var n=[];return e.filter(function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)}).filter(function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)})}(e))}}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(e(48));i.__dashjs_factory_name="DVBSelector",n.default=r.default.getClassFactory(i),t.exports=n.default},{48:48}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],213:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.code=t||null,this.message=n||null,this.data=i||null},t.exports=n.default},{}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=n.default},{}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n.default=i,t.exports=n.default},{}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},r=function(e){return e&&e.__esModule?e:{default:e}}(e(215)),a=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();n.default=a,t.exports=n.default},{215:215}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(n=0;n<t.references.length;n++){var i={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];n=0;for(var r=t.samples.length;n<r;n++){var a={sample_size:t.samples[n].sample_size,sample_duration:t.samples[n].sample_duration,sample_composition_time_offset:t.samples[n].sample_composition_time_offset};this.samples.push(a)}}}}return i(e,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),e}();n.default=r,t.exports=n.default},{}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.lastCompletedOffset=t,this.found=n,this.size=i},t.exports=n.default},{}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null},t.exports=n.default},{}],221:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],224:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=o,i=!0,s=u=void 0}},a=i(e(100)),o=i(e(215)),s=function(e){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.type=n||null,this.mediaType=a.default.STREAM,this.responseType=""}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();n.default=s,t.exports=n.default},{100:100,215:215}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.level=null},t.exports=n.default},{}],230:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e(106));n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.target=null,this.state=i.default.BUFFER_EMPTY},t.exports=n.default},{106:106}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],233:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",n.HTTPRequest=r,n.HTTPRequestTrace=function e(){i(this,e),this.s=null,this.d=null,this.b=[]}},{}],234:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){i(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){i(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){i(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],235:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){i(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=r,n.PlayListTrace=a},{}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},t.exports=n.default},{}]},{},[4]),define("lib/dash.all.min",function(){}),define("less",function(){}),define("viddler-embed",["views/main_view","viddler-manager","viddler","humps","jquery","viddler-manifest-builder","text!../index.html","lib/dash.all.min"],function(e,t,n,i,r,a,o){return function(s){function l(e){r.extend(this,e),this.target=r(e.target),this.mode=e.mode||"production",this.environment=e.environment||"production",this.type=e.type||"video",this.preload=e.preload||"none",this.localization=e.localization||{},this.visibleModals=[],this.linkedEmbeds=[],this.isAnonymous=!1,this.questions={feedback:{},list:[]},this.autoHideInterval=1500,e.tabIndexStart?this.setTabOrder(e.tabIndexStart):this.setTabOrder(-1),this.notifyFutureMediaElementsOfComingActivationWithin=this.notifyFutureMediaElementsOfComingActivationWithin=5e3,this.customUserLookup=e.customUserLookup||function(e,t){t({username:e})},null==this.initialVolume&&(this.initialVolume=80),this.manager=new t(this),this.manager.allTemplates.append(o),this.includeCss(),this.skipPerformEmbed||this.performEmbed(),null==this.identifier&&(this.identifier=this.getAnonymousIdentifier(),this.isAnonymous=!0)}return l.prototype.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},l.prototype._createAnonymousIdentifier=function(){var e=n.Config.ANYNYMOUS_ID_PREFIX+this.uuid();return localStorage.setItem(n.Config.ANONYMOUS_ID_KEY,e),e},l.prototype.getAnonymousIdentifier=function(){return localStorage.getItem(n.Config.ANONYMOUS_ID_KEY)||this._createAnonymousIdentifier()},l.prototype.setTabOrder=function(e){this.tabIndexStart=parseInt(e);var t=0;-1!=e&&(t=this.tabIndexStart,this.tabIndexStart=this.tabIndexStart+1),this.tabIndexResume=t,this.tabIndexThePlayer=0,this.tabIndexPlayMiddle=-1,this.tabIndexPlayBar=t,this.tabIndexTimeline=t,this.tabIndexSubtitles=t,this.tabIndexQuality=t,this.tabIndexVolume=t,this.tabIndexVolumeBar=t,this.tabIndexFullscreen=t,this.tabIndexSpeed=t,this.tabIndexComments=-1,this.tabIndexBookmarks=-1,this.tabIndexSocialSharing=-1,this.tabIndexJump=-1},l.prototype.performEmbed=function(){var e=this;new a({videoId:this.videoId,playlistId:this.playlistId,videosOnSeperateTracks:this.videosOnSeperateTracks,buildChaptersFromVideoTitles:this.buildChaptersFromVideoTitles,embed:this,secret:this.secret,environment:this.environment,type:this.type,vastUrls:this.vastUrls,password:this.password},function(t){e.embedManifest(t)})},l.prototype.reload=function(e){this.mainView.showLoading();var t=this.target.attr("style");this.target.css({width:this.target.find(".viddler-app-wrap").width(),height:this.target.find(".viddler-app-wrap").height(),background:"#000"}),this.destroy();var n=new l(r.extend(this,{skipPerformEmbed:!0}));n.manager.events.once("gui:ready mediaElement:activated",function(){n.target.attr("style",t||""),n.manager.play(e),n.manager.embed.mainView.hideLoading()}),n.performEmbed(),r.each(this.linkedEmbeds,function(e,t){n.linkWith(t),t.linkWith(n)})},l.prototype.embedManifest=function(t){this.manager.parseManifest(t),this.mainView=new e({el:this.target.get(0),embed:this,hideControls:t.hideControls,settings:t.settings}),this.target.data("viddler-embed",this)},l.prototype.includeCss=function(){if(!l.cssIncluded&&!this.noCss){if("development"==this.mode)require(["less"],function(){var e=require.toUrl("../skin/viddler.less"),t=r("<link>",{rel:"stylesheet/less",type:"text/css",href:e});r("head").append(t),less.sheets.push(t.get(0)),less.refresh()});else{var e=n.Util.setUrlProtocol(n.Config.libraryUrls[this.environment]+"/build/viddler.css"),t=r("<link>",{rel:"stylesheet",type:"text/css",href:e});r("head").append(t)}l.cssIncluded=!0}},l.performAutoEmbeds=function(){r(document).ready(function(){var e={};for(var t in r(".viddler-auto-embed").each(function(t){var n=r(this),a=i.camelizeKeys(n.data());if(!a.viddlerEmbed){t>0&&"auto"!=a.preload&&(a.preload="none"),a.target=n,n.attr("id")||n.attr("id","viddler-embed-"+Math.random().toString(36).slice(2)),a.videoId=String(a.videoId);var o=new l(a);e[a.videoId]=e[a.videoId]||[],e[a.videoId].push(o)}}),e)for(var n=0;n<e[t].length;n++)for(var a=0;a<e[t].length;a++)n!=a&&e[t][n].linkWith(e[t][a])})},l.prototype.linkWith=function(e,t){var n=this;this.linkedEmbeds.push(e),e.manager.events.on("all",function(e,t){e.match(/^linked/)||n.manager.events.trigger("linked:"+e,t)}),t&&e.linkWith(this)},l.prototype.unlinkFrom=function(e,t){e.manager.events.off("all");var n=this.linkedEmbeds.indexOf(e);this.linkedEmbeds.splice(n,1),t&&e.unlinkFrom(this)},l.prototype.destroy=function(){this.manager.destroy(),this.target.html("")},l.ManifestBuilder=a,l.Viddler=n,l}()}),require.config({waitSeconds:0,paths:{jquery:"lib/jquery",humps:"lib/humps",backbone:"lib/backbone",underscore:"lib/underscore",hammer:"lib/hammer",modernizr:"lib/modernizr-latest",text:"lib/text",util:"helper/util",base64:"helper/base64",logger:"helper/logger",less:"lib/less-1.7.0.min",injectCSS:"lib/jquery-injectCSS/jquery.injectCSS","pusher.color":"lib/pusher.color.min",jsonform:"media_elements/simple_data_capture/jsonform/lib/jsonform",jsv:"media_elements/simple_data_capture/jsonform/deps/opt/jsv"},shim:{jquery:{exports:"$"},humps:{exports:"humps"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},hammer:{deps:["modernizr"],exports:["Hammer"]},modernizr:{exports:"Modernizr"},jsv:{exports:"JSONFormValidator"}}}),define("main",["viddler-embed","jquery","underscore","backbone"],function(e,t,n,i){return window.viddlerjQuery=t.noConflict(!0),n.noConflict(),i.noConflict(),window.viddlerAutoEmbedsRun||(window.viddlerAutoEmbedsRun=!0,e.performAutoEmbeds()),e}),define("sub_modules/comment_creator/resume_modal",["viddler"],function(e){return e.BaseViews.ModalView.extend({template:"#tmp-comment-resume",focusAfterShow:".resume",events:{"click .resume":"resume"},initialize:function(e){this.pluginMain=e.pluginMain,this.__init(e),this.render(e)},resume:function(e){e.preventDefault(),this.remove(),this.manager.play()}})}),define("sub_modules/comment_creator/modal",["jquery","underscore","viddler","sub_modules/comment_creator/resume_modal"],function(e,t,n,i){return n.BaseViews.ModalView.extend({template:"#tmp-comment-popup",triangle:"up",alwaysRemoveInsteadOfHide:!0,focusAfterShow:".comment-text",events:{"click .comment-form-submit":"commentSubmit","click .clear-time":"clearTime"},initialize:function(e){t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.data=e.data},commentSubmit:function(t){t.preventDefault();var r=this,a=1e3*n.Util.time2secs(this.$(".comment-play-head-pos").val()),o=this.embed.manager.elementForTime(a).step,s=this.embed.manager.mediaElementsForCurrentTrack()[o];if(s&&s.subModules.comment_creator){this.embed.commentCreationUseGlobalTime||(a-=s.timelineStart);var l={viddlerVideoId:s.id,text:this.$(".comment-text").val().trim(),addTimepoint:a,environment:this.embed.environment};if(l.text.length>4095)return alert(r.embed.manager.localizer.translate("sub_modules.comment_creator.errors.too_long")),void this.$(".comment-text").focus();if(0==l.text.length)return alert(r.embed.manager.localizer.translate("sub_modules.comment_creator.errors.text_is_blank")),void this.$(".comment-text").focus();e.extend({},l);n.Api.addComment(l,function(e,t){e?(r.embed.commentCreationUseGlobalTime?t.add_timepoint=a:t.add_timepoint=a+s.timelineStart,r.embed.manager.events.trigger("comments:commentAdded",t),r.remove(),new i({embed:r.embed,manager:r.manager,pluginMain:r.pluginMain,passedModeration:"1"==t.comments_moderation.status}).show()):alert(r.embed.manager.localizer.translate("sub_modules.comment_creator.errors.generic",t))})}else alert("You cannot add a comment for this time")},remove:function(){this.embed.target.find("video").show(),n.BaseViews.ModalView.prototype.remove.call(this)},render:function(e){var t,i={};"video"==this.embed.type?(t=this.embed.manager.currentTime<0?0:this.embed.manager.currentTime,i.time=n.Util.secs2time(Math.floor(t/1e3))):i.time=void 0,this.__render(i),this.$(".comment-text").focus(),this.pluginMain.mediaElement.pause(),n.Util.matrix.iPhone&&this.embed.target.find("video").hide(),this.delegateEvents()},clearTime:function(){this.$(".comment-play-head-pos").val("")}})}),define("sub_modules/comment_creator/localization",[],function(){return{default:{sub_modules:{comment_creator:{tooltip:{title:"Comment",description:"Add comment at the current time"},comment_form_field_placeholder:"Write your comment...",button_text:"Done",resume_modal:{resume_button:"Resume playing",needs_moderation:{title:"Thank you!",body:"If subject to moderation, your comment may not appear until approved."},success:{title:"Thanks!"}},errors:{text_is_blank:"Comment text is required",too_long:"Your comment must be 4095 characters or under",generic:function(e){var t="Sorry, an error occured, please try again later";return e.responseJSON.error.details&&(t+=": "+e.responseJSON.error.details),t}}}}}}}),define("text!sub_modules/comment_creator/templates.html",[],function(){return'<script type="text/template" id="tmp-comment-popup">\n  <div class="modal-outer comment-form-modal" style="display:none">\n    <div class="modal-container">\n      \x3c!--<a class="modal-close cursor">X</a>--\x3e\n      <div class="comment-popup">\n        <form class="comment-form">\n          <textarea class="comment-text" tabindex="<%= tabIndexComments %>" placeholder="<%= t(\'sub_modules.comment_creator.comment_form_field_placeholder\') %>" name="commentText"></textarea>\n          <input name="time" class="comment-play-head-pos" tabindex="<%= tabIndexComments %>" type="text" value="<%= time %>"/>\n          <a class="clear-time">X</a>\n          <a href="#" class="comment-form-submit button" tabindex="<%= tabIndexComments %>"><%= t(\'sub_modules.comment_creator.button_text\') %></a>\n        </form>\n      </div>\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-comment-resume">\n  <div class="modal-outer comment-form-resume" style="display:none">\n    <div class="modal-container">\n      <% var statusKey = passedModeration ? \'success\' : \'needs_moderation\' %>\n      <h2><%= t(\'sub_modules.comment_creator.resume_modal.\' + statusKey  + \'.title\') %></h2>\n      <p><%= t(\'sub_modules.comment_creator.resume_modal.\' + statusKey + \'.body\') %></p>\n\n      <a href="#" class="resume button" tabindex="<%= tabIndexComments %>" ><%= t(\'sub_modules.comment_creator.resume_modal.resume_button\') %></a>\n    </div>\n  </div>\n<\/script>\n'}),define("sub_modules/comment_creator/comment_creator-main",["jquery","viddler","sub_modules/comment_creator/modal","sub_modules/comment_creator/localization","text!sub_modules/comment_creator/templates.html"],function(e,t,n,i,r){return{LocalizationContent:i,Templates:r,View:t.BaseViews.SubModule.extend({name:"comment_creator",minimumHeightRequired:240,events:{mouseenter:"showToolTip",mouseleave:"hideToolTip"},iconSettings:{element:e("<div>",{class:"vid-comment",title:"Comment"}),bar:"top",side:"right",toolTip:{triangle:"up"}},initialize:function(e){this._initResource(e)},activate:function(){t.BaseViews.SubModule.prototype.activate.call(this),this.render()},supported:function(){return!t.Util.matrix.nocors},render:function(){if(this.supported()){this.modal=new n({pluginMain:this,embed:this.embed,manager:this.manager}),this.delegateEvents()}}})}}),define("sub_modules/google_analytics/google_analytics-main",["underscore","viddler"],function(e,t){return{View:t.BaseViews.SubModule.extend({name:"google_analytics",initialize:function(n){e.extend(this,n),this.events=this.embed.manager.events,this._initResource(n);this.resourceData.settings;this.analyticsId=this.resourceData.tracking_id,this.analyticsName="viddler"+this.analyticsId.replace(/-/g,""),this.setupGA(),t.Config.DEBUG&&t.LoggeViddler.Loggerlog("[google analytics] loaded",this)},addEventListeners:function(){var e=this,t=this.analyticsName+".send",n=this.mediaElement.resourceData.title;this.videoMonitor.on("started",function(){window.ga(t,"event","Videos","Play",n)}),this.videoMonitor.on("resumed",function(){window.ga(t,"event","Videos","Play",n)}),this.videoMonitor.on("paused",function(){window.ga(t,"event","Videos","Pause",n)}),this.videoMonitor.on("stopped",function(){window.ga(t,"event","Videos","Ended",n)}),this.videoMonitor.on("attentionMilestoneReached",function(){var i=e.videoMonitor.getAttentionMilestoneIndexPassed()+1;window.ga(t,"event","Videos","Attention Milestone "+i,n)}),this.videoMonitor.on("engagementMilestoneReached",function(){var i=e.videoMonitor.getEngagementMilestoneIndexPassed()+1;window.ga(t,"event","Videos","Engagement Milestone "+i,n)}),this.videoMonitor.on("percentMilestoneReached",function(){var i=e.videoMonitor.getPercentMilestonePassed();window.ga(t,"event","Videos",i+"% Complete",n)})},activate:function(){this.videoMonitor=this.mediaElement.subModules.video_monitor.videoMonitor,this.addEventListeners()},setupGA:function(){window.ga=function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga("create",this.analyticsId,"auto",{name:this.analyticsName});var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.async=!0,t.src="//www.google-analytics.com/analytics.js",e.appendChild(t)}})}}),define("sub_modules/quality/modal",["underscore","viddler","jquery"],function(e,t,n){return t.BaseViews.ModalView.extend({template:"#tmp-quality-list",triangle:"down",initialize:function(t){e.extend(this,t),this.icon=this.pluginMain.$el,this.__init(t),this.__render({files:this.files,defaultIndex:this.defaultIndex})},events:{"click .quality-choice":"changeQuality"},changeQuality:function(e){e.preventDefault();var t=n(e.target);this.$(".quality-choice").removeClass("current"),this.$(".quality-choice").attr("aria-checked","false"),t.addClass("current"),t.attr("aria-checked","true"),this.$(".choice-check").removeClass("current"),current=t[0].getElementsByClassName("choice-check")[0],current.classList.add("current");var i=t.data("index");this.pluginMain.changeQuality(i),this.hide()}})}),define("text!sub_modules/quality/templates.html",[],function(){return'<script type="text/template" id="tmp-quality-list">\n  <div class="modal-outer quality-modal picker">\n    <div class="modal-container">\n      <ul class="quality-choices" role="menu">\n        <% _.each(files, function (file, index) {%>\n          <li role="none">\n            <a  href="#"\n              role="menuitemradio"\n              aria-disabled="false"\n              aria-checked="<% if(index == defaultIndex){ %>true<% } else { %>false<% } %>"\n              class="vp-btn-keyboard quality-choice<% if(index == defaultIndex){ %> current<% } %>"\n              data-index="<%= index %>"\n              tabindex="<%= tabIndexQuality %>">\n              <span class="choice-check<% if(index == defaultIndex){ %> current<% } %>"></span>\n              <%= file.profile_name %>\n            </a>\n          </li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n\n'}),define("sub_modules/quality/quality-main",["underscore","jquery","viddler","sub_modules/quality/modal","text!sub_modules/quality/templates.html"],function(e,t,n,i,r){return{Templates:r,View:n.BaseViews.SubModule.extend({name:"quality",iconSettings:{element:t("<div>",{class:"vp-btn-keyboard vid-quality aria-button",role:"button","aria-label":"Quality","aria-haspopup":"menu","aria-expanded":"false","aria-controls":"quality-choices-menu"}).html('<span class="current-quality"/>'),bar:"bottom",side:"right",priority:900},initialize:function(t){this._initResource(t),this.videoFiles=e.where(this.mediaElement.resourceData.mediaUrls,{media_type:"video"}),this.currentFileIndex=this.resourceData.defaultMediaFileIndex||0},activate:function(){n.BaseViews.SubModule.prototype.activate.call(this),this.render()},render:function(){this.videoFiles.length<=1||(this.$el.show(),this.modal=new i({pluginMain:this,embed:this.embed,manager:this.manager,files:this.videoFiles,defaultIndex:this.currentFileIndex}),this.updateIconText(this.videoFiles[this.currentFileIndex].profile_name),this.delegateEvents())},changeQuality:function(e){this.currentFileIndex=e,this.mediaElement.changeMediaQuality(e),this.updateIconText(this.videoFiles[e].profile_name)},updateIconText:function(e){this.$("span.current-quality").text(e),this.$el.attr("aria-label","Quality "+e)}})}}),define("sub_modules/speed_control/modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-speed-list",triangle:"down",initialize:function(e){if(t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.__render(e),this.constructor.preferredSpeed){var n=this.$('.speed-choice[data-speed="'+this.constructor.preferredSpeed+'"]');1==n.length&&this.changeSpeed(n)}},events:{"click .speed-choice":"speedChosen"},speedChosen:function(t){t.preventDefault();var n=e(t.target);this.changeSpeed(n)},changeSpeed:function(e){this.$(".speed-choice").removeClass("current"),this.$(".speed-choice").attr("aria-checked","false"),e.addClass("current"),e.attr("aria-checked","true"),this.$(".choice-check").removeClass("current"),current=e[0].getElementsByClassName("choice-check")[0],current.classList.add("current"),this.pluginMain.changeSpeed(e.data("speed")),this.hide(),this.constructor.preferredSpeed=e.data("speed")}})}),define("sub_modules/speed_control/localization",[],function(){return{default:{sub_modules:{speed_control:{display_speed:function(e){return e+"x"}}}}}}),define("text!sub_modules/speed_control/templates.html",[],function(){return'<script type="text/template" id="tmp-speed-list">\n  <div class="modal-outer speed-modal picker">\n    <div class="modal-container">\n      <ul class="speed-choices" role="menu" style="width: max-content">\n        <% _.each(speeds, function (speed, index) {%>\n          <li role="none">\n            <a href="#" \n              role="menuitemradio"\n              aria-disabled="false"\n              aria-checked="<% if(speed == currentSpeed){ %>true<% } else { %>false<% } %>"\n              tabindex="<%= tabIndexSpeed %>"\n              class="vp-btn-keyboard speed-choice<% if(speed == currentSpeed){ %> current<% } %>"\n              data-speed="<%= speed %>"\n              data-index="<%= index %>"\n              >\n              <span class="choice-check<% if(speed == currentSpeed){ %> current<% } %>"></span>\n              <%= t(\'sub_modules.speed_control.display_speed\', speed) %>\n            </a>\n          </li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n'}),define("sub_modules/speed_control/speed_control-main",["jquery","viddler","sub_modules/speed_control/modal","sub_modules/speed_control/localization","text!sub_modules/speed_control/templates.html"],function(e,t,n,i,r){return{Templates:r,LocalizationContent:i,View:t.BaseViews.SubModule.extend({name:"speed_control",iconSettings:{element:e("<div>",{class:"vp-btn-keyboard vid-speed aria-button",role:"button","aria-label":"Speed","aria-haspopup":"menu","aria-expanded":"false","aria-controls":"speed-choices-menu"}).html('<span class="current-speed"/>'),bar:"bottom",side:"right",priority:800},initialize:function(e){this._initResource(e),this.possibleSpeeds=e.resourceData.possible_speeds,this.currentSpeed=1},activate:function(){t.BaseViews.SubModule.prototype.activate.call(this),this.display=this.$(".vid-speed-display"),this.render()},render:function(){if(this.mediaElement.$el.data("jPlayer").status.playbackRateEnabled&&(!this.inIframe()||this.embedHeight()>91+34*this.possibleSpeeds.length)){this.$el.show(),this.display.show(),this.modal=new n({pluginMain:this,embed:this.embed,manager:this.manager,speeds:this.possibleSpeeds,currentSpeed:this.currentSpeed}),this.updateIconText(this.currentSpeed),this.delegateEvents()}},changeSpeed:function(e){this.currentSpeed=e,this.updateIconText(e),this.mediaElement.changeSpeed(e)},updateIconText:function(e){var t=this.manager.localizer.translate("sub_modules.speed_control.display_speed",e);this.$("span.current-speed").text(t),this.$el.attr("aria-label","Speed "+t)}})}}),define("lib/srt-parser",[],function(){var e,t,n,i=(e={fromSrt:function(e,n){var i=!!n;(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split(/(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g)).shift();for(var r=[],a=0;a<e.length;a+=4)r.push({id:e[a].trim(),startTime:i?t(e[a+1].trim()):e[a+1].trim(),endTime:i?t(e[a+2].trim()):e[a+2].trim(),text:e[a+3].trim()});return r},toSrt:function(e){if(!e instanceof Array)return"";for(var t="",i=0;i<e.length;i++){var r=e[i];isNaN(r.startTime)||isNaN(r.endTime)||(r.startTime=n(parseInt(r.startTime,10)),r.endTime=n(parseInt(r.endTime,10))),t+=r.id+"\r\n",t+=r.startTime+" --\x3e "+r.endTime+"\r\n",t+=r.text.replace("\n","\r\n")+"\r\n\r\n"}return t}},t=function(e){var t=/(\d+):(\d{2}):(\d{2}),(\d{3})/.exec(e);if(null===t)return 0;for(var n=1;n<5;n++)t[n]=parseInt(t[n],10),isNaN(t[n])&&(t[n]=0);return 36e5*t[1]+6e4*t[2]+1e3*t[3]+t[4]},n=function(e){var t=[36e5,6e4,1e3],n=[];for(var i in t){var r=(e/t[i]>>0).toString();r.length<2&&(r="0"+r),e%=t[i],n.push(r)}var a=e.toString();if(a.length<3)for(i=0;i<=3-a.length;i++)a="0"+a;return n.join(":")+","+a},e);return"object"==typeof exports&&(module.exports=i),i}),define("sub_modules/subtitles/modal",["underscore","viddler","jquery"],function(e,t,n){return t.BaseViews.ModalView.extend({template:"#tmp-subtitle-src-list",triangle:"down",events:{"click .subtitle-lang-choice":"languageChosen"},initialize:function(t){if(e.extend(this,t),this.icon=this.pluginMain.$el,this.__init(t),this.__render({items:t.items}),this.preferredLanguage){var n=this.$('.subtitle-lang-choice[data-src-lang="'+this.preferredLanguage+'"]');1==n.length&&this.changeLanguage(n)}else this.changeLanguage(this.$('.subtitle-lang-choice[data-src-lang="off"]'))},languageChosen:function(e){e.preventDefault(e);var t=n(e.target);this.changeLanguage(t)},changeLanguage:function(e){if(this.pluginMain.turnOffSubtitles(),label=n.trim(e[0].innerText),this.icon.attr("aria-label","Closed Caption "+label),this.$(".choice-check").removeClass("current"),this.$(".subtitle-lang-choice").attr("aria-checked","false"),e.hasClass("current"))return e.removeClass("current"),void this.changeLanguage(this.$('.subtitle-lang-choice[data-src-lang="off"]'));this.$(".subtitle-lang-choice").removeClass("current"),e.addClass("current"),e.attr("aria-checked","true"),current=e[0].getElementsByClassName("choice-check")[0],current.classList.add("current"),this.pluginMain.doSubtitles(e.data("src-lang")),this.constructor.preferredLanguage=e.data("src-lang"),this.hide()}})}),define("sub_modules/subtitles/localization",[],function(){return{default:{sub_modules:{subtitles:{languages:{ab:"Abkhaz",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan; Valencian",ch:"Chamorro",ce:"Chechen",ny:"Chichewa; Chewa; Nyanja",zh:"Chinese",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi; Dhivehi; Maldivian;",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fula; Fulah; Pulaar; Pular",gl:"Galician",ka:"Georgian",de:"German",el:"Greek, Modern",gn:"Guaraní",gu:"Gujarati",ht:"Haitian; Haitian Creole",ha:"Hausa",he:"Hebrew (modern)",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ga:"Irish",ig:"Igbo",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut, Greenlandic",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ki:"Kikuyu, Gikuyu",rw:"Kinyarwanda",ky:"Kirghiz, Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",ku:"Kurdish",kj:"Kwanyama, Kuanyama",la:"Latin",lb:"Luxembourgish, Letzeburgesch",lg:"Luganda",li:"Limburgish, Limburgan, Limburger",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",gv:"Manx",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Māori",mr:"Marathi (Marāṭhī)",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo, Navaho",nb:"Norwegian Bokmål",nd:"North Ndebele",ne:"Nepali",ng:"Ndonga",nn:"Norwegian Nynorsk",no:"Norwegian",ii:"Nuosu",nr:"South Ndebele",oc:"Occitan",oj:"Ojibwe, Ojibwa",cu:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",om:"Oromo",or:"Oriya",os:"Ossetian, Ossetic",pa:"Panjabi, Punjabi",pi:"Pāli",fa:"Persian",pl:"Polish",ps:"Pashto, Pushto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian, Moldavian, Moldovan",ru:"Russian",sa:"Sanskrit (Saṁskṛta)",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sm:"Samoan",sg:"Sango",sr:"Serbian",gd:"Scottish Gaelic; Gaelic",sn:"Shona",si:"Sinhala, Sinhalese",sk:"Slovak",sl:"Slovene",so:"Somali",st:"Southern Sotho",es:"Spanish; Castilian",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",bo:"Tibetan Standard, Tibetan, Central",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur, Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",wo:"Wolof",fy:"Western Frisian",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang, Chuang"}}}}}}),define("text!sub_modules/subtitles/templates.html",[],function(){return'<script type="text/template" id="tmp-subtitle-src-list">\n  <div class="modal-outer cc-modal picker" style="display: none;">\n    <div class="modal-container">\n      <ul class="subtitle-choices" role="menu">\n          <li role="none">\n            <a href="#" \n              role="menuitemradio" \n              aria-disabled="false"\n              aria-checked="false"\n              class="vp-btn-keyboard subtitle-lang-choice" \n              data-src-lang="off" \n              data-index="0" \n              tabindex="<%= tabIndexSubtitles %>">\n              <span class="choice-check"></span>off</a>\n          </li>\n        <% _.each(items, function (item, index) {%>\n          <li role="none">\n            <a href="#" \n              role="menuitemradio"\n              aria-disabled="false"\n              aria-checked="false"\n              class="vp-btn-keyboard subtitle-lang-choice"\n              data-src-lang="<%= item.language %>"\n              data-index="<%= index+1 %>"\n              tabindex="<%= tabIndexSubtitles %>">\n              <span class="choice-check"></span><%= t(\'sub_modules.subtitles.languages.\'+item.language) %></a>\n          </li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n'}),define("sub_modules/subtitles/subtitles-main",["underscore","jquery","viddler","lib/srt-parser","sub_modules/subtitles/modal","sub_modules/subtitles/localization","text!sub_modules/subtitles/templates.html"],function(e,t,n,i,r,a,o){return{LocalizationContent:a,Templates:o,View:n.BaseViews.SubModule.extend({name:"subtitles",iconSettings:{element:t("<div>",{class:"vp-btn-keyboard vid-cc aria-button ",role:"button","aria-label":"Closed Captions","aria-haspopup":"menu","aria-expanded":"false","aria-controls":"subtitle-choices-menu"}).html('<span class="current-subtitle"/>'),bar:"bottom",side:"right",priority:300},playerEvents:{"player:resize gui:minimalInterfaceShown gui:fullInterfaceShown":"positionSub"},initialize:function(e){this._initResource(e)},load:function(){this.defaultLanguage=this.embed.target.data("default-captions-language"),this.resourceLoadedWhenDeferredObjectsComplete()},activate:function(){n.BaseViews.SubModule.prototype.activate.call(this),this.render()},deactivate:function(){n.BaseViews.SubModule.prototype.deactivate.call(this),this.subTitlesContainer&&this.subTitlesContainer.remove()},hide:function(){this.$el.hide()},supported:function(){return!n.Util.matrix.nocors},render:function(){this.supported()&&(this.subTitlesContainer=t("<div>",{class:"viddlerSubtitle"}),this.subTitlesContainer.addClass(this.resourceData.subtitleDisplayStyle),this.embed.target.find(".vid-player").append(this.subTitlesContainer),this.modal=new r({pluginMain:this,embed:this.embed,manager:this.manager,items:this.resourceData.srts,preferredLanguage:this.defaultLanguage}),this.$el.show(),this.delegateEvents())},doSubtitles:function(r){var a=this;if(!n.Util.matrix.ie8&&"off"!=r){var o=e.where(this.resourceData.srts,{language:r})[0].file_url;o=o.replace("http:",""),t.ajax({url:o,crossDomain:!0,success:function(e){var n=i.fromSrt(e);t.each(n,function(e,t){n[e].startMs=a._duratonToMs(t.startTime),n[e].endMs=a._duratonToMs(t.endTime)}),a.currentSrt=n,a.startListening()}}),this.positionSub()}},startListening:function(){if(!this.listening){this.listening=!0;var e=this;this.embed.manager.events.on("videoPlayer:timeupdate",function(){if(e.currentSrt){var n=e.mediaElement.currentTime;t.each(e.currentSrt,function(t,i){n>=i.startMs&&n<i.endMs?e._showSub(t):e._removeSub(t)})}})}},_showSub:function(n){var i=this;if(!(this.subTitlesContainer.find('div[data-index="'+n+'"]').length>0)){var r=this.currentSrt[n];e.each(r.text.split(/(\r\n|\n|\r)/),function(e){if(/\S/.test(e)){var r=t("<span>").html(e),a=t("<div>",{"data-index":n}).html(r);i.subTitlesContainer.append(a)}}),this.positionSub()}},_removeSub:function(e){this.subTitlesContainer.find('div[data-index="'+e+'"]').remove()},positionSub:function(){if(this.supported()){var e=this.embed.target.find(".vid-player:visible"),t=e.outerHeight(),n={};n["font-size"]=e.outerWidth()/40+"px",n.width=e.outerWidth()+"px";var i=t-this.subTitlesContainer.outerHeight()-20;this.embed.target.find(".media-gui").hasClass("minimal")||(i-=50),n.top=i+"px",this.subTitlesContainer.css(n)}},_duratonToMs:function(e){var t=e.split(":");return 1e3*(parseInt(3600*t[0])+parseInt(60*t[1])+parseFloat(t[2].replace(",",".")))},turnOffSubtitles:function(){this.currentSrt=void 0,this.subTitlesContainer.html("")}})}}),define("sub_modules/video_monitor/analytics-helpers",[],function(){var e={StopWatch:function(){return this.StopWatch=function(){this.m_running=!1,this.m_startTime=0,this.m_timeElapsed=0},StopWatch.prototype.isRunning=function(){return this.m_running},StopWatch.prototype.getTime=function(){return this.isRunning()&&(this.m_timeElapsed=(new Date).valueOf()-this.m_startTime),this.m_timeElapsed/1e3},StopWatch.prototype.setTime=function(e){this.m_startTime=(new Date).valueOf()-1e3*e,this.m_timeElapsed=1e3*e},StopWatch.prototype.reset=function(){this.m_running=!1,this.m_startTime=0,this.m_timeElapsed=0},StopWatch.prototype.start=function(){this.isRunning()||(this.m_startTime=(new Date).valueOf()-this.m_timeElapsed,this.m_running=!0)},StopWatch.prototype.stop=function(){this.isRunning()&&(this.m_timeElapsed=(new Date).valueOf()-this.m_startTime,this.m_running=!1)},StopWatch}(),VideoMonitor:function(){return this.VideoMonitor=function(){this.m_attentionMilestones=null,this.m_attentionMilestoneIndexPassed=-1,this.m_duration=0,this.m_engagementMilestoneDivider=10,this.m_engagementMilestones=null,this.m_engagementMilestoneIndexPassed=-1,this.m_heartbeatInterval=5,this.m_heartbeatMilestoneToPass=0,this.m_metadata=null,this.m_percentMilestones=null,this.m_percentMilestoneIndexPassed=-1,this.m_started=!1,this.m_eventListeners={},this.m_engagementMilestones=[],this.m_stopwatch=new e.StopWatch,this.setAttentionMilestones([10,20,30,60,120,180,300,600,900,1800]),this.setPercentMilestones([25,50,75,100]),this.m_eventListeners={}},VideoMonitor.prototype.on=function(e,t,n,i,r){var a={callback:t,scope:n,data:i,one:r};null==this.m_eventListeners[e]?this.m_eventListeners[e]=[]:this.off(e,t,n),this.m_eventListeners[e].push(a)},VideoMonitor.prototype.one=function(e,t,n,i){this.on(e,t,n,i,!0)},VideoMonitor.prototype.trigger=function(e,t){var n="object"==typeof e?e:{type:e};if(null!=this.m_eventListeners[n.type])for(var i,r,a,o=this.m_eventListeners[n.type].concat(),s=0,l=o.length;s<l;)i=o[s++],n.data=i.data,null!=i.callback&&"function"==typeof i.callback.apply&&(r=null==i.scope?this:i.scope,(a=null==t?[]:t.concat()).unshift(n),i.callback.apply(r,a),i.one&&this.off(n.type,i.callback,i.scope))},VideoMonitor.prototype.off=function(e,t,n){var i=this.m_eventListeners[e];if(null==e)this.m_eventListeners={};else if(null!=i)if(null==t)this.m_eventListeners[e]=[];else for(var r=i.length;r--;)if(i[r].callback==t&&i[r].scope==n){i.splice(r,1);break}},VideoMonitor.prototype.getAttentionMilestoneIndexPassed=function(){return Math.min(this.m_attentionMilestones.length-1,this.m_attentionMilestoneIndexPassed)},VideoMonitor.prototype.getAttentionMilestonePassed=function(){var e=this.getAttentionMilestoneIndexPassed();return-1==e?-1:this.m_attentionMilestones[e]},VideoMonitor.prototype.getAttentionMilestones=function(){return this.m_attentionMilestones},VideoMonitor.prototype.setAttentionMilestones=function(e){this.m_attentionMilestones=e.sort(function(e,t){return e-t}),this.m_attentionMilestoneIndexPassed=-1},VideoMonitor.prototype.getEngagementMilestoneIndexPassed=function(){return this.m_engagementMilestoneIndexPassed},VideoMonitor.prototype.setEngagementMilestoneDivider=function(e){this.m_engagementMilestoneDivider=e},VideoMonitor.prototype.getHeartbeatInterval=function(){return this.m_heartbeatInterval},VideoMonitor.prototype.setHeartbeatInterval=function(e){this.m_heartbeatInterval=e},VideoMonitor.prototype.getMetaData=function(){return this.m_metadata},VideoMonitor.prototype.getPercentMilestoneIndexPassed=function(){return Math.min(this.m_percentMilestones.length-1,this.m_percentMilestoneIndexPassed)},VideoMonitor.prototype.getPercentMilestonePassed=function(){var e=this.getPercentMilestoneIndexPassed();return-1==e?-1:this.m_percentMilestones[e]},VideoMonitor.prototype.getPercentMilestones=function(){return this.m_percentMilestones},VideoMonitor.prototype.setPercentMilestones=function(e){this.m_percentMilestones=e.sort(function(e,t){return e-t}),this.m_percentMilestoneIndexPassed=-1},VideoMonitor.prototype.getSecondsViewed=function(){return this.m_stopwatch.getTime()},VideoMonitor.prototype.pause=function(){this.m_metadata&&this.m_started&&(this.m_stopwatch.stop(),this.trigger("paused"))},VideoMonitor.prototype.reset=function(){this.m_started=!1,this.m_stopwatch.reset(),this.m_attentionMilestoneIndexPassed=-1,this.m_engagementMilestoneIndexPassed=-1,this.m_heartbeatMilestoneToPass=this.m_heartbeatInterval,this.m_percentMilestoneIndexPassed=-1,this.$createEngagementMilestones()},VideoMonitor.prototype.setup=function(e){this.m_metadata=e,this.m_duration=e.duration,this.reset()},VideoMonitor.prototype.start=function(){this.m_stopwatch.start(),this.trigger(this.m_started?"resumed":"started"),this.m_started=!0},VideoMonitor.prototype.stop=function(){this.m_metadata&&this.m_started&&(this.trigger("stopped"),this.m_stopwatch.stop(),this.reset())},VideoMonitor.prototype.update=function(e){if(this.m_metadata&&this.m_started&&this.m_stopwatch.isRunning()){var t=parseFloat(e.toFixed(1)),n=t/this.m_duration*100;this.trigger("timelineUpdateForAnalytics"),this.$nextAttentionMilestone(t)&&this.trigger("attentionMilestoneReached"),this.$nextPercentMilestone(n)&&this.trigger("percentMilestoneReached"),this.$nextHeartbeat(t)&&this.trigger("heartbeatReceived"),this.$nextEngagementMilestone(t)&&this.trigger("engagementMilestoneReached")}},VideoMonitor.prototype.$createEngagementMilestones=function(){var e=this.m_engagementMilestones=[];if(this.m_duration>0)for(var t=Math.max(1,this.m_duration/this.m_engagementMilestoneDivider),n=this.m_duration,i=parseFloat(t.toFixed(1));i<=n;)e.push(i),i=parseFloat((i+t).toFixed(1))},VideoMonitor.prototype.$nextAttentionMilestone=function(e){for(var t=Math.max(0,this.m_attentionMilestoneIndexPassed),n=this.m_attentionMilestones.length,i=this.m_attentionMilestoneIndexPassed;t<n&&e>=this.m_attentionMilestones[t];)this.m_attentionMilestoneIndexPassed=t,t++;return i!=this.m_attentionMilestoneIndexPassed},VideoMonitor.prototype.$nextEngagementMilestone=function(e){for(var t=Math.max(0,this.m_engagementMilestoneIndexPassed),n=this.m_engagementMilestones.length,i=this.m_engagementMilestoneIndexPassed;t<n&&e>=this.m_engagementMilestones[t];)this.m_engagementMilestoneIndexPassed=t,t++;return i!=this.m_engagementMilestoneIndexPassed},VideoMonitor.prototype.$nextHeartbeat=function(e){return e>this.m_heartbeatMilestoneToPass&&(this.m_heartbeatMilestoneToPass+=this.m_heartbeatInterval,!0)},VideoMonitor.prototype.$nextPercentMilestone=function(e){for(var t=Math.max(0,this.m_percentMilestoneIndexPassed),n=this.m_percentMilestones.length,i=this.m_percentMilestoneIndexPassed;t<n&&e>=this.m_percentMilestones[t];)this.m_percentMilestoneIndexPassed=t,t++;return i!=this.m_percentMilestoneIndexPassed},VideoMonitor}()};return e}),define("sub_modules/viddler_analytics/lib/viddler-analytics-reporter",["sub_modules/video_monitor/analytics-helpers"],function(e){return function(){return this.m_enabled=!1,this.m_events=null,this.m_monitor=null,this.m_reportDelay=5,this.m_stopwatch=null,this.m_url="http = //stats.viddler.com/?{video-id}={events}&h={host}",this.ViddlerVideoTracker=function(t,n){this.m_events={},this.m_stopwatch=new e.StopWatch,this.configure(t),this.setMonitor(n)},ViddlerVideoTracker.prototype.setMonitor=function(e){return this.$removeListeners(),this.m_monitor=e,this.m_stopwatch.reset(),this.m_stopwatch.start(),this.$addListeners(),this},ViddlerVideoTracker.prototype.configure=function(e){if(e)return null!=e.enabled&&(this.m_enabled=e.enabled),null!=e.reportDelay&&(this.m_reportDelay=e.reportDelay),null!=e.url&&(this.m_url=e.url),this},ViddlerVideoTracker.prototype.$addListeners=function(){this.m_monitor&&(this.m_monitor.on("attentionMilestoneReached",this.$onAttentionMilestoneReached,this),this.m_monitor.on("engagementMilestoneReached",this.$onEngagementMilestoneReached,this),this.m_monitor.on("heartbeatReceived",this.$onHeartbeatReceived,this),this.m_monitor.on("percentMilestoneReached",this.$onPercentMilestoneReached,this),this.m_monitor.on("started",this.$onVideoStarted,this))},ViddlerVideoTracker.prototype.$report=function(e){if(e||!(this.m_stopwatch.getTime()<this.m_reportDelay)){var t=this.m_url,n=[];t=t.replace("{video-id}",this.m_monitor.getMetaData().videoKey),null!=this.m_events.started&&n.push("v"),null!=this.m_events.heartbeat&&n.push("t5"),null!=this.m_events.percent&&n.push("p"+this.m_events.percent),null!=this.m_events.attention&&n.push("a"+this.m_events.attention),null!=this.m_events.engagement&&n.push("e"+this.m_events.engagement),t=t.replace("{events}",n.join(","));try{t=t.replace("{host}",""==location.host?"unknown":location.host)}catch(e){t=t.replace("{host}","unknown")}(new Image).src=t,this.m_events={},this.m_stopwatch.reset(),this.m_stopwatch.start()}},ViddlerVideoTracker.prototype.$removeListeners=function(){this.m_monitor&&(this.m_monitor.off("attentionMilestoneReached",this.$onAttentionMilestoneReached,this),this.m_monitor.off("engagementMilestoneReached",this.$onEngagementMilestoneReached,this),this.m_monitor.off("heartbeatReceived",this.$onHeartbeatReceived,this),this.m_monitor.off("percentMilestoneReached",this.$onPercentMilestoneReached,this),this.m_monitor.off("started",this.$onVideoStarted,this))},ViddlerVideoTracker.prototype.$onAttentionMilestoneReached=function(){this.m_events.attention=this.m_monitor.getAttentionMilestoneIndexPassed()+1,this.$report()},ViddlerVideoTracker.prototype.$onEngagementMilestoneReached=function(){this.m_events.engagement=this.m_monitor.getEngagementMilestoneIndexPassed()+1,this.$report()},ViddlerVideoTracker.prototype.$onHeartbeatReceived=function(){this.m_events.heartbeat=Math.round(this.m_monitor.getSecondsViewed()),this.$report()},ViddlerVideoTracker.prototype.$onPercentMilestoneReached=function(){this.m_events.percent=this.m_monitor.getPercentMilestonePassed(),this.$report(100==this.m_monitor.getPercentMilestonePassed())},ViddlerVideoTracker.prototype.$onVideoStarted=function(){this.m_events.started=!0,this.$report(!0)},ViddlerVideoTracker}()}),define("sub_modules/viddler_analytics/viddler_analytics-main",["underscore","viddler","sub_modules/viddler_analytics/lib/viddler-analytics-reporter"],function(e,t,n){return{View:t.BaseViews.SubModule.extend({name:"viddler_analytics",initialize:function(t){e.extend(this,t),this.events=this.embed.manager.events,this._initResource(t)},load:function(){this.resourceLoadedWhenDeferredObjectsComplete(),"production"==this.embed.environment&&t.Config.DEBUG&&t.Logger.log("[analytics] loaded",this)},activate:function(){if("production"==this.embed.environment){this.videoMonitor=this.mediaElement.subModules.video_monitor.videoMonitor;this.viddlerAnalyticsReporter=new n({url:"https://stats.viddler.com/?{video-id}={events}&h={host}",reportDelay:"0",enabled:!0},this.videoMonitor)}}})}}),define("sub_modules/viddler_report_playback/viddler_report_playback-main",["jquery","viddler"],function(e,t){return{View:t.BaseViews.SubModule.extend({name:"viddler_report_playback",playbackRecorded:!1,initialize:function(e){this._initResource(e)},load:function(){this.addEventListeners(),this.resourceLoadedWhenDeferredObjectsComplete()},addEventListeners:function(){var n=this;this.mediaElement.$el.on(e.jPlayer.event.play,function(e){n.playbackRecorded||(n.playbackRecorded=!0,t.Api.recordPlayback({environment:n.embed.environment,videoId:n.resourceData.videoId}))})}})}}),define("sub_modules/video_monitor/video_monitor-main",["jquery","viddler","sub_modules/video_monitor/analytics-helpers"],function(e,t,n){return{View:t.BaseViews.SubModule.extend({name:"video_monitor",initialize:function(e){this._initResource(e)},load:function(){this.setup(),this.resourceLoadedWhenDeferredObjectsComplete()},setup:function(){var t=this,i={videoKey:this.mediaElement.id,title:this.mediaElement.resourceData.title,duration:this.mediaElement.duration/1e3-2};this.videoMonitor=new n.VideoMonitor,this.videoMonitor.setup(i),this.mediaElement.$el.on(e.jPlayer.event.play,function(){t.videoMonitor.start()}),this.mediaElement.$el.on(e.jPlayer.event.pause,function(){t.videoMonitor.pause()}),this.mediaElement.$el.on(e.jPlayer.event.ended,function(){t.videoMonitor.stop()}),this.mediaElement.$el.on(e.jPlayer.event.timeupdate,function(e){t.videoMonitor.update(e.jPlayer.status.currentTime)})}})}}),define("sub_modules/video_download/modal",["underscore","viddler","jquery"],function(e,t,n){return t.BaseViews.ModalView.extend({template:"#tmp-video-download-modal",triangle:"up",initialize:function(t){e.extend(this,t),this.icon=this.pluginMain.$el,this.__init(t),this.__render({files:this.files})},events:{"click .video-download-choice":"download"},download:function(e){e.preventDefault();var t=n(e.target).data("index");this.pluginMain.download(t),this.hide()}})}),define("text!sub_modules/video_download/templates.html",[],function(){return'<script type="text/template" id="tmp-video-download-modal">\n  <div class="modal-outer video-download-modal picker" style="display: none;">\n    <div class="modal-container">\n      <p>Select:</p>\n      <ul class="video-download-choices" role="menu">\n        <% _.each(files, function (file, index) {%>\n          <li><a href="#" role="menuitemradio"\n            aria-disabled="false"\n            aria-checked="false"\n            tabindex="-1"\n            data-index="<%= index %>"\n            class="vp-btn-keyboard video-download-choice" data-index="<%= index %>"><%= file.profile_name %></a></li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n'}),define("sub_modules/video_download/video_download-main",["underscore","jquery","viddler","sub_modules/video_download/modal","text!sub_modules/video_download/templates.html"],function(e,t,n,i,r){return{Templates:r,View:n.BaseViews.SubModule.extend({name:"video_download",iconSettings:{element:t("<div>",{class:"vid-download",role:"button","aria-label":"Download Video"}).html(""),bar:"top",side:"left",priority:400},initialize:function(t){this._initResource(t),this.videoFiles=e.where(this.mediaElement.resourceData.mediaUrls,{media_type:"video"}),this.resourceLoadedWhenDeferredObjectsComplete()},activate:function(){n.BaseViews.SubModule.prototype.activate.call(this),this.render()},render:function(){this.$el.show(),this.modal=new i({pluginMain:this,embed:this.embed,manager:this.manager,files:this.videoFiles}),this.delegateEvents()},download:function(e){var t=this.videoFiles[e],n=t.url;n=n.replace("/file/p/","/file/d/"),window.logged_in_user&&(n=n+"&custom_user_identifier="+window.logged_in_user),this.manager.events.trigger("videoDownload:fileDownload",t),window.location.href=n}})}}),define("sub_modules/legacy_video_full_screen/legacy_video_full_screen-main",["jquery","viddler","lib/screenfull"],function(e,t,n){return{View:t.BaseViews.SubModule.extend({name:"legacy_video_full_screen",iconSettings:{element:e("<div>",{class:"full-screen legacy-full-screen",title:"Full Screen",style:"display: none; margin:0; padding: 0; width: 0; height: 0;"}),bar:"bottom",side:"right",priority:100},events:{click:"videoEnterFullScreen"},video:function(){return this.mediaElement.$("video")[0]},initialize:function(e){this._initResource(e)},activate:function(){if(t.BaseViews.SubModule.prototype.activate.call(this),!n.enabled){var e=!1,i=this.video();i.requestFullscreen?e=!0:i.mozRequestFullScreen?e=!0:i.webkitRequestFullScreen?e=!0:i.msRequestFullscreen?e=!0:i.webkitEnterFullscreen&&(e=!0),e&&(this.$el.show(),this.delegateEvents())}},videoEnterFullScreen:function(){var e=this.video();e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitEnterFullscreen&&e.webkitEnterFullscreen(),this.manager.events.trigger("gui:legacyFullScreenEntered")}})}}),define("sub_modules/questions/feedback-modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-questions-feedback",events:{"submit form":"continue"},initialize:function(e){this.pluginMain=e.pluginMain,this.manager=e.manager,this.response=e.response,this.correct=e.correct,t.extend(this,e),this.__init(e),this.__render(e)},continue:function(e){e.preventDefault(),this.hide(),this.manager.play()}})}),define("sub_modules/questions/single-modal",["jquery","underscore","viddler","sub_modules/questions/feedback-modal"],function(e,t,n,i){return n.BaseViews.ModalView.extend({template:"#tmp-questions-single",events:{"submit form":"sendAnswer","click .skip":"skipAnswer"},initialize:function(e){this.pluginMain=e.pluginMain,this.manager=e.manager,this.question=e.question,t.extend(this,e),this.__init(e),this.__render(e)},skipAnswer:function(e){this.hide(),this.manager.play()},sendAnswer:function(e){var t;if(e.preventDefault(),t=this.validateForm()){this.hide();var r=this.question.answers.filter(function(e){return e.id==t.answer_id}),a=this.question.answers.filter(function(e){return e.correct});r[0].response.length>0?new i({pluginMain:this,embed:this.embed,manager:this.manager,response:r[0].response,correct:t.answer==a[0].id}):this.manager.play(),endpoint=this.pluginMain.feedbackEndpoint.replace("{id}",this.question.id),n.Apiv3.setAnswers({feedbackEndpoint:endpoint,environment:this.embed.environment,question_id:this.question.id,payload:t}).error(function(e){console.error(e)})}},validateForm:function(){var e=this.$('input[name="answer"]:checked').val();return"undefined"==e||null==e?(this.showError("*You must select one option."),!1):{question_id:parseInt(this.question.id),answer_id:parseInt(e),identifier:this.embed.identifier}},showError:function(e,t){this.$(".error").html(e)}})}),define("sub_modules/questions/paragraph-modal",["jquery","underscore","viddler","sub_modules/questions/feedback-modal"],function(e,t,n,i){return n.BaseViews.ModalView.extend({template:"#tmp-questions-paragraph",events:{"submit form":"sendAnswer","click .skip":"skipAnswer"},initialize:function(e){this.pluginMain=e.pluginMain,this.manager=e.manager,t.extend(this,e),this.__init(e),this.__render(e)},skipAnswer:function(e){this.hide(),this.manager.play()},sendAnswer:function(e){var t;(e.preventDefault(),t=this.validateForm())&&(this.hide(),new i({pluginMain:this,embed:this.embed,manager:this.manager,response:"Thank you for your answer!"}),endpoint=this.pluginMain.feedbackEndpoint.replace("{id}",this.question.id),n.Apiv3.setAnswers({feedbackEndpoint:endpoint||!1,environment:this.embed.environment,question_id:this.question.id,payload:t}).error(function(e){console.error(e)}))},validateForm:function(){var e=this.$('textarea[name="paragraph-answer"]').val();return e.length<1?(this.showError("*You must type the answer."),!1):{question_id:parseInt(this.question.id),text:e,identifier:this.embed.identifier}},showError:function(e,t){this.$(".error").html(e)}})}),define("text!sub_modules/questions/templates.html",[],function(){return'<script type="text/template" id="tmp-questions-feedback">\n  <div class="modal-outer questions-modal">\n    <form class="questions-feedback-form">\n      <div class="middle-response">\n        <div class="center">\n          <div style="font-size: 2em;"><%= response %></div>\n          <input type="submit" value="Continue" />\n        </div>\n      </div>\n    </form>\n  </div>     \n<\/script>\n\n<script type="text/template" id="tmp-questions-single">\n<div class="modal-outer questions-modal">\n  <form class="questions-single-form">\n    <div class="top">\n      <div class="title"><%= question.text %></div>\n    </div>\n    <div class="middle">\n      <div class="list">\n        <% _.each(question.answers, function (answer, index) {%>          \n          <label for="answer-<%= answer.id %>">\n            <input name="answer" value="<%= answer.id %>" type="radio">\n            <span style="margin-left: 4px;"><%= answer.text %></span>\n          </label>\n        <% }) %>                              \n      </div>\n    </div>            \n    <div class="bottom">\n    <% if(question.skippable) { %>\n      <button type="button" class="skip">Skip</button>\n    <% } %>        \n      <input type="submit" value="Submit" />\n      <span class="error"></span>\n    </div>\n  </form>\n</div>     \n<\/script>\n\n<script type="text/template" id="tmp-questions-paragraph">\n  <div class="modal-outer questions-modal">\n    <form class="questions-single-form">\n      <div class="top">\n        <div class="title"><%= question.text %></div>\n      </div>\n      <div class="middle">\n        <div class="list">\n            <textarea name="paragraph-answer" placeholder="Your answer here..."></textarea>\n        </div>\n      </div>            \n      <div class="bottom">\n      <% if(question.skippable) { %>\n        <button type="button" class="skip">Skip</button>\n      <% } %>        \n        <input type="submit" value="Submit" />\n        <span class="error"></span>\n      </div>\n    </form>\n  </div>     \n  <\/script>'}),define("sub_modules/questions/questions-main",["jquery","underscore","viddler","sub_modules/questions/single-modal","sub_modules/questions/paragraph-modal","text!sub_modules/questions/templates.html","config"],function(e,t,n,i,r,a,o){return{Templates:a,View:n.BaseViews.SubModule.extend({name:"questions",initialize:function(n){t.extend(this,n),this.events=this.embed.manager.events,this._initResource(n),n.embed.questions&&(this.embed.accessibility||(this.videoToken=this.mediaElement.id,this.videoLength=Math.floor(this.mediaElement.duration/1e3),this.feedbackEndpoint=this._getFeedbackEndpoint(n),this.questions=n.embed.questions.list,this.questions&&(this.questions=this.questions.map(function(e){return e.show=!0,e})),this.form=e("<form>")))},_getFeedbackEndpoint:function(e){return e.embed.questions?(endpoint=e.embed.questions.feedbackEndpoint||o.apiV3Users[e.embed.environment].questions.feedbackEndpoint,endpoint):""},activate:function(){this.embed.questions&&(this.embed.accessibility||(this.videoMonitor=this.mediaElement.subModules.video_monitor.videoMonitor,this.addEventListeners()))},load:function(){this.resourceLoadedWhenDeferredObjectsComplete(),n.Config.DEBUG&&n.Logger.log("[questions] loaded",this)},addEventListeners:function(){var e=this;this.videoMonitor.on("timelineUpdateForAnalytics",function(){e.trackQuestionsBySeconds(Math.floor(e.manager.currentTime/1e3))})},trackQuestionsBySeconds:function(e){if(0!==e){e=Math.floor(e);var t=this;this.questions=this.questions.map(function(n){return n.timestamp==e&&n.show&&(t.showQuestion(n),n.show=!1),n})}},showQuestion:function(e){e.show&&(this.manager.pause(),1==e.type&&(this.singleModal=new i({pluginMain:this,embed:this.embed,manager:this.manager,question:e})),0==e.type&&(this.paragraphModal=new r({pluginMain:this,embed:this.embed,manager:this.manager,question:e})))}})}}),define("media_elements/comment_list/models/comment_collection",["backbone","underscore","viddler","require"],function(e,t,n){return e.Collection.extend({sortByString:"date-desc",initialize:function(e,n){return t.extend(this,n),this},fetch:function(e){this.model=require("media_elements/comment_list/models/comment_model");var t=this,i={id:this.viddlerVideoId,environment:this.embed.environment};this.parent&&(i.parentId=this.parent.id),this.secret&&(i.secret=this.secret),n.Api.getComments(i,function(n,i){var r=n.responseJSON;if("success"==i){var a=r.comments.list_result.comments_list;t.reset(a,{parse:!0}),e.success()}else e.error(r)})},getByTimeRange:function(e){var n=[];return t.each(this.models,function(t){t.attributes.time>e.start&&t.attributes.time<=e.stop&&n.push(t)}),n},comparator:function(e){switch(this.sortByString){case"date-asc":return e.get("addTime");case"date-desc":return-e.get("addTime");case"timestamp-asc":return parseInt(e.get("addTimepoint"))||0;case"timestamp-desc":return-parseInt(e.get("addTimepoint"))||0;default:return-e.get("addTime")}}})}),define("media_elements/comment_list/models/comment_model",["backbone","viddler","media_elements/comment_list/models/comment_collection","humps","underscore"],function(e,t,n,i,r){return e.Model.extend({defaults:function(){return{parentId:"",author:"You",text:"",addTime:(new Date).getTime()/1e3,addTimepoint:"",repliesCount:0}},parse:function(e){return e&&(this.apiResponse=e),i.camelizeKeys(e)},validate:function(){},initialize:function(){this.setTimes(),this.collection&&this.set("embed",this.collection.embed),this.setDisplayName(),this.set("replies",new n([],{viddlerVideoId:this.get("viddlerVideoId"),embed:this.get("embed"),parent:this,secret:this.get("embed").secret})),this.on("destroy",function(){this.collection.parent&&this.collection.parent.collection.trigger("reply-removed",this)})},setDisplayName:function(){var e=this,n={author:this.get("author"),custom_user_identifier:this.get("customUserIdentifier")};t.Util.getCommentDisplayName(this.get("embed"),n,function(t){e.set("display_name",t)})},createdStr:function(){var e=new Date(1e3*this.get("addTime"));return t.Util.formatDate(e)},setTimes:function(){if(!this.get("timepointStr")){var e=r.isNaN(parseInt(this.get("addTimepoint")/1e3))?0:parseInt(this.get("addTimepoint")/1e3);this.set("timepointStr",t.Util.secs2time(e))}if(!this.get("addTimepoint")&&this.get("timepointStr")){var n=t.Util.time2secs(this.get("timepointStr"));n>0&&this.set("addTimepoint",1e3*n)}},loadReplies:function(e){var t=this;this.get("replies").on("change:display_name",function(e){t.collection.trigger("reply:change:display_name",e)}),this.get("replies").fetch({success:function(){t.set("repliesCount",t.get("replies").length),e()}})},sync:function(n,i,r){var a=this;if(r||(r={}),"delete"==n)t.Api.deleteComment({id:i.get("id"),environment:this.get("embed").environment},function(e){e?r.success():r.error()});else if("create"==n){var o=i.attributes;if(o.text.length>4095)return alert(a.get("embed").manager.localizer.translate("media_elements.comment_list.errors.too_long")),void r.error();if(0==o.text.trim().length)return alert(a.get("embed").manager.localizer.translate("media_elements.comment_list.errors.text_is_blank")),void r.error();if(o.timepointStr){if(!o.timepointStr.match(/^([0-9]?[0-9]:)?[0-9]?[0-9]:[0-9]?[0-9]$/))return alert(a.get("embed").manager.localizer.translate("media_elements.comment_list.errors.invalid_timepoint")),void r.error();var s=1e3*t.Util.time2secs(o.timepointStr);o.addTimepoint=s}o.environment=this.get("embed").environment,t.Api.addComment(o,function(e,t){e?(o.addTimepoint&&(t.add_timepoint=o.addTimepoint),a.apiResponse=t,i.set("id",t.id),r.success()):(alert(a.get("embed").manager.localizer.translate("media_elements.comment_list.errors.generic",t)),r.error())})}if(r.url)return e.sync.call(i,n,i,r)}})}),define("media_elements/comment_list/localization",[],function(){return{default:{media_elements:{comment_list:{date:"Date",add_comment:"Add Comment",timestamp:"Timestamp",total_count:function(e){var t="Comment";if(1!==e&&(t+="s"),e<100)var n='<span class="number">'+e+"</span> ";else n=e+" ";return n+t},reply:"Reply",delete:"Delete",form:{comment:{placeholder:"Your comment",submit:"Submit"},reply:{placeholder:"Enter reply text",submit:"Submit"}},errors:{text_is_blank:"Comment text is required",too_long:"Your comment must be 4095 characters or under",invalid_timepoint:"Timestamp is invalid. It should be in format: mm:ss",generic:function(e){var t="Sorry, an error occured, please try again later";return e.responseJSON.error.details&&(t+=": "+e.responseJSON.error.details),t}}}}}}}),define("text!media_elements/comment_list/templates.html",[],function(){return'<script type="text/template" id="tmp-comments-list">\n  <div class="comments">\n    <div class="row">\n      <div class="comments-column-header count"><%= t(\'media_elements.comment_list.total_count\', total) %></div>\n      <a class="comments-column-header date" href="#">\n        <%= t(\'media_elements.comment_list.date\') %>\n      </a>\n      <a class="comments-column-header timestamp" href="#">\n        <%= t(\'media_elements.comment_list.timestamp\') %>\n      </a>\n\n      <% if(canComment) { %>\n        <div class="new-comment-button-container">\n          <a class="new-comment-button button" href="#"><%= t(\'media_elements.comment_list.add_comment\') %></a>\n        </div>\n      <% } %>\n    </div>\n\n    <% _.each(items, function (item) { %>\n      <div class="comment row" data-comment-id="<%= item.id %>" data-index="<%= collection.indexOf(item) %>">\n        <div class="author"><%= item.get(\'display_name\') %></div>\n        <div class="date"><%= item.createdStr() %></div>\n        <div class="timestamp"><a href="#"><%= item.get(\'timepointStr\') %></a></div>\n        <div class="text"><%= Viddler.Util.linkify(item.get(\'text\')) %></div>\n        <div class="actions">\n          <% if(item.get(\'id\')) { %>\n            <% if(item.get(\'repliesCount\') > 0 && item.get(\'replies\').length < item.get(\'repliesCount\')) { %>\n              <a class="load-replies-button button" href="#">&#9660;</a>\n            <% } %>\n            <% if(canReply) { %>\n              <a class="reply-button button" href="#"><%= t(\'media_elements.comment_list.reply\') %></a>\n            <% } %>\n            <% if(canDelete) { %>\n              <a class="delete-button button" href="#"><%= t(\'media_elements.comment_list.delete\') %></a>\n            <% } %>\n          <% } %>\n        </div>\n      </div>\n\n\n      <% if(item.get(\'replies\') && item.get(\'replies\').length > 0) { %>\n        <% item.get(\'replies\').forEach(function(reply) { %>\n          <div class="comment reply row" data-comment-id="<%= reply.id %>" data-index="<%= item.get(\'replies\').indexOf(reply) %>">\n            <div class="author"><%= reply.get(\'display_name\') %></div>\n            <div class="date"><%= reply.createdStr() %></div>\n            <div class="timestamp"><%= reply.get(\'timepointStr\') %></div>\n            <div class="text"><%= Viddler.Util.linkify(reply.get(\'text\')) %></div>\n            <div class="actions">\n              <% if(reply.get(\'id\') && canDelete) { %>\n                <a class="delete-button"><%= t(\'media_elements.comment_list.delete\') %></a>\n              <% } %>\n            </div>\n          </div>\n        <% }); %>\n      <% } %>\n\n    <% }); %>\n    <div class="comments-pager-container"></div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-comments-pager">\n  <div class="comment-pager">\n    <% if (!first) { %>\n      <a href="#" class="page-prev pager-el cursor"><</a>\n    <% } %>\n    <% for (i = 0; i < els; i++ ) { %>\n      <% if (i === current) { %>\n        <a href="#" class="pager-el page-number cursor pager-current-page" data-page="<%= i %>"><%= i+1 %></a>\n      <% } else { %>\n        <a href="#" class="pager-el page-number cursor" data-page="<%= i %>"><%= i+1 %></a>\n      <% } %>\n    <% } %>\n     <% if (!last) { %>\n     <a href="#" class="page-next pager-el cursor">></a>\n    <% } %>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-comment-list-form">\n  <% if(parentComment) { var commentType = \'reply\' } else { var commentType = \'comment\' } %>\n\n  <div class="row form-row type-<%= commentType %>">\n    <form>\n      <% if(loggedInAs) { %>\n        <p><%= loggedInAs %></p>\n      <% } %>\n\n      <div class="comment-text-container">\n        <textarea class="comment-text" placeholder="<%= t(\'media_elements.comment_list.form.\' + commentType + \'.placeholder\') %>"></textarea>\n      </div>\n\n      <% if(parentComment) { %>\n        <input type="hidden" value="<%= parentComment.get(\'id\') %>" id="parent-id"></input>\n      <% } else { %>\n        <div class="timestamp-field-container">\n          <label>Timestamp</label>\n          <input type="text" class="timestamp" value="" placeholder="0:00" />\n        </div>\n      <% } %>\n      <input type="submit" class="button comment-form-submit" value="<%= t(\'media_elements.comment_list.form.\' + commentType + \'.submit\') %>"></input>\n    </form>\n  </div>\n<\/script>\n'}),define("media_elements/comment_list/comment_list-main",["underscore","jquery","viddler","media_elements/comment_list/models/comment_model","media_elements/comment_list/models/comment_collection","humps","media_elements/comment_list/localization","text!media_elements/comment_list/templates.html"],function(e,t,n,i,r,a,o,s){return{LocalizationContent:o,Templates:s,View:n.BaseViews.MediaElement.extend({name:"comment_list",templatePath:"media_elements/comment_list/templates.html",comments:[],curPage:0,numPages:0,perPage:10,events:{"click .page-next":"doNext","click .page-prev":"doPrev","click .page-number":"doPage","click .delete-button":"deleteComment","click .reply-button":"showReplyInterface","click .load-replies-button":"loadCommentReplies","click .new-comment-button":"showNewCommentInterface","click .comments-column-header.date":"sortByDate","click .comments-column-header.timestamp":"sortByTimePoint","click .comment .timestamp":"jumpToVideoTime"},initialize:function(t){e.extend(this,t),this._initResource(t),this.canDelete="1"==this.resourceData.permissions.author_logged&&!n.Util.matrix.nocors,this.embed.disableCommentCreation?this.canComment=!1:this.canComment=("1"==this.resourceData.permissions.author_logged||"public"==this.resourceData.permissions.commenting.level)&&!n.Util.matrix.nocors,this.canReply=this.canComment&&!this.embed.disableCommentReplying,this.theme=this.embed.theme||"dark"},activate:function(){this.delegateEvents(),this.embed.hideCommentEmbedIfNoComments&&0==this.comments.length||this.render()},load:function(){this.buildCommentCollection(),this.numPages=Math.ceil(this.comments.length/this.perPage),this.injectEl(),this.addEventListeners(),this.resourceLoadedWhenDeferredObjectsComplete()},injectEl:function(){this.$el=t("<div>",{class:"comments-list"}),this.embed.target.find(".media-container").append(this.$el)},addEventListeners:function(){var e=this;this.comments.bind("reply-added sort add",function(){e.render()}),this.comments.bind("remove reply-removed",function(t){e.$el.find('.comment[data-comment-id="'+t.get("id")+'"]').hide("slow",function(){e.render()})}),this.comments.on("change:display_name reply:change:display_name",function(t){e.$('.comment.row[data-comment-id="'+t.get("id")+'"]').find(".author").text(t.get("display_name"))}),t(window).resize(function(){e.applyCssClasses()}),this.embed.manager.events.on("linked:comments:commentAdded",function(t){(t=a.camelizeKeys(t)).embed=e.embed,t.viddlerVideoId=e.resourceData.viddlerVideoId;var n=new i(t);n.apiResponse=t,e.comments.push(n)}),this.embed.manager.events.on("linked:comments:replyAdded",function(t){var n=e.comments.findWhere({id:t.parent});(t=a.camelizeKeys(t)).embed=e.embed,t.viddlerVideoId=e.resourceData.viddlerVideoId;var r=new i(t);r.apiResponse=t,n.set("repliesCount",n.get("repliesCount")+1),n.get("replies").push(r),e.render()}),this.embed.manager.events.on("linked:comments:commentDeleted",function(t){if(t.parent){var n=e.comments.findWhere({id:t.parent});n.set("repliesCount",n.get("repliesCount")-1);var i=n.get("replies")}else i=e.comments;var r=i.findWhere({id:t.id});r&&(t.parent&&e.comments.trigger("reply-removed",r),i.remove(r)),e.render()}),this.$el.on("submit",".form-row form",function(n){n.preventDefault();var r=e.$("#parent-id").val(),a=e.$(".comment-text").val();if(r)var o=e.comments.findWhere({id:r});var s={viddlerVideoId:e.resourceData.viddlerVideoId,text:a,embed:e.embed,parentId:r},l=t(n.target).find(".timestamp").val();""!==l&&(s.timepointStr=l);var u=new i(s);u.save({},{success:function(){o?(o.get("replies").add(u),o.collection.trigger("reply-added",o),e.embed.manager.events.trigger("comments:replyAdded",u.apiResponse)):(e.comments.add(u),e.embed.manager.events.trigger("comments:commentAdded",u.apiResponse)),e.removeVisibleForms()}})})},buildCommentCollection:function(){var t=[],n=this;e.each(this.resourceData.comments_list,function(e){(e=a.camelizeKeys(e)).embed=n.embed,e.viddlerVideoId=n.resourceData.viddlerVideoId;var r=new i(e);r.apiResponse=e,t.push(r)}),this.comments=new r(t)},loadCommentReplies:function(e){e.preventDefault();var n=t(e.currentTarget).parents(".comment").data("index"),i=this.comments.at(n);this.loadCommentRepliesFor(i)},loadCommentRepliesFor:function(e){var t=this;e.loadReplies(function(){t.render()})},deleteComment:function(e){if(e.preventDefault(),confirm("Are you sure you want to delete this comment?")){var n=t(e.currentTarget).parents(".comment"),i=n.data("index");if(n.hasClass("reply")){parentIndex=n.prev().data("index");var r=this.comments.at(parentIndex).get("replies").at(i)}else r=this.comments.at(i);this.embed.manager.events.trigger("comments:commentDeleted",r.apiResponse),r.destroy({error:function(){alert("Sorry, but an error occured when trying to delete the comment.")}})}},removeVisibleForms:function(){this.form&&this.form.remove()},showReplyInterface:function(e){e.preventDefault();var n=t(e.currentTarget).parents(".row"),i=this.comments.at(n.data("index"));this.removeVisibleForms();var r={loggedInAs:this.resourceData.loggedInAs,parentComment:i};this.form=t(this.embed.manager.retrieveTemplate("#tmp-comment-list-form",r)),n.after(this.form),this.setTabIndexes(),this.form.find(".comment-text").focus()},showNewCommentInterface:function(i){i.preventDefault();var r=t(i.currentTarget).parents(".row");this.removeVisibleForms();var a={loggedInAs:this.resourceData.loggedInAs,parentComment:void 0};this.form=t(this.embed.manager.retrieveTemplate("#tmp-comment-list-form",a)),r.after(this.form),this.setTabIndexes(),this.form.find(".comment-text").focus();var o=e.find(this.embed.linkedEmbeds,function(e){return"video"==e.type});if(o){var s=Math.floor(o.manager.currentTime/1e3);s>0&&this.form.find(".timestamp").val(n.Util.secs2time(s))}},doNext:function(e){e.preventDefault(),this.curPage<this.numPages&&(this.curPage++,this.focusOnPaginationAfterRender(),this.render())},doPrev:function(e){e.preventDefault(),this.curPage>0&&(this.curPage--,this.focusOnPaginationAfterRender(),this.render())},doPage:function(e){e.preventDefault(),this.curPage=parseInt(e.target.dataset.page,10),this.focusOnPaginationAfterRender(),this.render()},focusOnPaginationAfterRender:function(){this.focusAfterRender='.page-number[data-page="'+this.curPage+'"]'},render:function(){var e={},t=this.curPage*this.perPage,n=t+this.perPage;e.items=this.comments.slice(t,n),e.total=this.comments.length,e.collection=this.comments,e.canComment=this.canComment,e.canReply=this.canReply,e.canDelete=this.canDelete,this.$el.html(this.embed.manager.retrieveTemplate("#tmp-comments-list",e)),this.comments.length>this.perPage&&this.renderPager(),this.updateSortIcons(),this.applyCssClasses(),this.ensureLinksOpenInNewTab(),this.setTabIndexes(),this.focusAfterRender&&(this.$(this.focusAfterRender).focus(),this.focusAfterRender=void 0)},setTabIndexes:function(){this.$("a, input, textarea, .comment-text").attr("tabindex",this.embed.tabIndexComments)},ensureLinksOpenInNewTab:function(){this.$(".comment .text a").attr("target","_blank")},updateSortIcons:function(){this.$(".comments-column-header").removeClass("sorted-asc").removeClass("sorted-desc");var e=this.comments.sortByString.split("-"),t=e[0],n=e[1];this.$(".comments-column-header."+t).addClass("sorted-"+n)},applyCssClasses:function(){this.$el.parents(".viddler-app-wrap").width()<=520?this.$el.addClass("limited"):this.$el.removeClass("limited"),this.$el.addClass("theme-"+this.theme)},renderPager:function(){var e={};e.els=Math.ceil(this.comments.length/this.perPage),e.first=0===parseInt(this.curPage),e.last=this.curPage===this.numPages-1,e.current=this.curPage,this.$(".comments-pager-container").html(this.embed.manager.retrieveTemplate("#tmp-comments-pager",e))},scrollTo:function(e){var n=this.comments.findWhere({id:e}),i=this.comments.indexOf(n);this.curPage=parseInt(Math.floor(i/10)),this.render();var r=this.$el.find('.comment.row[data-comment-id="'+e+'"]');t("html, body").animate({scrollTop:r.offset().top},300,function(){r.css("background-color","#555"),setTimeout(function(){r.css("background-color","inherit")},100)})},sortByDate:function(e){if(e.preventDefault(),this.focusAfterRender=".comments-column-header.date","date-asc"==this.comments.sortByString)var t="date-desc";else t="date-asc";this.comments.sortByString=t,this.comments.sort()},sortByTimePoint:function(e){if(e.preventDefault(),this.focusAfterRender=".comments-column-header.timestamp","timestamp-asc"==this.comments.sortByString)var t="timestamp-desc";else t="timestamp-asc";this.comments.sortByString=t,this.comments.sort()},jumpToVideoTime:function(e){e.preventDefault();var i=t(e.target).text(),r=n.Util.time2secs(i);t.each(this.embed.linkedEmbeds,function(e,t){"video"==t.type&&t.manager.seekTo(1e3*r).play()})}})}}),define("media_elements/overlay/overlay-main",["jquery","viddler"],function(e,t){return{View:t.BaseViews.MediaElement.extend({name:"overlay",el:".overlays-container",initialize:function(e){this._initResource(e)},load:function(){this.injectEl(),this.render(),this.resourceLoaded()},injectEl:function(){this.$el=e("<div>",{class:"overlays-container"}),this.embed.target.find(".media-container").prepend(this.$el)},render:function(){var t=this,n=e("<img>",{src:this.resourceData.imageUrl,alt:"Logo"});if(this.resourceData.clickUrl){var i=e("<a>",{href:this.resourceData.clickUrl,target:"_blank"});i.html(n),this.overlay=i}else this.overlay=n;this.overlay.hide(),this.$el.html(this.overlay),n.load(function(){n.css("max-height","calc(100% - "+t.resourceData.offsetY+"px)"),n.css("max-width","calc(100% - "+t.resourceData.offsetX+"px)");var e,i=t.resourceData.offsetX-n.width()/2+"px";switch(t.resourceData.offsetX=t.resourceData.offsetX||0,t.resourceData.offsetY=t.resourceData.offsetY||0,t.resourceData.position){case"tl":e={top:t.resourceData.offsetY+"px",left:t.resourceData.offsetX+"px"};break;case"bl":e={bottom:t.resourceData.offsetY+"px",left:t.resourceData.offsetX+"px"};break;case"tr":e={top:t.resourceData.offsetY+"px",right:t.resourceData.offsetX+"px"};break;case"br":e={bottom:t.resourceData.offsetY+"px",right:t.resourceData.offsetX+"px"};break;case"b":e={bottom:t.resourceData.offsetY+"px",left:"50%","margin-left":i};break;case"t":e={top:t.resourceData.offsetY+"px",left:"50%","margin-left":i}}e.opacity=(100-parseInt(t.resourceData.transparency))/100,n.css(e)})},activate:function(){this.overlay.show()},deactivate:function(){this.overlay.hide()}})}}),define("media_elements/timeline_comments/base_modal",["viddler"],function(e){return e.BaseViews.ModalView.extend({focusAfterShow:"textarea,input,a:first",hide:function(){this.mediaElement.currentlyAutoShown=!1,this.icon.removeClass("viewable-in-minimal"),e.BaseViews.ModalView.prototype.hide.call(this)},ensureLinksOpenInNewTab:function(){this.$(".text a").attr("target","_blank")},setTabIndexes:function(){this.$("a, input, textarea").attr("tabindex",this.embed.tabIndexComments)}})}),define("media_elements/timeline_comments/resume_modal",["viddler"],function(e){return e.BaseViews.ModalView.extend({template:"#tmp-reply-resume",focusAfterShow:".resume",events:{"click .resume":"resume"},initialize:function(e){this.__init(e),this.render(e)},resume:function(e){e.preventDefault(),this.remove(),this.manager.play()}})}),define("media_elements/timeline_comments/comment_list_modal",["jquery","underscore","viddler","media_elements/timeline_comments/base_modal","media_elements/timeline_comments/single_comment_modal"],function(e,t,n,i,r){return i.extend({template:"#tmp-comment-list-popup",triangle:"down",events:{"click .view-single-comment":"viewSingleComment","click .return-to-parent":"returnToParent","click .previous-page":"previousPage","click .next-page":"nextPage"},initialize:function(e){t.extend(this,e),this.__init(e)},render:function(){this.currentPage=1,this.__render(this),this.ensureLinksOpenInNewTab(),this.setTabIndexes()},viewSingleComment:function(i){i.preventDefault();var a=e(i.currentTarget).data("comment-id"),o=t.findWhere(this.comments,{id:a});new r({mediaElement:this.mediaElement,embed:this.embed,manager:this.manager,comment:o,icon:this.icon,commentListModal:this,canReply:o.canReply&&!n.Util.matrix.nocors,canDelete:o.canDelete&&!n.Util.matrix.nocors}).show()},returnToParent:function(e){e.preventDefault(),this.parentCommentModal.show()},positionModal:function(){this.updatePagination(),n.BaseViews.ModalView.prototype.positionModal.call(this)},previousPage:function(){this.currentPage--,this.positionModal()},nextPage:function(){this.currentPage++,this.positionModal()},updatePagination:function(){var e=this.embed.target.find(".viddler-embed").height()-200;this.perPage=Math.floor(e/65);var t=Math.ceil(this.comments.length/this.perPage);this.perPage<1&&(this.perPage=1),this.currentPage>t&&(this.currentPage=t);var n=this.perPage*(this.currentPage-1),i=n+this.perPage;this.$("div.comment-row").hide().slice(n,i).show();var r=0;1==this.currentPage?this.$(".previous-page").hide():(this.$(".previous-page").show(),r++),this.currentPage==t?this.$(".next-page").hide():(this.$(".next-page").show(),r++),2==r?this.$(".separator").show():this.$(".separator").hide()}})}),define("media_elements/timeline_comments/single_comment_modal",["underscore","viddler","media_elements/timeline_comments/base_modal","media_elements/timeline_comments/resume_modal"],function(e,t,n,i){return n.extend({template:"#tmp-view-comment-popup",triangle:"down",events:{"click .reply-button":"showReplyForm","submit form":"submitReply","click .cancel":"hideReplyForm","click .return-to-list":"returnToList","click .show-replies":"showReplies","click .return-to-parent":"returnToParent","click .delete-comment":"deleteComment"},initialize:function(t){e.extend(this,t),this.__init(t)},render:function(){this.__render(this),this.ensureLinksOpenInNewTab(),this.setTabIndexes()},showReplyForm:function(e){e.preventDefault(),this.$(".reply-comment-form").show(),this.$(".comment-display").hide(),this.comment.replyAs?this.$(".author").text(this.comment.replyAs):this.$(".author").hide(),this.$(".comment-text").focus(),this.positionModal(),this.embed.manager.pause()},hideReplyForm:function(e){e.preventDefault(),this.$(".reply-comment-form").hide(),this.$(".comment-display").show(),this.$(".author").show().text(this.comment.author),this.$(this.focusAfterShow).focus(),this.positionModal()},submitReply:function(e){var n=this;e.preventDefault();var r={viddlerVideoId:this.comment.viddlerVideoId,parentId:this.comment.id,text:this.$(".comment-text").val().trim(),environment:this.embed.environment};r.text.length>4095?alert(n.embed.manager.localizer.translate("media_elements.timeline_comments.errors.too_long")):0!=r.text.length?t.Api.addComment(r,function(e,t){e?(n.manager.events.trigger("comments:replyAdded",t),n.comment.repliesCount+=1,n.remove(),new i({embed:n.embed,manager:n.manager,icon:n.icon,passedModeration:"1"==t.comments_moderation.status}).show()):alert(n.embed.manager.localizer.translate("media_elements.timeline_comments.errors.generic",t))}):alert(n.embed.manager.localizer.translate("media_elements.timeline_comments.errors.text_is_blank"))},returnToList:function(e){e.preventDefault(),this.commentListModal.show()},returnToParent:function(e){e.preventDefault(),this.parentCommentModal.show()},deleteComment:function(e){e.preventDefault();var n=this;confirm("Are you sure you want to delete this comment?")&&t.Api.deleteComment({id:this.comment.id,environment:this.embed.environment},function(e){n.embed.manager.events.trigger("comments:commentDeleted",n.comment),n.mediaElement.handleDeletedComment(n.comment)})},showReplies:function(e){e.preventDefault();var n=this;n.mediaElement.loadRepliesFor(n.comment,function(e){e.length>1?require(["media_elements/timeline_comments/comment_list_modal"],function(t){new t({mediaElement:n.mediaElement,embed:n.embed,manager:n.manager,comments:e,addTimepointStr:n.mediaElement.addTimepointStr(n.mediaElement.resourceData.commentTimeStamp),icon:n.icon,parentCommentModal:n}).show()}):new n.constructor({mediaElement:n.mediaElement,embed:n.embed,manager:n.manager,comment:e[0],addTimepointStr:n.mediaElement.addTimepointStr(n.mediaElement.resourceData.commentTimeStamp),icon:n.icon,parentCommentModal:n,canReply:!1,canDelete:e[0].canDelete&&!t.Util.matrix.nocors}).show()})},positionModal:function(){this.setSizes(),t.BaseViews.ModalView.prototype.positionModal.call(this)},getSizeMetaData:function(){return this.sizeMetaData||(this.$(".text").css("max-height","auto"),this.sizeMetaData={barHeights:115,modalPadding:20,minimumWidth:300,modalDiagonal:Math.sqrt(Math.pow(this.$el.width(),2)+Math.pow(this.$el.height(),2))}),this.sizeMetaData},setSizes:function(){var e=this.getSizeMetaData(),t=this.embed.target.find(".viddler-app-wrap"),n=[t.width(),t.height()-e.barHeights],i=e.modalDiagonal*n[1]/Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)),r=n[0]/n[1]*i;r<e.minimumWidth&&(r=e.minimumWidth),r>t.width()&&(r=t.width()-e.modalPadding),this.$el.width(r),this.$(".text").css("max-height",t.height()-270)}})}),define("media_elements/timeline_comments/localization",[],function(){return{default:{media_elements:{timeline_comments:{comment_list:{back:"Back",previous:"Previous",next:"Next"},single_comment:{back:"Back",reply:"Reply",delete:"Delete",return_to_list:"Return to list",replies_count:function(e){if(1==e)var t="reply";else t="replies";return e+" "+t}},reply_form:{placeholder:"Add Your Reply Here",submit:"Submit",cancel:"Cancel"},resume_modal:{resume_button:"Resume playing",needs_moderation:{title:"Thank you!",body:"If subject to moderation, your comment may not appear until approved."},success:{title:"Thanks!"}},errors:{text_is_blank:"Comment text is required",too_long:"Your comment must be 4095 characters or under",generic:function(e){var t="Sorry, an error occured, please try again later";return e.responseJSON.error.details&&(t+=": "+e.responseJSON.error.details),t}}}}}}}),define("text!media_elements/timeline_comments/templates.html",[],function(){return'<script type="text/template" id="tmp-view-comment-popup">\n  <div class="modal-outer view-comment-container">\n    <div class="modal-close">x</div>\n    <div class="modal-container">\n      <div class="meta">\n        <div class="timepoint-marker"></div>\n        <div class="timepoint"><%= mediaElement.addTimepointStr(comment.addTimepoint) %></div>\n        <div class="right">\n          <div class="author"><%= comment.displayName %></div>\n          <div class="date"><%= mediaElement.createdStr(comment.addTime) %></div>\n        </div>\n      </div>\n      <div class="comment-display">\n        <div class="text"><%= Viddler.Util.linkify(comment.text) %></div>\n        <% if(typeof(parentCommentModal) != "undefined") { %>\n          <a href="#" class="return-to-parent"><%= t(\'media_elements.timeline_comments.single_comment.back\') %></a>\n        <% } %>\n        <% if(comment.repliesCount > 0) { %>\n          <a href="#" class="show-replies"><%= t(\'media_elements.timeline_comments.single_comment.replies_count\', comment.repliesCount) %></a>\n        <% } %>\n        <div class="buttons">\n          <% if(canReply) { %>\n            <a href="#" class="reply-button button"><%= t(\'media_elements.timeline_comments.single_comment.reply\') %></a>\n          <% } %>\n          <% if(canDelete) { %>\n            <a href="#" class="delete-comment button alt"><%= t(\'media_elements.timeline_comments.single_comment.delete\') %></a>\n          <% } %>\n        </div>\n        <% if(typeof(commentListModal) != "undefined") { %>\n          <a href="#" class="return-to-list"><%= t(\'media_elements.timeline_comments.single_comment.return_to_list\') %></a>\n        <% } %>\n      </div>\n      <% if(comment.canReply) { %>\n        <form class="reply-comment-form">\n          <ul class="modal-form">\n            <li>\n              <textarea class="comment-text" placeholder="<%= t(\'media_elements.timeline_comments.reply_form.placeholder\') %>" name="commentText" rows="4" cols="33"></textarea>\n            </li>\n          </ul>\n          <a href="" class="cancel"><%= t(\'media_elements.timeline_comments.reply_form.cancel\') %></a>\n          <input type="submit" class="button comment-form-submit" value="<%= t(\'media_elements.timeline_comments.reply_form.submit\') %>"></input>\n        </form>\n      <% } %>\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-comment-list-popup">\n  <div class="modal-outer comment-list-container">\n    <div class="modal-close">x</div>\n    <div class="modal-container">\n      <div class="meta">\n        <div class="timepoint-marker"></div>\n        <div class="timepoint"><%= addTimepointStr %></div>\n      </div>\n\n      <div class="comment-list">\n        <% _.each(comments, function (comment) { %>\n          <div class="comment-row">\n            <div class="left">\n              <p class="author"><%= comment.displayName %></p>\n              <p class="date"><%= mediaElement.createdStr(comment.addTime) %></p>\n            </div>\n            <div class="text">\n              <%= comment.text.substring(0,20) %>...\n            </div>\n            <a href="#" class="view-single-comment" data-comment-id="<%= comment.id %>">&gt;</a>\n          </div>\n        <% }) %>\n      </div>\n\n      <% if(typeof(parentCommentModal) != "undefined") { %>\n        <a href="#" class="return-to-parent"><%= t(\'media_elements.timeline_comments.comment_list.back\') %></a>\n      <% } %>\n\n      <div class="pagination-links">\n        <a href="#" class="previous-page"><%= t(\'media_elements.timeline_comments.comment_list.previous\') %></a>\n        <span class="separator">|</span>\n        <a href="#" class="next-page"><%= t(\'media_elements.timeline_comments.comment_list.next\') %></a>\n      </div>\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-reply-resume">\n  <div class="modal-outer comment-form-resume" style="display:none">\n    <div class="modal-container">\n      <% var statusKey = passedModeration ? \'success\' : \'needs_moderation\' %>\n      <h2><%= t(\'media_elements.timeline_comments.resume_modal.\' + statusKey + \'.title\') %></h2>\n      <p><%= t(\'media_elements.timeline_comments.resume_modal.\' + statusKey + \'.body\') %></p>\n\n      <a href="#" role="button" class="resume button" tabindex="<%= tabIndexComments %>" ><%= t(\'media_elements.timeline_comments.resume_modal.resume_button\') %></a>\n    </div>\n  </div>\n<\/script>\n'}),define("media_elements/timeline_comments/timeline_comments-main",["jquery","underscore","viddler","modernizr","media_elements/timeline_comments/single_comment_modal","media_elements/timeline_comments/comment_list_modal","media_elements/timeline_comments/localization","text!media_elements/timeline_comments/templates.html"],function(e,t,n,i,r,a,o,s){return{LocalizationContent:o,Templates:s,View:n.BaseViews.MediaElement.extend({name:"timeline_comments",timelineIconWidth:26,timelineIconOffset:1e3,initialize:function(e){this._initResource(e),this.currentlyAutoShown=!1},load:function(e){this.setDisplayNames(),this.setupLinkedEvents(),this.addEventListeners(),e||this.resourceLoadedWhenDeferredObjectsComplete()},addEventListeners:function(){var e=this;this.embed.target.on("click",'.comment-marker[data-guid="'+this.guid+'"]',function(t){t.preventDefault(),e.toggleCommentOverlay()}),this.embed.manager.events.on("gui:ready",function(){e.setIcon(),e.modal&&!e.modal.icon.is(":visible")&&e.modal.hide()})},setupLinkedEvents:function(){var e=this;this.embed.manager.events.on("linked:comments:commentDeleted",function(t){e.handleDeletedComment(t)}),this.embed.manager.events.on("linked:comments:replyAdded",function(n){t.each(e.resourceData.comments,function(t,i){t.id==n.parent&&(t.repliesCount+=1,e.refreshModal())})})},resourceLoaded:function(){n.BaseViews.SubModule.prototype.resourceLoaded.call(this)},handleDeletedComment:function(e){var n=this;t.each(this.resourceData.comments,function(t,i){t.id==e.id?n.resourceData.comments.splice(i,1):t.id==e.parent&&(t.repliesCount-=1,n.refreshModal()),0==n.resourceData.comments.length?n.destroy():n.refreshModal()})},refreshModal:function(){var e=this.modal&&this.modal.visible();this.hideAllModals(),this.buildModal(),e&&this.modal.show()},timelineIcon:function(){return e("<a>",{href:"#",class:"timeline-media-element-marker comment-marker","data-guid":this.guid})},activate:function(){this.ensureModalExists(),this.resourceData.autoShow&&!this.currentlyAutoShown&&this.noNonCommentModalsDisplayed()&&(this.currentlyAutoShown=!0,this.modal.icon.addClass("viewable-in-minimal"),this.modal.show()),n.BaseViews.MediaElement.prototype.activate.call(this)},deactivate:function(){this.currentlyAutoShown&&this.modal.hide(),n.BaseViews.MediaElement.prototype.deactivate.call(this)},noNonCommentModalsDisplayed:function(){return 0==this.embed.mainView.$(".modal-outer:visible:not(.view-comment-container)").length},setIcon:function(){this.modal&&(this.modal.icon=this.embed.target.find('.comment-marker[data-guid="'+this.guid+'"]'))},buildModal:function(e){if(this.resourceData.comments.length>1)this.modal=new a({mediaElement:this,embed:this.embed,manager:this.embed.manager,comments:this.resourceData.comments,addTimepointStr:this.addTimepointStr(this.resourceData.commentTimeStamp)});else{var t=this.resourceData.comments[0];this.modal=new r({mediaElement:this,embed:this.embed,manager:this.embed.manager,comment:t,canReply:t.canReply&&!n.Util.matrix.nocors,canDelete:t.canDelete&&!n.Util.matrix.nocors})}this.setIcon()},toggleCommentOverlay:function(){this.ensureModalExists(),this.modal.toggleVisibility()},ensureModalExists:function(){this.modal&&this.modal.isInDom()||this.buildModal()},createdStr:function(e){var t=new Date(1e3*e);return n.Util.formatDate(t)},addTimepointStr:function(e){return n.Util.secs2time(e/1e3)},loadRepliesFor:function(i,r){var a=this,o=[];n.Api.getComments({id:i.viddlerVideoId,parentId:i.id,environment:this.embed.environment,secret:this.embed.secret},function(s,l){if("success"==l){var u=[];t.each(s.responseJSON.comments.list_result.comments_list,function(e){e={parent:i.id,author:e.author,text:e.text,addTime:parseInt(e.add_time),addTimepoint:parseInt(e.add_timepoint),repliesCount:0,id:e.id,viddlerVideoId:i.viddlerVideoId,canReply:!1,canDelete:i.canDelete,custom_user_identifier:e.custom_user_identifier};o.push(n.Util.getCommentDisplayName(a.embed,e,function(t){e.displayName=t})),u.push(e)}),e.when.apply(e,o).done(function(){r(u)})}else r(!1)})},setDisplayNames:function(){var e=this;t.each(this.resourceData.comments,function(t,i){e.deferredObjects.push(n.Util.getCommentDisplayName(e.embed,t,function(t){e.resourceData.comments[i].displayName=t}))})}})}}),define("media_elements/video/video-main",["jquery","underscore","backbone","viddler","modernizr","extensions/sitecatalyst/main","media_elements/video/jplayer/jquery.jplayer.min"],function(e,t,n,i,r,a){return{View:i.BaseViews.MediaElement.extend({name:"video",mandatorySubModules:{video_monitor:{},legacy_video_full_screen:{}},timelineIconWidth:1,initialize:function(e){t.extend(this,e),this.injectEl(),this.embed.videoPlayer=this,this.resourceData.fragmentStart=this.resourceData.fragmentStart||0,this.resourceData.fullVideoDuration=this.resourceData.fullVideoDuration||this.duration,this.events=this.embed.manager.events,this._initResource(e),this.videoEnded=t.bind(this.videoEnded,this)},load:function(){this.playerIsReady=!1,this.addEventListeners(),this.iPhoneHacks(),this.loadPlayer(),this.currentTime=0},injectEl:function(){this.$el=e("<div>",{class:"vid-player",style:"min-height: auto !important; height: 0, width: 0",id:"video-"+this.guid}),this.embed.target.find(".media-container").append(this.$el)},startLoadingVideo:function(){this.$el.find("video, audio").attr("preload","auto")},activatingSoon:function(){this.startLoadingVideo()},stopLoadingVideo:function(){this.$el.jPlayer("destroy"),this.$("video, audio").attr("src",""),this.$("video, audio").remove(),this.playerIsReady=!1,this.loadPlayer()},addEventListeners:function(){var t=this;this.$el.on(e.jPlayer.event.ready,function(e){t.onPlayerReady()}),this.$el.on(e.jPlayer.event.canplay,function(){t._onCanPlay()}),this.$el.on(e.jPlayer.event.play,function(e){t.events.trigger("videoPlayer:play"),t.embed.target.find(".play-overlay-button").hide(),t.embed.manager.mediaElementPlayed()}),this.$el.on(e.jPlayer.event.pause,function(e){t.events.trigger("videoPlayer:pause"),t.embed.manager.mediaElementPaused()}),this.$el.on(e.jPlayer.event.ended,this.videoEnded),this.$el.on(e.jPlayer.event.timeupdate,function(e){t.events.trigger("videoPlayer:timeupdate");var n=1e3*e.jPlayer.status.currentTime-t.resourceData.fragmentStart;n<500&&(n=0),n>0&&(t.currentTime=n,t.embed.manager.setTime(n)),n>t.duration&&(t.currentTime=t.duration,t.embed.manager.setTime(t.duration)),0!=n&&t.ensureVideoElementShowing()}),this.$el.on(e.jPlayer.event.playing,function(e){t.events.trigger("videoPlayer:playing")}),e(window).resize(function(){t.posterPositioningHacks()}),this.$el.on("contextmenu","video,audio",function(){return!1})},videoEnded:function(){this.events.trigger("videoPlayer:ended"),this.embed.manager.mediaElementFinished(),this.currentTime=0},isPaused:function(){return this.$el.data("jPlayer").status.paused},onPlayerReady:function(){i.Config.DEBUG&&i.Logger.log("[jPlayer] Player ready",this.resourceData),this.setMedia(this.resourceData),this.posterPositioningHacks(),this.resourceData.fragmentStart&&this.seekTo(0);var e,n,r,o=this.resourceData;o.settings&&o.settings.videoId&&(n=o.settings.environment,r=o.settings.secret,e=t.isArray(o.settings.videoId)?o.settings.videoId[0]:o.settings.videoId),a.getConfig({environment:n,videoId:e,secret:r,enabled:o.settings.siteCatalyst}),a.setState({videoName:o.title,videoDuration:o.fullVideoDuration}),this.activated||this.hideElement(),this.playerIsReady=!0,this.resourceLoaded(),this.isAudio()||this.$("audio").remove(),this.events.trigger("videoPlayer:playerReady")},activate:function(){var t=this;i.BaseViews.MediaElement.prototype.activate.call(this),"auto"==this.embed.preload&&(this.playerIsReady?t.startLoadingVideo():this.$el.one(e.jPlayer.event.ready,function(e){t.startLoadingVideo()}))},hideElement:function(){this.$el.css({width:0,height:0})},showElement:function(){this.$el.css({width:"100%",height:"100%"})},deactivate:function(){this.stop(),this.currentTime=0,this.stopLoadingVideo(),i.BaseViews.MediaElement.prototype.deactivate.call(this)},simpleMediaFilesObject:function(e){void 0===e&&(e=this.resourceData.defaultMediaFileIndex||0);var n={},i=this.supportedVideoFiles()[e],r=i.cdn_url;n["audio"==i.profile_name?"m4a":"mp4"==i.ext?"m4v":i.ext+"v"]=r;var a=t.where(this.resourceData.mediaUrls,{media_type:"thumbnail"})[0];return a&&(n.poster=a.cdn_url),n},supportedVideoFiles:function(){var e=i.Util.supportedVideoExtensions();return t.filter(this.resourceData.mediaUrls,function(n){return t.indexOf(e,n.ext)>-1})},setMedia:function(e){var t=this.simpleMediaFilesObject();e.poster&&(t.poster=e.poster),this.$el.jPlayer("setMedia",t),(i.Util.matrix.flashBrowser||i.Util.matrix.ios)&&this._onCanPlay()},changeMediaQuality:function(e){var t=this.simpleMediaFilesObject(e),n=this.$el.data("jPlayer").status;this.$el.jPlayer("setMedia",t),n.paused?this.$el.jPlayer("pause",n.currentTime):this.play()},removeEdgecastBandwidthRestriction:function(){var e=this;this.edgecastBandwidthRestrictionsRemoved||(t.each(this.resourceData.mediaUrls,function(t,n){t.cdn_url=t.cdn_url.replace(/&ec_rate=[^&]+/,""),t.cdn_url=t.cdn_url.replace(/&ec_prebuf=[^&]+/,""),e.resourceData.mediaUrls[n]=t}),this.edgecastBandwidthRestrictionsRemoved=!0,this.changeMediaQuality())},_onCanPlay:function(){i.Config.DEBUG&&i.Logger.log("[jplayer] canplay event"),this.events.trigger("videoPlayer:mediaReady")},play:function(e){if(e||this.currentTime?this.embed.mainView.showLoading():this.ensureVideoElementShowing(),i.Util.matrix.iPhone||this.isAudio()||this.$("img").removeAttr("src"),!e){if(!this.isPaused())return;e=this.currentTime}e+=this.resourceData.fragmentStart,this.$el.jPlayer("play",e/1e3)},stop:function(){this.resourceIsLoaded&&this.$el.jPlayer("stop"),this.embed.manager.setTime(0)},pause:function(){var e=(this.currentTime+this.resourceData.fragmentStart)/1e3;this.$el.jPlayer("pause",e)},seekTo:function(e){if(this.currentTime=e,"playing"==this.embed.manager.status){var t=(this.resourceData.fragmentStart+e)/this.resourceData.fullVideoDuration*100;this.$el.jPlayer("playHead",t)}},jPlayerSolution:function(){return this.embed.videoForceFlash?"flash":"html, flash"},loadPlayer:function(t){var n={swfPath:i.Util.setUrlProtocol(i.Config.libraryUrls[this.embed.environment]+"/swf/Jplayer.swf"),supplied:"m4v, m4a, m3u8v, mpdv",backgroundColor:"#464C54",errorAlerts:!0,preload:"none",solution:this.jPlayerSolution(),noConflict:"viddlerjQuery",size:{width:"100%",height:"100%"}};e.jPlayer.prototype.count=this.guid,this.$el.jPlayer(n),this.ensurePosterElementShowing()},setVolume:function(e){this.$el.jPlayer("volume",e/100)},destroy:function(){i.Config.DEBUG&&this.$el.find(".inspector").html(""),this.deactivate(),this.$("video").attr("src",""),this.$el.remove(),this.$el.jPlayer("destroy"),this.undelegateEvents(),this.$el.removeData().unbind(),this.$el.parent(".viddler-embed").html(),n.View.prototype.remove.call(this),this.remove()},ensureVideoElementShowing:function(){this.embed.mainView.hideLoading(),this.isAudio()||this.$el.addClass("video-forced-visible")},ensurePosterElementShowing:function(){this.$el.removeClass("video-forced-visible")},iPhoneHacks:function(){if(i.Util.matrix.iPhone){var t=this;this.$el.on(e.jPlayer.event.pause,function(e){t.ensurePosterElementShowing()}),this.$el.on(e.jPlayer.event.play,function(e){t.ensureVideoElementShowing()})}},posterPositioningHacks:function(){if(!r["object-fit"]){var e=this.$(".vid-player img"),t=this.resourceData.aspectRatio,n=this.$el.height()/this.$el.width();if(e.removeClass("landscape-positioning-hack"),e.removeClass("portrait-positioning-hack"),t<n){e.addClass("landscape-positioning-hack");var i=-(e.width()*t)/2+"px";e.css("margin-top",i)}else e.addClass("portrait-positioning-hack"),e.css("margin-top",0)}},isAudio:function(){return this.simpleMediaFilesObject().m4a},exitFullScreen:function(){this.$el.jPlayer({fullScreen:!1})},changeSpeed:function(e){this.$el.jPlayer("option","playbackRate",e),this.$el.jPlayer("option","defaultPlaybackRate",e),this.removeEdgecastBandwidthRestriction(),i.Util.matrix.iPad&&(this.pause(),this.play())},timelineIcon:function(){return e("<span>",{class:"timeline-media-element-marker video-marker","data-guid":this.guid})}})}}),function(e,t){var n,i,r,a,o,s,l,u,d,c,f,h,p,m,g,v,y,_,b,E,T,w,S,x,I,C,A,M,P,R,D,k,N,O,L,F,j,B,U,V,q,H,z,G,Y,$,K,W,X,Q,J,Z,ee,te,ne,ie,re,ae,oe;void 0===(se={})&&(se={}),"function"!=typeof t&&(t=function(e){return se}),i=function(e){return"(?:"+e+")"},r=(n=function(e){for(var t=arguments[0],n=1,i=arguments[n];i;)t=t.slice(0,-1)+i.slice(1),i=arguments[++n];return t})("[0-9]","[A-Fa-f]"),a=i("%"+r+r),s=n("[\\:\\/\\?\\#\\[\\]\\@]",o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),l=n("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]"),u=i("[A-Za-z]"+n("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),d=i(i(a+"|"+n(l,o,"[\\:]"))+"*"),c=i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("[1-9][0-9]")+"|[0-9]"),f=i(c+"\\."+c+"\\."+c+"\\."+c),h=i(r+"{1,4}"),i(i(h+"\\:"+h)+"|"+f),p=i(n(l,o,"[\\:]")+"+"),m=i("v"+r+"+\\."+n(l,o,"[\\:]")+"+"),g=i("\\["+i(p+"|"+m)+"\\]"),v=i(i(a+"|"+n(l,o))+"*"),y=i(g+"|"+f+"|"+v),_=i("[0-9]*"),b=i(i(d+"@")+"?"+y+i("\\:"+_)+"?"),E=i(a+"|"+n(l,o,"[\\:\\@]")),T=i(E+"*"),w=i(E+"+"),S=i(i(a+"|"+n(l,o,"[\\@]"))+"+"),x=i(i("\\/"+T)+"*"),I=i("\\/"+i(w+x)+"?"),C=i(S+x),A=i(w+x),M=i(""),i(x+"|"+I+"|"+C+"|"+A+"|"+M),P=i(i(E+"|[\\/\\?]")+"*"),R=i(i(E+"|[\\/\\?]")+"*"),D=i(i("\\/\\/"+b+x)+"|"+I+"|"+A+"|"+M),k=i(u+"\\:"+D+i("\\?"+P)+"?"+i("\\#"+R)+"?"),N=i(i("\\/\\/"+b+x)+"|"+I+"|"+C+"|"+M),O=i(N+i("\\?"+P)+"?"+i("\\#"+R)+"?"),i(k+"|"+O),i(u+"\\:"+D+i("\\?"+P)+"?"),L=new RegExp("^"+i("("+k+")|("+O+")")+"$"),F=new RegExp("^("+u+")\\:"+i(i("\\/\\/("+i("("+d+")@")+"?("+y+")"+i("\\:("+_+")")+"?)")+"?("+x+"|"+I+"|"+A+"|"+M+")")+i("\\?("+P+")")+"?"+i("\\#("+R+")")+"?$"),j=new RegExp("^(){0}"+i(i("\\/\\/("+i("("+d+")@")+"?("+y+")"+i("\\:("+_+")")+"?)")+"?("+x+"|"+I+"|"+C+"|"+M+")")+i("\\?("+P+")")+"?"+i("\\#("+R+")")+"?$"),new RegExp("^("+u+")\\:"+i(i("\\/\\/("+i("("+d+")@")+"?("+y+")"+i("\\:("+_+")")+"?)")+"?("+x+"|"+I+"|"+A+"|"+M+")")+i("\\?("+P+")")+"?$"),new RegExp("^"+i("\\#("+R+")")+"?$"),new RegExp("^"+i("("+d+")@")+"?("+y+")"+i("\\:("+_+")")+"?$"),B=new RegExp(n("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),U=new RegExp(n("[^\\%\\:]",l,o),"g"),V=new RegExp(n("[^\\%]",l,o),"g"),q=new RegExp(n("[^\\%\\/\\:\\@]",l,o),"g"),H=new RegExp(n("[^\\%\\/\\@]",l,o),"g"),z=new RegExp(n("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),G=z,Y=new RegExp(n("[^]",l,o),"g"),$=new RegExp(l,"g"),new RegExp(n("[^\\%]",l,s),"g"),K=new RegExp(a+"+","g"),W=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,X=/^\.\.?\//,Q=/^\/\.(\/|$)/,J=/^\/\.\.(\/|$)/,Z=/^\/?.*?(?=\/|$)/,ee=void 0==="".match(/(){0}/)[1],te=function(e){var t=e.charCodeAt(0);return t<128?"%"+t.toString(16).toUpperCase():t>127&&t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()},ne=function(e){for(var t,n,i="",r=0;r<e.length;)(t=parseInt(e.substr(r+1,2),16))<128?((n=String.fromCharCode(t)).match($)?i+=n:i+=e.substr(r,3),r+=3):t>191&&t<224?(i+=e.substr(r,6),r+=6):(i+=e.substr(r,9),r+=9);return i},ie=function(e){for(var t,n,i,r="",a=0;a<e.length;)(t=parseInt(e.substr(a+1,2),16))<128?(r+=String.fromCharCode(t),a+=3):t>191&&t<224?(n=parseInt(e.substr(a+4,2),16),r+=String.fromCharCode((31&t)<<6|63&n),a+=6):(n=parseInt(e.substr(a+4,2),16),i=parseInt(e.substr(a+7,2),16),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&i),a+=9);return r},re=function(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()},oe={},(ae=function(){this.errors=[]}).prototype={scheme:void 0,authority:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},oe.SCHEMES={},oe.parse=function(e,t){var n,i,r=new ae;return e=e?e.toString():"","suffix"===(t=t||{}).reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e),(n=e.match(L))&&(n=n[1]?e.match(F):e.match(j)),n||(t.tolerant||r.errors.push("URI is not strictly valid."),n=e.match(W)),n?(ee?(r.scheme=n[1],r.authority=n[2],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.authority=-1!==e.indexOf("//")?n[2]:void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/.*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.scheme||r.authority||r.path||r.query?r.scheme?r.fragment?r.reference="uri":r.reference="absolute":r.reference="relative":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&r.errors.push("URI is not a "+t.reference+" reference."),(i=oe.SCHEMES[r.scheme||t.scheme])&&i.parse&&i.parse(r,t)):r.errors.push("URI can not be parsed."),r},oe._recomposeAuthority=function(e){var t=[];return void 0===e.userinfo&&void 0===e.host&&"number"!=typeof e.port||(void 0!==e.userinfo&&(t.push(e.userinfo.toString().replace(U,te)),t.push("@")),void 0!==e.host&&t.push(e.host.toString().toLowerCase().replace(V,te)),"number"==typeof e.port&&(t.push(":"),t.push(e.port.toString(10)))),t.length?t.join(""):void 0},oe.removeDotSegments=function(e){for(var t,n=[];e.length;)e.match(X)?e=e.replace(X,""):e.match(Q)?e=e.replace(Q,"/"):e.match(J)?(e=e.replace(J,"/"),n.pop()):"."===e||".."===e?e="":(t=e.match(Z)[0],e=e.slice(t.length),n.push(t));return n.join("")},oe.serialize=function(e,t){var n,i,r=[];return t=t||{},(n=oe.SCHEMES[e.scheme||t.scheme])&&n.serialize&&n.serialize(e,t),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme.toString().toLowerCase().replace(B,"")),r.push(":")),e.authority=oe._recomposeAuthority(e),void 0!==e.authority&&("suffix"!==t.reference&&r.push("//"),r.push(e.authority),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),e.path&&(i=oe.removeDotSegments(e.path.toString().replace(/%2E/gi,".")),i=e.scheme?i.replace(q,te):i.replace(H,te),void 0===e.authority&&(i=i.replace(/^\/\//,"/%2F")),r.push(i)),e.query&&(r.push("?"),r.push(e.query.toString().replace(z,te))),e.fragment&&(r.push("#"),r.push(e.fragment.toString().replace(G,te))),r.join("").replace(K,ne).replace(/%[0-9A-Fa-f]{2}/g,function(e){return e.toUpperCase()})},oe.resolveComponents=function(e,t,n,i){var r=new ae;return i||(e=oe.parse(oe.serialize(e,n),n),t=oe.parse(oe.serialize(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.authority=t.authority,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=oe.removeDotSegments(t.path),r.query=t.query):(void 0!==t.authority?(r.authority=t.authority,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=oe.removeDotSegments(t.path),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=oe.removeDotSegments(t.path):(void 0===e.authority||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=oe.removeDotSegments(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.authority=e.authority,r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r},oe.resolve=function(e,t,n){return oe.serialize(oe.resolveComponents(oe.parse(e,n),oe.parse(t,n),n,!0),n)},oe.normalize=function(e,t){return"string"==typeof e?oe.serialize(oe.parse(e,t),t):"object"===re(e)?oe.parse(oe.serialize(e,t),t):e},oe.equal=function(e,t,n){return"string"==typeof e?e=oe.serialize(oe.parse(e,n),n):"object"===re(e)&&(e=oe.serialize(e,n)),"string"==typeof t?t=oe.serialize(oe.parse(t,n),n):"object"===re(t)&&(t=oe.serialize(t,n)),e===t},oe.escapeComponent=function(e){return e&&e.toString().replace(Y,te)},oe.unescapeComponent=function(e){return e&&e.toString().replace(K,ie)},se.Components=ae,se.URI=oe,se.URI={SCHEMES:oe.SCHEMES,parse:oe.parse,removeDotSegments:oe.removeDotSegments,serialize:oe.serialize,resolveComponents:oe.resolveComponents,resolve:oe.resolve,normalize:oe.normalize,equal:oe.equal,escapeComponent:oe.escapeComponent,unescapeComponent:oe.unescapeComponent};var se=se||this;t=t||function(){return se};!function(){var e,n,i,r,a=t("./uri/uri").URI,o={},s="0123456789abcdef".split("");function l(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function u(){}function d(e){return u.prototype=e||{},new u}function c(e,t,n){var i,r={};for(i in e)e[i]!==o[i]&&(r[i]=t.call(n,e[i],i,e));return r}function f(e){var t,n=[];switch(l(e)){case"object":for(t in e)e[t]!==o[t]&&(n[n.length]=t);break;case"array":for(t=e.length-1;t>=0;--t)n[t]=t}return n}function h(){return[s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-4",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-",s[3&Math.floor(16*Math.random())|8],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())]].join("")}function p(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function m(e){return"string"==typeof e&&-1===e.indexOf("#")&&(e+="#"),e}function g(){this.errors=[],this.validated={}}function v(e,t,n,i){t instanceof v&&("string"!=typeof i&&(i=t._fd),"string"!=typeof n&&(n=t._uri),t=t._value),"string"!=typeof n?n="urn:uuid:"+h()+"#":-1===n.indexOf(":")&&(n=m(a.resolve("urn:uuid:"+h()+"#",n))),this._env=e,this._value=t,this._uri=n,this._fd=i||this._env._options.defaultFragmentDelimiter}function y(e,t){var n,i;switch(e instanceof v&&(e=e.getValue()),l(e)){case"object":if(t){for(i in n={},e)e[i]!==o[i]&&(n[i]=y(e[i],t));return n}return d(e);case"array":if(t){for(n=new Array(e.length),i=e.length;--i>=0;)n[i]=y(e[i],t);return n}return Array.prototype.slice.call(e);default:return e}}function _(e,t,n,i){var r;v.call(this,e,t,n),this._schema=!0===i?this:t instanceof _&&!(i instanceof _)?t._schema:i instanceof _?i:this._env.getDefaultSchema()||_.createEmptySchema(this._env),"dot-delimited"===(r=this._schema.getValueOfProperty("fragmentResolution"))?this._fd=".":"slash-delimited"===r&&(this._fd="/")}function b(){this._id=h(),this._schemas={},this._options={}}e=function(e,t,n){for(var i=0,r=e.length,a=new Array(r);i<r;++i)a[i]=t.call(n,e[i],i,e);return a},Array.prototype.map&&(e=function(e,t,n){return Array.prototype.map.call(e,t,n)}),n=function(e,t,n){for(var i=0,r=e.length,a=[];i<r;++i)t.call(n,e[i],i,e)&&(a[a.length]=e[i]);return a},Array.prototype.filter&&(n=function(e,t,n){return Array.prototype.filter.call(e,t,n)}),i=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1},Array.prototype.indexOf&&(i=function(e,t){return Array.prototype.indexOf.call(e,t)}),g.prototype.addError=function(e,t,n,i,r){this.errors.push({uri:e instanceof v?e.getURI():e,schemaUri:t instanceof v?t.getURI():t,attribute:n,message:i,details:r})},g.prototype.registerValidation=function(e,t){this.validated[e]?this.validated[e].push(t):this.validated[e]=[t]},g.prototype.isValidatedBy=function(e,t){return!!this.validated[e]&&-1!==i(this.validated[e],t)},v.prototype.getEnvironment=function(){return this._env},v.prototype.getType=function(){return l(this._value)},v.prototype.getValue=function(){return this._value},v.prototype.getURI=function(){return this._uri},v.prototype.resolveURI=function(e){return m(a.resolve(this._uri,e))},v.prototype.getPropertyNames=function(){return f(this._value)},v.prototype.getProperty=function(e){var t=this._value?this._value[e]:void 0;return t instanceof v?t:new v(this._env,t,this._uri+this._fd+p(e),this._fd)},v.prototype.getProperties=function(){var t=l(this._value),n=this;return"object"===t?c(this._value,function(e,t){return e instanceof v?e:new v(n._env,e,n._uri+n._fd+p(t),n._fd)}):"array"===t?e(this._value,function(e,t){return e instanceof v?e:new v(n._env,e,n._uri+n._fd+p(t),n._fd)}):void 0},v.prototype.getValueOfProperty=function(e){if(this._value)return this._value[e]instanceof v?this._value[e]._value:this._value[e]},v.prototype.equals=function(e){return e instanceof v?this._value===e._value:this._value===e},_.prototype=d(v.prototype),_.createEmptySchema=function(e){var t=d(_.prototype);return v.call(t,e,{},void 0,void 0),t._schema=t,t},_.prototype.getSchema=function(){return this._schema},_.prototype.getAttribute=function(e,t){var n,i,r,a;return!t&&this._attributes&&this._attributes.hasOwnProperty(e)?this._attributes[e]:(i=(n=this._schema.getProperty("properties").getProperty(e)).getValueOfProperty("parser"),r=this.getProperty(e),"function"==typeof i?(a=i(r,n,t),!t&&this._attributes&&(this._attributes[e]=a),a):r.getValue())},_.prototype.getAttributes=function(){var e,t,n,i,r;if(!this._attributes&&"object"===this.getType())for(n in e=this.getProperties(),t=this._schema.getProperty("properties"),this._attributes={},e)e[n]!==o[n]&&(r=(i=t&&t.getProperty(n))&&i.getValueOfProperty("parser"),this._attributes[n]="function"==typeof r?r(e[n],i):e[n].getValue());return y(this._attributes,!1)},_.prototype.getLink=function(e,t){var n=this.getAttribute("links",[e,t]);if(n&&n.length&&n[n.length-1])return n[n.length-1]},_.prototype.validate=function(e,t,n,i,r){var a=this._schema.getValueOfProperty("validator");return e instanceof v||(e=this.getEnvironment().createInstance(e)),t instanceof g||(t=new g),"function"!=typeof a||t.isValidatedBy(e.getURI(),this.getURI())||(t.registerValidation(e.getURI(),this.getURI()),a(e,this,this._schema,t,n,i,r)),t},b.prototype.clone=function(){var e=new b;return e._schemas=d(this._schemas),e._options=d(this._options),e},b.prototype.createInstance=function(e,t){return t=m(t),e instanceof v&&(!t||e.getURI()===t)?e:new v(this,e,t)},b.prototype.createSchema=function(e,t,n){var i,r;return n=m(n),!(e instanceof _)||n&&e._uri!==n||t&&!e._schema.equals(t)?("function"==typeof(r=(i=new _(this,e,n,t)).getSchema().getValueOfProperty("initializer"))&&(i=r(i)),this._schemas[i._uri]=i,this._schemas[n]=i,i.getAttributes(),i):e},b.prototype.createEmptySchema=function(){var e=_.createEmptySchema(this);return this._schemas[e._uri]=e,e},b.prototype.findSchema=function(e){return this._schemas[m(e)]},b.prototype.setOption=function(e,t){this._options[e]=t},b.prototype.getOption=function(e){return this._options[e]},b.prototype.setDefaultFragmentDelimiter=function(e){"string"==typeof e&&e.length>0&&(this._options.defaultFragmentDelimiter=e)},b.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter},b.prototype.setDefaultSchemaURI=function(e){"string"==typeof e&&(this._options.defaultSchemaURI=m(e))},b.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)},b.prototype.validate=function(e,t){var n,i,r,a=new g;try{n=this.createInstance(e),a.instance=n}catch(e){a.addError(e.uri,e.schemaUri,e.attribute,e.message,e.details)}try{i=this.createSchema(t),a.schema=i,r=i.getSchema(),a.schemaSchema=r}catch(e){a.addError(e.uri,e.schemaUri,e.attribute,e.message,e.details)}return r&&r.validate(i,a),a.errors.length?a:i.validate(n,a)},b.prototype._checkForInvalidInstances=function(e,t){for(var n,i,r,a,s,u=[],d=[[t,this._schemas[t]]],c=0;c++<e&&d.length;)if(i=(n=d.shift())[0],(r=n[1])instanceof _)if(this._schemas[r._uri]!==r)u.push("Instance "+i+" does not match "+r._uri);else for(s in a=r.getAttributes())a[s]!==o[s]&&d.push([i+"/"+p(s),a[s]]);else if("object"===l(r))for(s in a=r)a.hasOwnProperty(s)&&d.push([i+"/"+p(s),a[s]]);else if("array"===l(r))for(a=r,s=0;s<a.length;++s)d.push([i+"/"+p(s),a[s]]);return u.length?u:c},r={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(e){return e instanceof v},isJSONSchema:function(e){return e instanceof _},createEnvironment:function(e){if(e=e||this._defaultEnvironmentID,!this._environments[e])throw new Error("Unknown Environment ID");return this._environments[e].clone()},Environment:b,registerEnvironment:function(e,t){(e=e||(t||0)._id)&&!this._environments[e]&&t instanceof b&&(t._id=e,this._environments[e]=t)},setDefaultEnvironmentID:function(e){if("string"==typeof e){if(!this._environments[e])throw new Error("Unknown Environment ID");this._defaultEnvironmentID=e}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:l,createObject:d,mapObject:c,mapArray:e,filterArray:n,searchArray:i,toArray:function(e){return null!=e?e instanceof Array&&!e.callee?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]},keys:f,pushUnique:function(e,t){return-1===i(e,t)&&e.push(t),e},popFirst:function(e,t){var n=i(e,t);return n>-1&&e.splice(n,1),e},clone:y,randomUUID:h,escapeURIComponent:p,formatURI:m,inherits:function e(t,n,i){var r,a,s=l(t),u=l(n);if("undefined"===u)return y(t,!0);if("undefined"===s||u!==s)return y(n,!0);if("object"===u){for(a in t instanceof _&&(t=t.getAttributes()),n instanceof _&&(n=n.getAttributes()).extends&&i&&n.extends instanceof _&&(n.extends=[n.extends]),r=y(t,!0),n)n[a]!==o[a]&&(r[a]=e(t[a],n[a],i));return r}return y(n,!0)}},this.JSV=r,se.JSV=r,t("./environments")}(),function(){var e,n,i,r,a,o,s,l,u,d,c,f,h,p,m,g,v,y,_,b,E,T,w,S,x,I,C,A={},M=t("./jsv").JSV;function P(e,t,n,i){var r,a,o,s,l,u={};if("object"===e.getType())for(a in r=t.getAttribute("patternProperties"),s=e.getProperties(),r)if(r[a]!==A[a]){o=null;try{o=new RegExp(a)}catch(e){n&&n.addError(t,i,"patternProperties","Invalid pattern",a)}if(o)for(l in s)s[l]!==A[l]&&o.test(l)&&(u[l]=u[l]?M.pushUnique(u[l],r[a]):[r[a]])}return u}((e=function(e,t,n,i,r){Error.call(this,i),this.uri=e.getURI(),this.schemaUri=t.getURI(),this.attribute=n,this.message=i,this.description=i,this.details=r}).prototype=new Error).constructor=e,e.prototype.name="InitializationError",n={string:function(e,t){return"string"===e.getType()},number:function(e,t){return"number"===e.getType()},integer:function(e,t){return"number"===e.getType()&&e.getValue()%1==0},boolean:function(e,t){return"boolean"===e.getType()},object:function(e,t){return"object"===e.getType()},array:function(e,t){return"array"===e.getType()},null:function(e,t){return"null"===e.getType()},any:function(e,t){return!0}},(i=new M.Environment).setOption("strict",!1),i.setOption("validateReferences",!1),r={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,default:"any",parser:function(e,t){var n;return"string"===e.getType()?e.getValue():"object"===e.getType()?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):"array"===e.getType()?(n=t.getValueOfProperty("parser"),M.mapArray(e.getProperties(),function(e){return n(e,t)})):"any"},validator:function(e,t,n,i,r,a,o){var s,l,u,d,c,f=M.toArray(t.getAttribute("type"));if("undefined"!==e.getType()&&f&&f.length){for(c=n.getValueOfProperty("typeValidators")||{},s=0,l=f.length;s<l;++s)if(u=f[s],M.isJSONSchema(u)){if((d=M.createObject(i)).errors=[],d.validated=M.clone(i.validated),0===u.validate(e,d,r,a,o).errors.length)return!0}else{if(c[u]===A[u]||"function"!=typeof c[u])return!0;if(c[u](e,i))return!0}return i.addError(e,t,"type","Instance is not a required type",f),!1}return!0},typeValidators:n},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,default:{},parser:function(e,t,n){var i=e.getEnvironment(),r=t.getEnvironment();return"object"===e.getType()?n?i.createSchema(e.getProperty(n),r.findSchema(t.resolveURI("#"))):M.mapObject(e.getProperties(),function(e){return i.createSchema(e,r.findSchema(t.resolveURI("#")))}):{}},validator:function(e,t,n,i,r,a,o){var s,l;if("object"===e.getType())for(l in s=t.getAttribute("properties"))s[l]!==A[l]&&s[l]&&s[l].validate(e.getProperty(l),i,e,t,l)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(e,t){return"object"===e.getType()?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):"array"===e.getType()?M.mapArray(e.getProperties(),function(e){return e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#")))}):e.getEnvironment().createEmptySchema()},validator:function(e,t,n,i,r,a,o){var s,l,u,d,c,f;if("array"===e.getType())if(s=e.getProperties(),l=t.getAttribute("items"),f=t.getAttribute("additionalProperties"),"array"===M.typeOf(l))for(u=0,d=s.length;u<d;++u)!1!==(c=l[u]||f)?c.validate(s[u],i,e,t,u):i.addError(e,t,"additionalProperties","Additional items are not allowed",c);else for(c=l||f,u=0,d=s.length;u<d;++u)c.validate(s[u],i,e,t,u)}},optional:{type:"boolean",optional:!0,default:!1,parser:function(e,t){return!!e.getValue()},validator:function(e,t,n,i,r,a,o){"undefined"!==e.getType()||t.getAttribute("optional")||i.addError(e,t,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,default:{},parser:function(e,t){return"object"===e.getType()?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):("boolean"!==e.getType()||!1!==e.getValue())&&e.getEnvironment().createEmptySchema()},validator:function(e,t,n,i,r,a,o){var s,l,u,d;if("object"===e.getType())for(d in s=t.getAttribute("additionalProperties"),l=t.getAttribute("properties")||{},u=e.getProperties())u[d]!==A[d]&&u[d]&&l[d]===A[d]&&(M.isJSONSchema(s)?s.validate(u[d],i,e,t,d):!1===s&&i.addError(e,t,"additionalProperties","Additional properties are not allowed",s))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(e,t){return"string"===e.getType()?e.getValue():"object"===e.getType()?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):void 0},validator:function(e,t,n,i,r,a,o){var s;"undefined"!==e.getType()&&r&&"undefined"!==r.getType()&&("string"==typeof(s=t.getAttribute("requires"))?"undefined"===r.getProperty(s).getType()&&i.addError(e,t,"requires",'Property requires sibling property "'+s+'"',s):M.isJSONSchema(s)&&s.validate(r,i))}},minimum:{type:"number",optional:!0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l;"number"===e.getType()&&(s=t.getAttribute("minimum"),l=t.getAttribute("minimumCanEqual"),"number"==typeof s&&(e.getValue()<s||!1===l&&e.getValue()===s)&&i.addError(e,t,"minimum","Number is less then the required minimum value",s))}},maximum:{type:"number",optional:!0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l;"number"===e.getType()&&(s=t.getAttribute("maximum"),l=t.getAttribute("maximumCanEqual"),"number"==typeof s&&(e.getValue()>s||!1===l&&e.getValue()===s)&&i.addError(e,t,"maximum","Number is greater then the required maximum value",s))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",default:!0,parser:function(e,t){return"boolean"!==e.getType()||e.getValue()}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum",default:!0,parser:function(e,t){return"boolean"!==e.getType()||e.getValue()}},minItems:{type:"integer",optional:!0,minimum:0,default:0,parser:function(e,t){return"number"===e.getType()?e.getValue():0},validator:function(e,t,n,i,r,a,o){var s;"array"===e.getType()&&"number"==typeof(s=t.getAttribute("minItems"))&&e.getProperties().length<s&&i.addError(e,t,"minItems","The number of items is less then the required minimum",s)}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s;"array"===e.getType()&&"number"==typeof(s=t.getAttribute("maxItems"))&&e.getProperties().length>s&&i.addError(e,t,"maxItems","The number of items is greater then the required maximum",s)}},pattern:{type:"string",optional:!0,format:"regex",parser:function(e,t){if("string"===e.getType())try{return new RegExp(e.getValue())}catch(e){return e}},validator:function(e,t,n,i,r,a,o){var s;try{(s=t.getAttribute("pattern"))instanceof Error?i.addError(t,n,"pattern","Invalid pattern",t.getValueOfProperty("pattern")):"string"===e.getType()&&s&&!s.test(e.getValue())&&i.addError(e,t,"pattern","String does not match pattern",s.toString())}catch(e){i.addError(t,n,"pattern","Invalid pattern",t.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,default:0,parser:function(e,t){return"number"===e.getType()?e.getValue():0},validator:function(e,t,n,i,r,a,o){var s;"string"===e.getType()&&"number"==typeof(s=t.getAttribute("minLength"))&&e.getValue().length<s&&i.addError(e,t,"minLength","String is less then the required minimum length",s)}},maxLength:{type:"integer",optional:!0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s;"string"===e.getType()&&"number"==typeof(s=t.getAttribute("maxLength"))&&e.getValue().length>s&&i.addError(e,t,"maxLength","String is greater then the required maximum length",s)}},enum:{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(e,t){if("array"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l,u;if("undefined"!==e.getType()&&(s=t.getAttribute("enum"))){for(l=0,u=s.length;l<u;++l)if(e.equals(s[l]))return!0;i.addError(e,t,"enum","Instance is not one of the possible values",s)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(e,t){if("string"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l;"string"===e.getType()&&(s=t.getAttribute("format"),l=n.getValueOfProperty("formatValidators"),"string"!=typeof s||l[s]===A[s]||"function"!=typeof l[s]||l[s].call(this,e,i)||i.addError(e,t,"format","String is not in the required format",s))},formatValidators:{uri:function(e,t){return!!/^(?:(?:https?):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+\-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+\-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(e._value)},email:function(e,t){return!!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e._value)}}},contentEncoding:{type:"string",optional:!0},default:{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l;"number"===e.getType()&&"number"==typeof(s=t.getAttribute("maxDecimal"))&&(l=e.getValue().toString(10).split(".")[1])&&l.length>s&&i.addError(e,t,"maxDecimal","The number of decimal places is greater then the allowed maximum",s)}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(e,t){if("string"===e.getType()||"array"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l,u,d,c,f=M.toArray(t.getAttribute("disallow"));if("undefined"!==e.getType()&&f&&f.length){for(d=n.getValueOfProperty("typeValidators")||{},s=0,l=f.length;s<l;++s)if(u=f[s],M.isJSONSchema(u)){if((c=M.createObject(i)).errors=[],c.validated=M.clone(i.validated),0===u.validate(e,c,r,a,o).errors.length)return i.addError(e,t,"disallow","Instance is a disallowed type",f),!1}else if(d[u]!==A[u]&&"function"==typeof d[u]&&d[u](e,i))return i.addError(e,t,"disallow","Instance is a disallowed type",f),!1;return!0}return!0},typeValidators:n},extends:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(e,t){return"object"===e.getType()?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):"array"===e.getType()?M.mapArray(e.getProperties(),function(e){return e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#")))}):void 0},validator:function(e,t,n,i,r,a,o){var s,l,u=t.getAttribute("extends");if(u)if(M.isJSONSchema(u))u.validate(e,i,r,a,o);else if("array"===M.typeOf(u))for(s=0,l=u.length;s<l;++s)u[s].validate(e,i,r,a,o)}}},optional:!0,default:{},fragmentResolution:"dot-delimited",parser:function(e,t){if("object"===e.getType())return e.getEnvironment().createSchema(e,t)},validator:function(e,t,n,i,r,a,o){var s,l,u,d=t.getPropertyNames(),c=n.getAttribute("properties"),f=e.getEnvironment().getOption("strict");for(s in c)c[s]!==A[s]&&(c[s].getValueOfProperty("validationRequired")&&M.pushUnique(d,s),f&&c[s].getValueOfProperty("deprecated")&&M.popFirst(d,s));for(s=0,l=d.length;s<l;++s)c[d[s]]!==A[d[s]]&&"function"==typeof(u=c[d[s]].getValueOfProperty("validator"))&&u(e,t,c[d[s]],i,r,a,o)}},a={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(e,t,n){var i,r,a=t.getValueOfProperty("items").$ref,o=t.getEnvironment().findSchema(a),s=o&&o.getValueOfProperty("parser");return n=M.toArray(n),i="function"==typeof s?M.mapArray(e.getProperties(),function(e){return s(e,o)}):M.toArray(e.getValue()),n[0]&&(i=M.filterArray(i,function(e){return e.rel===n[0]})),n[1]&&(r=t.getValueOfProperty("selfReferenceVariable"),i=M.mapArray(i,function(e){var t=n[1],i=e.href;return(i=i.replace(/\{(.+)\}/g,function(e,n,i,a){var o;return void 0!==(o=n===r?t.getValue():t.getValueOfProperty(n))?String(o):""}))?M.formatURI(t.resolveURI(i)):i})),i},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,default:"dot-delimited"},root:{type:"boolean",optional:!0,default:!1},readonly:{type:"boolean",optional:!0,default:!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(e,t,n,i,r,a,o){var s;"undefined"!==e.getType()&&"string"==typeof(s=t.getAttribute("pathStart"))&&0!==e.getURI().indexOf(s)&&i.addError(e,t,"pathStart","Instance's URI does not start with "+s,s)}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(t){var n,i,r;if((n=t._schema.getLink("describedby",t))&&t._schema._uri!==n){if(t._env._schemas[n])return t._schema=t._env._schemas[n],initializer=t._schema.getValueOfProperty("initializer"),"function"==typeof initializer?initializer(t):t;if(t._env._options.validateReferences)throw new e(t,t._schema,"{link:describedby}","Unknown schema reference",n)}if((n=t._schema.getLink("full",t))&&t._uri!==n){if(t._env._schemas[n])return t=t._env._schemas[n];if(t._env._options.validateReferences)throw new e(t,t._schema,"{link:full}","Unknown schema reference",n)}return i=t.getAttribute("extends"),M.isJSONSchema(i)&&(r=M.inherits(i,t,!0),t=t._env.createSchema(r,t._schema,t._uri)),n=t._schema.getLink("self",t),"string"===M.typeOf(n)&&(t._uri=M.formatURI(n)),t}},o={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string",default:"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(e,t,n){var i=e.getEnvironment(),r=t.getEnvironment(),a=t.getValueOfProperty("additionalProperties").$ref;if("object"===e.getType())return n?i.createSchema(e.getProperty(n),r.findSchema(t.resolveURI(a))):M.mapObject(e.getProperties(),function(e){return i.createSchema(e,r.findSchema(t.resolveURI(a)))})}}},parser:function(e,t){var n=t.getProperty("properties");return"object"===e.getType()?M.mapObject(e.getProperties(),function(e,t){var i=n.getProperty(t),r=i&&i.getValueOfProperty("parser");return"function"==typeof r?r(e,i):e.getValue()}):e.getValue()}},i.setOption("defaultFragmentDelimiter","."),i.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#"),s=i.createSchema(r,!0,"http://json-schema.org/draft-00/schema#"),l=i.createSchema(M.inherits(s,i.createSchema(a,!0,"http://json-schema.org/draft-00/hyper-schema#"),!0),!0,"http://json-schema.org/draft-00/hyper-schema#"),i.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#"),u=i.createSchema(o,l,"http://json-schema.org/draft-00/links#"),s=i.createSchema(s.getValue(),l,"http://json-schema.org/draft-00/schema#"),l=i.createSchema(l.getValue(),l,"http://json-schema.org/draft-00/hyper-schema#"),u=i.createSchema(u.getValue(),l,"http://json-schema.org/draft-00/links#"),d=M.inherits(r,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"}),c=M.inherits(a,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"}),f=M.inherits(o,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/links#"}),i.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#"),h=i.createSchema(d,!0,"http://json-schema.org/draft-01/schema#"),p=i.createSchema(M.inherits(h,i.createSchema(c,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#"),i.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#"),m=i.createSchema(f,p,"http://json-schema.org/draft-01/links#"),h=i.createSchema(h.getValue(),p,"http://json-schema.org/draft-01/schema#"),p=i.createSchema(p.getValue(),p,"http://json-schema.org/draft-01/hyper-schema#"),m=i.createSchema(m.getValue(),p,"http://json-schema.org/draft-01/links#"),g=M.inherits(d,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,default:!1,parser:function(e,t){return!!e.getValue()},validator:function(e,t,n,i,r,a,o){var s,l,u,d,c;if("array"===e.getType()&&t.getAttribute("uniqueItems"))for(l=0,u=(s=e.getProperties()).length-1;l<u;++l)for(d=l+1,c=s.length;d<c;++d)s[l].equals(s[d])&&i.addError(e,t,"uniqueItems","Array can only contain unique items",{x:l,y:d})}},maxDecimal:{deprecated:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(e,t){if("number"===e.getType())return e.getValue()},validator:function(e,t,n,i,r,a,o){var s;"number"===e.getType()&&(0===(s=t.getAttribute("divisibleBy"))?i.addError(e,t,"divisibleBy","Nothing is divisible by 0",s):1!==s&&e.getValue()/s%1!=0&&i.addError(e,t,"divisibleBy","Number is not divisible by "+s,s))}}},fragmentResolution:"slash-delimited"}),v=M.inherits(c,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{default:"slash-delimited"}}}),y=M.inherits(f,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:p.getAttribute("parser")}}}),i.setOption("defaultFragmentDelimiter","/"),i.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#"),_=i.createSchema(g,!0,"http://json-schema.org/draft-02/schema#"),b=i.createSchema(M.inherits(_,i.createSchema(v,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#"),i.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#"),E=i.createSchema(y,b,"http://json-schema.org/draft-02/links#"),_=i.createSchema(_.getValue(),b,"http://json-schema.org/draft-02/schema#"),b=i.createSchema(b.getValue(),b,"http://json-schema.org/draft-02/hyper-schema#"),E=i.createSchema(E.getValue(),b,"http://json-schema.org/draft-02/links#"),T=M.inherits(g,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{},parser:_.getValueOfProperty("properties").properties.parser,validator:function(e,t,n,i,r,a,o){var s,l,u;if("object"===e.getType())for(l in s=P(e,t,i,n))if(s[l]!==A[l])for(u=s[l].length;u--;)s[l][u].validate(e.getProperty(l),i,e,t,l)}},additionalProperties:{validator:function(e,t,n,i,r,a,o){var s,l,u,d,c;if("object"===e.getType())for(c in s=t.getAttribute("additionalProperties"),l=t.getAttribute("properties")||{},u=e.getProperties(),d=P(e,t),u)u[c]!==A[c]&&u[c]&&l[c]===A[c]&&d[c]===A[c]&&(M.isJSONSchema(s)?s.validate(u[c],i,e,t,c):!1===s&&i.addError(e,t,"additionalProperties","Additional properties are not allowed",s))}},items:{validator:function(e,t,n,i,r,a,o){var s,l,u,d,c,f;if("array"===e.getType())if(s=e.getProperties(),l=t.getAttribute("items"),f=t.getAttribute("additionalItems"),"array"===M.typeOf(l))for(u=0,d=s.length;u<d;++u)!1!==(c=l[u]||f)?c.validate(s[u],i,e,t,u):i.addError(e,t,"additionalItems","Additional items are not allowed",c);else for(c=l||f,u=0,d=s.length;u<d;++u)c.validate(s[u],i,e,t,u)}},additionalItems:{type:[{$ref:"#"},"boolean"],default:{},parser:_.getValueOfProperty("properties").additionalProperties.parser,validator:function(e,t,n,i,r,a,o){var s,l,u,d;if("array"===e.getType()&&"undefined"===t.getProperty("items").getType())if(s=t.getAttribute("additionalItems"),l=e.getProperties(),!1!==s)for(u=0,d=l.length;u<d;++u)s.validate(l[u],i,e,t,u);else l.length&&i.addError(e,t,"additionalItems","Additional items are not allowed",s)}},optional:{validationRequired:!1,deprecated:!0},required:{type:"boolean",default:!1,parser:function(e,t){return!!e.getValue()},validator:function(e,t,n,i,r,a,o){"undefined"===e.getType()&&t.getAttribute("required")&&i.addError(e,t,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},default:{},parser:function(e,t,n){function i(e){var n=e.getType();return"string"===n||"array"===n?e.getValue():"object"===n?e.getEnvironment().createSchema(e,t.getEnvironment().findSchema(t.resolveURI("#"))):void 0}return"object"===e.getType()?n?i(e.getProperty(n)):M.mapObject(e.getProperties(),i):{}},validator:function(e,t,n,i,r,a,o){var s,l,u,d,c,f;if("object"===e.getType())for(l in s=t.getAttribute("dependencies"))if(s[l]!==A[l]&&"undefined"!==e.getProperty(l).getType())if(u=s[l],"string"===(d=M.typeOf(u)))"undefined"===e.getProperty(u).getType()&&i.addError(e,t,"dependencies",'Property "'+l+'" requires sibling property "'+u+'"',s);else if("array"===d)for(c=0,f=u.length;c<f;++c)"undefined"===e.getProperty(u[c]).getType()&&i.addError(e,t,"dependencies",'Property "'+l+'" requires sibling property "'+u[c]+'"',s);else M.isJSONSchema(u)&&u.validate(e,i)}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean",default:!1,parser:function(e,t){return!!e.getValue()}},exclusiveMaximum:{type:"boolean",default:!1,parser:function(e,t){return!!e.getValue()}},minimum:{validator:function(e,t,n,i,r,a,o){var s,l;"number"===e.getType()&&(s=t.getAttribute("minimum"),l=t.getAttribute("exclusiveMinimum")||!e.getEnvironment().getOption("strict")&&!t.getAttribute("minimumCanEqual"),"number"==typeof s&&(e.getValue()<s||!0===l&&e.getValue()===s)&&i.addError(e,t,"minimum","Number is less then the required minimum value",s))}},maximum:{validator:function(e,t,n,i,r,a,o){var s,l;"number"===e.getType()&&(s=t.getAttribute("maximum"),l=t.getAttribute("exclusiveMaximum")||!e.getEnvironment().getOption("strict")&&!t.getAttribute("maximumCanEqual"),"number"==typeof s&&(e.getValue()>s||!0===l&&e.getValue()===s)&&i.addError(e,t,"maximum","Number is greater then the required maximum value",s))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},disallow:{items:{type:["string",{$ref:"#"}]},parser:g.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(t){var n,i,r,a=t.getValueOfProperty("$schema"),o=t.getValueOfProperty("$ref"),s=t.getValueOfProperty("id");if(a&&(n=t.resolveURI(a))&&t._schema._uri!==n){if(t._env._schemas[n])return t._schema=t._env._schemas[n],initializer=t._schema.getValueOfProperty("initializer"),"function"==typeof initializer?initializer(t):t;if(t._env._options.validateReferences)throw new e(t,t._schema,"$schema","Unknown schema reference",n)}if(o&&(n=t.resolveURI(o))&&t._uri!==n){if(t._env._schemas[n])return t=t._env._schemas[n];if(t._env._options.validateReferences)throw new e(t,t._schema,"$ref","Unknown schema reference",n)}return i=t.getAttribute("extends"),M.isJSONSchema(i)&&(r=M.inherits(i,t,!0),t=t._env.createSchema(r,t._schema,t._uri)),s&&(n=t.resolveURI(s),"string"===M.typeOf(n)&&(t._uri=M.formatURI(n))),t}}),w=M.inherits(v,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}}),S=M.inherits(y,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}}),i.setOption("validateReferences",!0),i.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#"),i.createSchema({},!0,"http://json-schema.org/draft-03/schema#"),i.createSchema({},!0,"http://json-schema.org/draft-03/hyper-schema#"),i.createSchema({},!0,"http://json-schema.org/draft-03/links#"),x=i.createSchema(T,!0,"http://json-schema.org/draft-03/schema#"),I=i.createSchema(M.inherits(x,i.createSchema(w,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#"),C=i.createSchema(S,!0,"http://json-schema.org/draft-03/links#"),i.setOption("defaultSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),I=i.createSchema(I.getValue(),I,"http://json-schema.org/draft-03/hyper-schema#"),i.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#"),i.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),i.setOption("latestJSONSchemaLinksURI","http://json-schema.org/draft-03/links#"),i._schemas["http://json-schema.org/schema#"]=x,i._schemas["http://json-schema.org/hyper-schema#"]=I,i._schemas["http://json-schema.org/links#"]=C,M.registerEnvironment("json-schema-draft-03",i),M.getDefaultEnvironmentID()&&"json-schema-draft-01"!==M.getDefaultEnvironmentID()&&"json-schema-draft-02"!==M.getDefaultEnvironmentID()||M.setDefaultEnvironmentID("json-schema-draft-03")}(),e.JSONFormValidator=se.JSV}(this,!1),define("jsv",function(){}),function(e){"function"==typeof define&&define.amd?define("jsonform",["jquery","underscore","jsv"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("underscore"),require("jsv")):e(jQuery,_)}(function(e,t){var n=/\[([0-9]*)\](?=\[|\.|$)/g,i={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},r={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},a=function(e){return!(t.isUndefined(e)||t.isNull(e))},o={util:{}},s=function(e){return a(e)&&(e=""+e)?e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):""},l=function(e){return e.replace(/([ \!\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")};o.fieldTemplate=function(e){return'<div class="control-group jsonform-error-<%= keydash %><%= elt.htmlClass ? " " + elt.htmlClass : "" %><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " jsonform-required" : "") %><%= (node.readOnly ? " jsonform-readonly" : "") %><%= (node.disabled ? " jsonform-disabled" : "") %>"><% if (node.title && !elt.notitle) { %><label class="control-label" for="<%= node.id %>"><%= node.title %></label><% } %><div class="controls"><% if (node.prepend || node.append) { %><div class="<% if (node.prepend) { %>input-prepend<% } %><% if (node.append) { %> input-append<% } %>"><% if (node.prepend) { %><span class="add-on"><%= node.prepend %></span><% } %><% } %>'+e+'<% if (node.append) { %><span class="add-on"><%= node.append %></span><% } %><% if (node.prepend || node.append) { %></div><% } %><% if (node.description) { %><span class="help-inline"><%= node.description %></span><% } %><span class="help-block jsonform-errortext" style="display:none;"></span></div></div>'};var u='<div class="_jsonform-preview"><% if (value.type=="image") { %><img class="jsonform-preview" id="jsonformpreview-<%= id %>" src="<%= value.url %>" /><% } else { %><a href="<%= value.url %>"><%= value.name %></a> (<%= Math.ceil(value.size/1024) %>kB)<% } %></div><a href="#" class="btn _jsonform-delete"><i class="icon-remove" title="Remove"></i></a> ',d=function(e){return{template:'<input type="'+e+'" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " required=\'required\'" : "") %><%= (node.placeholder? "placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%> />',fieldtemplate:!0,inputfield:!0}};o.elementTypes={none:{template:""},root:{template:"<div><%= children %></div>"},text:d("text"),password:d("password"),date:d("date"),datetime:d("datetime"),"datetime-local":d("datetime-local"),email:d("email"),month:d("month"),number:d("number"),search:d("search"),tel:d("tel"),time:d("time"),url:d("url"),week:d("week"),range:{template:'<input type="range" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>"<%= (node.disabled? " disabled" : "")%> min=<%= range.min %> max=<%= range.max %> step=<%= range.step %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %> />',fieldtemplate:!0,inputfield:!0,onBeforeRender:function(e,t){e.range={min:1,max:100,step:1},t&&t.schemaElement&&(t.formElement&&t.formElement.step&&(e.range.step=t.formElement.step),void 0!==t.schemaElement.minimum&&(t.schemaElement.exclusiveMinimum?e.range.min=t.schemaElement.minimum+e.range.step:e.range.min=t.schemaElement.minimum),void 0!==t.schemaElement.maximum&&(t.schemaElement.exclusiveMaximum?e.range.max=t.schemaElement.maximum+e.range.step:e.range.max=t.schemaElement.maximum))}},color:{template:'<input type="text" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>"<%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %> />',fieldtemplate:!0,inputfield:!0,onInsert:function(t,n){e(n.el).find("#"+l(n.id)).spectrum({preferredFormat:"hex",showInput:!0})}},textarea:{template:'<textarea id="<%= id %>" name="<%= node.name %>" style="height:<%= elt.height || "150px" %>;width:<%= elt.width || "100%" %>;"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.placeholder? "placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%>><%= value %></textarea>',fieldtemplate:!0,inputfield:!0},wysihtml5:{template:'<textarea id="<%= id %>" name="<%= node.name %>" style="height:<%= elt.height || "300px" %>;width:<%= elt.width || "100%" %>;"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.placeholder? "placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%>><%= value %></textarea>',fieldtemplate:!0,inputfield:!0,onInsert:function(t,n){var i=function(){e(n.el).data("wysihtml5")||(e(n.el).data("wysihtml5_loaded",!0),e(n.el).find("#"+l(n.id)).wysihtml5({html:!0,link:!0,"font-styles":!0,image:!0,events:{load:function(){e(this.textareaElement).removeAttr("required")}}}))};if(window.jsonform_wysihtml5_setup)window.jsonform_wysihtml5_setup(i);else var r=window.setInterval(function(){window.wysihtml5&&(window.clearInterval(r),i())},1e3)}},ace:{template:'<div id="<%= id %>" style="position:relative;height:<%= elt.height || "300px" %>;"><div id="<%= id %>__ace" style="width:<%= elt.width || "100%" %>;height:<%= elt.height || "300px" %>;"></div><input type="hidden" name="<%= node.name %>" id="<%= id %>__hidden" value="<%= escape(value) %>"/></div>',fieldtemplate:!0,inputfield:!0,onInsert:function(n,i){var r=function(){var n=i.formElement||{},r=window.ace.edit(e(i.el).find("#"+l(i.id)+"__ace").get(0)),a="#"+l(i.id)+"__hidden";r.getSession().setNewLineMode("unix"),r.renderer.setShowPrintMargin(!1),r.setTheme("ace/theme/"+(n.aceTheme||"twilight")),n.aceMode&&r.getSession().setMode("ace/mode/"+n.aceMode),r.getSession().setTabSize(2),r.getSession().setValue(i.value||"");var o=t.debounce(function(){e(i.el).find(a).val(r.getSession().getValue()),e(i.el).find(a).change()},600);r.getSession().on("change",o),r.on("blur",function(){e(i.el).find(a).change(),e(i.el).find(a).trigger("blur")}),r.on("focus",function(){e(i.el).find(a).trigger("focus")})};if(window.jsonform_ace_setup)window.jsonform_ace_setup(r);else var a=window.setInterval(function(){window.ace&&(window.clearInterval(a),r())},1e3)}},checkbox:{template:'<label class="checkbox"><input type="checkbox" id="<%= id %>" name="<%= node.name %>" value="1" <% if (value) {%>checked<% } %><%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " required=\'required\'" : "") %> /><span><%= node.inlinetitle || "" %></span></label>',fieldtemplate:!0,inputfield:!0,getElement:function(t){return e(t).parent().get(0)}},file:{template:'<input class="input-file" id="<%= id %>" name="<%= node.name %>" type="file" <%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>/>',fieldtemplate:!0,inputfield:!0},"file-hosted-public":{template:"<span><% if (value && (value.type||value.url)) { %>"+u+'<% } %><input class="input-file" id="_transloadit_<%= id %>" type="file" name="<%= transloaditname %>" /><input data-transloadit-name="_transloadit_<%= transloaditname %>" type="hidden" id="<%= id %>" name="<%= node.name %>" value=\'<%= escape(JSON.stringify(node.value)) %>\' /></span>',fieldtemplate:!0,inputfield:!0,getElement:function(t){return e(t).parent().get(0)},onBeforeRender:function(e,t){t.ownerTree._transloadit_generic_public_index?t.ownerTree._transloadit_generic_public_index++:t.ownerTree._transloadit_generic_public_index=1,e.transloaditname="_transloadit_jsonform_genericupload_public_"+t.ownerTree._transloadit_generic_public_index,t.ownerTree._transloadit_generic_elts||(t.ownerTree._transloadit_generic_elts={}),t.ownerTree._transloadit_generic_elts[e.transloaditname]=t},onChange:function(n,i){if(i.ownerTree._transloadit_bound)return!1;i.ownerTree._transloadit_bound=!0;var r=e(i.ownerTree.domRoot);r.transloadit({autoSubmit:!1,wait:!0,onSuccess:function(e){var n=t.values(e.results);n=t.flatten(n),t.each(n,function(e){var n=i.ownerTree._transloadit_generic_elts[e.field].id,o=r.find("#"+l(n)),s=t.filter(t.keys(e.meta),function(t){return!!a(e.meta[t])});e.meta=t.pick(e.meta,s),o.val(JSON.stringify(e))}),i.ownerTree._transloadit_bound=!1,r.unbind("submit.transloadit"),t.delay(function(){console.log("submit form"),i.ownerTree.submit()},10)},onError:function(e){console.log("assembly error",e)}})},onInsert:function(t,n){e(n.el).find("a._jsonform-delete").on("click",function(t){return e(n.el).find("._jsonform-preview").remove(),e(n.el).find("a._jsonform-delete").remove(),e(n.el).find("#"+l(n.id)).val(""),t.preventDefault(),!1})},onSubmit:function(e,t){return!t.ownerTree._transloadit_bound}},"file-transloadit":{template:"<span><% if (value && (value.type||value.url)) { %>"+u+'<% } %><input class="input-file" id="_transloadit_<%= id %>" type="file" name="_transloadit_<%= node.name %>" /><input type="hidden" id="<%= id %>" name="<%= node.name %>" value=\'<%= escape(JSON.stringify(node.value)) %>\' /></span>',fieldtemplate:!0,inputfield:!0,getElement:function(t){return e(t).parent().get(0)},onChange:function(n,i){if(i.ownerTree._transloadit_bound)return!1;i.ownerTree._transloadit_bound=!0;var r=e(i.ownerTree.domRoot);r.transloadit({autoSubmit:!1,wait:!0,onSuccess:function(e){var n=t.values(e.results);n=t.flatten(n),t.each(n,function(e){var n=r.find('input[name="'+e.field.replace(/^_transloadit_/,"")+'"]'),i=t.filter(t.keys(e.meta),function(t){return!!a(e.meta[t])});e.meta=t.pick(e.meta,i),n.val(JSON.stringify(e))}),i.ownerTree._transloadit_bound=!1,r.unbind("submit.transloadit"),t.delay(function(){console.log("submit form"),i.ownerTree.submit()},10)},onError:function(e){console.log("assembly error",e)}})},onInsert:function(t,n){e(n.el).find("a._jsonform-delete").on("click",function(t){return e(n.el).find("._jsonform-preview").remove(),e(n.el).find("a._jsonform-delete").remove(),e(n.el).find("#"+l(n.id)).val(""),t.preventDefault(),!1})},onSubmit:function(e,t){return!t.ownerTree._transloadit_bound}},select:{template:'<select name="<%= node.name %>" id="<%= id %>"<%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'" : "") %><%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>> <% _.each(node.options, function(key, val) { if(key instanceof Object) { if (value === key.value) { %> <option selected value="<%= key.value %>"><%= key.title %></option> <% } else { %> <option value="<%= key.value %>"><%= key.title %></option> <% }} else { if (value === key) { %> <option selected value="<%= key %>"><%= key %></option> <% } else { %><option value="<%= key %>"><%= key %></option> <% }}}); %> </select>',fieldtemplate:!0,inputfield:!0},imageselect:{template:'<div><input type="hidden" name="<%= node.name %>" id="<%= node.id %>" value="<%= value %>" /><div class="dropdown"><a class="btn<% if (buttonClass && node.value) { %> <%= buttonClass %><% } %>" data-toggle="dropdown" href="#"<% if (node.value) { %> style="max-width:<%= width %>px;max-height:<%= height %>px"<% } %>><% if (node.value) { %><img src="<% if (!node.value.match(/^https?:/)) { %><%= prefix %><% } %><%= node.value %><%= suffix %>" alt="" /><% } else { %><%= buttonTitle %><% } %></a><div class="dropdown-menu navbar" id="<%= node.id %>_dropdown"><div><% _.each(node.options, function(key, idx) { if ((idx > 0) && ((idx % columns) === 0)) { %></div><div><% } %><a class="btn<% if (buttonClass) { %> <%= buttonClass %><% } %>" style="max-width:<%= width %>px;max-height:<%= height %>px"><% if (key instanceof Object) { %><img src="<% if (!key.value.match(/^https?:/)) { %><%= prefix %><% } %><%= key.value %><%= suffix %>" alt="<%= key.title %>" /></a><% } else { %><img src="<% if (!key.match(/^https?:/)) { %><%= prefix %><% } %><%= key %><%= suffix %>" alt="" /><% } %></a> <% }); %></div><div class="pagination-right"><a class="btn">Reset</a></div></div></div></div>',fieldtemplate:!0,inputfield:!0,onBeforeRender:function(e,t){var n=t.formElement||{},i=null,r=n.imageSelectorColumns||5;e.buttonTitle=n.imageSelectorTitle||"Select...",e.prefix=n.imagePrefix||"",e.suffix=n.imageSuffix||"",e.width=n.imageWidth||32,e.height=n.imageHeight||32,e.buttonClass=n.imageButtonClass||!1,t.options.length>r?(i=Math.ceil(t.options.length/r),e.columns=Math.ceil(t.options.length/i)):e.columns=r},getElement:function(t){return e(t).parent().get(0)},onInsert:function(t,n){e(n.el).on("click",".dropdown-menu a",function(t){t.preventDefault(),t.stopPropagation();var i=("img"===t.target.nodeName.toLowerCase()?e(t.target):e(t.target).find("img")).attr("src"),r=n.formElement||{},a=r.imagePrefix||"",o=r.imageSuffix||"",s=r.imageWidth||32,l=r.imageHeight||32;i?(0===i.indexOf(a)&&(i=i.substring(a.length)),i=i.substring(0,i.length-o.length),e(n.el).find("input").attr("value",i),e(n.el).find('a[data-toggle="dropdown"]').addClass(r.imageButtonClass).attr("style","max-width:"+s+"px;max-height:"+l+"px").html('<img src="'+(i.match(/^https?:/)?"":a)+i+o+'" alt="" />')):(e(n.el).find("input").attr("value",""),e(n.el).find('a[data-toggle="dropdown"]').removeClass(r.imageButtonClass).removeAttr("style").html(r.imageSelectorTitle||"Select..."))})}},radios:{template:'<div id="<%= node.id %>"><% _.each(node.options, function(key, val) { %><label class="radio"><input type="radio" <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %> checked="checked" <% } %> name="<%= node.name %>" value="<%= (key instanceof Object ? key.value : key) %>"<%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>/><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',fieldtemplate:!0,inputfield:!0},radiobuttons:{template:'<div id="<%= node.id %>"><% _.each(node.options, function(key, val) { %><label class="radio btn"><input type="radio" style="position:absolute;left:-9999px;" <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %> checked="checked" <% } %> name="<%= node.name %>" value="<%= (key instanceof Object ? key.value : key) %>" /><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',fieldtempate:!0,inputfield:!0,onInsert:function(t,n){var i="active",r=n.formElement||{};r.activeClass&&(i+=" "+r.activeClass),e(n.el).find("label").on("click",function(){e(this).parent().find("label").removeClass(i),e(this).addClass(i)})}},checkboxes:{template:"<div><%= choiceshtml %></div>",fieldtemplate:!0,inputfield:!0,onBeforeRender:function(e,n){var r,a=null;n&&n.schemaElement&&n.schemaElement.items&&(r=n.schemaElement.items.enum||n.schemaElement.items[0].enum)&&(a="",t.each(r,function(e,r){a+=t.template('<label class="checkbox"><input type="checkbox" <% if (value) { %> checked="checked" <% } %> name="<%= name %>" value="1"<%= (node.disabled? " disabled" : "")%>/><span><%= title %></span></label>',{name:n.key+"["+r+"]",value:t.include(n.value,e),title:n.formElement.titleMap?n.formElement.titleMap[e]:e,node:n},i)}),e.choiceshtml=a)}},array:{template:'<div id="<%= id %>"><ul class="_jsonform-array-ul" style="list-style-type:none;"><%= children %></ul><span class="_jsonform-array-buttons"><a href="#" class="btn _jsonform-array-addmore"><i class="icon-plus-sign" title="Add new"></i></a> <a href="#" class="btn _jsonform-array-deletelast"><i class="icon-minus-sign" title="Delete last"></i></a></span></div>',fieldtemplate:!0,array:!0,childTemplate:function(t){return e("").sortable?'<li data-idx="<%= node.childPos %>"><span class="draggable line"><i class="icon-list" title="Move item"></i></span>'+t+"</li>":'<li data-idx="<%= node.childPos %>">'+t+"</li>"},onInsert:function(t,n){var i=e(n.el).find("#"+l(n.id)),r=n.getArrayBoundaries();e("> span > a._jsonform-array-addmore",i).click(function(t){t.preventDefault(),t.stopPropagation();var a=n.children.length;if(r.maxItems>=0&&(n.children.length>r.maxItems-2&&i.find("> span > a._jsonform-array-addmore").addClass("disabled"),n.children.length>r.maxItems-1))return!1;n.insertArrayItem(a,e("> ul",i).get(0)),(r.minItems<=0||r.minItems>0&&n.children.length>r.minItems-1)&&i.find("> span > a._jsonform-array-deletelast").removeClass("disabled")});var a=e("> ul > li",i).length;if(r.minItems>0&&a<r.minItems)for(var o=0;o<r.minItems-1&&i.find("> ul > li").length<r.minItems;o++)n.insertArrayItem(a,i.find("> ul").get(0));r.minItems>0&&n.children.length<=r.minItems&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled"),e("> span > a._jsonform-array-deletelast",i).click(function(e){var t=n.children.length-1;if(e.preventDefault(),e.stopPropagation(),r.minItems>0){if(n.children.length<r.minItems+2&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled"),n.children.length<=r.minItems)return!1}else 1===n.children.length&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled");n.deleteArrayItem(t),r.maxItems>=0&&t<=r.maxItems-1&&i.find("> span > a._jsonform-array-addmore").removeClass("disabled")}),e(n.el).sortable&&(e("> ul",i).sortable(),e("> ul",i).bind("sortstop",function(t,r){!function(t,r){if(t!==r){var a=t<r?1:-1,o=0,s=e("> ul",i);for(o=t;o!==r;o+=a)n.children[o].switchValuesWith(n.children[o+a]),n.children[o].render(s.get(0)),n.children[o+a].render(s.get(0));var l=e(n.children[t].el),u=e(n.children[r].el);l.detach(),u.detach(),t<r?(0===t?s.prepend(l):e(n.children[t-1].el).after(l),e(n.children[r-1].el).after(u)):(0===r?s.prepend(u):e(n.children[r-1].el).after(u),e(n.children[t-1].el).after(l))}}(e(r.item).data("idx"),e(r.item).index())}))}},tabarray:{template:'<div id="<%= id %>"><div class="tabbable tabs-left"><ul class="nav nav-tabs"><%= tabs %></ul><div class="tab-content"><%= children %></div></div><a href="#" class="btn _jsonform-array-addmore"><i class="icon-plus-sign" title="Add new"></i></a> <a href="#" class="btn _jsonform-array-deleteitem"><i class="icon-minus-sign" title="Delete item"></i></a></div>',fieldtemplate:!0,array:!0,childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane">'+e+"</div>"},onBeforeRender:function(e,n){var i="";t.each(n.children,function(e,t){var n=e.legend||e.title||"Item "+(t+1);i+='<li data-idx="'+t+'"'+(0===t?' class="active"':"")+'><a class="draggable tab" data-toggle="tab">'+s(n)+"</a></li>"}),e.tabs=i},onInsert:function(n,i){var r=e(i.el).find("#"+l(i.id)),a=i.getArrayBoundaries(),o=function(n){var a="",o=!1;void 0===n&&((n=e("> .tabbable > .nav-tabs .active",r).data("idx"))?n=parseInt(n,10):(o=!0,n=0)),n>=i.children.length&&(n=i.children.length-1),t.each(i.children,function(e,t){var n=e.legend||e.title||"Item "+(t+1);a+='<li data-idx="'+t+'"><a class="draggable tab" data-toggle="tab">'+s(n)+"</a></li>"}),e("> .tabbable > .nav-tabs",r).html(a),o&&e('> .tabbable > .nav-tabs [data-idx="0"]',r).addClass("active"),e('> .tabbable > .nav-tabs [data-toggle="tab"]',r).eq(n).click()};if(e("> a._jsonform-array-deleteitem",r).click(function(t){var n=e("> .tabbable > .nav-tabs .active",r).data("idx");if(t.preventDefault(),t.stopPropagation(),a.minItems>0&&(i.children.length<a.minItems+1&&r.find("> a._jsonform-array-deleteitem").addClass("disabled"),i.children.length<=a.minItems))return!1;i.deleteArrayItem(n),o(),(i.children.length<a.minItems+1||0===i.children.length)&&r.find("> a._jsonform-array-deleteitem").addClass("disabled"),a.maxItems>=0&&i.children.length<=a.maxItems&&r.find("> a._jsonform-array-addmore").removeClass("disabled")}),e("> a._jsonform-array-addmore",r).click(function(t){var n=i.children.length;if(a.maxItems>=0&&(i.children.length>a.maxItems-2&&e("> a._jsonform-array-addmore",r).addClass("disabled"),i.children.length>a.maxItems-1))return!1;t.preventDefault(),t.stopPropagation(),i.insertArrayItem(n,r.find("> .tabbable > .tab-content").get(0)),o(n),(a.minItems<=0||a.minItems>0&&n>a.minItems-1)&&r.find("> a._jsonform-array-deleteitem").removeClass("disabled")}),e(i.el).on("legendUpdated",function(e){o(),e.preventDefault(),e.stopPropagation()}),e(i.el).sortable&&(e("> .tabbable > .nav-tabs",r).sortable({containment:i.el,tolerance:"pointer"}),e("> .tabbable > .nav-tabs",r).bind("sortstop",function(t,n){var a=e(n.item).data("idx"),s=e(n.item).index();!function(t,n){if(t!==n){var a=t<n?1:-1,o=0,s=e("> .tabbable > .tab-content",r).get(0);for(o=t;o!==n;o+=a)i.children[o].switchValuesWith(i.children[o+a]),i.children[o].render(s),i.children[o+a].render(s)}}(a,s),o(s)})),a.minItems>=0){for(var u=0;u<a.minItems-1;u++)r.find("> a._jsonform-array-addmore").click();r.find("> a._jsonform-array-deleteitem").addClass("disabled"),o()}a.maxItems>=0&&i.children.length>=a.maxItems&&r.find("> a._jsonform-array-addmore").addClass("disabled"),a.minItems>=0&&i.children.length<=a.minItems&&r.find("> a._jsonform-array-deleteitem").addClass("disabled")}},help:{template:'<span class="help-block" style="padding-top:5px"><%= elt.helpvalue %></span>',fieldtemplate:!0},msg:{template:"<%= elt.msg %>"},fieldset:{template:'<fieldset class="control-group jsonform-error-<%= keydash %> <% if (elt.expandable) { %>expandable<% } %> <%= elt.htmlClass?elt.htmlClass:"" %>" <% if (id) { %> id="<%= id %>"<% } %>><% if (node.title || node.legend) { %><legend><%= node.title || node.legend %></legend><% } %><% if (elt.expandable) { %><div class="control-group"><% } %><%= children %><% if (elt.expandable) { %></div><% } %></fieldset>'},advancedfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend>Advanced options</legend><div class="control-group"><%= children %></div></fieldset>'},authfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend>Authentication settings</legend><div class="control-group"><%= children %></div></fieldset>'},submit:{template:'<input type="submit" <% if (id) { %> id="<%= id %>" <% } %> class="btn btn-primary <%= elt.htmlClass?elt.htmlClass:"" %>" value="<%= value || node.title %>"<%= (node.disabled? " disabled" : "")%>/>'},button:{template:' <button <% if (id) { %> id="<%= id %>" <% } %> class="btn <%= elt.htmlClass?elt.htmlClass:"" %>"><%= node.title %></button> '},actions:{template:'<div class="form-actions <%= elt.htmlClass?elt.htmlClass:"" %>"><%= children %></div>'},hidden:{template:'<input type="hidden" id="<%= id %>" name="<%= node.name %>" value="<%= escape(value) %>" />',inputfield:!0},selectfieldset:{template:'<fieldset class="tab-container <%= elt.htmlClass?elt.htmlClass:"" %>"><% if (node.legend) { %><legend><%= node.legend %></legend><% } %><% if (node.formElement.key) { %><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><% } else { %><a id="<%= node.id %>"></a><% } %><div class="tabbable"><div class="control-group<%= node.formElement.hideMenu ? " hide" : "" %>"><% if (node.title && !elt.notitle) { %><label class="control-label" for="<%= node.id %>"><%= node.title %></label><% } %><div class="controls"><%= tabs %></div></div><div class="tab-content"><%= children %></div></div></fieldset>',inputfield:!0,getElement:function(t){return e(t).parent().get(0)},childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane<% if (node.active) { %> active<% } %>">'+e+"</div>"},onBeforeRender:function(e,n){var i=null,r=[];n.schemaElement&&(r=n.schemaElement.enum||[]),i=n.options?t.map(n.options,function(e,i){var o=n.children[i];return e instanceof Object?((e=t.extend({node:o},e)).title=e.title||o.legend||o.title||"Option "+(o.childPos+1),e.value=a(e.value)?e.value:a(r[i])?r[i]:i,e):{title:e,value:a(r[o.childPos])?r[o.childPos]:o.childPos,node:o}}):t.map(n.children,function(e,t){return{title:e.legend||e.title||"Option "+(e.childPos+1),value:r[e.childPos]||e.childPos,node:e}});var o=null;e.value&&(o=t.find(i,function(e){return e.value===n.value})),o||(o=t.find(i,function(e){return e.node.hasNonDefaultValue()})),o||(o=i[0]),o.node.active=!0,e.value=o.value;n.formElement;var l='<select class="nav"'+(n.disabled?" disabled":"")+">";return t.each(i,function(e,t){l+='<option data-idx="'+t+'" value="'+e.value+'"'+(e.node.active?' class="active"':"")+">"+s(e.title)+"</option>"}),l+="</select>",e.tabs=l,e},onInsert:function(t,n){e(n.el).find("select.nav").first().on("change",function(t){var i=e(this).find("option:selected");e(n.el).find('input[type="hidden"]').first().val(i.attr("value"))})}},optionfieldset:{template:'<div<% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},section:{template:'<div<% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},questions:{template:'<div><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><%= children %></div>',fieldtempate:!0,inputfield:!0,getElement:function(t){return e(t).parent().get(0)},onInsert:function(n,i){i.children&&0!==i.children.length&&(t.each(i.children,function(t){e(t.el).hide()}),e(i.children[0].el).show())}},question:{template:'<div id="<%= node.id %>"><% _.each(node.options, function(key, val) { %><label class="radio<%= (node.formElement.optionsType === "radiobuttons") ? " btn" : "" %><%= ((key instanceof Object && key.htmlClass) ? " " + key.htmlClass : "") %>"><input type="radio" <% if (node.formElement.optionsType === "radiobuttons") { %> style="position:absolute;left:-9999px;" <% } %>name="<%= node.id %>" value="<%= val %>"<%= (node.disabled? " disabled" : "")%>/><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',fieldtemplate:!0,onInsert:function(n,i){var r="active",a=i.formElement||{};a.activeClass&&(r+=" "+a.activeClass),e(i.el).find('input[type="radio"]').on("change",function(n){var a=null,o=i.options[e(this).val()];i.parentNode&&i.parentNode.el&&(e(this).parent().parent().find("label").removeClass(r),e(this).parent().addClass(r),e(i.el).nextAll().hide(),e(i.el).nextAll().find('input[type="radio"]').prop("checked",!1),o.value&&e(i.parentNode.el).find('input[type="hidden"]').val(o.value),o.next&&(a=t.find(i.parentNode.children,function(e){return e.formElement&&e.formElement.qid===o.next}),e(a.el).show(),e(a.el).nextAll().hide(),e(a.el).nextAll().find('input[type="radio"]').prop("checked",!1)),o.href&&(o.target?window.open(o.href,o.target):window.location=o.href),o.submit&&setTimeout(function(){i.ownerTree.submit()},0))})}}},o.util.getObjKey=function(e,i,r){for(var a=e,o=i.split("."),s=null,l=null,u=null,d=0;d<o.length;d++){if(null===a||"object"!=typeof a)return null;if(u=(s=o[d]).replace(n,""),n.lastIndex=0,l=n.exec(s))for(;;){if(!t.isArray(a[u]))return null;if(a=a[u][parseInt(l[1],10)],!(l=n.exec(s)))break}else a=r&&!a[u]&&t.isArray(a)&&a[0]?a[0][u]:a[u]}return r&&t.isArray(a)&&a[0]?a[0]:a},o.util.setObjKey=function(e,i,r){for(var a=e,o=i.split("."),s=null,l=null,u=null,d=0;d<o.length-1;d++)if(u=(s=o[d]).replace(n,""),n.lastIndex=0,l=n.exec(s)){for(;t.isArray(a[u])||(a[u]=[]),a=a[u],u=parseInt(l[1],10),l=n.exec(s););"object"==typeof a[u]&&null!==a[u]||(a[u]={}),a=a[u]}else"object"==typeof a[u]&&null!==a[u]||(a[u]={}),a=a[u];if(u=(s=o[o.length-1]).replace(n,""),n.lastIndex=0,l=n.exec(s)){for(;t.isArray(a[u])||(a[u]=[]),a=a[u],u=parseInt(l[1],10),l=n.exec(s););a[u]=r}else a[u]=r};var c=function(e,t){var n=t.replace(/\./g,".properties.").replace(/\[[0-9]*\]/g,".items"),i=o.util.getObjKey(e,n,!0);if(i&&i.$ref)throw new Error("JSONForm does not yet support schemas that use the $ref keyword. See: https://github.com/joshfire/jsonform/issues/54");return i},f=function(e,t){var i=0;return e?t&&0!==t.length?e.replace(n,function(e,n){var r=e;return a(t[i])&&(r="["+t[i]+"]"),i+=1,r}):e:null},h=function(e,n,i,s,l){var u=null;(s=s||{}).idx=s.idx||(i?i[i.length-1]:1),s.value=a(s.value)?s.value:"",s.getValue=s.getValue||function(t){return h(e,t,i,s,l)};var d=function(e,n){var i=null;return e&&e.length?(t.each(e,function(e){i||(e!==n?t.isString(e)||(e.key===n?i=e:e.items&&(i=d(e.items,n))):i={key:e})}),i):null},p=d(e.form||[],n),m=c(e.schema.properties,n);return l&&e.value&&(u=o.util.getObjKey(e.value,f(n,i))),a(u)||(p&&void 0!==p.value?u=p.value:m&&a(m.default)&&(u=m.default),u&&-1!==u.indexOf("{{values.")&&(u=u.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}')),u&&(u=t.template(u,s,r))),a(u)&&p&&p.titleMap&&p.titleMap[u]&&(u=t.template(p.titleMap[u],s,r)),u&&t.isString(u)&&m&&m.maxLength&&u.length>m.maxLength&&(u=u.substr(0,m.maxLength-1)+"…"),a(u)?u:null},p=function(){this.id=null,this.key=null,this.el=null,this.formElement=null,this.schemaElement=null,this.view=null,this.children=[],this.ownerTree=null,this.parentNode=null,this.childTemplate=null,this.legendChild=null,this.arrayPath=[],this.childPos=0};p.prototype.clone=function(e){var n=new p;return n.arrayPath=t.clone(this.arrayPath),n.ownerTree=this.ownerTree,n.parentNode=e||this.parentNode,n.formElement=this.formElement,n.schemaElement=this.schemaElement,n.view=this.view,n.children=t.map(this.children,function(e){return e.clone(n)}),this.childTemplate&&(n.childTemplate=this.childTemplate.clone(n)),n},p.prototype.hasNonDefaultValue=function(){return(!this.formElement||"hidden"!=this.formElement.type)&&(!(!this.value||this.defaultValue)||!!t.find(this.children,function(e){return e.hasNonDefaultValue()}))},p.prototype.appendChild=function(e){return e.parentNode=this,e.childPos=this.children.length,this.children.push(e),e},p.prototype.removeChild=function(){var t=this.children[this.children.length-1];if(t)return e(t.el).remove(),this.children.pop()},p.prototype.moveValuesTo=function(e){var t=this.getFormValues(e.arrayPath);e.resetValues(),e.computeInitialValues(t,!0)},p.prototype.switchValuesWith=function(e){var t=this.getFormValues(e.arrayPath),n=e.getFormValues(this.arrayPath);e.resetValues(),e.computeInitialValues(t,!0),this.resetValues(),this.computeInitialValues(n,!0)},p.prototype.resetValues=function(){var n=null;if(this.value=null,this.parentNode?(this.arrayPath=t.clone(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],this.view&&this.view.inputfield)n=e(":input",this.el).serializeArray(),t.each(n,function(t){e('[name="'+l(t.name)+'"]',e(this.el)).val("")},this);else if(this.view&&this.view.array)for(;this.children.length>0;)this.removeChild();t.each(this.children,function(e){e.resetValues()})},p.prototype.setChildTemplate=function(e){this.childTemplate=e,e.parentNode=this},p.prototype.computeInitialValues=function(e,n){var i=this,s=null,u=1,d=0,c=this.ownerTree.formDesc.tpldata||{};if(this.parentNode?(this.arrayPath=t.clone(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],c.idx=this.arrayPath.length>0?this.arrayPath[this.arrayPath.length-1]+1:this.childPos+1,c.value="",c.getValue=function(t){return h(i.ownerTree.formDesc,t,i.arrayPath,c,!!e)},this.formElement&&(this.formElement.id?this.id=f(this.formElement.id,this.arrayPath):this.view&&this.view.array?this.id=l(this.ownerTree.formDesc.prefix)+"-elt-counter-"+t.uniqueId():this.parentNode&&this.parentNode.view&&this.parentNode.view.array?this.id=l(this.ownerTree.formDesc.prefix)+"-elt-counter-"+t.uniqueId():"button"!==this.formElement.type&&"selectfieldset"!==this.formElement.type&&"question"!==this.formElement.type&&"buttonquestion"!==this.formElement.type||(this.id=l(this.ownerTree.formDesc.prefix)+"-elt-counter-"+t.uniqueId()),this.formElement.key&&(this.key=f(this.formElement.key,this.arrayPath),this.keydash=this.key.replace(/\./g,"---")),this.name=f(this.formElement.name,this.arrayPath),t.each(["title","legend","description","append","prepend","inlinetitle","helpvalue","value","disabled","placeholder","readOnly"],function(e){t.isString(this.formElement[e])?(-1!==this.formElement[e].indexOf("{{values.")?this[e]=this.formElement[e].replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this[e]=f(this.formElement[e],this.arrayPath),this[e]&&(this[e]=t.template(this[e],c,r))):this[e]=this.formElement[e]},this),this.formElement.options&&(this.options=t.map(this.formElement.options,function(e){var n=null;return t.isObject(e)&&e.title?(n=-1!==e.title.indexOf("{{values.")?e.title.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):f(e.title,i.arrayPath),t.extend({},e,{value:a(e.value)?e.value:"",title:t.template(n,c,r)})):e}))),this.view&&this.view.inputfield&&this.schemaElement)e?a(o.util.getObjKey(e,this.key))&&(this.value=o.util.getObjKey(e,this.key)):n||!a(this.value)&&a(this.schemaElement.default)&&(this.value=this.schemaElement.default,t.isString(this.value)&&(-1!==this.value.indexOf("{{values.")?this.value=this.value.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this.value=f(this.value,this.arrayPath),this.value&&(this.value=t.template(this.value,c,r))),this.defaultValue=!0);else if(this.view&&this.view.array)for(u=0,e?u=this.getPreviousNumberOfItems(e,this.arrayPath):0===u&&(u=1),d=0;d<u;d++)this.appendChild(this.childTemplate.clone());if(t.each(this.children,function(t){t.computeInitialValues(e,n)}),this.formElement&&this.formElement.valueInLegend)for(s=this;s;){if(s.parentNode&&s.parentNode.view&&s.parentNode.view.array&&(s.legendChild=this,s.formElement&&s.formElement.legend)){s.legend=f(s.formElement.legend,s.arrayPath),c.idx=s.arrayPath.length>0?s.arrayPath[s.arrayPath.length-1]+1:s.childPos+1,c.value=a(this.value)?this.value:"",s.legend=t.template(s.legend,c,r);break}s=s.parentNode}},p.prototype.getPreviousNumberOfItems=function(e,n){var i=null,r=null,a=null;return e?this.view.inputfield&&this.schemaElement?(i=function(e,t){var n=0,i=0;if(!e)return null;if(t>0)for(;n<t;){if(-1===(i=e.indexOf("[]",i)))return e;i+=2,n+=1}return-1===(i=e.indexOf("[]",i))?e:e.substring(0,i)}(this.formElement.key,n.length),i=f(i,n),(r=o.util.getObjKey(e,i))?(a=t.map(this.children,function(t){return t.getPreviousNumberOfItems(e,n)}),t.max([t.max(a)||0,r.length])):0):this.view.array?this.childTemplate.getPreviousNumberOfItems(e,n):(a=t.map(this.children,function(t){return t.getPreviousNumberOfItems(e,n)}),t.max(a)||0):0},p.prototype.getFormValues=function(n){var i={};if(!this.el)throw new Error("formNode.getFormValues can only be called on nodes that are associated with a DOM element in the tree");var r=e(":input",this.el).serializeArray();r=r.concat(e(":input[type=checkbox]:not(:disabled):not(:checked)",this.el).map(function(){return{name:this.name,value:this.checked}}).get()),n&&t.each(r,function(e){e.name=f(e.name,n)});for(var a=this.ownerTree.formDesc.schema,s=0;s<r.length;s++){var l=r[s].name,u=c(a.properties,l),d=null,h=null;if(u)if(u._jsonform_checkboxes_as_array&&(d=l.match(/\[([0-9]*)\]$/)))l=l.replace(/\[([0-9]*)\]$/,""),h=o.util.getObjKey(i,l)||[],"1"===r[s].value&&h.push(u.enum[parseInt(d[1],10)]),o.util.setObjKey(i,l,h);else{if("boolean"===u.type&&("0"===r[s].value?r[s].value=!1:r[s].value=!!r[s].value),"number"!==u.type&&"integer"!==u.type||t.isString(r[s].value)&&(r[s].value.length?isNaN(Number(r[s].value))||(r[s].value=Number(r[s].value)):r[s].value=null),"string"!==u.type||""!==r[s].value||u._jsonform_allowEmpty||(r[s].value=null),"object"===u.type&&t.isString(r[s].value)&&"{"===r[s].value.substring(0,1))try{r[s].value=JSON.parse(r[s].value)}catch(e){r[s].value={}}"object"!==u.type||"null"!==r[s].value&&""!==r[s].value||(r[s].value=null),r[s].name&&null!==r[s].value&&o.util.setObjKey(i,r[s].name,r[s].value)}}return i},p.prototype.render=function(e){var t=this.generate();this.setContent(t,e),this.enhance()},p.prototype.setContent=function(t,n){var i=e(t),r=n||(this.parentNode?this.parentNode.el:this.ownerTree.domRoot),a=null;this.el?e(this.el).replaceWith(i):(a=e(r).children().get(this.childPos))?e(a).before(i):e(r).append(i),this.el=i,this.updateElement(this.el)},p.prototype.updateElement=function(n){this.id&&(this.el=e("#"+l(this.id),n).get(0),this.view&&this.view.getElement&&(this.el=this.view.getElement(this.el)),!1!==this.fieldtemplate&&this.view&&this.view.fieldtemplate&&(this.el=e(this.el).parent().parent(),(this.prepend||this.prepend)&&(this.el=this.el.parent()),this.el=this.el.get(0)),this.parentNode&&this.parentNode.view&&this.parentNode.view.childTemplate&&(this.el=e(this.el).parent().get(0))),t.each(this.children,function(e){e.updateElement(this.el||n)})},p.prototype.generate=function(){var e={id:this.id,keydash:this.keydash,elt:this.formElement,schema:this.schemaElement,node:this,value:a(this.value)?this.value:"",escape:s},n=null;this.ownerTree.formDesc.onBeforeRender&&this.ownerTree.formDesc.onBeforeRender(e,this),this.view.onBeforeRender&&this.view.onBeforeRender(e,this),n=this.template?this.template:this.formElement&&this.formElement.template?this.formElement.template:this.view.template,!1!==this.fieldtemplate&&(this.fieldtemplate||this.view.fieldtemplate)&&(n=o.fieldTemplate(n)),this.parentNode&&this.parentNode.view&&this.parentNode.view.childTemplate&&(n=this.parentNode.view.childTemplate(n));var r="";return t.each(this.children,function(e){r+=e.generate()}),e.children=r,e.fieldHtmlClass="",this.ownerTree&&this.ownerTree.formDesc&&this.ownerTree.formDesc.params&&this.ownerTree.formDesc.params.fieldHtmlClass&&(e.fieldHtmlClass=this.ownerTree.formDesc.params.fieldHtmlClass),this.formElement&&void 0!==this.formElement.fieldHtmlClass&&(e.fieldHtmlClass=this.formElement.fieldHtmlClass),t.template(n,e,i)},p.prototype.enhance=function(){var n=this,i=null,a=null,o=t.clone(this.ownerTree.formDesc.tpldata)||{};this.formElement&&(this.view.onInsert&&this.view.onInsert({target:e(this.el)},this),i=this.handlers||this.formElement.handlers,(a=this.onInsert||this.formElement.onInsert)&&a({target:e(this.el)},this),i&&t.each(i,function(t,n){"insert"===n&&t({target:e(this.el)},this)},this),this.el&&(this.onChange&&e(this.el).bind("change",function(e){n.onChange(e,n)}),this.view.onChange&&e(this.el).bind("change",function(e){n.view.onChange(e,n)}),this.formElement.onChange&&e(this.el).bind("change",function(e){n.formElement.onChange(e,n)}),this.onClick&&e(this.el).bind("click",function(e){n.onClick(e,n)}),this.view.onClick&&e(this.el).bind("click",function(e){n.view.onClick(e,n)}),this.formElement.onClick&&e(this.el).bind("click",function(e){n.formElement.onClick(e,n)}),this.onKeyUp&&e(this.el).bind("keyup",function(e){n.onKeyUp(e,n)}),this.view.onKeyUp&&e(this.el).bind("keyup",function(e){n.view.onKeyUp(e,n)}),this.formElement.onKeyUp&&e(this.el).bind("keyup",function(e){n.formElement.onKeyUp(e,n)}),i&&t.each(i,function(t,i){"insert"!==i&&e(this.el).bind(i,function(e){t(e,n)})},this)),this.legendChild&&this.legendChild.formElement&&e(this.legendChild.el).bind("keyup",function(i){n.formElement&&n.formElement.legend&&n.parentNode&&(n.legend=f(n.formElement.legend,n.arrayPath),o.idx=n.arrayPath.length>0?n.arrayPath[n.arrayPath.length-1]+1:n.childPos+1,o.value=e(i.target).val(),n.legend=t.template(n.legend,o,r),e(n.parentNode.el).trigger("legendUpdated"))})),t.each(this.children,function(e){e.enhance()})},p.prototype.insertArrayItem=function(e,t){var n=0;void 0===e&&(e=this.children.length);var i=this.childTemplate.clone();for(this.appendChild(i),i.resetValues(),n=this.children.length-2;n>=e;n--)this.children[n].moveValuesTo(this.children[n+1]);for(this.children[e].resetValues(),this.children[e].computeInitialValues(),n=e;n<this.children.length;n++)this.children[n].render(t)},p.prototype.deleteArrayItem=function(e){var t=0;for(void 0===e&&(e=this.children.length-1),t=e;t<this.children.length-1;t++)this.children[t+1].moveValuesTo(this.children[t]),this.children[t].render();this.removeChild()},p.prototype.getArrayBoundaries=function(){if(!this.view||!this.view.array)return{minItems:-1,maxItems:-1};var e=function(n,i){var r=null,a=null,o={minItems:-1,maxItems:-1};return i=i||n,n.view&&n.view.array&&n!==i?o:n.key?(a=n.key.replace(/\[[0-9]+\]/g,"[]"),n!==i&&(a=a.replace(/\[\][^\[\]]*$/,"")),(r=c(n.ownerTree.formDesc.schema.properties,a))?{minItems:r.minItems||r.minLength||-1,maxItems:r.maxItems||r.maxLength||-1}:o):(t.each(n.children,function(t){var n=e(t,i);-1!==n.minItems&&(-1!==o.minItems?o.minItems=Math.max(o.minItems,n.minItems):o.minItems=n.minItems),-1!==n.maxItems&&(-1!==o.maxItems?o.maxItems=Math.min(o.maxItems,n.maxItems):o.maxItems=n.maxItems)}),o)};return e(this)};var m=function(){this.eventhandlers=[],this.root=null,this.formDesc=null};m.prototype.initialize=function(e){e=e||{},this.formDesc=t.clone(e),this.formDesc.prefix=this.formDesc.prefix||"jsonform-"+t.uniqueId(),this.formDesc.schema&&!this.formDesc.schema.properties&&(this.formDesc.schema={properties:this.formDesc.schema}),this.formDesc.form=this.formDesc.form||["*",{type:"actions",items:[{type:"submit",value:"Submit"}]}],this.formDesc.form=t.isArray(this.formDesc.form)?this.formDesc.form:[this.formDesc.form],this.formDesc.params=this.formDesc.params||{},this.root=new p,this.root.ownerTree=this,this.root.view=o.elementTypes.root,this.buildTree(),this.computeInitialValues()},m.prototype.buildTree=function(){t.each(this.formDesc.form,function(e){"*"===e?t.each(this.formDesc.schema.properties,function(e,t){this.root.appendChild(this.buildFromLayout({key:t}))},this):(t.isString(e)&&(e={key:e}),this.root.appendChild(this.buildFromLayout(e)))},this)},m.prototype.buildFromLayout=function(e,n){var i,r=null,a=new p,s=null;if((e=t.clone(e)).items&&(t.isArray(e.items)?e.items=t.map(e.items,t.clone):e.items=[t.clone(e.items)]),e.key){if(!(r=c(this.formDesc.schema.properties,e.key)))throw new Error('The JSONForm object references the schema key "'+e.key+'" but that key does not exist in the JSON schema');if(this.formDesc.onElementSchema&&this.formDesc.onElementSchema(e,r),e.name=e.name||e.key,e.title=e.title||r.title,e.description=e.description||r.description,e.readOnly=e.readOnly||r.readOnly||e.readonly||r.readonly,e.id||(e.id=l(this.formDesc.prefix)+"-elt-"+e.key),e.allowEmpty&&(r._jsonform_allowEmpty=!0),e.type||("string"===r.type&&"color"===r.format?e.type="color":"number"!==r.type&&"integer"!==r.type&&"string"!==r.type&&"any"!==r.type||r.enum?"boolean"===r.type?e.type="checkbox":"object"===r.type?r.properties?e.type="fieldset":e.type="textarea":t.isUndefined(r.enum)?e.type=r.type:e.type="select":e.type="text"),!e.options&&r.enum&&(e.titleMap?e.options=t.map(r.enum,function(t){return{value:t,title:e.titleMap[t]||t}}):e.options=r.enum),"checkboxes"===e.type&&r.items){var u=r.items.enum;u&&(r.items._jsonform_checkboxes_as_array=!0),!u&&r.items[0]&&(u=r.items[0].enum)&&(r.items[0]._jsonform_checkboxes_as_array=!0)}"object"===r.type&&t.each(r.properties,function(t,n){a.appendChild(this.buildFromLayout({key:e.key+"."+n}))},this)}if(e.type||(e.type="none"),!(i=o.elementTypes[e.type]))throw new Error('The JSONForm contains an element whose type is unknown: "'+e.type+'"');if(r){if(!i.inputfield&&!i.array&&"selectfieldset"!==e.type&&"object"!==r.type)throw new Error('The JSONForm contains an element that links to an element in the JSON schema (key: "'+e.key+'") and that should not based on its type ("'+e.type+'")')}else if(i.inputfield&&"selectfieldset"!==e.type)throw new Error('The JSONForm defines an element of type "'+e.type+'" but no "key" property to link the input field to the JSON schema');return e.iddot=l(e.id||""),a.formElement=e,a.schemaElement=r,a.view=i,a.ownerTree=this,e.handlers||(e.handlers={}),a.view.array?(s=e.items?e.items[0]||e.items:e.key+"[]",t.isString(s)&&(s={key:s}),a.setChildTemplate(this.buildFromLayout(s))):e.items&&t.each(e.items,function(e){t.isString(e)&&(e={key:e}),a.appendChild(this.buildFromLayout(e))},this),a},m.prototype.computeInitialValues=function(){this.root.computeInitialValues(this.formDesc.value)},m.prototype.render=function(t){t&&(this.domRoot=t,this.root.render(),this.hasRequiredField()&&e(t).addClass("jsonform-hasrequired"))},m.prototype.forEachElement=function(e){var t=function(n){for(var i=0;i<n.children.length;i++)e(n.children[i]),t(n.children[i])};t(this.root)},m.prototype.validate=function(t){var n=o.getFormValue(this.domRoot),i=!1,r=this.formDesc;if(!1!==r.validate){var a=!1;if("object"!=typeof r.validate?JSONFormValidator&&(a=JSONFormValidator.createEnvironment("json-schema-draft-03")):a=r.validate,a){var s=a.validate(n,this.formDesc.schema);e(this.domRoot).jsonFormErrors(!1,r),s.errors.length&&(i||(i=[]),i=i.concat(s.errors))}}return i&&!t&&(r.displayErrors?r.displayErrors(i,this.domRoot):e(this.domRoot).jsonFormErrors(i,r)),{errors:i}},m.prototype.submit=function(e){var t=function(){return e&&(e.preventDefault(),e.stopPropagation()),!1},n=o.getFormValue(this.domRoot),i=this.formDesc,r=!1;if(this.forEachElement(function(t){r||t.view.onSubmit&&(r=!t.view.onSubmit(e,t))}),r)return t();var a=this.validate();return i.onSubmit&&!i.onSubmit(a.errors,n)?t():a.errors?t():!(!i.onSubmitValid||i.onSubmitValid(n))&&t()},m.prototype.hasRequiredField=function(){var e=function(n){if(!n)return null;if(n.required&&"boolean"!==n.type)return n;var i=t.find(n.properties,function(t){return e(t)});return i||(n.items&&(i=t.isArray(n.items)?t.find(n.items,function(t){return e(t)}):e(n.items))?i:void 0)};return e(this.formDesc.schema)},o.getFormValue=function(t){var n=e(t).data("jsonform-tree");return n?n.root.getFormValues():null},e.fn.jsonFormErrors=function(t,n){if(e(".error",this).removeClass("error"),e(".warning",this).removeClass("warning"),e(".jsonform-errortext",this).hide(),t){for(var i=[],r=0;r<t.length;r++){var a=t[r].uri.replace(/.*#\//,"").replace(/\//g,".").replace(/\.([0-9]+)(?=\.|$)/g,"[$1]"),o=".jsonform-error-"+l(a.replace(/\./g,"---"));i.push(o);var s=t[r].type||"error";e(o,this).addClass(s),e(o+" .jsonform-errortext",this).html(t[r].message).show()}i=i.join(",");var u=e(i).get(0);u&&u.scrollIntoView&&u.scrollIntoView(!0,{behavior:"smooth"})}},e.fn.jsonForm=function(n){n=t.defaults({},n,{submitEvent:"submit"});var i,r,a,o,l=new m;return l.initialize(n),l.render(this.get(0)),n.transloadit&&this.append('<input type="hidden" name="params" value=\''+s(JSON.stringify(n.transloadit.params))+"'>"),this.data("jsonform-tree",l),n.submitEvent&&(this.unbind(n.submitEvent+".jsonform"),this.bind(n.submitEvent+".jsonform",function(e){l.submit(e)})),i=function(e,t){t.find("> .active").removeClass("active"),e.addClass("active")},r=function(e,t){e.find("input, textarea, select").removeAttr("disabled"),e.parent().children(":not([data-idx="+t+"])").find("input, textarea, select").attr("disabled","disabled")},a=function(t){var n,a=e("option:selected",e(this)),o=e(this),s=a.get(0).getAttribute("data-idx")||a.attr("value");t.preventDefault(),a.hasClass("active")||(n=e(this).parents(".tabbable").eq(0).find(".tab-content [data-idx="+s+"]"),i(a,o),i(n,n.parent()),r(n,s))},o=function(t){e("a",e(this));var n=e(this).parents(".tabbable").first().find(".tab-content").first(),a=e(this).index(),o=n.find("[data-idx="+a+"]");t.preventDefault(),i(e(this),e(this).parent()),i(o,o.parent()),e(this).parent().hasClass("jsonform-alternative")&&r(o,a)},this.each(function(){e(this).delegate("select.nav","change",a),e(this).find("select.nav").each(function(){e(this).val(e(this).find(".active").attr("value"));var t=e(this).find("option:selected").get(0).getAttribute("data-idx")||e(this).find("option:selected").attr("value"),n=e(this).parents(".tabbable").eq(0).find(".tab-content [data-idx="+t+"]");r(n,t)}),e(this).delegate("ul.nav li","click",o),e(this).find("ul.nav li.active").click()}),e(".expandable > div, .expandable > fieldset",this).hide(),e(".expandable > legend",this).click(function(){var t=e(this).parent();t.toggleClass("expanded"),e("> div",t).slideToggle(100)}),l},e.fn.jsonFormValue=function(){return o.getFormValue(this)};var g={util:{}};return g.getFormValue=o.getFormValue,g.fieldTemplate=o.fieldTemplate,g.fieldTypes=o.elementTypes,g.getInitialValue=h,g.util.getObjKey=o.util.getObjKey,g.util.setObjKey=o.util.setObjKey,g}),define("media_elements/simple_data_capture/simple_data_capture-main",["jquery","underscore","viddler","jsonform"],function(e,t,n,i){return{View:n.BaseViews.MediaElement.extend({name:"simple_data_capture",timelineIconWidth:1,linear:!1,initialize:function(e){this._initResource(e),this.injectEl()},load:function(){this.resourceLoaded()},injectEl:function(){this.$el=e("<div>",{class:"simple-data-capture-container",id:"simple-data-capture-"+this.guid}),this.form=e("<form>"),this.$el.append(this.form),this.embed.target.find(".media-container").append(this.$el)},timelineIcon:function(){return e("<span>",{class:"timeline-media-element-marker wufoo_form-marker","data-guid":this.guid})},formSubmitted:function(){var e=this;setTimeout(function(){e.embed.manager.mediaElementFinished()},2e3)},showThanksMessage:function(){var t=this.resourceData.successMessage||"Thanks",n=e("<h2>",{class:"thanks"}).html(t);this.form.html(n)},play:function(){var e=this;this.$el.show(),this.embed.manager.mediaElementPlayed(),this.form.jsonForm({schema:this.resourceData.formSchema,onSubmitValid:function(t){e.embed.manager.events.trigger("simpleDataCapture:submit",t),e.showThanksMessage(),setTimeout(function(){e.embed.manager.mediaElementFinished()},2e3)}})}})}}),define("media_elements/simple_data_capture_overlay/modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-data-capture-modal",focusAfterShow:"input, textarea, select",initialize:function(e){t.extend(this,e),this.__init(e),this.render(e)},events:{"click .skip":"skip","click .success-dismiss":"dismissSuccess"},render:function(){var t=this;n.BaseViews.ModalView.prototype.render.call(this),this.form=e("<form>"),this.$(".simple-data-capture-container-overlay").append(this.form),this.form.jsonForm(e.extend(this.pluginMain.resourceData,{onSubmitValid:function(n){if(t.manager.events.trigger("simpleDataCapture:submit",{values:n,resourceData:t.pluginMain.resourceData}),t.pluginMain.resourceData.successMessaging){if("function"==typeof t.pluginMain.resourceData.successMessaging)var i=t.pluginMain.resourceData.successMessaging(n);else i=t.pluginMain.resourceData.successMessaging;e.when(i).done(function(e){var n=t.manager.retrieveTemplate("#tmp-data-capture-success",e);t.form.replaceWith(n)})}else t.hide()}})),this.pluginMain.resourceData.disableRadioCheckboxReplacement||this.form.addClass("radio-and-checkbox-replacement"),this.pluginMain.resourceData.skippable&&this.showSkipButton(),this.pluginMain.resourceData.title&&this.showTitle(),this.pluginMain.resourceData.privacyPolicyUrl&&this.showPrivacyLink()},showSkipButton:function(){var t=e("<a>",{class:"btn white skip",href:"#"}).text(this.manager.localizer.translate("media_elements.simple_data_capture_overlay.skip"));this.$(".btn:last").after(t)},showPrivacyLink:function(){var t=e("<a>",{class:"privacy",href:this.pluginMain.resourceData.privacyPolicyUrl,target:"_blank"}).text(this.manager.localizer.translate("media_elements.simple_data_capture_overlay.privacy"));this.$(".btn:last").after(t)},showTitle:function(){var t=e("<h2>").text(this.pluginMain.resourceData.title);this.$el.prepend(t)},show:function(){this.pluginMain.resourceData.noPause&&!n.Util.matrix.iPhone||(this.manager.pause(),n.Util.matrix.iPhone&&this.embed.target.find("video:visible")[0].webkitExitFullScreen(),this.pluginMain.resourceData.skippable||this.embed.mainView.gui.disable()),n.BaseViews.ModalView.prototype.show.call(this)},hide:function(){this.pluginMain.resourceData.noPause||this.manager.play(),this.pluginMain.resourceData.skippable||this.embed.mainView.gui.enable(),n.BaseViews.ModalView.prototype.hide.call(this)},skip:function(e){e.preventDefault(),this.manager.events.trigger("interaction:clickSimpleDataCaptureSkip"),this.resumePlayback(),this.remove()},dismissSuccess:function(e){e.preventDefault(),this.pluginMain.resourceData.noPause||this.resumePlayback(),this.remove()},resumePlayback:function(){var e=this;this.pluginMain.activatable=!1,setTimeout(function(){e.pluginMain.activatable=!0},this.pluginMain.duration+2e3),this.manager.play()}})}),define("text!media_elements/simple_data_capture_overlay/templates.html",[],function(){return'<script type="text/template" id="tmp-data-capture-modal">\n  <div class="modal-outer data-capture-modal">\n    <div class="modal-container simple-data-capture-container-overlay">\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-data-capture-custom-fields-button-choice">\n<div class="button-choices-field" id="<%= node.id %>">\n    <% if(node.title) { %>\n      <label><%= node.title %></label>\n    <% } %>\n\n    <div class="buttons">\n      <% _.each(node.formElement.options, function(value) { %>\n        <a href="#" class="button"><%= value %></a>\n      <% }); %>\n    </div>\n\n    <input type="hidden" name="<%= node.name %>"></input>\n\n    <% if(node.description) { %>\n      <span class="help-inline"><%= node.description %></span>\n    <% } %>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-data-capture-success">\n  <div class="data-capture-success">\n    <% if(typeof(header) != \'undefined\') { %>\n      <h3><%= header %></h3>\n    <% } %>\n\n    <p><%= body %></p>\n\n    <a href="#" class="success-dismiss button"><%= typeof(buttonText) == \'undefined\' ? \'OK\' : buttonText %></a>\n  </div>\n<\/script>\n'}),define("media_elements/simple_data_capture_overlay/localization",[],function(){return{default:{media_elements:{simple_data_capture_overlay:{skip:"Skip",privacy:"Privacy"}}}}}),define("media_elements/simple_data_capture_overlay/custom_fields",["jquery","jsonform","text!media_elements/simple_data_capture_overlay/templates.html"],function(e,t,n){var i=e("<div>").html(n);t.fieldTypes.button_choice={template:i.find("#tmp-data-capture-custom-fields-button-choice").html(),inputfield:!0,onInsert:function(t,n){e(".buttons a",n.el).click(function(t){t.preventDefault();var i=e(t.target),r=i.text();e("input",n.el).val(r),i.parents("form").submit()})}}}),define("media_elements/simple_data_capture_overlay/simple_data_capture_overlay-main",["jquery","underscore","viddler","media_elements/simple_data_capture_overlay/modal","text!media_elements/simple_data_capture_overlay/templates.html","media_elements/simple_data_capture_overlay/localization","jsonform","media_elements/simple_data_capture_overlay/custom_fields"],function(e,t,n,i,r,a,o){return{Templates:r,LocalizationContent:a,View:n.BaseViews.MediaElement.extend({name:"simple_data_capture_overlay",timelineIconWidth:1,playerEvents:{"mediaElement:play":"hide"},hide:function(){this.modal&&this.modal.hide()},initialize:function(e){this._initResource(e)},load:function(){this.resourceLoaded()},timelineIcon:function(){return e("<span>",{class:"timeline-media-element-marker wufoo_form-marker","data-guid":this.guid})},activate:function(){this.modal=new i({embed:this.embed,manager:this.embed.manager,pluginMain:this}),this.modal.show(),n.BaseViews.MediaElement.prototype.activate.call(this)},deactivate:function(){this.modal.hide(),n.BaseViews.MediaElement.prototype.deactivate.call(this)}})}}),define("media_elements/wufoo_form/wufoo_form-main",["jquery","underscore","viddler","require"],function(e,t,n,i){return{View:n.BaseViews.MediaElement.extend({name:"wufoo_form",timelineIconWidth:1,linear:!1,initialize:function(e){this._initResource(e),this.injectEl()},load:function(){this.resourceLoaded()},injectEl:function(){this.$el=e("<div>",{class:"wufoo-form-container",id:"wufoo-"+this.resourceData.formId}),this.embed.target.find(".media-container").append(this.$el)},timelineIcon:function(){return e("<span>",{class:"timeline-media-element-marker wufoo_form-marker","data-guid":this.guid})},formSubmitted:function(){var e=this;setTimeout(function(){e.embed.manager.mediaElementFinished()},2e3)},play:function(){var e=this;this.$el.show(),this.embed.manager.mediaElementPlayed(),i(["//www.wufoo.com/scripts/embed/form.js"],function(){form=new WufooForm,form.initialize({userName:e.resourceData.accountUsername,formHash:e.resourceData.formId,autoResize:!0,height:"318",async:!0,host:"wufoo.com",header:"show",ssl:!0}),form.display();var t=0;this.$("iframe").load(function(){2==++t&&e.formSubmitted()})})}})}}),define("media_elements/error/error-main",["viddler","jquery"],function(e,t){return{View:e.BaseViews.MediaElement.extend({name:"error",el:".errors-container",linear:!1,initialize:function(e){this._initResource(e)},load:function(){this.injectEl(),this.render(),this.resourceLoaded()},injectEl:function(){this.$el=t("<div>",{class:"errors-container"}),this.embed.target.find(".media-container").prepend(this.$el)},render:function(){this.$el.html("<p>"+this.resourceData.message+"</p>")}})}}),define("media_elements/video_picker/localization",function(){}),define("text!media_elements/video_picker/templates.html",[],function(){return'<script type="text/template" id="tmp-video-picker">\n  <div class="container">\n    <% if(showSearchBar) { %>\n      <form class="search-bar" onsubmit="return false;">\n        <input type="search" name="query" class="query" value="" incremental="true" />\n      </form>\n    <% } %>\n    <ul>\n    </ul>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-video-picker-videos">\n  <% _.each(videos, function(video) { %><li class="video-item">\n    <div class="thumb-container">\n      <a class="thumb" href="#">\n        <img src="<%= video.thumbnail_url %>" alt="<%= video.title %>" tabindex="-1" />\n      </a>\n    </div>\n    <% if(showTitles || showDescriptions) { %>\n      <div class="information">\n        <% if(showTitles) { %>\n          <a class="video-title" href="#">\n            <%= video.title %>\n            <% if(showDuration) { %>\n              <span class="duration"><%= Viddler.Util.secs2time(video.length) %></span>\n            <% } %>\n          </a>\n        <% } %>\n        <% if(showDescriptions) { %>\n          <p class="video-description"><%= video.description %></p>\n        <% } %>\n      </div>\n    <% } %>\n  </li><% }) %>\n<\/script>\n'}),define("media_elements/video_picker/microfiche",["jquery"],function(e){var t,n=e;(t=function(e){return this.initialize(e),this}).VERSION="1.8.0",e.extend(t.prototype,{options:{autoplay:!1,autopause:!1,buttons:!0,bullets:!0,cyclic:!1,keyboard:!1,swipe:!0,clickToAdvance:!1,minDuration:250,duration:500,maxDuration:500,dragThreshold:25,elasticity:.5,swipeThreshold:.125,refreshOnResize:!1,prevButtonLabel:"&larr;",nextButtonLabel:"&rarr;",noScrollAlign:"left"},x:0,initialize:function(t){if(this.options=e.extend({},this.options,t),this.el=e(t.el),this.initialContents=this.el.contents(),this.el.data("microfiche",this),this.createFilm(),this.createScreen(),this.calibrate(),this.film.width()<=this.screen.width())return this.noScrollAlign(this.options.noScrollAlign),void this.refreshOnResize(this.options.refreshOnResize);this.createControls(),this.enableTouch(),this.enableKeyboard(),this.enableClick(),this.prepareCyclic(),this.run(this.options)},createFilm:function(){this.film=e('<div class="microfiche-film">').css({position:"absolute"}),this.el.children().appendTo(this.film).css({float:"left"}),this.prepareFilm&&this.prepareFilm()},createScreen:function(){this.screen=e('<div class="microfiche-screen">').css({position:"relative",overflow:"hidden"}).appendTo(this.el).append(this.film)},prepareCyclic:function(){if(this.options.cyclic){var e=this.film.clone(),t=this.film.clone(),n=this.film.width();e.prependTo(this.film).css({position:"absolute",left:-n+"px"}),t.appendTo(this.film).css({position:"absolute",left:n+"px"})}},calibrate:function(){this.screen.width(1e5);var e=this.film.width(),t=this.film.height();this.film.width(e).height(t),this.screen.width("auto").height(t)},createControls:function(){var t=this;this.controls=e('<span class="microfiche-controls" />').appendTo(this.el),this.controls.on("click","a, button",function(e){t.didClickControl(e)}),this.options.bullets&&this.createBullets(),this.options.buttons&&this.createButtons(),this.updateControls()},createBullets:function(){for(var t=e('<span class="microfiche-bullets" />').appendTo(this.controls),n=0;n<this.totalPageCount();n++)e("<button>").addClass("microfiche-bullet").attr("data-microfiche-page",n).data("action","slideToPage").data("arguments",[n]).html(n+1).appendTo(t)},createButtons:function(){e("<button>").addClass("microfiche-button microfiche-prev-button").attr("rel","prev").data("action","prev").data("arguments",[]).html(this.options.prevButtonLabel).prependTo(this.controls),e("<button>").addClass("microfiche-button microfiche-next-button").attr("rel","next").data("action","next").data("arguments",[]).html(this.options.nextButtonLabel).appendTo(this.controls)},enableTouch:function(){if(this.options.swipe){var e=this,t=this.touchstart,n=this.touchmove,i=this.touchend;this.touchstart=function(){t.apply(e,arguments)},this.touchmove=function(){n.apply(e,arguments)},this.touchend=function(){i.apply(e,arguments)},this.film.on("touchstart",this.touchstart)}},enableKeyboard:function(){if(this.options.keyboard){var t=this;this.screen.attr("data-microfiche-keyboard",!0);var n=this.onkeydown;this.onkeydown=function(){n.apply(t,arguments)},e(document).on("keydown",this.onkeydown)}},enableClick:function(){if(this.options.clickToAdvance){var e=this,t=this.onmousedown;this.onmousedown=function(){t.apply(e,arguments)},this.film.on("mousedown",this.onmousedown)}},didClickControl:function(t){t.preventDefault();var n=e(t.target),i=n.data("action"),r=n.data("arguments");this[i].apply(this,r)},touchstart:function(t){var n=t.originalEvent.targetTouches;!n||n.length>1||(this.touchState={then:new Date,ox:n[0].pageX,oy:n[0].pageY,isDrag:!1},e(document).on("touchmove",this.touchmove).on("touchend",this.touchend))},touchmove:function(e){var t=(r=e.originalEvent.targetTouches[0]).pageX-this.touchState.ox,n=r.pageY-this.touchState.oy;if(!this.touchState.isDrag){if(Math.abs(n)>=this.options.dragThreshold)return void this.touchend();Math.abs(t)>=this.options.dragThreshold&&(this.touchState.isDrag=!0)}if(this.touchState.isDrag){e.preventDefault();var i=new Date,r=i-this.touchState.then;if(this.touchState.vx=(t-this.touchState.dx)/r,this.touchState.vy=(n-this.touchState.dy)/r,this.touchState.dx=t,this.touchState.dy=n,this.touchState.then=i,this.touchState.cx=this.x-t,!this.options.cyclic){if(this.touchState.cx<this.min()){var a=this.min()-this.touchState.cx;a*=this.options.elasticity,this.touchState.cx=this.min()-a}this.touchState.cx>this.max()&&(a=this.touchState.cx-this.max(),a*=this.options.elasticity,this.touchState.cx=this.max()+a)}this.film.css({WebkitTransition:"none",WebkitTransform:"translate3d("+-this.touchState.cx+"px, 0px, 0px)"})}},touchend:function(t){if(e(document).off("touchmove",this.touchmove).off("touchend",this.touchend),this.touchState.isDrag){var n=this.touchState.dx,i=this.screenWidth(),r=this.touchState.vx,a=this.options.swipeThreshold;n<=-i*a?this.slideByPages(1,r):n>=i*a?this.slideByPages(-1,r):this.slideByPages(0)}},onkeydown:function(e){37!==e.keyCode&&39!==e.keyCode||!this.isCentral("[data-microfiche-keyboard]")||(37===e.keyCode?this.slideByPages(-1):39===e.keyCode&&this.slideByPages(1))},onmousedown:function(e){this.slideByPages(1)},updateControls:function(){this.options.bullets&&this.updateBullets(),this.options.buttons&&this.updateButtons()},updateBullets:function(){this.controls.find(".microfiche-bullet").removeClass("selected"),this.controls.find('[data-microfiche-page="'+this.currentPageIndex()+'"]').addClass("selected")},updateButtons:function(){this.options.cyclic||(this.controls.find('[rel="prev"]').attr("disabled",this.x<=this.min()),this.controls.find('[rel="next"]').attr("disabled",this.x>=this.max()))},round:function(e){var t=this.screenWidth();return Math.round(e/t)*t},constrain:function(e,t,n){return void 0===t&&(t=this.min()),void 0===n&&(n=this.max()),Math.max(t,Math.min(e,n))},roundAndConstrain:function(e,t,n){return this.constrain(this.round(e),t,n)},withinBounds:function(e){return this.min()<=e&&e<=this.max()},min:function(){return 0},max:function(){return this.film.width()-this.screenWidth()},currentPageIndex:function(){return Math.round(this.x/this.screenWidth())},totalPageCount:function(){return Math.ceil(this.film.width()/this.screenWidth())},screenWidth:function(){return this.el.width()},isCentral:function(t){return e(e(t||".microfiche-screen").sort(function(t,n){return Math.abs(1-(e(window).scrollTop()+e(window).height()/2-e(t).height()/2)/e(t).offset().top)-Math.abs(1-(e(window).scrollTop()+e(window).height()/2-e(n).height()/2)/e(n).offset().top)})[0]).parent().data("microfiche")===this},jump:function(){this.el.trigger("microfiche:willMove"),this.performJump(),this.updateControls(),this.el.trigger("microfiche:didMove")},performJump:function(){this.film.css({left:-this.x})},transition:function(e){var t=this;this.options.cyclic&&this.handleWrappingTransition(),null==e&&(e=this.options.duration);var n=function(){t.afterTransition()};this.el.trigger("microfiche:willMove"),setTimeout(function(){t.performTransition(e,n)})},handleWrappingTransition:function(){this.x>this.max()?(this.x=this.min()-this.screenWidth(),this.touchState&&this.touchState.dx&&(this.x-=this.touchState.dx),this.jump(),this.x=this.min(),this.updateControls()):this.x<this.min()&&(this.x=this.max()+this.screenWidth(),this.touchState&&this.touchState.dx&&(this.x-=this.touchState.dx),this.jump(),this.x=this.max(),this.updateControls())},performTransition:function(e,t){this.film.stop().animate({left:-this.x+"px"},e,t)},afterTransition:function(){delete this.touchState,this.el.trigger("microfiche:didMove")},slideByPages:function(e,t){var n=this.x,i=this.screenWidth();if(this.x=this.constrain((Math.round(this.x/i)+e)*i),this.options.cyclic&&this.x==n&&(this.x+=e*i),t)var r=this.constrain(Math.abs((this.x-n)/t),this.options.minDuration,this.options.maxDuration);else r=this.options.duration;this.updateControls(),this.transition(r)},slideToPage:function(e){this.x=this.constrain(e*this.screenWidth()),this.updateControls(),this.transition()},slideToPoint:function(e){this.x=this.roundAndConstrain(e),this.updateControls(),this.transition()},jumpToPage:function(e){this.x=this.constrain(e*this.screenWidth()),this.updateControls(),this.jump()},jumpToPoint:function(e){this.x=this.roundAndConstrain(e),this.updateControls(),this.jump()},prev:function(){this.slideByPages(-1)},next:function(){this.slideByPages(1)},autoplay:function(e){if(this.autoplayTimeout&&(clearInterval(this.autoplayTimeout),delete this.autoplayTimeout),e=+e,!(isNaN(e)||e<=0)){var t=this;this.autoplayTimeout=setInterval(function(){t.pause||t.next()},1e3*e)}},autopause:function(){var e=this;this.el.hover(function(){e.pause=!0},function(){e.pause=!1})},destroy:function(){this.el.empty(),this.el.off(),this.clearResizeHandler(),this.el.removeData("microfiche")},refresh:function(){var n=this.el.data("microfiche").options,i=this.getContents();return this.destroy(),this.el.append(i),new t(e.extend({el:this.el},n)),this.el},getContents:function(){return this.contentsChanged()?this.el.html():this.el.data("microfiche").initialContents},contentsChanged:function(){return 0===this.el.find(".microfiche-screen").length},refreshOnResize:function(t){if(this.options.refreshOnResize=t,this.resizeHandler&&this.clearResizeHandler(),!1!==t){!0===t&&(t=250);var n,i=this;i.resizeHandler=function(){n&&clearTimeout(n),n=setTimeout(function(){i.refresh()},t)},e(window).on("resize",i.resizeHandler)}},clearResizeHandler:function(){e(window).off("resize",this.resizeHandler)},noScrollAlign:function(e){if(!(this.film.width()>this.screen.width()))switch(e){case"center":this.film.css({left:"50%",marginLeft:this.film.width()/2*-1+"px",right:"auto"});break;case"right":this.film.css({left:"auto",marginLeft:"auto",right:0});break;default:this.film.css({left:0,marginLeft:"auto",right:"auto"})}},run:function(t){for(var n in t){var i=this[n];e.isFunction(i)&&i.call(this,t[n])}}}),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix&&e.extend(t.prototype,{prepareFilm:function(){this.film.css({WebkitTransform:"translate3d(0px, 0px, 0px)"})},performTransition:function(e,t){this.film.one("webkitTransitionEnd",t).css({WebkitTransition:"-webkit-transform "+e+"ms",WebkitTransform:"translate3d("+-this.x+"px, 0px, 0px)"})},performJump:function(){this.film.css({WebkitTransition:"-webkit-transform 0ms",WebkitTransform:"translate3d("+-this.x+"px, 0px, 0px)"})}}),n.fn.microfiche=function(n){return this.each(function(){var i=e(this).data("microfiche");i?i.run(n):new t(e.extend({el:this},n))})}}),define("media_elements/video_picker/video_picker-main",["underscore","jquery","viddler","media_elements/video_picker/localization","text!media_elements/video_picker/templates.html","media_elements/video_picker/microfiche"],function(e,t,n,i,r){return{LocalizationContent:i,Templates:r,View:n.BaseViews.MediaElement.extend({name:"video_picker",templatePath:"media_elements/video_picker/templates.html",events:{"click .video-item":"playVideo","search .query":"search","keyup .query":"search"},playerEvents:{"linked:mediaElement:activated":"playerMediaElementActivated"},initialize:function(e){this._initResource(e),this.style=this.embed.style||"showreel"},activate:function(){this.render(),n.BaseViews.MediaElement.prototype.activate.call(this)},load:function(){if(this.injectEl(),this.addEventListeners(),this.embed.preferredAspectRatio){var e=this.embed.preferredAspectRatio.split(":");this.heightMultiplier=parseInt(e[1])/parseInt(e[0])}else this.heightMultiplier=.5625;this.resourceLoadedWhenDeferredObjectsComplete()},addEventListeners:function(){var e=this;t(window).resize(function(){e.setSizes()})},render:function(){var e=this;this.$el.html(this.embed.manager.retrieveTemplate("#tmp-video-picker",{showSearchBar:this.showSearchBar()})),this.populateUl(),this.embed.noSideBorders&&this.$el.addClass("no-side-borders"),this.embed.stretchImagesToFit&&this.$el.addClass("stretch-images-to-fit"),this.setSizes(),setTimeout(function(){e.setSizes()},20),"showreel"==this.style&&this.$(".container").microfiche({bullets:!1,prevButtonLabel:"&#9664;",nextButtonLabel:"&#9654;",refreshOnResize:!0}),this.delegateEvents()},populateUl:function(){this.$el.find("ul").html(this.embed.manager.retrieveTemplate("#tmp-video-picker-videos",{videos:this.resourceData.videos,showTitles:this.showTitles(),showDescriptions:this.showDescriptions(),showDuration:this.showDuration()}))},injectEl:function(){this.$el=t("<div>",{class:"video-picker "+this.style}),this.embed.target.find(".media-container").append(this.$el)},setSizes:function(){if("library-list"!=this.style){var e=this.$(".container").width(),t=Math.floor(e/this.thumbnailsPerRow()-14);t=parseInt(t),this.$(".video-item img").css({width:t}),"library-grid"==this.style&&this.$(".video-item").css({width:t});var n=parseInt(this.heightMultiplier*t);this.$("img").css({height:n})}},thumbnailsPerRow:function(){return this.embed.videosPerRow?"function"==typeof this.embed.videosPerRow?this.embed.videosPerRow(this):this.embed.videosPerRow:this.dymanicThumbnailsPerRow()},dymanicThumbnailsPerRow:function(){var e=this.$el.width();return e>=768?6:e>=480?4:2},playVideo:function(e){e.preventDefault();var n=t(e.currentTarget).index();this.playVideoAt(n)},playVideoAt:function(t){e.each(this.embed.linkedEmbeds,function(e){"video"==e.type&&(e.videosOnSeperateTracks?e.manager.goTo({track:"video-track-"+t,step:0}):e.manager.goTo({track:"video-track-0",step:t}),e.manager.play())})},playerMediaElementActivated:function(e){if("video"==e.name){if(e.embed.videosOnSeperateTracks)var t=parseInt(e.embed.manager.currentPrimaryTrack.id.replace("video-track-",""));else t=e.embed.manager.currentMediaElementIndex;if(this.$(".video-item").removeClass("current"),this.$(".video-item:nth-child("+(t+1)+")").addClass("current"),"showreel"==this.style){var n=Math.floor(t/this.thumbnailsPerRow());this.$(".container").data("microfiche")&&this.$(".container").data("microfiche").controls&&this.$(".container").microfiche({slideToPage:n})}}},search:function(e){e.preventDefault();var n=this.$(".query").val().trim();if(this.populateUl(),""!=n){var i=new RegExp(n,"i");this.$(".video-item").each(function(e,n){(n=t(n)).find(".video-title").text().match(i)||n.remove()})}},showTitles:function(){return"library-grid"==this.style&&this.embed.showTitles||"library-list"==this.style},showDescriptions:function(){return"library-list"==this.style&&this.embed.showDescriptions},showDuration:function(){return this.showTitles()&&this.embed.showDuration},showSearchBar:function(){return"library-list"==this.style&&this.embed.showSearchBar}})}}),define("text!media_elements/password_form/templates.html",[],function(){return'<script type="text/template" id="tmp-password-form">\n  <form>\n    <h2>A password is required to view this video.</h2>\n\n    <input type="password" class="password"></input>\n\n    <input type="submit" class="button"></input>\n\n    <p class="error">Incorrect password. Please try again</p>\n  </form>\n<\/script>\n'}),define("media_elements/password_form/password_form-main",["viddler","jquery","viddler-embed","text!media_elements/password_form/templates.html"],function(e,t,n,i){return{Templates:i,View:e.BaseViews.MediaElement.extend({name:"password_form",el:".errors-container",linear:!1,events:{"submit form":"submitPassword"},initialize:function(e){this._initResource(e)},load:function(){this.injectEl(),this.render(),this.resourceLoaded()},injectEl:function(){this.$el=t("<div>",{class:"password-container"}),this.embed.target.find(".media-container").prepend(this.$el)},render:function(){var e=t(this.embed.manager.retrieveTemplate("#tmp-password-form"));this.$el.append(e),this.embed.password&&this.showError(),this.delegateEvents()},submitPassword:function(e){e.preventDefault();var i=this.$el.find(".password").val();if(""===i)this.showError();else{var r=this.embed.target.attr("style");this.embed.target.css({width:this.embed.target.find(".viddler-app-wrap").width(),height:this.embed.target.find(".viddler-app-wrap").height(),background:"#000"}),this.embed.destroy();var a=new n(t.extend(this.embed,{password:i,skipPerformEmbed:!0}));a.manager.events.once("gui:ready",function(){a.target.attr("style",r||"")}),a.performEmbed(),t.each(this.embed.linkedEmbeds,function(e,t){a.linkWith(t),t.linkWith(a)})}},showError:function(){this.$el.find(".error").show()}})}}),define("features/chaptering/modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-chapter-list",triangle:"up",initialize:function(e){var n=this;t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.__render(e),this.highlightCurrentChapter(),this.manager.events.on("timeline:timeUpdate",function(){n.highlightCurrentChapter()})},events:{"click .chapter-choice":"changeChapter"},changeChapter:function(t){t.preventDefault();var n=e(t.target).data("chapter"),i=this.pluginMain.resourceData.chapters[n];this.manager.goTo(i).play(),this.wasPlaying=!1,this.hide()},currentChapterIndex:function(){var e,n=this;return t.each(this.pluginMain.resourceData.chapters,function(t,i){t.time<=n.manager.currentTime&&t.track==n.manager.currentPrimaryTrack.id&&(e=i)}),e},highlightCurrentChapter:function(){this.$(".chapter-choice").removeClass("current"),this.$el.find('.chapter-choice[data-chapter="'+this.currentChapterIndex()+'"]').addClass("current")},show:function(){this.wasPlaying="playing"==this.manager.status,this.manager.pause(),n.BaseViews.ModalView.prototype.show.call(this)},hide:function(){this.wasPlaying&&this.manager.play(),n.BaseViews.ModalView.prototype.hide.call(this)}})}),define("features/chaptering/localization",function(){}),define("text!features/chaptering/templates.html",[],function(){return'<script type="text/template" id="tmp-chapter-list">\n  <div class="modal-outer chapter-modal picker" style="display: none;">\n    <div class="modal-container">\n      <ul class="chapter-choices" role="menu">\n        <% _.each(chapters, function (chapter, index) { %>\n          <li><a href="#" \n            role="menuitemradio"\n            aria-disabled="false"\n            aria-checked="false"\n            tabindex="-1"\n            class="chapter-choice" data-chapter="<%= index %>"><%= chapter.name %></a></li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n'}),define("features/chaptering/chaptering-main",["jquery","viddler","features/chaptering/modal","features/chaptering/localization","text!features/chaptering/templates.html"],function(e,t,n,i,r){return{Templates:r,LocalizationContent:i,View:t.BaseViews.Feature.extend({name:"chaptering",iconSettings:{element:e("<div>",{class:"chaptering-icon",title:"Chapters"}),bar:"top",side:"left",priority:500},load:function(){},initialize:function(e){this._initResource(e),this.resourceLoadedWhenDeferredObjectsComplete()},activate:function(){t.BaseViews.ResourceView.prototype.activate.call(this),this.delegateEvents(),this.modal=new n({pluginMain:this,embed:this.embed,manager:this.embed.manager,chapters:this.resourceData.chapters})}})}}),define("features/general_analytics/general_analytics-main",["jquery","viddler"],function(e,t){return{View:t.BaseViews.Feature.extend({name:"general_analytics",load:function(){},initialize:function(e){this._initResource(e),this.eventsToRecord=e.resourceData.eventsToRecord||[/^GeneralAnalytics/,"videoPlayer:play"],this.resourceLoadedWhenDeferredObjectsComplete(),this.timelineDuration=this.embed.manager.timelineDuration(),this.monitoredVideoGuids=[],this.globalMilestonesToFire=[25,50,75,100]},activate:function(){t.BaseViews.ResourceView.prototype.activate.call(this),this.addEventListeners()},addEventListeners:function(){var e=this;this.embed.manager.events.on("mediaElement:activated",function(t){e.monitorVideo(t)}),this.embed.manager.events.on("all",function(t,n){e.shouldRecordEvent(t)&&e.recordEvent(t,n)}),this.embed.manager.events.on("timeline:timeUpdate",function(t){if(t/e.timelineDuration*100>=e.globalMilestonesToFire[0]){var n=e.globalMilestonesToFire.shift();e.embed.manager.events.trigger("GeneralAnalytics:GlobalPercentMilestoneReached",n)}})},shouldRecordEvent:function(t){return e.grep(this.eventsToRecord,function(e){return"string"==typeof e?e==t:e.test(t)}).length>0},monitorVideo:function(t){var n=this;if("video"==t.name&&-1==e.inArray(t.guid,this.monitoredVideoGuids)){this.monitoredVideoGuids.push(t.guid);var i=t.subModules.video_monitor.videoMonitor;i.on("percentMilestoneReached",function(){var e=i.getPercentMilestonePassed();n.embed.manager.events.trigger("GeneralAnalytics:PercentMilestoneReached",e)})}},recordEvent:function(t,n){var i=this.embed.manager.currentMediaElement();(n={media_element_id:i.id,media_element_title:i.title,media_element_type:i.name,event_name:t,event_data:JSON.stringify(n),timeline_duration:this.embed.manager.timelineDuration(),timeline_position:this.embed.manager.currentTime}).logged_in_user=window.logged_in_user,e.post(this.resourceData.url,n)}})}}),define("features/social_sharing/confirm_modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-social-sharing-confirm",triangle:"up",initialize:function(e){t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.__render(e),this.show()},serviceUrls:{facebook:"https://www.facebook.com/sharer/sharer.php?u={URL}",twitter:"https://twitter.com/intent/tweet?url={URL}",googleplus:"https://plus.google.com/share?url={URL}",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url={URL}"},events:{"click .submit":"submit","click .resume":"resume"},urlOfPlayer:function(){var e=window.location.href;((e=(e=(e=(e=e.replace(/(#.*)embedId=[^&]+&?/,"$1")).replace(/(#.*)t=[^&]+&?/,"$1")).replace("#&","#")).replace(/(#.*)/,"$1&")).match("#")||(e+="#"),e+="embedId="+this.embed.embedId,this.$(".include_time").is(":checked"))&&(e+="&t="+n.Util.time2secs(this.$(".timepoint").val()));return e},shareServiceUrl:function(){return this.serviceUrls[this.service].replace("{URL}",encodeURIComponent(this.urlOfPlayer()))},submit:function(e){if(e.preventDefault(),"email"==this.service)this.handleEmailShare();else{var t=this.shareServiceUrl(),n=window.open(t,"_blank","height=450, width=550");setTimeout(function(){n.focus()},100),this.remove()}this.reportAnalytics()},show:function(){n.BaseViews.ModalView.prototype.show.call(this),"email"==this.service?this.$(".from_name").focus():this.$(".submit").focus()},handleEmailShare:function(){var e={email_to:this.$(".email").val(),message:this.$(".message").val(),from:this.$(".from_name").val(),url:this.urlOfPlayer(),environment:this.embed.environment};return""==e.from?(alert(this.manager.localizer.translate("features.social_sharing.errors.name_required")),!1):n.Util.isValidEmail(e.email_to)?(n.Api.shareByEmail(e),void this.showEmailSentMessage()):(alert(this.manager.localizer.translate("features.social_sharing.errors.invalid_email")),!1)},showEmailSentMessage:function(){var e=this.manager.retrieveTemplate("#tmp-social-email-sent");this.$el.html(e),this.$(".resume").focus()},resume:function(e){e.preventDefault(),this.manager.play(),this.remove()},reportAnalytics:function(){var e=this.embed.manager.currentMediaElement();if("video"==e.name&&e.id){var t=""==location.host?"unknown":location.host,n="production"==this.embed.environment?"https://stats.viddler.com":"//stats.staging.viddler.com";n+="/?"+e.id+"&h="+t+"&s="+this.service,window.custom_user_identifier&&(n+="&custom_user_identifier="+custom_user_identifier),(new Image).src=n}}})}),define("features/social_sharing/modal",["jquery","underscore","viddler","features/social_sharing/confirm_modal"],function(e,t,n,i){return n.BaseViews.ModalView.extend({template:"#tmp-social-sharing",triangle:"up",initialize:function(e){t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.__render(e)},events:{"click .service-icon":"showServiceForm"},show:function(){this.manager.pause(),n.BaseViews.ModalView.prototype.show.call(this)},showServiceForm:function(t){t.preventDefault();var n=e(t.target).data("service");new i({pluginMain:this.pluginMain,embed:this.embed,manager:this.embed.manager,service:n,timepoint:this.embed.manager.currentTime/1e3})}})}),define("features/social_sharing/localization",[],function(){return{default:{features:{social_sharing:{service_name:{facebook:"Facebook",twitter:"Twitter",linkedin:"LinedIn",googleplus:"Google Plus",email:"Email"},regular_submit_button_text:"Submit",email_submit_button_text:"Send email",placeholders:{from_name:"Your Name",email:"Enter email address",message:"Optional Message"},include_time_label:"Include time?",errors:{invalid_email:"Email is invalid",name_required:"Your Name is required"},thanks:{h1:"Thank you",h2:"An email has been sent."}}}}}}),define("text!features/social_sharing/templates.html",[],function(){return'<script type="text/template" id="tmp-social-sharing">\n  <div class="modal-outer social-sharing-modal picker">\n    <div class="modal-container">\n      <ul class="services">\n        <% _.each(services, function (service, index) { %>\n          <li><a href="#" class="service-icon <%= service %>" data-service="<%= service %>"><span class="screenreader"><%= t(\'features.social_sharing.service_name.\' + service) %></span></a></li>\n        <% }) %>\n      </ul>\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-social-sharing-confirm">\n  <div class="modal-outer social-sharing-modal confirm">\n    <div class="modal-container">\n      <div class="time-row">\n        <input type="text" name="timepoint" class="timepoint" value="<%= Viddler.Util.secs2time(timepoint) %>" />\n        <label>\n          <input type="checkbox" name="include_time" class="include_time" placeholder="0:00" />\n          <span><%= t(\'features.social_sharing.include_time_label\') %></span>\n        </label>\n      </div>\n\n      <% if(service == \'email\') { %>\n        <div class="email-fields">\n          <input type="text" name="from_name" class="from_name" placeholder="<%= t(\'features.social_sharing.placeholders.from_name\') %>" />\n          <input type="email" name="email" class="email" placeholder="<%= t(\'features.social_sharing.placeholders.email\') %>" />\n          <textarea name="message" class="message" placeholder="<%= t(\'features.social_sharing.placeholders.message\') %>" />\n        </div>\n\n        <input type="submit" value="<%= t(\'features.social_sharing.email_submit_button_text\') %>" class="submit button" />\n      <% } else { %>\n        <div class="service-icon alt <%= service %>"></div>\n        <input type="submit" value="<%= t(\'features.social_sharing.regular_submit_button_text\') %>" class="submit button" />\n      <% } %>\n\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-social-email-sent">\n  <div class="modal-container thanks">\n    <h1><%= t(\'features.social_sharing.thanks.h1\') %></h1>\n    <h2><%= t(\'features.social_sharing.thanks.h2\') %></h2>\n\n    <a href="#" role="button" class="resume button">Resume</a>\n  </div>\n<\/script>\n'}),define("features/social_sharing/social_sharing-main",["jquery","viddler","features/social_sharing/modal","features/social_sharing/localization","text!features/social_sharing/templates.html"],function(e,t,n,i,r){return{Templates:r,LocalizationContent:i,View:t.BaseViews.Feature.extend({name:"social_sharing",iconSettings:{element:e("<div>",{class:"social-sharing-icon",title:"Social Sharing"}),bar:"top",side:"right",priority:500},load:function(){},initialize:function(e){this._initResource(e),this.resourceLoadedWhenDeferredObjectsComplete()},activate:function(){t.BaseViews.ResourceView.prototype.activate.call(this),this.delegateEvents(),this.modal=new n({pluginMain:this,embed:this.embed,manager:this.embed.manager,services:this.resourceData.services})}})}}),define("features/jump_control/localization",[],function(){return{default:{features:{jump_control:{jump_back:function(e){return"Jump back "+e+" seconds"},jump_forward:function(e){return"Jump forward "+e+" seconds"}}}}}}),define("features/jump_control/jump_control-main",["viddler","jquery","features/jump_control/localization"],function(e,t,n){return{LocalizationContent:n,View:e.BaseViews.Feature.extend({name:"jump_control",events:{"click .vid-jump-forward":"jumpForward","click .vid-jump-back":"jumpBack"},initialize:function(e){this._initResource(e),this.manager=this.embed.manager,this.jumpForwardValue=1e3*parseInt(e.resourceData.forward),this.jumpBackValue=1e3*parseInt(e.resourceData.back)},activate:function(){this.injectEl(),this.render()},injectEl:function(){this.$el=t("<div>",{class:"jump-controls"}),this.embed.target.find(".media-gui .middle").append(this.$el)},render:function(){if(this.jumpBackValue>0){var e=this.manager.localizer.translate("features.jump_control.jump_back",this.jumpBackValue/1e3),n=t("<a>",{href:"#",class:"vid-jump-back",tabindex:this.embed.tabIndexJump,title:e}).html("<span>"+this.jumpBackValue/1e3+'</span><span class="screenreader">'+e+"</span>");this.$el.append(n)}if(this.jumpForwardValue>0){e=this.manager.localizer.translate("features.jump_control.jump_forward",this.jumpBackValue/1e3);var i=t("<a>",{href:"#",class:"vid-jump-forward",tabindex:this.embed.tabIndexJump,title:e}).html("<span>"+this.jumpForwardValue/1e3+'</span><span class="screenreader">'+e+"</span>");this.$el.append(i)}this.delegateEvents()},jumpForward:function(e){e.preventDefault();var t=this.manager.currentTime+this.jumpForwardValue;t>this.manager.timelineDuration()&&(t=this.manager.timelineDuration()),this.manager.play(t)},jumpBack:function(e){if(e.preventDefault(),(t=this.manager.currentTime-this.jumpBackValue)<0)var t=0;this.manager.play(t)}})}}),define("features/bookmarks/form_modal",["jquery","underscore","viddler"],function(e,t,n){return n.BaseViews.ModalView.extend({template:"#tmp-bookmark-form",triangle:"up",focusAfterShow:"input:first",events:{"submit form":"bookmarkSubmit","click .cancel-edit-bookmark":"goBackToList","click .delete-bookmark":"deleteBookmark"},initialize:function(e){this.pluginMain=e.pluginMain,this.icon=this.pluginMain.$el,this.index=e.index,this.__init(e),e.bookmark=e.bookmark||{},void 0===e.bookmark.timepoint&&(e.bookmark.timepoint=this.manager.currentTime),this.show(e)},bookmarkSubmit:function(e){var t;e.preventDefault(),(t=this.validateForm())&&(void 0===this.index?this.pluginMain.createBookmark(t):this.pluginMain.updateBookmark(this.index,t),this.goBackToList())},validateForm:function(){var e,t=this.$('input[name="name"]').val();if(""==t)return this.showError("name_cannot_be_blank"),!1;var i=this.$('input[name="timepoint_string"]').val();return i.match(/^\d+:[0-6]\d(:[0-6]\d)?$/)?(e=1e3*n.Util.time2secs(i))>this.manager.timelineDuration()?(this.showError("time_over_max",n.Util.secs2time(this.manager.timelineDuration()/1e3)),!1):{name:t,notes:this.$('textarea[name="notes"]').val(),timepoint:e}:(this.showError("time_format_invalid"),!1)},showError:function(e,t){var n=this.manager.localizer.translate("features.bookmarks.errors."+e,t);alert(n)},goBackToList:function(e){e&&e.preventDefault(),this.remove(),this.pluginMain.modal.show()},deleteBookmark:function(e){e.preventDefault();var t=this.manager.localizer.translate("features.bookmarks.confirm_deletion_request");confirm(t)&&(this.pluginMain.deleteBookmark(this.index),this.goBackToList())}})}),define("features/bookmarks/list_modal",["jquery","underscore","viddler","features/bookmarks/form_modal"],function(e,t,n,i){return n.BaseViews.ModalView.extend({template:"#tmp-bookmarks-list",triangle:"up",initialize:function(e){t.extend(this,e),this.icon=this.pluginMain.$el,this.__init(e),this.__render(e)},events:{"click .bookmark-choice":"goToBookmark","click .create-new-bookmark":"showNewForm","click .edit-bookmark":"showEditForm"},goToBookmark:function(t){t.preventDefault();var n=e(t.target).parent().data("bookmark"),i=this.pluginMain.resourceData.bookmarks[n];this.manager.seekTo(i.timepoint).play(),this.hide()},showNewForm:function(e){e&&e.preventDefault(),this.wasPlaying=!1,this.formModal=new i({pluginMain:this.pluginMain,embed:this.embed,manager:this.manager,index:void 0})},showEditForm:function(t){t.preventDefault(),this.wasPlaying=!1;var n=e(t.target).parent().data("bookmark"),r=this.pluginMain.resourceData.bookmarks[n];this.formModal=new i({pluginMain:this.pluginMain,embed:this.embed,manager:this.manager,bookmark:r,index:n})},show:function(){this.wasPlaying="playing"==this.manager.status,this.manager.pause(),n.BaseViews.ModalView.prototype.show.call(this),this.delegateEvents()},hide:function(){this.wasPlaying&&this.manager.play(),n.BaseViews.ModalView.prototype.hide.call(this)}})}),define("features/bookmarks/localization",[],function(){return{default:{features:{bookmarks:{header:"Personal Bookmarks &amp; Notes",create_new:"Create new",edit_bookmark:"Edit Bookmark",placeholders:{name:"Bookmark title...",notes:"Write your notes...",time:"0:00:00"},save_button_text:"Save",errors:{name_cannot_be_blank:"Bookmark title cannot be blank",time_format_invalid:"Time in invalid, it should be in format hh:mm:ss",time_over_max:function(e){return"The time needs to be under "+e}},confirm_deletion_request:"Are you sure you want to delete this bookmark?"}}}}}),define("text!features/bookmarks/templates.html",[],function(){return'<script type="text/template" id="tmp-bookmarks-list">\n  <div class="modal-outer bookmarks-list-modal picker">\n    <div class="modal-close">x</div>\n    <div class="modal-container">\n      <h2><%= t(\'features.bookmarks.header\') %></h2>\n      <ul class="bookmark-choices">\n        <% _.each(bookmarks, function (bookmark, index) { %>\n          <li data-bookmark="<%= index %>">\n            <a tabindex="-1" class="bookmark-choice bookmark-title" title="<%= Viddler.Util.secs2time(bookmark.timepoint / 1000) %>">\n              <%= bookmark.name %>\n            </a>\n            <a href="#" class="bookmark-choice bookmark-time">\n              <%= Viddler.Util.secs2time(bookmark.timepoint / 1000) %>\n            </a>\n            <a href="#" class="edit-bookmark edit-icon alternative"></a>\n          </li>\n        <% }) %>\n      </ul>\n      <a href="#" class="create-new-bookmark" tabindex="<%= tabIndexBookmarks %>"><%= t(\'features.bookmarks.create_new\') %></a>\n    </div>\n  </div>\n<\/script>\n\n<script type="text/template" id="tmp-bookmark-form">\n  <div class="modal-outer bookmark-form-modal" style="display:none">\n    <div class="modal-close">x</div>\n    <div class="modal-container">\n      <h2><%= t(\'features.bookmarks.header\') %></h2>\n      <form class="bookmark-form">\n        <input name="name" tabindex="<%= tabIndexBookmarks %>" placeholder="<%= t(\'features.bookmarks.placeholders.name\') %>" type="text" value="<%= bookmark.name %>"></input>\n\n        <textarea tabindex="<%= tabIndexBookmarks %>" placeholder="<%= t(\'features.bookmarks.placeholders.notes\') %>" name="notes"><%= bookmark.notes %></textarea>\n        <input class="timepoint" name="timepoint_string" tabindex="<%= tabIndexBookmarks %>" placeholder="<%= t(\'features.bookmarks.placeholders.time\') %>" type="text" value="<%= Viddler.Util.secs2time(bookmark.timepoint / 1000) %>"></input>\n\n        <input type="submit" class="bookmark-form-submit button" tabindex="<%= tabIndexBookmarks %>" value="<%= t(\'features.bookmarks.save_button_text\') %>"/>\n      </form>\n\n      <% if(typeof(index) != \'undefined\') { %>\n        <div class="actions">\n          <a href="#"  tabindex="<%= tabIndexBookmarks %>" class="cancel-edit-bookmark">Cancel</a> |\n          <a href="#"  tabindex="<%= tabIndexBookmarks %>" class="delete-bookmark">Delete</a>\n        </div>\n      <% } %>\n    </div>\n  </div>\n<\/script>\n'}),define("features/bookmarks/bookmarks-main",["jquery","underscore","viddler","features/bookmarks/list_modal","features/bookmarks/localization","text!features/bookmarks/templates.html"],function(e,t,n,i,r,a){return{Templates:a,LocalizationContent:r,View:n.BaseViews.Feature.extend({name:"bookmarks",iconSettings:{element:e("<div>",{class:"bookmarks-icon",title:"Bookmarks"}),bar:"top",side:"right",priority:1e3},load:function(){},initialize:function(e){this._initResource(e),this.resourceData={bookmarks:this.embed.manager.viddlerUserData.get("bookmarks")||[]},this.resourceLoadedWhenDeferredObjectsComplete()},activate:function(){n.BaseViews.ResourceView.prototype.activate.call(this),this.delegateEvents(),this.modal=new i({pluginMain:this,embed:this.embed,manager:this.embed.manager,bookmarks:this.resourceData.bookmarks})},createBookmark:function(e){this.resourceData.bookmarks.push(e),this.persistBookmarks(),this.modal.render({bookmarks:this.resourceData.bookmarks})},updateBookmark:function(e,t){this.resourceData.bookmarks[e]=t,this.persistBookmarks(),this.modal.render({bookmarks:this.resourceData.bookmarks})},deleteBookmark:function(e){this.resourceData.bookmarks.splice(e,1),this.persistBookmarks(),this.modal.render({bookmarks:this.resourceData.bookmarks})},persistBookmarks:function(){this.resourceData.bookmarks=t.sortBy(this.resourceData.bookmarks,function(e){return e.timepoint}),this.embed.manager.viddlerUserData.set("bookmarks",this.resourceData.bookmarks)},toggleModalVisibility:function(e){0==this.resourceData.bookmarks.length?this.modal.formModal&&this.modal.formModal.visible()?this.modal.formModal.hide():this.modal.showNewForm():this.modal.toggleVisibility()}})}}),define("features/comment_creation_listener/comment_creation_listener-main",["underscore","viddler"],function(e,t){return{View:t.BaseViews.Feature.extend({name:"comment_creation_listener",playerEvents:{"comments:commentAdded":"commentAdded","linked:comments:commentAdded":"commentAdded"},initialize:function(e){this._initResource(e),this.resourceLoadedWhenDeferredObjectsComplete()},commentAdded:function(n){var i=this.embed.manager,r=i.currentPrimaryTrack.id.replace("video-track-",""),a=e.findWhere(i.tracks,{id:"timeline-comments-"+r});if(a){var o=t.Util.guid(),s={author:n.author,text:n.text,addTime:parseInt(n.add_time),addTimepoint:parseInt(n.add_timepoint),repliesCount:parseInt(n.replies_count),id:n.id,viddlerVideoId:n.viddlerVideoId,canReply:!0},l=e.findWhere(a.mediaElements,{timelineStart:s.addTimepoint});if(l)l.resourceData.comments.push(s),l.modal&&(l.modal.remove(),l.modal=void 0),i.embed.mainView.gui.showTimeLineElementIcons();else{var u={embed:i.embed,isView:"true",timelineStart:s.addTimepoint,guid:o,resourceData:{comments:[s]}};i.registerResource({type:"mediaElement",subType:"timeline_comments",guid:o}),i.requireResource({type:"mediaElement",name:"timeline_comments"},function(e){var t=new e.View(u);t.load(!0),a.addMediaElement(t),i.embed.mainView.gui.showTimeLineElementIcons()})}}}})}}),require("main")});